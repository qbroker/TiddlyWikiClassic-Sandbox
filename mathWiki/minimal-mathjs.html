<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<script id="versionArea" type="text/javascript">
//<![CDATA[
var version = {title: "TiddlyWiki", major: 2, minor: 9, revision: 4, date: new Date("May 11, 2023"), extensions: {}};

//]]>
</script>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="copyright" content="
TiddlyWiki created by Jeremy Ruston, (jeremy [at] osmosoft [dot] com)

Copyright (c) Jeremy Ruston 2004-2007
Copyright (c) UnaMesa Association 2007-2012

Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

Redistributions of source code must retain the above copyright notice, this
list of conditions and the following disclaimer.

Redistributions in binary form must reproduce the above copyright notice, this
list of conditions and the following disclaimer in the documentation and/or other
materials provided with the distribution.

Neither the name of the UnaMesa Association nor the names of its contributors may be
used to endorse or promote products derived from this software without specific
prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS' AND ANY
EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
DAMAGE.

" />
<!--PRE-HEAD-START-->
<!--{{{-->
<link rel='alternate' type='application/rss+xml' title='RSS' href='index.xml' />
<!--}}}-->

<!--PRE-HEAD-END-->
<title> mathWiki - a reusable non-linear personal web notebook </title>
<style id="styleArea" type="text/css">
#saveTest, #messageArea, #copyright, #storeArea, #shadowArea {
	display: none;
}
#javascriptWarning {
	text-align: center;
	padding: 1em;
	font-weight: bold;
	background-color: #dd1100;
	color: #fff;
}

</style>
<!--POST-HEAD-START-->

<!--POST-HEAD-END-->
</head>
<body onload="main();" onunload="if(window.unload) unload();">
<!--PRE-BODY-START-->

<!--PRE-BODY-END-->
<div id="copyright">
Welcome to TiddlyWiki created by Jeremy Ruston; Copyright &copy; 2004-2007 Jeremy Ruston, Copyright &copy; 2007-2011 UnaMesa Association
</div>
<noscript>
<div id="javascriptWarning">
This page requires JavaScript to function properly.<br /><br />If you are using Microsoft Internet Explorer you may need to click on the yellow bar above and select 'Allow Blocked Content'. You must then click 'Yes' on the following security warning.
</div>

</noscript>
<div id="saveTest"></div>
<div id="backstageCloak"></div>
<div id="backstageButton"></div>
<div id="backstageArea"><div id="backstageToolbar"></div></div>
<div id="backstage">
	<div id="backstagePanel"></div>
</div>
<div id="contentWrapper"></div>
<div id="contentStash"></div>
<div id="shadowArea">
<div title="ColorPalette">
<pre>Background: #fff
Foreground: #000
PrimaryPale: #8cf
PrimaryLight: #18f
PrimaryMid: #04b
PrimaryDark: #014
SecondaryPale: #ffc
SecondaryLight: #fe8
SecondaryMid: #db4
SecondaryDark: #841
TertiaryPale: #eee
TertiaryLight: #ccc
TertiaryMid: #999
TertiaryDark: #666
Error: #f88
</pre>
</div>
<div title="EditTemplate">
<pre>&lt;!--{{{--&gt;
&lt;div class='toolbar' macro='toolbar [[ToolbarCommands::EditToolbar]]'&gt;&lt;/div&gt;
&lt;div class='title' macro='view title'&gt;&lt;/div&gt;
&lt;div class='editor' macro='edit title'&gt;&lt;/div&gt;
&lt;div macro='annotations'&gt;&lt;/div&gt;
&lt;div class='editor' macro='edit text'&gt;&lt;/div&gt;
&lt;div class='editor' macro='edit tags'&gt;&lt;/div&gt;&lt;div class='editorFooter'&gt;&lt;span macro='message views.editor.tagPrompt'&gt;&lt;/span&gt;&lt;span macro='tagChooser excludeLists'&gt;&lt;/span&gt;&lt;/div&gt;
&lt;!--}}}--&gt;
</pre>
</div>
<div title="GettingStarted">
<pre>To get started with this blank [[TiddlyWiki]], you'll need to modify the following tiddlers:
* [[SiteTitle]] &amp; [[SiteSubtitle]]: The title and subtitle of the site, as shown above (after saving, they will also appear in the browser title bar)
* [[MainMenu]]: The menu (usually on the left)
* [[DefaultTiddlers]]: Contains the names of the tiddlers that you want to appear when the TiddlyWiki is opened
You'll also need to enter your username for signing your edits: &lt;&lt;option txtUserName&gt;&gt;
</pre>
</div>
<div title="ImportTiddlers">
<pre>&lt;&lt;importTiddlers&gt;&gt;
</pre>
</div>
<div title="MarkupPreHead">
<pre>&lt;!--{{{--&gt;
&lt;link rel='alternate' type='application/rss+xml' title='RSS' href='index.xml' /&gt;
&lt;!--}}}--&gt;
</pre>
</div>
<div title="OptionsPanel">
<pre>These [[InterfaceOptions]] for customising [[TiddlyWiki]] are saved in your browser

Your username for signing your edits. Write it as a [[WikiWord]] (eg [[JoeBloggs]])

&lt;&lt;option txtUserName&gt;&gt;
&lt;&lt;option chkSaveBackups&gt;&gt; [[SaveBackups]]
&lt;&lt;option chkAutoSave&gt;&gt; [[AutoSave]]
&lt;&lt;option chkRegExpSearch&gt;&gt; [[RegExpSearch]]
&lt;&lt;option chkCaseSensitiveSearch&gt;&gt; [[CaseSensitiveSearch]]
&lt;&lt;option chkAnimate&gt;&gt; [[EnableAnimations]]

----
Also see [[AdvancedOptions]]
</pre>
</div>
<div title="PageTemplate">
<pre>&lt;!--{{{--&gt;
&lt;div class='header' role='banner'&gt;
  &lt;div class='headerShadow'&gt;
    &lt;span class='siteTitle' refresh='content' tiddler='SiteTitle'&gt;&lt;/span&gt;&amp;nbsp;
    &lt;span class='siteSubtitle' refresh='content' tiddler='SiteSubtitle'&gt;&lt;/span&gt;
  &lt;/div&gt;
  &lt;div class='headerForeground'&gt;
    &lt;span class='siteTitle' refresh='content' tiddler='SiteTitle'&gt;&lt;/span&gt;&amp;nbsp;
    &lt;span class='siteSubtitle' refresh='content' tiddler='SiteSubtitle'&gt;&lt;/span&gt;
  &lt;/div&gt;
&lt;/div&gt;
&lt;div id='mainMenu' role='navigation' refresh='content' tiddler='MainMenu'&gt;&lt;/div&gt;
&lt;div id='sidebar'&gt;
  &lt;div id='sidebarOptions' role='navigation' refresh='content' tiddler='SideBarOptions'&gt;&lt;/div&gt;
  &lt;div id='sidebarTabs' role='complementary' refresh='content' force='true' tiddler='SideBarTabs'&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div id='displayArea' role='main'&gt;
&lt;div id='messageArea'&gt;&lt;/div&gt;
&lt;div id='tiddlerDisplay'&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!--}}}--&gt;
</pre>
</div>
<div title="StyleSheetColors">
<pre>/*{{{*/
body {background:[[ColorPalette::Background]]; color:[[ColorPalette::Foreground]];}

a {color:[[ColorPalette::PrimaryMid]];}
a:hover {background-color:[[ColorPalette::PrimaryMid]]; color:[[ColorPalette::Background]];}
a img {border:0;}

h1, h2, h3, h4, h5, h6 { color: [[ColorPalette::SecondaryDark]]; }
h1 {border-bottom:2px solid [[ColorPalette::TertiaryLight]];}
h2,h3 {border-bottom:1px solid [[ColorPalette::TertiaryLight]];}

.button {color:[[ColorPalette::PrimaryDark]]; border:1px solid [[ColorPalette::Background]];}
.button:hover {color:[[ColorPalette::PrimaryDark]]; background:[[ColorPalette::SecondaryLight]]; border-color:[[ColorPalette::SecondaryMid]];}
.button:active {color:[[ColorPalette::Background]]; background:[[ColorPalette::SecondaryMid]]; border:1px solid [[ColorPalette::SecondaryDark]];}

.header {
	background: -moz-linear-gradient(to bottom, [[ColorPalette::PrimaryLight]], [[ColorPalette::PrimaryMid]]);
	background: linear-gradient(to bottom, [[ColorPalette::PrimaryLight]], [[ColorPalette::PrimaryMid]]);
}
.header a:hover {background:transparent;}
.headerShadow {color:[[ColorPalette::Foreground]];}
.headerShadow a {font-weight:normal; color:[[ColorPalette::Foreground]];}
.headerForeground {color:[[ColorPalette::Background]];}
.headerForeground a {font-weight:normal; color:[[ColorPalette::PrimaryPale]];}

.tabSelected {
	color:[[ColorPalette::PrimaryDark]];
	background:[[ColorPalette::TertiaryPale]];
	border-left:1px solid [[ColorPalette::TertiaryLight]];
	border-top:1px solid [[ColorPalette::TertiaryLight]];
	border-right:1px solid [[ColorPalette::TertiaryLight]];
}
.tabUnselected {color:[[ColorPalette::Background]]; background:[[ColorPalette::TertiaryMid]];}
.tabContents {color:[[ColorPalette::PrimaryDark]]; background:[[ColorPalette::TertiaryPale]]; border:1px solid [[ColorPalette::TertiaryLight]];}
.tabContents .button {border:0;}

#sidebar {}
#sidebarOptions input {border:1px solid [[ColorPalette::PrimaryMid]];}
#sidebarOptions .sliderPanel {background:[[ColorPalette::PrimaryPale]];}
#sidebarOptions .sliderPanel a {border:none;color:[[ColorPalette::PrimaryMid]];}
#sidebarOptions .sliderPanel a:hover {color:[[ColorPalette::Background]]; background:[[ColorPalette::PrimaryMid]];}
#sidebarOptions .sliderPanel a:active {color:[[ColorPalette::PrimaryMid]]; background:[[ColorPalette::Background]];}

.wizard { background:[[ColorPalette::PrimaryPale]]; }
.wizard__title    { color:[[ColorPalette::PrimaryDark]]; border:none; }
.wizard__subtitle { color:[[ColorPalette::Foreground]]; border:none; }
.wizardStep { background:[[ColorPalette::Background]]; color:[[ColorPalette::Foreground]]; }
.wizardStep.wizardStepDone {background:[[ColorPalette::TertiaryLight]];}
.wizardFooter {background:[[ColorPalette::PrimaryPale]];}
.wizardFooter .status {background:[[ColorPalette::PrimaryDark]]; color:[[ColorPalette::Background]];}
.wizard .button {
	color:[[ColorPalette::Foreground]]; background:[[ColorPalette::SecondaryLight]]; border: 1px solid;
	border-color:[[ColorPalette::SecondaryPale]] [[ColorPalette::SecondaryDark]] [[ColorPalette::SecondaryDark]] [[ColorPalette::SecondaryPale]];
}
.wizard .button:hover {color:[[ColorPalette::Foreground]]; background:[[ColorPalette::Background]];}
.wizard .button:active {
	color:[[ColorPalette::Background]]; background:[[ColorPalette::Foreground]]; border: 1px solid;
	border-color:[[ColorPalette::PrimaryDark]] [[ColorPalette::PrimaryPale]] [[ColorPalette::PrimaryPale]] [[ColorPalette::PrimaryDark]];
}

.wizard .notChanged {background:transparent;}
.wizard .changedLocally {background:#80ff80;}
.wizard .changedServer {background:#8080ff;}
.wizard .changedBoth {background:#ff8080;}
.wizard .notFound {background:#ffff80;}
.wizard .putToServer {background:#ff80ff;}
.wizard .gotFromServer {background:#80ffff;}

#messageArea { background:[[ColorPalette::SecondaryLight]]; color:[[ColorPalette::Foreground]]; box-shadow: 1px 2px 5px [[ColorPalette::TertiaryMid]]; }
.messageToolbar__button { color:[[ColorPalette::PrimaryMid]]; background:[[ColorPalette::SecondaryPale]]; border:none; }
.messageToolbar__button_withIcon { background:inherit; }
.messageToolbar__button_withIcon:active { background:inherit; border:none; }
.messageToolbar__icon { fill:[[ColorPalette::TertiaryDark]]; }
.messageToolbar__icon:hover { fill:[[ColorPalette::Foreground]]; }

.popup {
	background: [[ColorPalette::Background]];
	color: [[ColorPalette::TertiaryDark]];
	box-shadow: 1px 2px 5px [[ColorPalette::TertiaryMid]];
}
.popup li a, .popup li a:visited, .popup li a:hover, .popup li a:active {
	color:[[ColorPalette::Foreground]]; border: none;
}
.popup li a:hover { background:[[ColorPalette::SecondaryLight]]; }
.popup li a:active { background:[[ColorPalette::SecondaryPale]]; }
.popup li.disabled { color:[[ColorPalette::TertiaryMid]]; }
.popupHighlight {color:[[ColorPalette::Foreground]];}
.popup hr {color:[[ColorPalette::PrimaryDark]]; background:[[ColorPalette::PrimaryDark]]; border-bottom:1px;}
.listBreak div {border-bottom:1px solid [[ColorPalette::TertiaryDark]];}

.popupTiddler {background:[[ColorPalette::TertiaryPale]]; border:2px solid [[ColorPalette::TertiaryMid]];}

.tiddler .defaultCommand {font-weight:bold;}

.shadow .title {color:[[ColorPalette::TertiaryDark]];}

.title {color:[[ColorPalette::SecondaryDark]];}
.subtitle {color:[[ColorPalette::TertiaryDark]];}

.toolbar {color:[[ColorPalette::PrimaryMid]];}
.toolbar a {color:[[ColorPalette::TertiaryLight]];}
.selected .toolbar a {color:[[ColorPalette::TertiaryMid]];}
.selected .toolbar a:hover {color:[[ColorPalette::Foreground]];}

.tagging, .tagged { border: 1px solid [[ColorPalette::TertiaryPale]]; background-color: [[ColorPalette::TertiaryPale]]; }
.selected .tagging, .selected .tagged { background-color: [[ColorPalette::TertiaryLight]]; border: 1px solid [[ColorPalette::TertiaryLight]]; }
.tagging .listTitle, .tagged .listTitle {color:[[ColorPalette::PrimaryDark]];}
.tagging .button, .tagged .button {border:none;}

.footer {color:[[ColorPalette::TertiaryLight]];}
.selected .footer {color:[[ColorPalette::TertiaryMid]];}

.error, .errorButton {color:[[ColorPalette::Foreground]]; background:[[ColorPalette::Error]];}
.warning {color:[[ColorPalette::Foreground]]; background:[[ColorPalette::SecondaryPale]];}
.lowlight {background:[[ColorPalette::TertiaryLight]];}

.zoomer {background:none; color:[[ColorPalette::TertiaryMid]]; border:3px solid [[ColorPalette::TertiaryMid]];}

.imageLink, #displayArea .imageLink {background:transparent;}

.annotation { background:[[ColorPalette::SecondaryLight]]; color:[[ColorPalette::Foreground]]; }

.viewer .listTitle {list-style-type:none; margin-left:-2em;}
.viewer .button {border:1px solid [[ColorPalette::SecondaryMid]];}
.viewer blockquote {border-left:3px solid [[ColorPalette::TertiaryDark]];}

.viewer th, .viewer thead td, .twtable th, .twtable thead td { background: [[ColorPalette::SecondaryMid]]; color: [[ColorPalette::Background]]; }
.viewer td, .viewer tr, .twtable td, .twtable tr { border: 1px solid [[ColorPalette::TertiaryLight]]; }
.twtable caption { color: [[ColorPalette::TertiaryMid]]; }

.viewer pre {background:[[ColorPalette::SecondaryPale]];}
.viewer code {color:[[ColorPalette::SecondaryDark]];}
.viewer hr {border:0; border-top:dashed 1px [[ColorPalette::TertiaryDark]]; color:[[ColorPalette::TertiaryDark]];}

.highlight, .marked {background:[[ColorPalette::SecondaryLight]];}

.editor input {border:1px solid [[ColorPalette::PrimaryMid]];}
.editor textarea {border:1px solid [[ColorPalette::PrimaryMid]]; width:100%;}
.editorFooter {color:[[ColorPalette::TertiaryMid]];}
.readOnly {background:[[ColorPalette::TertiaryPale]];}

#backstageArea {background:[[ColorPalette::Foreground]]; color:[[ColorPalette::TertiaryMid]];}
#backstageArea a {background:[[ColorPalette::Foreground]]; color:[[ColorPalette::Background]]; border:none;}
#backstageArea a:hover {background:[[ColorPalette::SecondaryLight]]; color:[[ColorPalette::Foreground]]; }
#backstageArea a.backstageSelTab {background:[[ColorPalette::Background]]; color:[[ColorPalette::Foreground]];}
#backstageButton a {background:none; color:[[ColorPalette::Background]]; border:none;}
#backstageButton a:hover {background:[[ColorPalette::Foreground]]; color:[[ColorPalette::Background]]; border:none;}
#backstagePanel {background:[[ColorPalette::Background]]; border-color: [[ColorPalette::Background]] [[ColorPalette::TertiaryDark]] [[ColorPalette::TertiaryDark]] [[ColorPalette::TertiaryDark]];}
.backstagePanelFooter .button {border:none; color:[[ColorPalette::Background]];}
.backstagePanelFooter .button:hover {color:[[ColorPalette::Foreground]];}
#backstageCloak {background:[[ColorPalette::Foreground]]; opacity:0.6; filter:alpha(opacity=60);}
/*}}}*/
</pre>
</div>
<div title="StyleSheetLayout">
<pre>/*{{{*/
body { font-size:.75em; font-family:arial,helvetica,sans-serif; margin:0; padding:0; }

* html .tiddler {height:1%;}

h1,h2,h3,h4,h5,h6 {font-weight:bold; text-decoration:none;}
h1,h2,h3 {padding-bottom:1px; margin-top:1.2em;margin-bottom:0.3em;}
h4,h5,h6 {margin-top:1em;}
h1 {font-size:1.35em;}
h2 {font-size:1.25em;}
h3 {font-size:1.1em;}
h4 {font-size:1em;}
h5 {font-size:.9em;}

hr {height:1px;}

dt {font-weight:bold;}

ol {list-style-type:decimal;}
ol ol {list-style-type:lower-alpha;}
ol ol ol {list-style-type:lower-roman;}
ol ol ol ol {list-style-type:decimal;}
ol ol ol ol ol {list-style-type:lower-alpha;}
ol ol ol ol ol ol {list-style-type:lower-roman;}
ol ol ol ol ol ol ol {list-style-type:decimal;}

.txtOptionInput {width:11em;}

#contentWrapper .chkOptionInput {border:0;}

.indent {margin-left:3em;}
.outdent {margin-left:3em; text-indent:-3em;}
code.escaped {white-space:nowrap;}


a {text-decoration:none;}

.externalLink {text-decoration:underline;}

.tiddlyLinkExisting {font-weight:bold;}
.tiddlyLinkNonExisting {font-style:italic;}

/* the 'a' is required for IE, otherwise it renders the whole tiddler in bold */
a.tiddlyLinkNonExisting.shadow {font-weight:bold;}

#mainMenu .tiddlyLinkExisting,
#mainMenu .tiddlyLinkNonExisting,
#sidebarTabs .tiddlyLinkNonExisting {font-weight:normal; font-style:normal;}
#sidebarTabs .tiddlyLinkExisting {font-weight:bold; font-style:normal;}


.header {position:relative;}
.headerShadow {position:relative; padding:3em 0 1em 1em; left:-1px; top:-1px;}
.headerForeground {position:absolute; padding:3em 0 1em 1em; left:0; top:0;}

.siteTitle {font-size:3em;}
.siteSubtitle {font-size:1.2em;}

#mainMenu {position:absolute; left:0; width:10em; text-align:right; line-height:1.6em; padding:1.5em 0.5em 0.5em 0.5em; font-size:1.1em;}

#sidebar {position:absolute; right:3px; width:16em; font-size:.9em;}
#sidebarOptions {padding-top:0.3em;}
#sidebarOptions a {margin:0 0.2em; padding:0.2em 0.3em; display:block;}
#sidebarOptions input {margin:0.4em 0.5em;}
#sidebarOptions .sliderPanel {margin-left:1em; padding:0.5em; font-size:.85em;}
#sidebarOptions .sliderPanel a {font-weight:bold; display:inline; padding:0;}
#sidebarOptions .sliderPanel input {margin:0 0 0.3em 0;}
#sidebarTabs .tabContents {width:15em; overflow:hidden;}

.wizard { padding:0.1em 2em 0; }
.wizard__title    { font-size:2em; }
.wizard__subtitle { font-size:1.2em; }
.wizard__title, .wizard__subtitle { font-weight:bold; background:none; padding:0; margin:0.4em 0 0.2em; }
.wizardStep { padding:1em; }
.wizardFooter { padding: 0.8em 0; }
.wizardFooter .status { padding: 0.3em 1em; }
.wizardFooter .button { margin:0.5em 0 0; font-size:1.2em; padding:0.2em 0.5em; }

#messageArea { position:fixed; top:2em; right:0; margin:0.5em; padding:0.7em 1em; z-index:2000; }
.messageToolbar { text-align:right; padding:0.2em 0; }
.messageToolbar__button { text-decoration:underline; }
.messageToolbar__icon { height: 1em; width: 1em; } /* width for IE */
.messageArea__text a { text-decoration:underline; }

.popup {position:absolute; z-index:300; font-size:.9em; padding:0.3em 0; list-style:none; margin:0;}
.popup .popupMessage, .popup li.disabled, .popup li a { padding: 0.3em 0.7em; }
.popup li a {display:block; font-weight:normal; cursor:pointer;}
.popup hr {display:block; height:1px; width:auto; padding:0; margin:0.2em 0;}
.listBreak {font-size:1px; line-height:1px;}
.listBreak div {margin:2px 0;}

.tiddlerPopupButton {padding:0.2em;}
.popupTiddler {position: absolute; z-index:300; padding:1em; margin:0;}

.tabset {padding:1em 0 0 0.5em;}
.tab {margin:0 0 0 0.25em; padding:2px;}
.tabContents {padding:0.5em;}
.tabContents ul, .tabContents ol {margin:0; padding:0;}
.txtMainTab .tabContents li {list-style:none;}
.tabContents li.listLink { margin-left:.75em;}

#contentWrapper {display:block;}
#splashScreen {display:none;}

#displayArea {margin:1em 17em 0 14em;}

.toolbar {text-align:right; font-size:.9em;}

.tiddler {padding:1em 1em 0;}

.missing .viewer,.missing .title {font-style:italic;}

.title {font-size:1.6em; font-weight:bold;}

.missing .subtitle {display:none;}
.subtitle {font-size:1.1em;}

.tiddler .button {padding:0.2em 0.4em;}

.tagging {margin:0.5em 0.5em 0.5em 0; float:left; display:none;}
.isTag .tagging {display:block;}
.tagged {margin:0.5em; float:right;}
.tagging, .tagged {font-size:0.9em; padding:0.25em;}
.tagging ul, .tagged ul {list-style:none; margin:0.25em; padding:0;}
.tagged li, .tagging li { margin: 0.3em 0; }
.tagClear {clear:both;}

.footer {font-size:.9em;}
.footer li {display:inline;}

.annotation { padding: 0.5em 0.8em; margin: 0.5em 1px; }

.viewer {line-height:1.4em; padding-top:0.5em;}
.viewer .button {margin:0 0.25em; padding:0 0.25em;}
.viewer blockquote {line-height:1.5em; padding-left:0.8em;margin-left:2.5em;}
.viewer ul, .viewer ol {margin-left:0.5em; padding-left:1.5em;}

.viewer table, table.twtable { border-collapse: collapse; margin: 0.8em 0; }
.viewer th, .viewer td, .viewer tr, .viewer caption, .twtable th, .twtable td, .twtable tr, .twtable caption { padding: 0.2em 0.4em; }
.twtable caption { font-size: 0.9em; }
table.listView { margin: 0.8em 1.0em; }
table.listView th, table.listView td, table.listView tr { text-align: left; }
.listView &gt; thead { position: sticky; top: 0; }

* html .viewer pre {width:99%; padding:0 0 1em 0;}
.viewer pre {padding:0.5em; overflow:auto;}
pre, code { font-family: monospace, monospace; font-size: 1em; }
.viewer pre, .viewer code { line-height: 1.4em; }

.editor {font-size:1.1em; line-height:1.4em;}
.editor input, .editor textarea {display:block; width:100%; box-sizing: border-box; font:inherit;}
.editorFooter {padding:0.25em 0; font-size:.9em;}
.editorFooter .button {padding-top:0; padding-bottom:0;}

.fieldsetFix {border:0; padding:0; margin:1px 0;}

.zoomer {font-size:1.1em; position:absolute; overflow:hidden;}
.zoomer div {padding:1em;}

* html #backstage {width:99%;}
* html #backstageArea {width:99%;}
#backstageArea {display:none; position:relative; overflow: hidden; z-index:150; padding:0.3em 0.5em;}
#backstageToolbar {position:relative;}
#backstageArea a {font-weight:bold; margin-left:0.5em; padding:0.3em 0.5em;}
#backstageButton {display:none; position:absolute; z-index:175; top:0; right:0;}
#backstageButton a {padding:0.1em 0.4em; margin:0.1em;}
#backstage {position:relative; width:100%; z-index:50;}
#backstagePanel { display:none; z-index:100; position:absolute; width:90%; margin-left:3em; }
.backstagePanelFooter {padding-top:0.2em; float:right;}
.backstagePanelFooter a {padding:0.2em 0.4em;}
#backstageCloak {display:none; z-index:20; position:absolute; width:100%; height:100px;}

.whenBackstage {display:none;}
.backstageVisible .whenBackstage {display:block;}
/*}}}*/
</pre>
</div>
<div title="StyleSheetLocale">
<pre>/***
StyleSheet for use when a translation requires any css style changes.
This StyleSheet can be used directly by languages such as Chinese, Japanese and Korean which need larger font sizes.
***/
/*{{{*/
body {font-size:0.8em;}
#sidebarOptions {font-size:1.05em;}
#sidebarOptions a {font-style:normal;}
#sidebarOptions .sliderPanel {font-size:0.95em;}
.subtitle {font-size:0.8em;}
.viewer table.listView {font-size:0.95em;}
/*}}}*/
</pre>
</div>
<div title="StyleSheetPrint">
<pre>/*{{{*/
@media print {
  #mainMenu, #sidebar, #messageArea, .toolbar, #backstageButton, #backstageArea { display: none !important; }
  #displayArea { margin: 1em 1em 0em; }
}
/*}}}*/
</pre>
</div>
<div title="ViewTemplate">
<pre>&lt;!--{{{--&gt;
&lt;div class='toolbar' role='navigation' macro='toolbar [[ToolbarCommands::ViewToolbar]]'&gt;&lt;/div&gt;
&lt;div class='title' macro='view title'&gt;&lt;/div&gt;
&lt;div class='subtitle'&gt;&lt;span macro='view modifier link'&gt;&lt;/span&gt;, &lt;span macro='view modified date'&gt;&lt;/span&gt; (&lt;span macro='message views.wikified.createdPrompt'&gt;&lt;/span&gt; &lt;span macro='view created date'&gt;&lt;/span&gt;)&lt;/div&gt;
&lt;div class='tagging' macro='tagging'&gt;&lt;/div&gt;
&lt;div class='tagged' macro='tags'&gt;&lt;/div&gt;
&lt;div class='viewer' macro='view text wikified'&gt;&lt;/div&gt;
&lt;div class='tagClear'&gt;&lt;/div&gt;
&lt;!--}}}--&gt;
</pre>
</div>

</div>
<!--POST-SHADOWAREA-->
<div id="storeArea">
<div tiddler="mathjs-Plugin.js" modifier="Okido" created="202307161818" modified="202307271149" tags="mathjs systemConfig mathjsinstall mathjsinstallplayground pushtiddler" changecount="1">/***\n|Name |mathjs-Plugin.js |\n|Version |0.0.8 |\n|Version library |11.9.1 |\n|Description |This plugin makes mathjs available in TiddlyWikiClassic |\n|Source |math.min.js |\n|Documentation | |\n|Author |Okido |\n|Original author | |\n|License |See below under license |\n|Core version | |\n|Plugin type |library |\n|Status |EXPERIMENTAL - SUBJECT TO CHANGE |\n|Build date - time |27-07-2023 - 13:49, build with [[pluginBuilder-Plugin.js]] |\n\n!!!Documentation\n&lt;&lt;&lt;\n[[mathjs|https://mathjs.org/]] provides mathematical functions and a parser for mathematical expressions.\nSee [[mathjs|https://mathjs.org/]] on the internet there is plenty of information available.\n&lt;&lt;&lt;\n!!!Usage\n&lt;&lt;&lt;\nUse a [[macro|mathjsEvaluator-Plugin.js]] to evaluate a mathematical expression and use the output in your TiddlyWikiClassic.\nExamples are [[here|mathjsEvaluatorExamples]]. \n&lt;&lt;&lt;\n!!!Configuration\n&lt;&lt;&lt;\n\n&lt;&lt;&lt;\n!!!Revisions\n&lt;&lt;&lt;\n\n&lt;&lt;&lt;\n!!!License\n&lt;&lt;&lt;\n!!License for the third party library code\n                               Apache License\n                           Version 2.0, January 2004\n                        https://www.apache.org/licenses/\n\n   TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION\n\n   1. Definitions.\n\n      &quot;License&quot; shall mean the terms and conditions for use, reproduction,\n      and distribution as defined by Sections 1 through 9 of this document.\n\n      &quot;Licensor&quot; shall mean the copyright owner or entity authorized by\n      the copyright owner that is granting the License.\n\n      &quot;Legal Entity&quot; shall mean the union of the acting entity and all\n      other entities that control, are controlled by, or are under common\n      control with that entity. For the purposes of this definition,\n      &quot;control&quot; means (i) the power, direct or indirect, to cause the\n      direction or management of such entity, whether by contract or\n      otherwise, or (ii) ownership of fifty percent (50%) or more of the\n      outstanding shares, or (iii) beneficial ownership of such entity.\n\n      &quot;You&quot; (or &quot;Your&quot;) shall mean an individual or Legal Entity\n      exercising permissions granted by this License.\n\n      &quot;Source&quot; form shall mean the preferred form for making modifications,\n      including but not limited to software source code, documentation\n      source, and configuration files.\n\n      &quot;Object&quot; form shall mean any form resulting from mechanical\n      transformation or translation of a Source form, including but\n      not limited to compiled object code, generated documentation,\n      and conversions to other media types.\n\n      &quot;Work&quot; shall mean the work of authorship, whether in Source or\n      Object form, made available under the License, as indicated by a\n      copyright notice that is included in or attached to the work\n      (an example is provided in the Appendix below).\n\n      &quot;Derivative Works&quot; shall mean any work, whether in Source or Object\n      form, that is based on (or derived from) the Work and for which the\n      editorial revisions, annotations, elaborations, or other modifications\n      represent, as a whole, an original work of authorship. For the purposes\n      of this License, Derivative Works shall not include works that remain\n      separable from, or merely link (or bind by name) to the interfaces of,\n      the Work and Derivative Works thereof.\n\n      &quot;Contribution&quot; shall mean any work of authorship, including\n      the original version of the Work and any modifications or additions\n      to that Work or Derivative Works thereof, that is intentionally\n      submitted to Licensor for inclusion in the Work by the copyright owner\n      or by an individual or Legal Entity authorized to submit on behalf of\n      the copyright owner. For the purposes of this definition, &quot;submitted&quot;\n      means any form of electronic, verbal, or written communication sent\n      to the Licensor or its representatives, including but not limited to\n      communication on electronic mailing lists, source code control systems,\n      and issue tracking systems that are managed by, or on behalf of, the\n      Licensor for the purpose of discussing and improving the Work, but\n      excluding communication that is conspicuously marked or otherwise\n      designated in writing by the copyright owner as &quot;Not a Contribution.&quot;\n\n      &quot;Contributor&quot; shall mean Licensor and any individual or Legal Entity\n      on behalf of whom a Contribution has been received by Licensor and\n      subsequently incorporated within the Work.\n\n   2. Grant of Copyright License. Subject to the terms and conditions of\n      this License, each Contributor hereby grants to You a perpetual,\n      worldwide, non-exclusive, no-charge, royalty-free, irrevocable\n      copyright license to reproduce, prepare Derivative Works of,\n      publicly display, publicly perform, sublicense, and distribute the\n      Work and such Derivative Works in Source or Object form.\n\n   3. Grant of Patent License. Subject to the terms and conditions of\n      this License, each Contributor hereby grants to You a perpetual,\n      worldwide, non-exclusive, no-charge, royalty-free, irrevocable\n      (except as stated in this section) patent license to make, have made,\n      use, offer to sell, sell, import, and otherwise transfer the Work,\n      where such license applies only to those patent claims licensable\n      by such Contributor that are necessarily infringed by their\n      Contribution(s) alone or by combination of their Contribution(s)\n      with the Work to which such Contribution(s) was submitted. If You\n      institute patent litigation against any entity (including a\n      cross-claim or counterclaim in a lawsuit) alleging that the Work\n      or a Contribution incorporated within the Work constitutes direct\n      or contributory patent infringement, then any patent licenses\n      granted to You under this License for that Work shall terminate\n      as of the date such litigation is filed.\n\n   4. Redistribution. You may reproduce and distribute copies of the\n      Work or Derivative Works thereof in any medium, with or without\n      modifications, and in Source or Object form, provided that You\n      meet the following conditions:\n\n      (a) You must give any other recipients of the Work or\n          Derivative Works a copy of this License; and\n\n      (b) You must cause any modified files to carry prominent notices\n          stating that You changed the files; and\n\n      (c) You must retain, in the Source form of any Derivative Works\n          that You distribute, all copyright, patent, trademark, and\n          attribution notices from the Source form of the Work,\n          excluding those notices that do not pertain to any part of\n          the Derivative Works; and\n\n      (d) If the Work includes a &quot;NOTICE&quot; text file as part of its\n          distribution, then any Derivative Works that You distribute must\n          include a readable copy of the attribution notices contained\n          within such NOTICE file, excluding those notices that do not\n          pertain to any part of the Derivative Works, in at least one\n          of the following places: within a NOTICE text file distributed\n          as part of the Derivative Works; within the Source form or\n          documentation, if provided along with the Derivative Works; or,\n          within a display generated by the Derivative Works, if and\n          wherever such third-party notices normally appear. The contents\n          of the NOTICE file are for informational purposes only and\n          do not modify the License. You may add Your own attribution\n          notices within Derivative Works that You distribute, alongside\n          or as an addendum to the NOTICE text from the Work, provided\n          that such additional attribution notices cannot be construed\n          as modifying the License.\n\n      You may add Your own copyright statement to Your modifications and\n      may provide additional or different license terms and conditions\n      for use, reproduction, or distribution of Your modifications, or\n      for any such Derivative Works as a whole, provided Your use,\n      reproduction, and distribution of the Work otherwise complies with\n      the conditions stated in this License.\n\n   5. Submission of Contributions. Unless You explicitly state otherwise,\n      any Contribution intentionally submitted for inclusion in the Work\n      by You to the Licensor shall be under the terms and conditions of\n      this License, without any additional terms or conditions.\n      Notwithstanding the above, nothing herein shall supersede or modify\n      the terms of any separate license agreement you may have executed\n      with Licensor regarding such Contributions.\n\n   6. Trademarks. This License does not grant permission to use the trade\n      names, trademarks, service marks, or product names of the Licensor,\n      except as required for reasonable and customary use in describing the\n      origin of the Work and reproducing the content of the NOTICE file.\n\n   7. Disclaimer of Warranty. Unless required by applicable law or\n      agreed to in writing, Licensor provides the Work (and each\n      Contributor provides its Contributions) on an &quot;AS IS&quot; BASIS,\n      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or\n      implied, including, without limitation, any warranties or conditions\n      of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A\n      PARTICULAR PURPOSE. You are solely responsible for determining the\n      appropriateness of using or redistributing the Work and assume any\n      risks associated with Your exercise of permissions under this License.\n\n   8. Limitation of Liability. In no event and under no legal theory,\n      whether in tort (including negligence), contract, or otherwise,\n      unless required by applicable law (such as deliberate and grossly\n      negligent acts) or agreed to in writing, shall any Contributor be\n      liable to You for damages, including any direct, indirect, special,\n      incidental, or consequential damages of any character arising as a\n      result of this License or out of the use or inability to use the\n      Work (including but not limited to damages for loss of goodwill,\n      work stoppage, computer failure or malfunction, or any and all\n      other commercial damages or losses), even if such Contributor\n      has been advised of the possibility of such damages.\n\n   9. Accepting Warranty or Additional Liability. While redistributing\n      the Work or Derivative Works thereof, You may choose to offer,\n      and charge a fee for, acceptance of support, warranty, indemnity,\n      or other liability obligations and/or rights consistent with this\n      License. However, in accepting such obligations, You may act only\n      on Your own behalf and on Your sole responsibility, not on behalf\n      of any other Contributor, and only if You agree to indemnify,\n      defend, and hold each Contributor harmless for any liability\n      incurred by, or claims asserted against, such Contributor by reason\n      of your accepting any such warranty or additional liability.\n\n   END OF TERMS AND CONDITIONS\n\n!!License text here below is edited because the markup forward slash and star cause an error in the TiddlyWikiClassic markup.\nregenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE\n@license Complex.js v2.1.1 12/05/2020\n\nCopyright (c) 2020, Robert Eisele (robert@xarg.org)\nDual licensed under the MIT or GPL Version 2 licenses.\n\n@license Fraction.js v4.2.0 05/03/2022\nhttps://www.xarg.org/2014/03/rational-numbers-in-javascript/\nCopyright (c) 2021, Robert Eisele (robert@xarg.org)\nDual licensed under the MIT or GPL Version 2 licenses.\n\nmath.js\nhttps://github.com/josdejong/mathjs\nMath.js is an extensive math library for JavaScript and Node.js,\nIt features real and complex numbers, units, matrices, a large set of\nmathematical functions, and a flexible expression parser.\n\n@version 11.9.1\n@date    2023-07-24\n\n@license\nCopyright (C) 2013-2023 Jos de Jong &lt;wjosdejong@gmail.com&gt;\n\nLicensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not\nuse this file except in compliance with the License. You may obtain a copy\nof the License at\n\nhttps://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an &quot;AS IS&quot; BASIS, WITHOUT\nWARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\nLicense for the specific language governing permissions and limitations under\nthe License.\n\n!!License for the TiddlyWikiClassic plugin code\nMIT License\n\nCopyright (c) 2023 Okido\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the &quot;Software&quot;), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n&lt;&lt;&lt;\n!!!Code\n***/\n//{{{\n/* JavaScript CODE STARTS HERE */\n\n/*! For license information please see math.js.LICENSE.txt */\n!function(e,t){&quot;object&quot;==typeof exports&amp;&amp;&quot;object&quot;==typeof module?module.exports=t():&quot;function&quot;==typeof define&amp;&amp;define.amd?define([],t):&quot;object&quot;==typeof exports?exports.math=t():e.math=t()}(this,(()=&gt;(()=&gt;{var e={1977:function(e,t){var r;!function(n){&quot;use strict&quot;;var i=Math.cosh||function(e){return Math.abs(e)&lt;1e-9?1-e:.5*(Math.exp(e)+Math.exp(-e))},a=Math.sinh||function(e){return Math.abs(e)&lt;1e-9?e:.5*(Math.exp(e)-Math.exp(-e))},o=function(){throw SyntaxError(&quot;Invalid Param&quot;)};function u(e,t){var r=Math.abs(e),n=Math.abs(t);return 0===e?Math.log(n):0===t?Math.log(r):r&lt;3e3&amp;&amp;n&lt;3e3?.5*Math.log(e*e+t*t):(e/=2,t/=2,.5*Math.log(e*e+t*t)+Math.LN2)}function s(e,t){if(!(this instanceof s))return new s(e,t);var r=function(e,t){var r={re:0,im:0};if(null==e)r.re=r.im=0;else if(void 0!==t)r.re=e,r.im=t;else switch(typeof e){case&quot;object&quot;:if(&quot;im&quot;in e&amp;&amp;&quot;re&quot;in e)r.re=e.re,r.im=e.im;else if(&quot;abs&quot;in e&amp;&amp;&quot;arg&quot;in e){if(!Number.isFinite(e.abs)&amp;&amp;Number.isFinite(e.arg))return s.INFINITY;r.re=e.abs*Math.cos(e.arg),r.im=e.abs*Math.sin(e.arg)}else if(&quot;r&quot;in e&amp;&amp;&quot;phi&quot;in e){if(!Number.isFinite(e.r)&amp;&amp;Number.isFinite(e.phi))return s.INFINITY;r.re=e.r*Math.cos(e.phi),r.im=e.r*Math.sin(e.phi)}else 2===e.length?(r.re=e[0],r.im=e[1]):o();break;case&quot;string&quot;:r.im=r.re=0;var n=e.match(/\sd+\s.?\sd*e[+-]?\sd+|\sd+\s.?\sd*|\s.\sd+|./g),i=1,a=0;null===n&amp;&amp;o();for(var u=0;u&lt;n.length;u++){var c=n[u];&quot; &quot;===c||&quot;\st&quot;===c||&quot;\sn&quot;===c||(&quot;+&quot;===c?i++:&quot;-&quot;===c?a++:&quot;i&quot;===c||&quot;I&quot;===c?(i+a===0&amp;&amp;o(),&quot; &quot;===n[u+1]||isNaN(n[u+1])?r.im+=parseFloat((a%2?&quot;-&quot;:&quot;&quot;)+&quot;1&quot;):(r.im+=parseFloat((a%2?&quot;-&quot;:&quot;&quot;)+n[u+1]),u++),i=a=0):((i+a===0||isNaN(c))&amp;&amp;o(),&quot;i&quot;===n[u+1]||&quot;I&quot;===n[u+1]?(r.im+=parseFloat((a%2?&quot;-&quot;:&quot;&quot;)+c),u++):r.re+=parseFloat((a%2?&quot;-&quot;:&quot;&quot;)+c),i=a=0))}i+a&gt;0&amp;&amp;o();break;case&quot;number&quot;:r.im=0,r.re=e;break;default:o()}return isNaN(r.re)||isNaN(r.im),r}(e,t);this.re=r.re,this.im=r.im}s.prototype={re:0,im:0,sign:function(){var e=this.abs();return new s(this.re/e,this.im/e)},add:function(e,t){var r=new s(e,t);return this.isInfinite()&amp;&amp;r.isInfinite()?s.NAN:this.isInfinite()||r.isInfinite()?s.INFINITY:new s(this.re+r.re,this.im+r.im)},sub:function(e,t){var r=new s(e,t);return this.isInfinite()&amp;&amp;r.isInfinite()?s.NAN:this.isInfinite()||r.isInfinite()?s.INFINITY:new s(this.re-r.re,this.im-r.im)},mul:function(e,t){var r=new s(e,t);return this.isInfinite()&amp;&amp;r.isZero()||this.isZero()&amp;&amp;r.isInfinite()?s.NAN:this.isInfinite()||r.isInfinite()?s.INFINITY:0===r.im&amp;&amp;0===this.im?new s(this.re*r.re,0):new s(this.re*r.re-this.im*r.im,this.re*r.im+this.im*r.re)},div:function(e,t){var r=new s(e,t);if(this.isZero()&amp;&amp;r.isZero()||this.isInfinite()&amp;&amp;r.isInfinite())return s.NAN;if(this.isInfinite()||r.isZero())return s.INFINITY;if(this.isZero()||r.isInfinite())return s.ZERO;e=this.re,t=this.im;var n,i,a=r.re,o=r.im;return 0===o?new s(e/a,t/a):Math.abs(a)&lt;Math.abs(o)?new s((e*(i=a/o)+t)/(n=a*i+o),(t*i-e)/n):new s((e+t*(i=o/a))/(n=o*i+a),(t-e*i)/n)},pow:function(e,t){var r=new s(e,t);if(e=this.re,t=this.im,r.isZero())return s.ONE;if(0===r.im){if(0===t&amp;&amp;e&gt;0)return new s(Math.pow(e,r.re),0);if(0===e)switch((r.re%4+4)%4){case 0:return new s(Math.pow(t,r.re),0);case 1:return new s(0,Math.pow(t,r.re));case 2:return new s(-Math.pow(t,r.re),0);case 3:return new s(0,-Math.pow(t,r.re))}}if(0===e&amp;&amp;0===t&amp;&amp;r.re&gt;0&amp;&amp;r.im&gt;=0)return s.ZERO;var n=Math.atan2(t,e),i=u(e,t);return e=Math.exp(r.re*i-r.im*n),t=r.im*i+r.re*n,new s(e*Math.cos(t),e*Math.sin(t))},sqrt:function(){var e,t,r=this.re,n=this.im,i=this.abs();if(r&gt;=0){if(0===n)return new s(Math.sqrt(r),0);e=.5*Math.sqrt(2*(i+r))}else e=Math.abs(n)/Math.sqrt(2*(i-r));return t=r&lt;=0?.5*Math.sqrt(2*(i-r)):Math.abs(n)/Math.sqrt(2*(i+r)),new s(e,n&lt;0?-t:t)},exp:function(){var e=Math.exp(this.re);return this.im,new s(e*Math.cos(this.im),e*Math.sin(this.im))},expm1:function(){var e=this.re,t=this.im;return new s(Math.expm1(e)*Math.cos(t)+function(e){var t=Math.PI/4;if(-t&gt;e||e&gt;t)return Math.cos(e)-1;var r=e*e;return r*(r*(r*(r*(r*(r*(r*(r/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-.5)}(t),Math.exp(e)*Math.sin(t))},log:function(){var e=this.re,t=this.im;return new s(u(e,t),Math.atan2(t,e))},abs:function(){return e=this.re,t=this.im,r=Math.abs(e),n=Math.abs(t),r&lt;3e3&amp;&amp;n&lt;3e3?Math.sqrt(r*r+n*n):(r&lt;n?(r=n,n=e/t):n=t/e,r*Math.sqrt(1+n*n));var e,t,r,n},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var e=this.re,t=this.im;return new s(Math.sin(e)*i(t),Math.cos(e)*a(t))},cos:function(){var e=this.re,t=this.im;return new s(Math.cos(e)*i(t),-Math.sin(e)*a(t))},tan:function(){var e=2*this.re,t=2*this.im,r=Math.cos(e)+i(t);return new s(Math.sin(e)/r,a(t)/r)},cot:function(){var e=2*this.re,t=2*this.im,r=Math.cos(e)-i(t);return new s(-Math.sin(e)/r,a(t)/r)},sec:function(){var e=this.re,t=this.im,r=.5*i(2*t)+.5*Math.cos(2*e);return new s(Math.cos(e)*i(t)/r,Math.sin(e)*a(t)/r)},csc:function(){var e=this.re,t=this.im,r=.5*i(2*t)-.5*Math.cos(2*e);return new s(Math.sin(e)*i(t)/r,-Math.cos(e)*a(t)/r)},asin:function(){var e=this.re,t=this.im,r=new s(t*t-e*e+1,-2*e*t).sqrt(),n=new s(r.re-t,r.im+e).log();return new s(n.im,-n.re)},acos:function(){var e=this.re,t=this.im,r=new s(t*t-e*e+1,-2*e*t).sqrt(),n=new s(r.re-t,r.im+e).log();return new s(Math.PI/2-n.im,n.re)},atan:function(){var e=this.re,t=this.im;if(0===e){if(1===t)return new s(0,1/0);if(-1===t)return new s(0,-1/0)}var r=e*e+(1-t)*(1-t),n=new s((1-t*t-e*e)/r,-2*e/r).log();return new s(-.5*n.im,.5*n.re)},acot:function(){var e=this.re,t=this.im;if(0===t)return new s(Math.atan2(1,e),0);var r=e*e+t*t;return 0!==r?new s(e/r,-t/r).atan():new s(0!==e?e/0:0,0!==t?-t/0:0).atan()},asec:function(){var e=this.re,t=this.im;if(0===e&amp;&amp;0===t)return new s(0,1/0);var r=e*e+t*t;return 0!==r?new s(e/r,-t/r).acos():new s(0!==e?e/0:0,0!==t?-t/0:0).acos()},acsc:function(){var e=this.re,t=this.im;if(0===e&amp;&amp;0===t)return new s(Math.PI/2,1/0);var r=e*e+t*t;return 0!==r?new s(e/r,-t/r).asin():new s(0!==e?e/0:0,0!==t?-t/0:0).asin()},sinh:function(){var e=this.re,t=this.im;return new s(a(e)*Math.cos(t),i(e)*Math.sin(t))},cosh:function(){var e=this.re,t=this.im;return new s(i(e)*Math.cos(t),a(e)*Math.sin(t))},tanh:function(){var e=2*this.re,t=2*this.im,r=i(e)+Math.cos(t);return new s(a(e)/r,Math.sin(t)/r)},coth:function(){var e=2*this.re,t=2*this.im,r=i(e)-Math.cos(t);return new s(a(e)/r,-Math.sin(t)/r)},csch:function(){var e=this.re,t=this.im,r=Math.cos(2*t)-i(2*e);return new s(-2*a(e)*Math.cos(t)/r,2*i(e)*Math.sin(t)/r)},sech:function(){var e=this.re,t=this.im,r=Math.cos(2*t)+i(2*e);return new s(2*i(e)*Math.cos(t)/r,-2*a(e)*Math.sin(t)/r)},asinh:function(){var e=this.im;this.im=-this.re,this.re=e;var t=this.asin();return this.re=-this.im,this.im=e,e=t.re,t.re=-t.im,t.im=e,t},acosh:function(){var e=this.acos();if(e.im&lt;=0){var t=e.re;e.re=-e.im,e.im=t}else t=e.im,e.im=-e.re,e.re=t;return e},atanh:function(){var e=this.re,t=this.im,r=e&gt;1&amp;&amp;0===t,n=1-e,i=1+e,a=n*n+t*t,o=0!==a?new s((i*n-t*t)/a,(t*n+i*t)/a):new s(-1!==e?e/0:0,0!==t?t/0:0),c=o.re;return o.re=u(o.re,o.im)/2,o.im=Math.atan2(o.im,c)/2,r&amp;&amp;(o.im=-o.im),o},acoth:function(){var e=this.re,t=this.im;if(0===e&amp;&amp;0===t)return new s(0,Math.PI/2);var r=e*e+t*t;return 0!==r?new s(e/r,-t/r).atanh():new s(0!==e?e/0:0,0!==t?-t/0:0).atanh()},acsch:function(){var e=this.re,t=this.im;if(0===t)return new s(0!==e?Math.log(e+Math.sqrt(e*e+1)):1/0,0);var r=e*e+t*t;return 0!==r?new s(e/r,-t/r).asinh():new s(0!==e?e/0:0,0!==t?-t/0:0).asinh()},asech:function(){var e=this.re,t=this.im;if(this.isZero())return s.INFINITY;var r=e*e+t*t;return 0!==r?new s(e/r,-t/r).acosh():new s(0!==e?e/0:0,0!==t?-t/0:0).acosh()},inverse:function(){if(this.isZero())return s.INFINITY;if(this.isInfinite())return s.ZERO;var e=this.re,t=this.im,r=e*e+t*t;return new s(e/r,-t/r)},conjugate:function(){return new s(this.re,-this.im)},neg:function(){return new s(-this.re,-this.im)},ceil:function(e){return e=Math.pow(10,e||0),new s(Math.ceil(this.re*e)/e,Math.ceil(this.im*e)/e)},floor:function(e){return e=Math.pow(10,e||0),new s(Math.floor(this.re*e)/e,Math.floor(this.im*e)/e)},round:function(e){return e=Math.pow(10,e||0),new s(Math.round(this.re*e)/e,Math.round(this.im*e)/e)},equals:function(e,t){var r=new s(e,t);return Math.abs(r.re-this.re)&lt;=s.EPSILON&amp;&amp;Math.abs(r.im-this.im)&lt;=s.EPSILON},clone:function(){return new s(this.re,this.im)},toString:function(){var e=this.re,t=this.im,r=&quot;&quot;;return this.isNaN()?&quot;NaN&quot;:this.isInfinite()?&quot;Infinity&quot;:(Math.abs(e)&lt;s.EPSILON&amp;&amp;(e=0),Math.abs(t)&lt;s.EPSILON&amp;&amp;(t=0),0===t?r+e:(0!==e?(r+=e,r+=&quot; &quot;,t&lt;0?(t=-t,r+=&quot;-&quot;):r+=&quot;+&quot;,r+=&quot; &quot;):t&lt;0&amp;&amp;(t=-t,r+=&quot;-&quot;),1!==t&amp;&amp;(r+=t),r+&quot;i&quot;))},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return 0===this.im&amp;&amp;0===this.re},isFinite:function(){return isFinite(this.re)&amp;&amp;isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},s.ZERO=new s(0,0),s.ONE=new s(1,0),s.I=new s(0,1),s.PI=new s(Math.PI,0),s.E=new s(Math.E,0),s.INFINITY=new s(1/0,1/0),s.NAN=new s(NaN,NaN),s.EPSILON=1e-15,void 0===(r=function(){return s}.apply(t,[]))||(e.exports=r)}()},9662:(e,t,r)=&gt;{var n=r(614),i=r(6330),a=TypeError;e.exports=function(e){if(n(e))return e;throw a(i(e)+&quot; is not a function&quot;)}},9483:(e,t,r)=&gt;{var n=r(4411),i=r(6330),a=TypeError;e.exports=function(e){if(n(e))return e;throw a(i(e)+&quot; is not a constructor&quot;)}},6077:(e,t,r)=&gt;{var n=r(614),i=String,a=TypeError;e.exports=function(e){if(&quot;object&quot;==typeof e||n(e))return e;throw a(&quot;Can't set &quot;+i(e)+&quot; as a prototype&quot;)}},1223:(e,t,r)=&gt;{var n=r(5112),i=r(30),a=r(3070).f,o=n(&quot;unscopables&quot;),u=Array.prototype;null==u[o]&amp;&amp;a(u,o,{configurable:!0,value:i(null)}),e.exports=function(e){u[o][e]=!0}},1530:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(8710).charAt;e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},5787:(e,t,r)=&gt;{var n=r(7976),i=TypeError;e.exports=function(e,t){if(n(t,e))return e;throw i(&quot;Incorrect invocation&quot;)}},9670:(e,t,r)=&gt;{var n=r(111),i=String,a=TypeError;e.exports=function(e){if(n(e))return e;throw a(i(e)+&quot; is not an object&quot;)}},7556:(e,t,r)=&gt;{var n=r(7293);e.exports=n((function(){if(&quot;function&quot;==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&amp;&amp;Object.defineProperty(e,&quot;a&quot;,{value:8})}}))},1285:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(7908),i=r(1400),a=r(6244);e.exports=function(e){for(var t=n(this),r=a(t),o=arguments.length,u=i(o&gt;1?arguments[1]:void 0,r),s=o&gt;2?arguments[2]:void 0,c=void 0===s?r:i(s,r);c&gt;u;)t[u++]=e;return t}},8533:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2092).forEach,i=r(9341)(&quot;forEach&quot;);e.exports=i?[].forEach:function(e){return n(this,e,arguments.length&gt;1?arguments[1]:void 0)}},8457:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(9974),i=r(6916),a=r(7908),o=r(3411),u=r(7659),s=r(4411),c=r(6244),f=r(6135),l=r(4121),p=r(1246),m=Array;e.exports=function(e){var t=a(e),r=s(this),h=arguments.length,d=h&gt;1?arguments[1]:void 0,v=void 0!==d;v&amp;&amp;(d=n(d,h&gt;2?arguments[2]:void 0));var y,g,x,b,w,N,D=p(t),E=0;if(!D||this===m&amp;&amp;u(D))for(y=c(t),g=r?new this(y):m(y);y&gt;E;E++)N=v?d(t[E],E):t[E],f(g,E,N);else for(w=(b=l(t,D)).next,g=r?new this:[];!(x=i(w,b)).done;E++)N=v?o(b,d,[x.value,E],!0):x.value,f(g,E,N);return g.length=E,g}},1318:(e,t,r)=&gt;{var n=r(5656),i=r(1400),a=r(6244),o=function(e){return function(t,r,o){var u,s=n(t),c=a(s),f=i(o,c);if(e&amp;&amp;r!=r){for(;c&gt;f;)if((u=s[f++])!=u)return!0}else for(;c&gt;f;f++)if((e||f in s)&amp;&amp;s[f]===r)return e||f||0;return!e&amp;&amp;-1}};e.exports={includes:o(!0),indexOf:o(!1)}},2092:(e,t,r)=&gt;{var n=r(9974),i=r(1702),a=r(8361),o=r(7908),u=r(6244),s=r(5417),c=i([].push),f=function(e){var t=1==e,r=2==e,i=3==e,f=4==e,l=6==e,p=7==e,m=5==e||l;return function(h,d,v,y){for(var g,x,b=o(h),w=a(b),N=n(d,v),D=u(w),E=0,A=y||s,S=t?A(h,D):r||p?A(h,0):void 0;D&gt;E;E++)if((m||E in w)&amp;&amp;(x=N(g=w[E],E,b),e))if(t)S[E]=x;else if(x)switch(e){case 3:return!0;case 5:return g;case 6:return E;case 2:c(S,g)}else switch(e){case 4:return!1;case 7:c(S,g)}return l?-1:i||f?f:S}};e.exports={forEach:f(0),map:f(1),filter:f(2),some:f(3),every:f(4),find:f(5),findIndex:f(6),filterReject:f(7)}},1194:(e,t,r)=&gt;{var n=r(7293),i=r(5112),a=r(7392),o=i(&quot;species&quot;);e.exports=function(e){return a&gt;=51||!n((function(){var t=[];return(t.constructor={})[o]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},9341:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(7293);e.exports=function(e,t){var r=[][e];return!!r&amp;&amp;n((function(){r.call(null,t||function(){return 1},1)}))}},3671:(e,t,r)=&gt;{var n=r(9662),i=r(7908),a=r(8361),o=r(6244),u=TypeError,s=function(e){return function(t,r,s,c){n(r);var f=i(t),l=a(f),p=o(f),m=e?p-1:0,h=e?-1:1;if(s&lt;2)for(;;){if(m in l){c=l[m],m+=h;break}if(m+=h,e?m&lt;0:p&lt;=m)throw u(&quot;Reduce of empty array with no initial value&quot;)}for(;e?m&gt;=0:p&gt;m;m+=h)m in l&amp;&amp;(c=r(c,l[m],m,f));return c}};e.exports={left:s(!1),right:s(!0)}},3658:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(9781),i=r(3157),a=TypeError,o=Object.getOwnPropertyDescriptor,u=n&amp;&amp;!function(){if(void 0!==this)return!0;try{Object.defineProperty([],&quot;length&quot;,{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=u?function(e,t){if(i(e)&amp;&amp;!o(e,&quot;length&quot;).writable)throw a(&quot;Cannot set read only .length&quot;);return e.length=t}:function(e,t){return e.length=t}},1589:(e,t,r)=&gt;{var n=r(1400),i=r(6244),a=r(6135),o=Array,u=Math.max;e.exports=function(e,t,r){for(var s=i(e),c=n(t,s),f=n(void 0===r?s:r,s),l=o(u(f-c,0)),p=0;c&lt;f;c++,p++)a(l,p,e[c]);return l.length=p,l}},206:(e,t,r)=&gt;{var n=r(1702);e.exports=n([].slice)},4362:(e,t,r)=&gt;{var n=r(1589),i=Math.floor,a=function(e,t){var r=e.length,s=i(r/2);return r&lt;8?o(e,t):u(e,a(n(e,0,s),t),a(n(e,s),t),t)},o=function(e,t){for(var r,n,i=e.length,a=1;a&lt;i;){for(n=a,r=e[a];n&amp;&amp;t(e[n-1],r)&gt;0;)e[n]=e[--n];n!==a++&amp;&amp;(e[n]=r)}return e},u=function(e,t,r,n){for(var i=t.length,a=r.length,o=0,u=0;o&lt;i||u&lt;a;)e[o+u]=o&lt;i&amp;&amp;u&lt;a?n(t[o],r[u])&lt;=0?t[o++]:r[u++]:o&lt;i?t[o++]:r[u++];return e};e.exports=a},7475:(e,t,r)=&gt;{var n=r(3157),i=r(4411),a=r(111),o=r(5112)(&quot;species&quot;),u=Array;e.exports=function(e){var t;return n(e)&amp;&amp;(t=e.constructor,(i(t)&amp;&amp;(t===u||n(t.prototype))||a(t)&amp;&amp;null===(t=t[o]))&amp;&amp;(t=void 0)),void 0===t?u:t}},5417:(e,t,r)=&gt;{var n=r(7475);e.exports=function(e,t){return new(n(e))(0===t?0:t)}},3411:(e,t,r)=&gt;{var n=r(9670),i=r(9212);e.exports=function(e,t,r,a){try{return a?t(n(r)[0],r[1]):t(r)}catch(t){i(e,&quot;throw&quot;,t)}}},7072:(e,t,r)=&gt;{var n=r(5112)(&quot;iterator&quot;),i=!1;try{var a=0,o={next:function(){return{done:!!a++}},return:function(){i=!0}};o[n]=function(){return this},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&amp;&amp;!i)return!1;var r=!1;try{var a={};a[n]=function(){return{next:function(){return{done:r=!0}}}},e(a)}catch(e){}return r}},4326:(e,t,r)=&gt;{var n=r(1702),i=n({}.toString),a=n(&quot;&quot;.slice);e.exports=function(e){return a(i(e),8,-1)}},648:(e,t,r)=&gt;{var n=r(1694),i=r(614),a=r(4326),o=r(5112)(&quot;toStringTag&quot;),u=Object,s=&quot;Arguments&quot;==a(function(){return arguments}());e.exports=n?a:function(e){var t,r,n;return void 0===e?&quot;Undefined&quot;:null===e?&quot;Null&quot;:&quot;string&quot;==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=u(e),o))?r:s?a(t):&quot;Object&quot;==(n=a(t))&amp;&amp;i(t.callee)?&quot;Arguments&quot;:n}},5631:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(30),i=r(7045),a=r(9190),o=r(9974),u=r(5787),s=r(8554),c=r(408),f=r(1656),l=r(6178),p=r(6340),m=r(9781),h=r(2423).fastKey,d=r(9909),v=d.set,y=d.getterFor;e.exports={getConstructor:function(e,t,r,f){var l=e((function(e,i){u(e,p),v(e,{type:t,index:n(null),first:void 0,last:void 0,size:0}),m||(e.size=0),s(i)||c(i,e[f],{that:e,AS_ENTRIES:r})})),p=l.prototype,d=y(t),g=function(e,t,r){var n,i,a=d(e),o=x(e,t);return o?o.value=r:(a.last=o={index:i=h(t,!0),key:t,value:r,previous:n=a.last,next:void 0,removed:!1},a.first||(a.first=o),n&amp;&amp;(n.next=o),m?a.size++:e.size++,&quot;F&quot;!==i&amp;&amp;(a.index[i]=o)),e},x=function(e,t){var r,n=d(e),i=h(t);if(&quot;F&quot;!==i)return n.index[i];for(r=n.first;r;r=r.next)if(r.key==t)return r};return a(p,{clear:function(){for(var e=d(this),t=e.index,r=e.first;r;)r.removed=!0,r.previous&amp;&amp;(r.previous=r.previous.next=void 0),delete t[r.index],r=r.next;e.first=e.last=void 0,m?e.size=0:this.size=0},delete:function(e){var t=this,r=d(t),n=x(t,e);if(n){var i=n.next,a=n.previous;delete r.index[n.index],n.removed=!0,a&amp;&amp;(a.next=i),i&amp;&amp;(i.previous=a),r.first==n&amp;&amp;(r.first=i),r.last==n&amp;&amp;(r.last=a),m?r.size--:t.size--}return!!n},forEach:function(e){for(var t,r=d(this),n=o(e,arguments.length&gt;1?arguments[1]:void 0);t=t?t.next:r.first;)for(n(t.value,t.key,this);t&amp;&amp;t.removed;)t=t.previous},has:function(e){return!!x(this,e)}}),a(p,r?{get:function(e){var t=x(this,e);return t&amp;&amp;t.value},set:function(e,t){return g(this,0===e?0:e,t)}}:{add:function(e){return g(this,e=0===e?0:e,e)}}),m&amp;&amp;i(p,&quot;size&quot;,{configurable:!0,get:function(){return d(this).size}}),l},setStrong:function(e,t,r){var n=t+&quot; Iterator&quot;,i=y(t),a=y(n);f(e,t,(function(e,t){v(this,{type:n,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=a(this),t=e.kind,r=e.last;r&amp;&amp;r.removed;)r=r.previous;return e.target&amp;&amp;(e.last=r=r?r.next:e.state.first)?l(&quot;keys&quot;==t?r.key:&quot;values&quot;==t?r.value:[r.key,r.value],!1):(e.target=void 0,l(void 0,!0))}),r?&quot;entries&quot;:&quot;values&quot;,!r,!0),p(t)}}},7710:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2109),i=r(7854),a=r(1702),o=r(4705),u=r(8052),s=r(2423),c=r(408),f=r(5787),l=r(614),p=r(8554),m=r(111),h=r(7293),d=r(7072),v=r(8003),y=r(9587);e.exports=function(e,t,r){var g=-1!==e.indexOf(&quot;Map&quot;),x=-1!==e.indexOf(&quot;Weak&quot;),b=g?&quot;set&quot;:&quot;add&quot;,w=i[e],N=w&amp;&amp;w.prototype,D=w,E={},A=function(e){var t=a(N[e]);u(N,e,&quot;add&quot;==e?function(e){return t(this,0===e?0:e),this}:&quot;delete&quot;==e?function(e){return!(x&amp;&amp;!m(e))&amp;&amp;t(this,0===e?0:e)}:&quot;get&quot;==e?function(e){return x&amp;&amp;!m(e)?void 0:t(this,0===e?0:e)}:&quot;has&quot;==e?function(e){return!(x&amp;&amp;!m(e))&amp;&amp;t(this,0===e?0:e)}:function(e,r){return t(this,0===e?0:e,r),this})};if(o(e,!l(w)||!(x||N.forEach&amp;&amp;!h((function(){(new w).entries().next()})))))D=r.getConstructor(t,e,g,b),s.enable();else if(o(e,!0)){var S=new D,C=S[b](x?{}:-0,1)!=S,M=h((function(){S.has(1)})),F=d((function(e){new w(e)})),O=!x&amp;&amp;h((function(){for(var e=new w,t=5;t--;)e[b](t,t);return!e.has(-0)}));F||((D=t((function(e,t){f(e,N);var r=y(new w,e,D);return p(t)||c(t,r[b],{that:r,AS_ENTRIES:g}),r}))).prototype=N,N.constructor=D),(M||O)&amp;&amp;(A(&quot;delete&quot;),A(&quot;has&quot;),g&amp;&amp;A(&quot;get&quot;)),(O||C)&amp;&amp;A(b),x&amp;&amp;N.clear&amp;&amp;delete N.clear}return E[e]=D,n({global:!0,constructor:!0,forced:D!=w},E),v(D,e),x||r.setStrong(D,e,g),D}},9920:(e,t,r)=&gt;{var n=r(2597),i=r(3887),a=r(1236),o=r(3070);e.exports=function(e,t,r){for(var u=i(t),s=o.f,c=a.f,f=0;f&lt;u.length;f++){var l=u[f];n(e,l)||r&amp;&amp;n(r,l)||s(e,l,c(t,l))}}},4964:(e,t,r)=&gt;{var n=r(5112)(&quot;match&quot;);e.exports=function(e){var t=/./;try{&quot;/./&quot;[e](t)}catch(r){try{return t[n]=!1,&quot;/./&quot;[e](t)}catch(e){}}return!1}},8544:(e,t,r)=&gt;{var n=r(7293);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},4230:(e,t,r)=&gt;{var n=r(1702),i=r(4488),a=r(1340),o=/&quot;/g,u=n(&quot;&quot;.replace);e.exports=function(e,t,r,n){var s=a(i(e)),c=&quot;&lt;&quot;+t;return&quot;&quot;!==r&amp;&amp;(c+=&quot; &quot;+r+'=&quot;'+u(a(n),o,&quot;&amp;quot;&quot;)+'&quot;'),c+&quot;&gt;&quot;+s+&quot;&lt;/&quot;+t+&quot;&gt;&quot;}},6178:e=&gt;{e.exports=function(e,t){return{value:e,done:t}}},8880:(e,t,r)=&gt;{var n=r(9781),i=r(3070),a=r(9114);e.exports=n?function(e,t,r){return i.f(e,t,a(1,r))}:function(e,t,r){return e[t]=r,e}},9114:e=&gt;{e.exports=function(e,t){return{enumerable:!(1&amp;e),configurable:!(2&amp;e),writable:!(4&amp;e),value:t}}},6135:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(4948),i=r(3070),a=r(9114);e.exports=function(e,t,r){var o=n(t);o in e?i.f(e,o,a(0,r)):e[o]=r}},7045:(e,t,r)=&gt;{var n=r(6339),i=r(3070);e.exports=function(e,t,r){return r.get&amp;&amp;n(r.get,t,{getter:!0}),r.set&amp;&amp;n(r.set,t,{setter:!0}),i.f(e,t,r)}},8052:(e,t,r)=&gt;{var n=r(614),i=r(3070),a=r(6339),o=r(3072);e.exports=function(e,t,r,u){u||(u={});var s=u.enumerable,c=void 0!==u.name?u.name:t;if(n(r)&amp;&amp;a(r,c,u),u.global)s?e[t]=r:o(t,r);else{try{u.unsafe?e[t]&amp;&amp;(s=!0):delete e[t]}catch(e){}s?e[t]=r:i.f(e,t,{value:r,enumerable:!1,configurable:!u.nonConfigurable,writable:!u.nonWritable})}return e}},9190:(e,t,r)=&gt;{var n=r(8052);e.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},3072:(e,t,r)=&gt;{var n=r(7854),i=Object.defineProperty;e.exports=function(e,t){try{i(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},5117:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(6330),i=TypeError;e.exports=function(e,t){if(!delete e[t])throw i(&quot;Cannot delete property &quot;+n(t)+&quot; of &quot;+n(e))}},9781:(e,t,r)=&gt;{var n=r(7293);e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:e=&gt;{var t=&quot;object&quot;==typeof document&amp;&amp;document.all,r=void 0===t&amp;&amp;void 0!==t;e.exports={all:t,IS_HTMLDDA:r}},317:(e,t,r)=&gt;{var n=r(7854),i=r(111),a=n.document,o=i(a)&amp;&amp;i(a.createElement);e.exports=function(e){return o?a.createElement(e):{}}},7207:e=&gt;{var t=TypeError;e.exports=function(e){if(e&gt;9007199254740991)throw t(&quot;Maximum allowed index exceeded&quot;);return e}},8324:e=&gt;{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:(e,t,r)=&gt;{var n=r(317)(&quot;span&quot;).classList,i=n&amp;&amp;n.constructor&amp;&amp;n.constructor.prototype;e.exports=i===Object.prototype?void 0:i},8886:(e,t,r)=&gt;{var n=r(8113).match(/firefox\s/(\sd+)/i);e.exports=!!n&amp;&amp;+n[1]},7871:(e,t,r)=&gt;{var n=r(3823),i=r(5268);e.exports=!n&amp;&amp;!i&amp;&amp;&quot;object&quot;==typeof window&amp;&amp;&quot;object&quot;==typeof document},3823:e=&gt;{e.exports=&quot;object&quot;==typeof Deno&amp;&amp;Deno&amp;&amp;&quot;object&quot;==typeof Deno.version},256:(e,t,r)=&gt;{var n=r(8113);e.exports=/MSIE|Trident/.test(n)},1528:(e,t,r)=&gt;{var n=r(8113);e.exports=/ipad|iphone|ipod/i.test(n)&amp;&amp;&quot;undefined&quot;!=typeof Pebble},6833:(e,t,r)=&gt;{var n=r(8113);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},5268:(e,t,r)=&gt;{var n=r(4326);e.exports=&quot;undefined&quot;!=typeof process&amp;&amp;&quot;process&quot;==n(process)},1036:(e,t,r)=&gt;{var n=r(8113);e.exports=/web0s(?!.*chrome)/i.test(n)},8113:e=&gt;{e.exports=&quot;undefined&quot;!=typeof navigator&amp;&amp;String(navigator.userAgent)||&quot;&quot;},7392:(e,t,r)=&gt;{var n,i,a=r(7854),o=r(8113),u=a.process,s=a.Deno,c=u&amp;&amp;u.versions||s&amp;&amp;s.version,f=c&amp;&amp;c.v8;f&amp;&amp;(i=(n=f.split(&quot;.&quot;))[0]&gt;0&amp;&amp;n[0]&lt;4?1:+(n[0]+n[1])),!i&amp;&amp;o&amp;&amp;(!(n=o.match(/Edge\s/(\sd+)/))||n[1]&gt;=74)&amp;&amp;(n=o.match(/Chrome\s/(\sd+)/))&amp;&amp;(i=+n[1]),e.exports=i},8008:(e,t,r)=&gt;{var n=r(8113).match(/AppleWebKit\s/(\sd+)\s./);e.exports=!!n&amp;&amp;+n[1]},748:e=&gt;{e.exports=[&quot;constructor&quot;,&quot;hasOwnProperty&quot;,&quot;isPrototypeOf&quot;,&quot;propertyIsEnumerable&quot;,&quot;toLocaleString&quot;,&quot;toString&quot;,&quot;valueOf&quot;]},2109:(e,t,r)=&gt;{var n=r(7854),i=r(1236).f,a=r(8880),o=r(8052),u=r(3072),s=r(9920),c=r(4705);e.exports=function(e,t){var r,f,l,p,m,h=e.target,d=e.global,v=e.stat;if(r=d?n:v?n[h]||u(h,{}):(n[h]||{}).prototype)for(f in t){if(p=t[f],l=e.dontCallGetSet?(m=i(r,f))&amp;&amp;m.value:r[f],!c(d?f:h+(v?&quot;.&quot;:&quot;#&quot;)+f,e.forced)&amp;&amp;void 0!==l){if(typeof p==typeof l)continue;s(p,l)}(e.sham||l&amp;&amp;l.sham)&amp;&amp;a(p,&quot;sham&quot;,!0),o(r,f,p,e)}}},7293:e=&gt;{e.exports=function(e){try{return!!e()}catch(e){return!0}}},7007:(e,t,r)=&gt;{&quot;use strict&quot;;r(4916);var n=r(1470),i=r(8052),a=r(2261),o=r(7293),u=r(5112),s=r(8880),c=u(&quot;species&quot;),f=RegExp.prototype;e.exports=function(e,t,r,l){var p=u(e),m=!o((function(){var t={};return t[p]=function(){return 7},7!=&quot;&quot;[e](t)})),h=m&amp;&amp;!o((function(){var t=!1,r=/a/;return&quot;split&quot;===e&amp;&amp;((r={}).constructor={},r.constructor[c]=function(){return r},r.flags=&quot;&quot;,r[p]=/./[p]),r.exec=function(){return t=!0,null},r[p](&quot;&quot;),!t}));if(!m||!h||r){var d=n(/./[p]),v=t(p,&quot;&quot;[e],(function(e,t,r,i,o){var u=n(e),s=t.exec;return s===a||s===f.exec?m&amp;&amp;!o?{done:!0,value:d(t,r,i)}:{done:!0,value:u(r,t,i)}:{done:!1}}));i(String.prototype,e,v[0]),i(f,p,v[1])}l&amp;&amp;s(f[p],&quot;sham&quot;,!0)}},6677:(e,t,r)=&gt;{var n=r(7293);e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},2104:(e,t,r)=&gt;{var n=r(4374),i=Function.prototype,a=i.apply,o=i.call;e.exports=&quot;object&quot;==typeof Reflect&amp;&amp;Reflect.apply||(n?o.bind(a):function(){return o.apply(a,arguments)})},9974:(e,t,r)=&gt;{var n=r(1470),i=r(9662),a=r(4374),o=n(n.bind);e.exports=function(e,t){return i(e),void 0===t?e:a?o(e,t):function(){return e.apply(t,arguments)}}},4374:(e,t,r)=&gt;{var n=r(7293);e.exports=!n((function(){var e=function(){}.bind();return&quot;function&quot;!=typeof e||e.hasOwnProperty(&quot;prototype&quot;)}))},7065:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(1702),i=r(9662),a=r(111),o=r(2597),u=r(206),s=r(4374),c=Function,f=n([].concat),l=n([].join),p={};e.exports=s?c.bind:function(e){var t=i(this),r=t.prototype,n=u(arguments,1),s=function(){var r=f(n,u(arguments));return this instanceof s?function(e,t,r){if(!o(p,t)){for(var n=[],i=0;i&lt;t;i++)n[i]=&quot;a[&quot;+i+&quot;]&quot;;p[t]=c(&quot;C,a&quot;,&quot;return new C(&quot;+l(n,&quot;,&quot;)+&quot;)&quot;)}return p[t](e,r)}(t,r.length,r):t.apply(e,r)};return a(r)&amp;&amp;(s.prototype=r),s}},6916:(e,t,r)=&gt;{var n=r(4374),i=Function.prototype.call;e.exports=n?i.bind(i):function(){return i.apply(i,arguments)}},6530:(e,t,r)=&gt;{var n=r(9781),i=r(2597),a=Function.prototype,o=n&amp;&amp;Object.getOwnPropertyDescriptor,u=i(a,&quot;name&quot;),s=u&amp;&amp;&quot;something&quot;===function(){}.name,c=u&amp;&amp;(!n||n&amp;&amp;o(a,&quot;name&quot;).configurable);e.exports={EXISTS:u,PROPER:s,CONFIGURABLE:c}},5668:(e,t,r)=&gt;{var n=r(1702),i=r(9662);e.exports=function(e,t,r){try{return n(i(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(e){}}},1470:(e,t,r)=&gt;{var n=r(4326),i=r(1702);e.exports=function(e){if(&quot;Function&quot;===n(e))return i(e)}},1702:(e,t,r)=&gt;{var n=r(4374),i=Function.prototype,a=i.call,o=n&amp;&amp;i.bind.bind(a,a);e.exports=n?o:function(e){return function(){return a.apply(e,arguments)}}},5005:(e,t,r)=&gt;{var n=r(7854),i=r(614);e.exports=function(e,t){return arguments.length&lt;2?(r=n[e],i(r)?r:void 0):n[e]&amp;&amp;n[e][t];var r}},1246:(e,t,r)=&gt;{var n=r(648),i=r(8173),a=r(8554),o=r(7497),u=r(5112)(&quot;iterator&quot;);e.exports=function(e){if(!a(e))return i(e,u)||i(e,&quot;@@iterator&quot;)||o[n(e)]}},4121:(e,t,r)=&gt;{var n=r(6916),i=r(9662),a=r(9670),o=r(6330),u=r(1246),s=TypeError;e.exports=function(e,t){var r=arguments.length&lt;2?u(e):t;if(i(r))return a(n(r,e));throw s(o(e)+&quot; is not iterable&quot;)}},8044:(e,t,r)=&gt;{var n=r(1702),i=r(3157),a=r(614),o=r(4326),u=r(1340),s=n([].push);e.exports=function(e){if(a(e))return e;if(i(e)){for(var t=e.length,r=[],n=0;n&lt;t;n++){var c=e[n];&quot;string&quot;==typeof c?s(r,c):&quot;number&quot;!=typeof c&amp;&amp;&quot;Number&quot;!=o(c)&amp;&amp;&quot;String&quot;!=o(c)||s(r,u(c))}var f=r.length,l=!0;return function(e,t){if(l)return l=!1,t;if(i(this))return t;for(var n=0;n&lt;f;n++)if(r[n]===e)return t}}}},8173:(e,t,r)=&gt;{var n=r(9662),i=r(8554);e.exports=function(e,t){var r=e[t];return i(r)?void 0:n(r)}},647:(e,t,r)=&gt;{var n=r(1702),i=r(7908),a=Math.floor,o=n(&quot;&quot;.charAt),u=n(&quot;&quot;.replace),s=n(&quot;&quot;.slice),c=/\s$([$&amp;'`]|\sd{1,2}|&lt;[^&gt;]*&gt;)/g,f=/\s$([$&amp;'`]|\sd{1,2})/g;e.exports=function(e,t,r,n,l,p){var m=r+e.length,h=n.length,d=f;return void 0!==l&amp;&amp;(l=i(l),d=c),u(p,d,(function(i,u){var c;switch(o(u,0)){case&quot;$&quot;:return&quot;$&quot;;case&quot;&amp;&quot;:return e;case&quot;`&quot;:return s(t,0,r);case&quot;'&quot;:return s(t,m);case&quot;&lt;&quot;:c=l[s(u,1,-1)];break;default:var f=+u;if(0===f)return i;if(f&gt;h){var p=a(f/10);return 0===p?i:p&lt;=h?void 0===n[p-1]?o(u,1):n[p-1]+o(u,1):i}c=n[f-1]}return void 0===c?&quot;&quot;:c}))}},7854:function(e){var t=function(e){return e&amp;&amp;e.Math==Math&amp;&amp;e};e.exports=t(&quot;object&quot;==typeof globalThis&amp;&amp;globalThis)||t(&quot;object&quot;==typeof window&amp;&amp;window)||t(&quot;object&quot;==typeof self&amp;&amp;self)||t(&quot;object&quot;==typeof global&amp;&amp;global)||function(){return this}()||this||Function(&quot;return this&quot;)()},2597:(e,t,r)=&gt;{var n=r(1702),i=r(7908),a=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return a(i(e),t)}},3501:e=&gt;{e.exports={}},842:e=&gt;{e.exports=function(e,t){try{1==arguments.length?console.error(e):console.error(e,t)}catch(e){}}},490:(e,t,r)=&gt;{var n=r(5005);e.exports=n(&quot;document&quot;,&quot;documentElement&quot;)},4664:(e,t,r)=&gt;{var n=r(9781),i=r(7293),a=r(317);e.exports=!n&amp;&amp;!i((function(){return 7!=Object.defineProperty(a(&quot;div&quot;),&quot;a&quot;,{get:function(){return 7}}).a}))},8361:(e,t,r)=&gt;{var n=r(1702),i=r(7293),a=r(4326),o=Object,u=n(&quot;&quot;.split);e.exports=i((function(){return!o(&quot;z&quot;).propertyIsEnumerable(0)}))?function(e){return&quot;String&quot;==a(e)?u(e,&quot;&quot;):o(e)}:o},9587:(e,t,r)=&gt;{var n=r(614),i=r(111),a=r(7674);e.exports=function(e,t,r){var o,u;return a&amp;&amp;n(o=t.constructor)&amp;&amp;o!==r&amp;&amp;i(u=o.prototype)&amp;&amp;u!==r.prototype&amp;&amp;a(e,u),e}},2788:(e,t,r)=&gt;{var n=r(1702),i=r(614),a=r(5465),o=n(Function.toString);i(a.inspectSource)||(a.inspectSource=function(e){return o(e)}),e.exports=a.inspectSource},2423:(e,t,r)=&gt;{var n=r(2109),i=r(1702),a=r(3501),o=r(111),u=r(2597),s=r(3070).f,c=r(8006),f=r(1156),l=r(2050),p=r(9711),m=r(6677),h=!1,d=p(&quot;meta&quot;),v=0,y=function(e){s(e,d,{value:{objectID:&quot;O&quot;+v++,weakData:{}}})},g=e.exports={enable:function(){g.enable=function(){},h=!0;var e=c.f,t=i([].splice),r={};r[d]=1,e(r).length&amp;&amp;(c.f=function(r){for(var n=e(r),i=0,a=n.length;i&lt;a;i++)if(n[i]===d){t(n,i,1);break}return n},n({target:&quot;Object&quot;,stat:!0,forced:!0},{getOwnPropertyNames:f.f}))},fastKey:function(e,t){if(!o(e))return&quot;symbol&quot;==typeof e?e:(&quot;string&quot;==typeof e?&quot;S&quot;:&quot;P&quot;)+e;if(!u(e,d)){if(!l(e))return&quot;F&quot;;if(!t)return&quot;E&quot;;y(e)}return e[d].objectID},getWeakData:function(e,t){if(!u(e,d)){if(!l(e))return!0;if(!t)return!1;y(e)}return e[d].weakData},onFreeze:function(e){return m&amp;&amp;h&amp;&amp;l(e)&amp;&amp;!u(e,d)&amp;&amp;y(e),e}};a[d]=!0},9909:(e,t,r)=&gt;{var n,i,a,o=r(4811),u=r(7854),s=r(111),c=r(8880),f=r(2597),l=r(5465),p=r(6200),m=r(3501),h=&quot;Object already initialized&quot;,d=u.TypeError,v=u.WeakMap;if(o||l.state){var y=l.state||(l.state=new v);y.get=y.get,y.has=y.has,y.set=y.set,n=function(e,t){if(y.has(e))throw d(h);return t.facade=e,y.set(e,t),t},i=function(e){return y.get(e)||{}},a=function(e){return y.has(e)}}else{var g=p(&quot;state&quot;);m[g]=!0,n=function(e,t){if(f(e,g))throw d(h);return t.facade=e,c(e,g,t),t},i=function(e){return f(e,g)?e[g]:{}},a=function(e){return f(e,g)}}e.exports={set:n,get:i,has:a,enforce:function(e){return a(e)?i(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!s(t)||(r=i(t)).type!==e)throw d(&quot;Incompatible receiver, &quot;+e+&quot; required&quot;);return r}}}},7659:(e,t,r)=&gt;{var n=r(5112),i=r(7497),a=n(&quot;iterator&quot;),o=Array.prototype;e.exports=function(e){return void 0!==e&amp;&amp;(i.Array===e||o[a]===e)}},3157:(e,t,r)=&gt;{var n=r(4326);e.exports=Array.isArray||function(e){return&quot;Array&quot;==n(e)}},614:(e,t,r)=&gt;{var n=r(4154),i=n.all;e.exports=n.IS_HTMLDDA?function(e){return&quot;function&quot;==typeof e||e===i}:function(e){return&quot;function&quot;==typeof e}},4411:(e,t,r)=&gt;{var n=r(1702),i=r(7293),a=r(614),o=r(648),u=r(5005),s=r(2788),c=function(){},f=[],l=u(&quot;Reflect&quot;,&quot;construct&quot;),p=/^\ss*(?:class|function)\sb/,m=n(p.exec),h=!p.exec(c),d=function(e){if(!a(e))return!1;try{return l(c,f,e),!0}catch(e){return!1}},v=function(e){if(!a(e))return!1;switch(o(e)){case&quot;AsyncFunction&quot;:case&quot;GeneratorFunction&quot;:case&quot;AsyncGeneratorFunction&quot;:return!1}try{return h||!!m(p,s(e))}catch(e){return!0}};v.sham=!0,e.exports=!l||i((function(){var e;return d(d.call)||!d(Object)||!d((function(){e=!0}))||e}))?v:d},4705:(e,t,r)=&gt;{var n=r(7293),i=r(614),a=/#|\s.prototype\s./,o=function(e,t){var r=s[u(e)];return r==f||r!=c&amp;&amp;(i(t)?n(t):!!t)},u=o.normalize=function(e){return String(e).replace(a,&quot;.&quot;).toLowerCase()},s=o.data={},c=o.NATIVE=&quot;N&quot;,f=o.POLYFILL=&quot;P&quot;;e.exports=o},8554:e=&gt;{e.exports=function(e){return null==e}},111:(e,t,r)=&gt;{var n=r(614),i=r(4154),a=i.all;e.exports=i.IS_HTMLDDA?function(e){return&quot;object&quot;==typeof e?null!==e:n(e)||e===a}:function(e){return&quot;object&quot;==typeof e?null!==e:n(e)}},1913:e=&gt;{e.exports=!1},7850:(e,t,r)=&gt;{var n=r(111),i=r(4326),a=r(5112)(&quot;match&quot;);e.exports=function(e){var t;return n(e)&amp;&amp;(void 0!==(t=e[a])?!!t:&quot;RegExp&quot;==i(e))}},2190:(e,t,r)=&gt;{var n=r(5005),i=r(614),a=r(7976),o=r(3307),u=Object;e.exports=o?function(e){return&quot;symbol&quot;==typeof e}:function(e){var t=n(&quot;Symbol&quot;);return i(t)&amp;&amp;a(t.prototype,u(e))}},408:(e,t,r)=&gt;{var n=r(9974),i=r(6916),a=r(9670),o=r(6330),u=r(7659),s=r(6244),c=r(7976),f=r(4121),l=r(1246),p=r(9212),m=TypeError,h=function(e,t){this.stopped=e,this.result=t},d=h.prototype;e.exports=function(e,t,r){var v,y,g,x,b,w,N,D=r&amp;&amp;r.that,E=!(!r||!r.AS_ENTRIES),A=!(!r||!r.IS_RECORD),S=!(!r||!r.IS_ITERATOR),C=!(!r||!r.INTERRUPTED),M=n(t,D),F=function(e){return v&amp;&amp;p(v,&quot;normal&quot;,e),new h(!0,e)},O=function(e){return E?(a(e),C?M(e[0],e[1],F):M(e[0],e[1])):C?M(e,F):M(e)};if(A)v=e.iterator;else if(S)v=e;else{if(!(y=l(e)))throw m(o(e)+&quot; is not iterable&quot;);if(u(y)){for(g=0,x=s(e);x&gt;g;g++)if((b=O(e[g]))&amp;&amp;c(d,b))return b;return new h(!1)}v=f(e,y)}for(w=A?e.next:v.next;!(N=i(w,v)).done;){try{b=O(N.value)}catch(e){p(v,&quot;throw&quot;,e)}if(&quot;object&quot;==typeof b&amp;&amp;b&amp;&amp;c(d,b))return b}return new h(!1)}},9212:(e,t,r)=&gt;{var n=r(6916),i=r(9670),a=r(8173);e.exports=function(e,t,r){var o,u;i(e);try{if(!(o=a(e,&quot;return&quot;))){if(&quot;throw&quot;===t)throw r;return r}o=n(o,e)}catch(e){u=!0,o=e}if(&quot;throw&quot;===t)throw r;if(u)throw o;return i(o),r}},3061:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(3383).IteratorPrototype,i=r(30),a=r(9114),o=r(8003),u=r(7497),s=function(){return this};e.exports=function(e,t,r,c){var f=t+&quot; Iterator&quot;;return e.prototype=i(n,{next:a(+!c,r)}),o(e,f,!1,!0),u[f]=s,e}},1656:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2109),i=r(6916),a=r(1913),o=r(6530),u=r(614),s=r(3061),c=r(9518),f=r(7674),l=r(8003),p=r(8880),m=r(8052),h=r(5112),d=r(7497),v=r(3383),y=o.PROPER,g=o.CONFIGURABLE,x=v.IteratorPrototype,b=v.BUGGY_SAFARI_ITERATORS,w=h(&quot;iterator&quot;),N=&quot;keys&quot;,D=&quot;values&quot;,E=&quot;entries&quot;,A=function(){return this};e.exports=function(e,t,r,o,h,v,S){s(r,t,o);var C,M,F,O=function(e){if(e===h&amp;&amp;I)return I;if(!b&amp;&amp;e in _)return _[e];switch(e){case N:case D:case E:return function(){return new r(this,e)}}return function(){return new r(this)}},T=t+&quot; Iterator&quot;,B=!1,_=e.prototype,k=_[w]||_[&quot;@@iterator&quot;]||h&amp;&amp;_[h],I=!b&amp;&amp;k||O(h),R=&quot;Array&quot;==t&amp;&amp;_.entries||k;if(R&amp;&amp;(C=c(R.call(new e)))!==Object.prototype&amp;&amp;C.next&amp;&amp;(a||c(C)===x||(f?f(C,x):u(C[w])||m(C,w,A)),l(C,T,!0,!0),a&amp;&amp;(d[T]=A)),y&amp;&amp;h==D&amp;&amp;k&amp;&amp;k.name!==D&amp;&amp;(!a&amp;&amp;g?p(_,&quot;name&quot;,D):(B=!0,I=function(){return i(k,this)})),h)if(M={values:O(D),keys:v?I:O(N),entries:O(E)},S)for(F in M)(b||B||!(F in _))&amp;&amp;m(_,F,M[F]);else n({target:t,proto:!0,forced:b||B},M);return a&amp;&amp;!S||_[w]===I||m(_,w,I,{name:h}),d[t]=I,M}},3383:(e,t,r)=&gt;{&quot;use strict&quot;;var n,i,a,o=r(7293),u=r(614),s=r(111),c=r(30),f=r(9518),l=r(8052),p=r(5112),m=r(1913),h=p(&quot;iterator&quot;),d=!1;[].keys&amp;&amp;(&quot;next&quot;in(a=[].keys())?(i=f(f(a)))!==Object.prototype&amp;&amp;(n=i):d=!0),!s(n)||o((function(){var e={};return n[h].call(e)!==e}))?n={}:m&amp;&amp;(n=c(n)),u(n[h])||l(n,h,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:d}},7497:e=&gt;{e.exports={}},6244:(e,t,r)=&gt;{var n=r(7466);e.exports=function(e){return n(e.length)}},6339:(e,t,r)=&gt;{var n=r(1702),i=r(7293),a=r(614),o=r(2597),u=r(9781),s=r(6530).CONFIGURABLE,c=r(2788),f=r(9909),l=f.enforce,p=f.get,m=String,h=Object.defineProperty,d=n(&quot;&quot;.slice),v=n(&quot;&quot;.replace),y=n([].join),g=u&amp;&amp;!i((function(){return 8!==h((function(){}),&quot;length&quot;,{value:8}).length})),x=String(String).split(&quot;String&quot;),b=e.exports=function(e,t,r){&quot;Symbol(&quot;===d(m(t),0,7)&amp;&amp;(t=&quot;[&quot;+v(m(t),/^Symbol\s(([^)]*)\s)/,&quot;$1&quot;)+&quot;]&quot;),r&amp;&amp;r.getter&amp;&amp;(t=&quot;get &quot;+t),r&amp;&amp;r.setter&amp;&amp;(t=&quot;set &quot;+t),(!o(e,&quot;name&quot;)||s&amp;&amp;e.name!==t)&amp;&amp;(u?h(e,&quot;name&quot;,{value:t,configurable:!0}):e.name=t),g&amp;&amp;r&amp;&amp;o(r,&quot;arity&quot;)&amp;&amp;e.length!==r.arity&amp;&amp;h(e,&quot;length&quot;,{value:r.arity});try{r&amp;&amp;o(r,&quot;constructor&quot;)&amp;&amp;r.constructor?u&amp;&amp;h(e,&quot;prototype&quot;,{writable:!1}):e.prototype&amp;&amp;(e.prototype=void 0)}catch(e){}var n=l(e);return o(n,&quot;source&quot;)||(n.source=y(x,&quot;string&quot;==typeof t?t:&quot;&quot;)),e};Function.prototype.toString=b((function(){return a(this)&amp;&amp;p(this).source||c(this)}),&quot;toString&quot;)},6736:e=&gt;{var t=Math.expm1,r=Math.exp;e.exports=!t||t(10)&gt;22025.465794806718||t(10)&lt;22025.465794806718||-2e-17!=t(-2e-17)?function(e){var t=+e;return 0==t?t:t&gt;-1e-6&amp;&amp;t&lt;1e-6?t+t*t/2:r(t)-1}:t},403:e=&gt;{var t=Math.log,r=Math.LOG10E;e.exports=Math.log10||function(e){return t(e)*r}},6513:e=&gt;{var t=Math.log;e.exports=Math.log1p||function(e){var r=+e;return r&gt;-1e-8&amp;&amp;r&lt;1e-8?r-r*r/2:t(1+r)}},4310:e=&gt;{e.exports=Math.sign||function(e){var t=+e;return 0==t||t!=t?t:t&lt;0?-1:1}},4758:e=&gt;{var t=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(e){var n=+e;return(n&gt;0?r:t)(n)}},5948:(e,t,r)=&gt;{var n,i,a,o,u,s=r(7854),c=r(9974),f=r(1236).f,l=r(261).set,p=r(8572),m=r(6833),h=r(1528),d=r(1036),v=r(5268),y=s.MutationObserver||s.WebKitMutationObserver,g=s.document,x=s.process,b=s.Promise,w=f(s,&quot;queueMicrotask&quot;),N=w&amp;&amp;w.value;if(!N){var D=new p,E=function(){var e,t;for(v&amp;&amp;(e=x.domain)&amp;&amp;e.exit();t=D.get();)try{t()}catch(e){throw D.head&amp;&amp;n(),e}e&amp;&amp;e.enter()};m||v||d||!y||!g?!h&amp;&amp;b&amp;&amp;b.resolve?((o=b.resolve(void 0)).constructor=b,u=c(o.then,o),n=function(){u(E)}):v?n=function(){x.nextTick(E)}:(l=c(l,s),n=function(){l(E)}):(i=!0,a=g.createTextNode(&quot;&quot;),new y(E).observe(a,{characterData:!0}),n=function(){a.data=i=!i}),N=function(e){D.head||n(),D.add(e)}}e.exports=N},8523:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(9662),i=TypeError,a=function(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw i(&quot;Bad Promise constructor&quot;);t=e,r=n})),this.resolve=n(t),this.reject=n(r)};e.exports.f=function(e){return new a(e)}},3929:(e,t,r)=&gt;{var n=r(7850),i=TypeError;e.exports=function(e){if(n(e))throw i(&quot;The method doesn't accept regular expressions&quot;);return e}},2814:(e,t,r)=&gt;{var n=r(7854),i=r(7293),a=r(1702),o=r(1340),u=r(3111).trim,s=r(1361),c=a(&quot;&quot;.charAt),f=n.parseFloat,l=n.Symbol,p=l&amp;&amp;l.iterator,m=1/f(s+&quot;-0&quot;)!=-1/0||p&amp;&amp;!i((function(){f(Object(p))}));e.exports=m?function(e){var t=u(o(e)),r=f(t);return 0===r&amp;&amp;&quot;-&quot;==c(t,0)?-0:r}:f},3009:(e,t,r)=&gt;{var n=r(7854),i=r(7293),a=r(1702),o=r(1340),u=r(3111).trim,s=r(1361),c=n.parseInt,f=n.Symbol,l=f&amp;&amp;f.iterator,p=/^[+-]?0x/i,m=a(p.exec),h=8!==c(s+&quot;08&quot;)||22!==c(s+&quot;0x16&quot;)||l&amp;&amp;!i((function(){c(Object(l))}));e.exports=h?function(e,t){var r=u(o(e));return c(r,t&gt;&gt;&gt;0||(m(p,r)?16:10))}:c},30:(e,t,r)=&gt;{var n,i=r(9670),a=r(6048),o=r(748),u=r(3501),s=r(490),c=r(317),f=r(6200),l=&quot;prototype&quot;,p=&quot;script&quot;,m=f(&quot;IE_PROTO&quot;),h=function(){},d=function(e){return&quot;&lt;&quot;+p+&quot;&gt;&quot;+e+&quot;&lt;/&quot;+p+&quot;&gt;&quot;},v=function(e){e.write(d(&quot;&quot;)),e.close();var t=e.parentWindow.Object;return e=null,t},y=function(){try{n=new ActiveXObject(&quot;htmlfile&quot;)}catch(e){}var e,t,r;y=&quot;undefined&quot;!=typeof document?document.domain&amp;&amp;n?v(n):(t=c(&quot;iframe&quot;),r=&quot;java&quot;+p+&quot;:&quot;,t.style.display=&quot;none&quot;,s.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(d(&quot;document.F=Object&quot;)),e.close(),e.F):v(n);for(var i=o.length;i--;)delete y[l][o[i]];return y()};u[m]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(h[l]=i(e),r=new h,h[l]=null,r[m]=e):r=y(),void 0===t?r:a.f(r,t)}},6048:(e,t,r)=&gt;{var n=r(9781),i=r(3353),a=r(3070),o=r(9670),u=r(5656),s=r(1956);t.f=n&amp;&amp;!i?Object.defineProperties:function(e,t){o(e);for(var r,n=u(t),i=s(t),c=i.length,f=0;c&gt;f;)a.f(e,r=i[f++],n[r]);return e}},3070:(e,t,r)=&gt;{var n=r(9781),i=r(4664),a=r(3353),o=r(9670),u=r(4948),s=TypeError,c=Object.defineProperty,f=Object.getOwnPropertyDescriptor,l=&quot;enumerable&quot;,p=&quot;configurable&quot;,m=&quot;writable&quot;;t.f=n?a?function(e,t,r){if(o(e),t=u(t),o(r),&quot;function&quot;==typeof e&amp;&amp;&quot;prototype&quot;===t&amp;&amp;&quot;value&quot;in r&amp;&amp;m in r&amp;&amp;!r[m]){var n=f(e,t);n&amp;&amp;n[m]&amp;&amp;(e[t]=r.value,r={configurable:p in r?r[p]:n[p],enumerable:l in r?r[l]:n[l],writable:!1})}return c(e,t,r)}:c:function(e,t,r){if(o(e),t=u(t),o(r),i)try{return c(e,t,r)}catch(e){}if(&quot;get&quot;in r||&quot;set&quot;in r)throw s(&quot;Accessors not supported&quot;);return&quot;value&quot;in r&amp;&amp;(e[t]=r.value),e}},1236:(e,t,r)=&gt;{var n=r(9781),i=r(6916),a=r(5296),o=r(9114),u=r(5656),s=r(4948),c=r(2597),f=r(4664),l=Object.getOwnPropertyDescriptor;t.f=n?l:function(e,t){if(e=u(e),t=s(t),f)try{return l(e,t)}catch(e){}if(c(e,t))return o(!i(a.f,e,t),e[t])}},1156:(e,t,r)=&gt;{var n=r(4326),i=r(5656),a=r(8006).f,o=r(1589),u=&quot;object&quot;==typeof window&amp;&amp;window&amp;&amp;Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return u&amp;&amp;&quot;Window&quot;==n(e)?function(e){try{return a(e)}catch(e){return o(u)}}(e):a(i(e))}},8006:(e,t,r)=&gt;{var n=r(6324),i=r(748).concat(&quot;length&quot;,&quot;prototype&quot;);t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},5181:(e,t)=&gt;{t.f=Object.getOwnPropertySymbols},9518:(e,t,r)=&gt;{var n=r(2597),i=r(614),a=r(7908),o=r(6200),u=r(8544),s=o(&quot;IE_PROTO&quot;),c=Object,f=c.prototype;e.exports=u?c.getPrototypeOf:function(e){var t=a(e);if(n(t,s))return t[s];var r=t.constructor;return i(r)&amp;&amp;t instanceof r?r.prototype:t instanceof c?f:null}},2050:(e,t,r)=&gt;{var n=r(7293),i=r(111),a=r(4326),o=r(7556),u=Object.isExtensible,s=n((function(){u(1)}));e.exports=s||o?function(e){return!!i(e)&amp;&amp;(!o||&quot;ArrayBuffer&quot;!=a(e))&amp;&amp;(!u||u(e))}:u},7976:(e,t,r)=&gt;{var n=r(1702);e.exports=n({}.isPrototypeOf)},6324:(e,t,r)=&gt;{var n=r(1702),i=r(2597),a=r(5656),o=r(1318).indexOf,u=r(3501),s=n([].push);e.exports=function(e,t){var r,n=a(e),c=0,f=[];for(r in n)!i(u,r)&amp;&amp;i(n,r)&amp;&amp;s(f,r);for(;t.length&gt;c;)i(n,r=t[c++])&amp;&amp;(~o(f,r)||s(f,r));return f}},1956:(e,t,r)=&gt;{var n=r(6324),i=r(748);e.exports=Object.keys||function(e){return n(e,i)}},5296:(e,t)=&gt;{&quot;use strict&quot;;var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,i=n&amp;&amp;!r.call({1:2},1);t.f=i?function(e){var t=n(this,e);return!!t&amp;&amp;t.enumerable}:r},7674:(e,t,r)=&gt;{var n=r(5668),i=r(9670),a=r(6077);e.exports=Object.setPrototypeOf||(&quot;__proto__&quot;in{}?function(){var e,t=!1,r={};try{(e=n(Object.prototype,&quot;__proto__&quot;,&quot;set&quot;))(r,[]),t=r instanceof Array}catch(e){}return function(r,n){return i(r),a(n),t?e(r,n):r.__proto__=n,r}}():void 0)},288:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(1694),i=r(648);e.exports=n?{}.toString:function(){return&quot;[object &quot;+i(this)+&quot;]&quot;}},2140:(e,t,r)=&gt;{var n=r(6916),i=r(614),a=r(111),o=TypeError;e.exports=function(e,t){var r,u;if(&quot;string&quot;===t&amp;&amp;i(r=e.toString)&amp;&amp;!a(u=n(r,e)))return u;if(i(r=e.valueOf)&amp;&amp;!a(u=n(r,e)))return u;if(&quot;string&quot;!==t&amp;&amp;i(r=e.toString)&amp;&amp;!a(u=n(r,e)))return u;throw o(&quot;Can't convert object to primitive value&quot;)}},3887:(e,t,r)=&gt;{var n=r(5005),i=r(1702),a=r(8006),o=r(5181),u=r(9670),s=i([].concat);e.exports=n(&quot;Reflect&quot;,&quot;ownKeys&quot;)||function(e){var t=a.f(u(e)),r=o.f;return r?s(t,r(e)):t}},857:(e,t,r)=&gt;{var n=r(7854);e.exports=n},2534:e=&gt;{e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},3702:(e,t,r)=&gt;{var n=r(7854),i=r(2492),a=r(614),o=r(4705),u=r(2788),s=r(5112),c=r(7871),f=r(3823),l=r(1913),p=r(7392),m=i&amp;&amp;i.prototype,h=s(&quot;species&quot;),d=!1,v=a(n.PromiseRejectionEvent),y=o(&quot;Promise&quot;,(function(){var e=u(i),t=e!==String(i);if(!t&amp;&amp;66===p)return!0;if(l&amp;&amp;(!m.catch||!m.finally))return!0;if(!p||p&lt;51||!/native code/.test(e)){var r=new i((function(e){e(1)})),n=function(e){e((function(){}),(function(){}))};if((r.constructor={})[h]=n,!(d=r.then((function(){}))instanceof n))return!0}return!t&amp;&amp;(c||f)&amp;&amp;!v}));e.exports={CONSTRUCTOR:y,REJECTION_EVENT:v,SUBCLASSING:d}},2492:(e,t,r)=&gt;{var n=r(7854);e.exports=n.Promise},9478:(e,t,r)=&gt;{var n=r(9670),i=r(111),a=r(8523);e.exports=function(e,t){if(n(e),i(t)&amp;&amp;t.constructor===e)return t;var r=a.f(e);return(0,r.resolve)(t),r.promise}},612:(e,t,r)=&gt;{var n=r(2492),i=r(7072),a=r(3702).CONSTRUCTOR;e.exports=a||!i((function(e){n.all(e).then(void 0,(function(){}))}))},2626:(e,t,r)=&gt;{var n=r(3070).f;e.exports=function(e,t,r){r in e||n(e,r,{configurable:!0,get:function(){return t[r]},set:function(e){t[r]=e}})}},8572:e=&gt;{var t=function(){this.head=null,this.tail=null};t.prototype={add:function(e){var t={item:e,next:null},r=this.tail;r?r.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&amp;&amp;(this.tail=null),e.item}},e.exports=t},7651:(e,t,r)=&gt;{var n=r(6916),i=r(9670),a=r(614),o=r(4326),u=r(2261),s=TypeError;e.exports=function(e,t){var r=e.exec;if(a(r)){var c=n(r,e,t);return null!==c&amp;&amp;i(c),c}if(&quot;RegExp&quot;===o(e))return n(u,e,t);throw s(&quot;RegExp#exec called on incompatible receiver&quot;)}},2261:(e,t,r)=&gt;{&quot;use strict&quot;;var n,i,a=r(6916),o=r(1702),u=r(1340),s=r(7066),c=r(2999),f=r(2309),l=r(30),p=r(9909).get,m=r(9441),h=r(7168),d=f(&quot;native-string-replace&quot;,String.prototype.replace),v=RegExp.prototype.exec,y=v,g=o(&quot;&quot;.charAt),x=o(&quot;&quot;.indexOf),b=o(&quot;&quot;.replace),w=o(&quot;&quot;.slice),N=(i=/b*/g,a(v,n=/a/,&quot;a&quot;),a(v,i,&quot;a&quot;),0!==n.lastIndex||0!==i.lastIndex),D=c.BROKEN_CARET,E=void 0!==/()??/.exec(&quot;&quot;)[1];(N||E||D||m||h)&amp;&amp;(y=function(e){var t,r,n,i,o,c,f,m=this,h=p(m),A=u(e),S=h.raw;if(S)return S.lastIndex=m.lastIndex,t=a(y,S,A),m.lastIndex=S.lastIndex,t;var C=h.groups,M=D&amp;&amp;m.sticky,F=a(s,m),O=m.source,T=0,B=A;if(M&amp;&amp;(F=b(F,&quot;y&quot;,&quot;&quot;),-1===x(F,&quot;g&quot;)&amp;&amp;(F+=&quot;g&quot;),B=w(A,m.lastIndex),m.lastIndex&gt;0&amp;&amp;(!m.multiline||m.multiline&amp;&amp;&quot;\sn&quot;!==g(A,m.lastIndex-1))&amp;&amp;(O=&quot;(?: &quot;+O+&quot;)&quot;,B=&quot; &quot;+B,T++),r=new RegExp(&quot;^(?:&quot;+O+&quot;)&quot;,F)),E&amp;&amp;(r=new RegExp(&quot;^&quot;+O+&quot;$(?!\s\ss)&quot;,F)),N&amp;&amp;(n=m.lastIndex),i=a(v,M?r:m,B),M?i?(i.input=w(i.input,T),i[0]=w(i[0],T),i.index=m.lastIndex,m.lastIndex+=i[0].length):m.lastIndex=0:N&amp;&amp;i&amp;&amp;(m.lastIndex=m.global?i.index+i[0].length:n),E&amp;&amp;i&amp;&amp;i.length&gt;1&amp;&amp;a(d,i[0],r,(function(){for(o=1;o&lt;arguments.length-2;o++)void 0===arguments[o]&amp;&amp;(i[o]=void 0)})),i&amp;&amp;C)for(i.groups=c=l(null),o=0;o&lt;C.length;o++)c[(f=C[o])[0]]=i[f[1]];return i}),e.exports=y},7066:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(9670);e.exports=function(){var e=n(this),t=&quot;&quot;;return e.hasIndices&amp;&amp;(t+=&quot;d&quot;),e.global&amp;&amp;(t+=&quot;g&quot;),e.ignoreCase&amp;&amp;(t+=&quot;i&quot;),e.multiline&amp;&amp;(t+=&quot;m&quot;),e.dotAll&amp;&amp;(t+=&quot;s&quot;),e.unicode&amp;&amp;(t+=&quot;u&quot;),e.unicodeSets&amp;&amp;(t+=&quot;v&quot;),e.sticky&amp;&amp;(t+=&quot;y&quot;),t}},4706:(e,t,r)=&gt;{var n=r(6916),i=r(2597),a=r(7976),o=r(7066),u=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||&quot;flags&quot;in u||i(e,&quot;flags&quot;)||!a(u,e)?t:n(o,e)}},2999:(e,t,r)=&gt;{var n=r(7293),i=r(7854).RegExp,a=n((function(){var e=i(&quot;a&quot;,&quot;y&quot;);return e.lastIndex=2,null!=e.exec(&quot;abcd&quot;)})),o=a||n((function(){return!i(&quot;a&quot;,&quot;y&quot;).sticky})),u=a||n((function(){var e=i(&quot;^r&quot;,&quot;gy&quot;);return e.lastIndex=2,null!=e.exec(&quot;str&quot;)}));e.exports={BROKEN_CARET:u,MISSED_STICKY:o,UNSUPPORTED_Y:a}},9441:(e,t,r)=&gt;{var n=r(7293),i=r(7854).RegExp;e.exports=n((function(){var e=i(&quot;.&quot;,&quot;s&quot;);return!(e.dotAll&amp;&amp;e.exec(&quot;\sn&quot;)&amp;&amp;&quot;s&quot;===e.flags)}))},7168:(e,t,r)=&gt;{var n=r(7293),i=r(7854).RegExp;e.exports=n((function(){var e=i(&quot;(?&lt;a&gt;b)&quot;,&quot;g&quot;);return&quot;b&quot;!==e.exec(&quot;b&quot;).groups.a||&quot;bc&quot;!==&quot;b&quot;.replace(e,&quot;$&lt;a&gt;c&quot;)}))},4488:(e,t,r)=&gt;{var n=r(8554),i=TypeError;e.exports=function(e){if(n(e))throw i(&quot;Can't call method on &quot;+e);return e}},6340:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(5005),i=r(7045),a=r(5112),o=r(9781),u=a(&quot;species&quot;);e.exports=function(e){var t=n(e);o&amp;&amp;t&amp;&amp;!t[u]&amp;&amp;i(t,u,{configurable:!0,get:function(){return this}})}},8003:(e,t,r)=&gt;{var n=r(3070).f,i=r(2597),a=r(5112)(&quot;toStringTag&quot;);e.exports=function(e,t,r){e&amp;&amp;!r&amp;&amp;(e=e.prototype),e&amp;&amp;!i(e,a)&amp;&amp;n(e,a,{configurable:!0,value:t})}},6200:(e,t,r)=&gt;{var n=r(2309),i=r(9711),a=n(&quot;keys&quot;);e.exports=function(e){return a[e]||(a[e]=i(e))}},5465:(e,t,r)=&gt;{var n=r(7854),i=r(3072),a=&quot;__core-js_shared__&quot;,o=n[a]||i(a,{});e.exports=o},2309:(e,t,r)=&gt;{var n=r(1913),i=r(5465);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})(&quot;versions&quot;,[]).push({version:&quot;3.31.1&quot;,mode:n?&quot;pure&quot;:&quot;global&quot;,copyright:&quot;© 2014-2023 Denis Pushkarev (zloirock.ru)&quot;,license:&quot;https://github.com/zloirock/core-js/blob/v3.31.1/LICENSE&quot;,source:&quot;https://github.com/zloirock/core-js&quot;})},6707:(e,t,r)=&gt;{var n=r(9670),i=r(9483),a=r(8554),o=r(5112)(&quot;species&quot;);e.exports=function(e,t){var r,u=n(e).constructor;return void 0===u||a(r=n(u)[o])?t:i(r)}},3429:(e,t,r)=&gt;{var n=r(7293);e.exports=function(e){return n((function(){var t=&quot;&quot;[e]('&quot;');return t!==t.toLowerCase()||t.split('&quot;').length&gt;3}))}},8710:(e,t,r)=&gt;{var n=r(1702),i=r(9303),a=r(1340),o=r(4488),u=n(&quot;&quot;.charAt),s=n(&quot;&quot;.charCodeAt),c=n(&quot;&quot;.slice),f=function(e){return function(t,r){var n,f,l=a(o(t)),p=i(r),m=l.length;return p&lt;0||p&gt;=m?e?&quot;&quot;:void 0:(n=s(l,p))&lt;55296||n&gt;56319||p+1===m||(f=s(l,p+1))&lt;56320||f&gt;57343?e?u(l,p):n:e?c(l,p,p+2):f-56320+(n-55296&lt;&lt;10)+65536}};e.exports={codeAt:f(!1),charAt:f(!0)}},8415:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(9303),i=r(1340),a=r(4488),o=RangeError;e.exports=function(e){var t=i(a(this)),r=&quot;&quot;,u=n(e);if(u&lt;0||u==1/0)throw o(&quot;Wrong number of repetitions&quot;);for(;u&gt;0;(u&gt;&gt;&gt;=1)&amp;&amp;(t+=t))1&amp;u&amp;&amp;(r+=t);return r}},6091:(e,t,r)=&gt;{var n=r(6530).PROPER,i=r(7293),a=r(1361);e.exports=function(e){return i((function(){return!!a[e]()||&quot;​᠎&quot;!==&quot;​᠎&quot;[e]()||n&amp;&amp;a[e].name!==e}))}},3111:(e,t,r)=&gt;{var n=r(1702),i=r(4488),a=r(1340),o=r(1361),u=n(&quot;&quot;.replace),s=RegExp(&quot;^[&quot;+o+&quot;]+&quot;),c=RegExp(&quot;(^|[^&quot;+o+&quot;])[&quot;+o+&quot;]+$&quot;),f=function(e){return function(t){var r=a(i(t));return 1&amp;e&amp;&amp;(r=u(r,s,&quot;&quot;)),2&amp;e&amp;&amp;(r=u(r,c,&quot;$1&quot;)),r}};e.exports={start:f(1),end:f(2),trim:f(3)}},6293:(e,t,r)=&gt;{var n=r(7392),i=r(7293),a=r(7854).String;e.exports=!!Object.getOwnPropertySymbols&amp;&amp;!i((function(){var e=Symbol();return!a(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&amp;&amp;n&amp;&amp;n&lt;41}))},6532:(e,t,r)=&gt;{var n=r(6916),i=r(5005),a=r(5112),o=r(8052);e.exports=function(){var e=i(&quot;Symbol&quot;),t=e&amp;&amp;e.prototype,r=t&amp;&amp;t.valueOf,u=a(&quot;toPrimitive&quot;);t&amp;&amp;!t[u]&amp;&amp;o(t,u,(function(e){return n(r,this)}),{arity:1})}},2015:(e,t,r)=&gt;{var n=r(6293);e.exports=n&amp;&amp;!!Symbol.for&amp;&amp;!!Symbol.keyFor},261:(e,t,r)=&gt;{var n,i,a,o,u=r(7854),s=r(2104),c=r(9974),f=r(614),l=r(2597),p=r(7293),m=r(490),h=r(206),d=r(317),v=r(8053),y=r(6833),g=r(5268),x=u.setImmediate,b=u.clearImmediate,w=u.process,N=u.Dispatch,D=u.Function,E=u.MessageChannel,A=u.String,S=0,C={},M=&quot;onreadystatechange&quot;;p((function(){n=u.location}));var F=function(e){if(l(C,e)){var t=C[e];delete C[e],t()}},O=function(e){return function(){F(e)}},T=function(e){F(e.data)},B=function(e){u.postMessage(A(e),n.protocol+&quot;//&quot;+n.host)};x&amp;&amp;b||(x=function(e){v(arguments.length,1);var t=f(e)?e:D(e),r=h(arguments,1);return C[++S]=function(){s(t,void 0,r)},i(S),S},b=function(e){delete C[e]},g?i=function(e){w.nextTick(O(e))}:N&amp;&amp;N.now?i=function(e){N.now(O(e))}:E&amp;&amp;!y?(o=(a=new E).port2,a.port1.onmessage=T,i=c(o.postMessage,o)):u.addEventListener&amp;&amp;f(u.postMessage)&amp;&amp;!u.importScripts&amp;&amp;n&amp;&amp;&quot;file:&quot;!==n.protocol&amp;&amp;!p(B)?(i=B,u.addEventListener(&quot;message&quot;,T,!1)):i=M in d(&quot;script&quot;)?function(e){m.appendChild(d(&quot;script&quot;))[M]=function(){m.removeChild(this),F(e)}}:function(e){setTimeout(O(e),0)}),e.exports={set:x,clear:b}},863:(e,t,r)=&gt;{var n=r(1702);e.exports=n(1..valueOf)},1400:(e,t,r)=&gt;{var n=r(9303),i=Math.max,a=Math.min;e.exports=function(e,t){var r=n(e);return r&lt;0?i(r+t,0):a(r,t)}},5656:(e,t,r)=&gt;{var n=r(8361),i=r(4488);e.exports=function(e){return n(i(e))}},9303:(e,t,r)=&gt;{var n=r(4758);e.exports=function(e){var t=+e;return t!=t||0===t?0:n(t)}},7466:(e,t,r)=&gt;{var n=r(9303),i=Math.min;e.exports=function(e){return e&gt;0?i(n(e),9007199254740991):0}},7908:(e,t,r)=&gt;{var n=r(4488),i=Object;e.exports=function(e){return i(n(e))}},7593:(e,t,r)=&gt;{var n=r(6916),i=r(111),a=r(2190),o=r(8173),u=r(2140),s=r(5112),c=TypeError,f=s(&quot;toPrimitive&quot;);e.exports=function(e,t){if(!i(e)||a(e))return e;var r,s=o(e,f);if(s){if(void 0===t&amp;&amp;(t=&quot;default&quot;),r=n(s,e,t),!i(r)||a(r))return r;throw c(&quot;Can't convert object to primitive value&quot;)}return void 0===t&amp;&amp;(t=&quot;number&quot;),u(e,t)}},4948:(e,t,r)=&gt;{var n=r(7593),i=r(2190);e.exports=function(e){var t=n(e,&quot;string&quot;);return i(t)?t:t+&quot;&quot;}},1694:(e,t,r)=&gt;{var n={};n[r(5112)(&quot;toStringTag&quot;)]=&quot;z&quot;,e.exports=&quot;[object z]&quot;===String(n)},1340:(e,t,r)=&gt;{var n=r(648),i=String;e.exports=function(e){if(&quot;Symbol&quot;===n(e))throw TypeError(&quot;Cannot convert a Symbol value to a string&quot;);return i(e)}},6330:e=&gt;{var t=String;e.exports=function(e){try{return t(e)}catch(e){return&quot;Object&quot;}}},9711:(e,t,r)=&gt;{var n=r(1702),i=0,a=Math.random(),o=n(1..toString);e.exports=function(e){return&quot;Symbol(&quot;+(void 0===e?&quot;&quot;:e)+&quot;)_&quot;+o(++i+a,36)}},3307:(e,t,r)=&gt;{var n=r(6293);e.exports=n&amp;&amp;!Symbol.sham&amp;&amp;&quot;symbol&quot;==typeof Symbol.iterator},3353:(e,t,r)=&gt;{var n=r(9781),i=r(7293);e.exports=n&amp;&amp;i((function(){return 42!=Object.defineProperty((function(){}),&quot;prototype&quot;,{value:42,writable:!1}).prototype}))},8053:e=&gt;{var t=TypeError;e.exports=function(e,r){if(e&lt;r)throw t(&quot;Not enough arguments&quot;);return e}},4811:(e,t,r)=&gt;{var n=r(7854),i=r(614),a=n.WeakMap;e.exports=i(a)&amp;&amp;/native code/.test(String(a))},6800:(e,t,r)=&gt;{var n=r(857),i=r(2597),a=r(6061),o=r(3070).f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});i(t,e)||o(t,e,{value:a.f(e)})}},6061:(e,t,r)=&gt;{var n=r(5112);t.f=n},5112:(e,t,r)=&gt;{var n=r(7854),i=r(2309),a=r(2597),o=r(9711),u=r(6293),s=r(3307),c=n.Symbol,f=i(&quot;wks&quot;),l=s?c.for||c:c&amp;&amp;c.withoutSetter||o;e.exports=function(e){return a(f,e)||(f[e]=u&amp;&amp;a(c,e)?c[e]:l(&quot;Symbol.&quot;+e)),f[e]}},1361:e=&gt;{e.exports=&quot;\st\sn\sv\sf\sr                　\su2028\su2029\sufeff&quot;},2222:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2109),i=r(7293),a=r(3157),o=r(111),u=r(7908),s=r(6244),c=r(7207),f=r(6135),l=r(5417),p=r(1194),m=r(5112),h=r(7392),d=m(&quot;isConcatSpreadable&quot;),v=h&gt;=51||!i((function(){var e=[];return e[d]=!1,e.concat()[0]!==e})),y=function(e){if(!o(e))return!1;var t=e[d];return void 0!==t?!!t:a(e)};n({target:&quot;Array&quot;,proto:!0,arity:1,forced:!v||!p(&quot;concat&quot;)},{concat:function(e){var t,r,n,i,a,o=u(this),p=l(o,0),m=0;for(t=-1,n=arguments.length;t&lt;n;t++)if(y(a=-1===t?o:arguments[t]))for(i=s(a),c(m+i),r=0;r&lt;i;r++,m++)r in a&amp;&amp;f(p,m,a[r]);else c(m+1),f(p,m++,a);return p.length=m,p}})},6541:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2109),i=r(2092).every;n({target:&quot;Array&quot;,proto:!0,forced:!r(9341)(&quot;every&quot;)},{every:function(e){return i(this,e,arguments.length&gt;1?arguments[1]:void 0)}})},3290:(e,t,r)=&gt;{var n=r(2109),i=r(1285),a=r(1223);n({target:&quot;Array&quot;,proto:!0},{fill:i}),a(&quot;fill&quot;)},7327:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2109),i=r(2092).filter;n({target:&quot;Array&quot;,proto:!0,forced:!r(1194)(&quot;filter&quot;)},{filter:function(e){return i(this,e,arguments.length&gt;1?arguments[1]:void 0)}})},9826:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2109),i=r(2092).find,a=r(1223),o=&quot;find&quot;,u=!0;o in[]&amp;&amp;Array(1)[o]((function(){u=!1})),n({target:&quot;Array&quot;,proto:!0,forced:u},{find:function(e){return i(this,e,arguments.length&gt;1?arguments[1]:void 0)}}),a(o)},9554:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2109),i=r(8533);n({target:&quot;Array&quot;,proto:!0,forced:[].forEach!=i},{forEach:i})},1038:(e,t,r)=&gt;{var n=r(2109),i=r(8457);n({target:&quot;Array&quot;,stat:!0,forced:!r(7072)((function(e){Array.from(e)}))},{from:i})},6699:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2109),i=r(1318).includes,a=r(7293),o=r(1223);n({target:&quot;Array&quot;,proto:!0,forced:a((function(){return!Array(1).includes()}))},{includes:function(e){return i(this,e,arguments.length&gt;1?arguments[1]:void 0)}}),o(&quot;includes&quot;)},2772:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2109),i=r(1470),a=r(1318).indexOf,o=r(9341),u=i([].indexOf),s=!!u&amp;&amp;1/u([1],1,-0)&lt;0;n({target:&quot;Array&quot;,proto:!0,forced:s||!o(&quot;indexOf&quot;)},{indexOf:function(e){var t=arguments.length&gt;1?arguments[1]:void 0;return s?u(this,e,t)||0:a(this,e,t)}})},9753:(e,t,r)=&gt;{r(2109)({target:&quot;Array&quot;,stat:!0},{isArray:r(3157)})},6992:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(5656),i=r(1223),a=r(7497),o=r(9909),u=r(3070).f,s=r(1656),c=r(6178),f=r(1913),l=r(9781),p=&quot;Array Iterator&quot;,m=o.set,h=o.getterFor(p);e.exports=s(Array,&quot;Array&quot;,(function(e,t){m(this,{type:p,target:n(e),index:0,kind:t})}),(function(){var e=h(this),t=e.target,r=e.kind,n=e.index++;return!t||n&gt;=t.length?(e.target=void 0,c(void 0,!0)):c(&quot;keys&quot;==r?n:&quot;values&quot;==r?t[n]:[n,t[n]],!1)}),&quot;values&quot;);var d=a.Arguments=a.Array;if(i(&quot;keys&quot;),i(&quot;values&quot;),i(&quot;entries&quot;),!f&amp;&amp;l&amp;&amp;&quot;values&quot;!==d.name)try{u(d,&quot;name&quot;,{value:&quot;values&quot;})}catch(e){}},9600:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2109),i=r(1702),a=r(8361),o=r(5656),u=r(9341),s=i([].join);n({target:&quot;Array&quot;,proto:!0,forced:a!=Object||!u(&quot;join&quot;,&quot;,&quot;)},{join:function(e){return s(o(this),void 0===e?&quot;,&quot;:e)}})},1249:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2109),i=r(2092).map;n({target:&quot;Array&quot;,proto:!0,forced:!r(1194)(&quot;map&quot;)},{map:function(e){return i(this,e,arguments.length&gt;1?arguments[1]:void 0)}})},5827:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2109),i=r(3671).left,a=r(9341),o=r(7392);n({target:&quot;Array&quot;,proto:!0,forced:!r(5268)&amp;&amp;o&gt;79&amp;&amp;o&lt;83||!a(&quot;reduce&quot;)},{reduce:function(e){var t=arguments.length;return i(this,e,t,t&gt;1?arguments[1]:void 0)}})},5069:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2109),i=r(1702),a=r(3157),o=i([].reverse),u=[1,2];n({target:&quot;Array&quot;,proto:!0,forced:String(u)===String(u.reverse())},{reverse:function(){return a(this)&amp;&amp;(this.length=this.length),o(this)}})},7042:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2109),i=r(3157),a=r(4411),o=r(111),u=r(1400),s=r(6244),c=r(5656),f=r(6135),l=r(5112),p=r(1194),m=r(206),h=p(&quot;slice&quot;),d=l(&quot;species&quot;),v=Array,y=Math.max;n({target:&quot;Array&quot;,proto:!0,forced:!h},{slice:function(e,t){var r,n,l,p=c(this),h=s(p),g=u(e,h),x=u(void 0===t?h:t,h);if(i(p)&amp;&amp;(r=p.constructor,(a(r)&amp;&amp;(r===v||i(r.prototype))||o(r)&amp;&amp;null===(r=r[d]))&amp;&amp;(r=void 0),r===v||void 0===r))return m(p,g,x);for(n=new(void 0===r?v:r)(y(x-g,0)),l=0;g&lt;x;g++,l++)g in p&amp;&amp;f(n,l,p[g]);return n.length=l,n}})},5212:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2109),i=r(2092).some;n({target:&quot;Array&quot;,proto:!0,forced:!r(9341)(&quot;some&quot;)},{some:function(e){return i(this,e,arguments.length&gt;1?arguments[1]:void 0)}})},2707:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2109),i=r(1702),a=r(9662),o=r(7908),u=r(6244),s=r(5117),c=r(1340),f=r(7293),l=r(4362),p=r(9341),m=r(8886),h=r(256),d=r(7392),v=r(8008),y=[],g=i(y.sort),x=i(y.push),b=f((function(){y.sort(void 0)})),w=f((function(){y.sort(null)})),N=p(&quot;sort&quot;),D=!f((function(){if(d)return d&lt;70;if(!(m&amp;&amp;m&gt;3)){if(h)return!0;if(v)return v&lt;603;var e,t,r,n,i=&quot;&quot;;for(e=65;e&lt;76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(n=0;n&lt;47;n++)y.push({k:t+n,v:r})}for(y.sort((function(e,t){return t.v-e.v})),n=0;n&lt;y.length;n++)t=y[n].k.charAt(0),i.charAt(i.length-1)!==t&amp;&amp;(i+=t);return&quot;DGBEFHACIJK&quot;!==i}}));n({target:&quot;Array&quot;,proto:!0,forced:b||!w||!N||!D},{sort:function(e){void 0!==e&amp;&amp;a(e);var t=o(this);if(D)return void 0===e?g(t):g(t,e);var r,n,i=[],f=u(t);for(n=0;n&lt;f;n++)n in t&amp;&amp;x(i,t[n]);for(l(i,function(e){return function(t,r){return void 0===r?-1:void 0===t?1:void 0!==e?+e(t,r)||0:c(t)&gt;c(r)?1:-1}}(e)),r=u(i),n=0;n&lt;r;)t[n]=i[n++];for(;n&lt;f;)s(t,n++);return t}})},561:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2109),i=r(7908),a=r(1400),o=r(9303),u=r(6244),s=r(3658),c=r(7207),f=r(5417),l=r(6135),p=r(5117),m=r(1194)(&quot;splice&quot;),h=Math.max,d=Math.min;n({target:&quot;Array&quot;,proto:!0,forced:!m},{splice:function(e,t){var r,n,m,v,y,g,x=i(this),b=u(x),w=a(e,b),N=arguments.length;for(0===N?r=n=0:1===N?(r=0,n=b-w):(r=N-2,n=d(h(o(t),0),b-w)),c(b+r-n),m=f(x,n),v=0;v&lt;n;v++)(y=w+v)in x&amp;&amp;l(m,v,x[y]);if(m.length=n,r&lt;n){for(v=w;v&lt;b-n;v++)g=v+r,(y=v+n)in x?x[g]=x[y]:p(x,g);for(v=b;v&gt;b-n+r;v--)p(x,v-1)}else if(r&gt;n)for(v=b-n;v&gt;w;v--)g=v+r-1,(y=v+n-1)in x?x[g]=x[y]:p(x,g);for(v=0;v&lt;r;v++)x[v+w]=arguments[v+2];return s(x,b-n+r),m}})},3843:(e,t,r)=&gt;{var n=r(2109),i=r(1702),a=Date,o=i(a.prototype.getTime);n({target:&quot;Date&quot;,stat:!0},{now:function(){return o(new a)}})},5735:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2109),i=r(7293),a=r(7908),o=r(7593);n({target:&quot;Date&quot;,proto:!0,arity:1,forced:i((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}))},{toJSON:function(e){var t=a(this),r=o(t,&quot;number&quot;);return&quot;number&quot;!=typeof r||isFinite(r)?t.toISOString():null}})},3710:(e,t,r)=&gt;{var n=r(1702),i=r(8052),a=Date.prototype,o=&quot;Invalid Date&quot;,u=&quot;toString&quot;,s=n(a[u]),c=n(a.getTime);String(new Date(NaN))!=o&amp;&amp;i(a,u,(function(){var e=c(this);return e==e?s(this):o}))},4812:(e,t,r)=&gt;{var n=r(2109),i=r(7065);n({target:&quot;Function&quot;,proto:!0,forced:Function.bind!==i},{bind:i})},8309:(e,t,r)=&gt;{var n=r(9781),i=r(6530).EXISTS,a=r(1702),o=r(7045),u=Function.prototype,s=a(u.toString),c=/function\sb(?:\ss|\s/\s*[\sS\ss]*?\s*\s/|\s/\s/[^\sn\sr]*[\sn\sr]+)*([^\ss(/]*)/,f=a(c.exec);n&amp;&amp;!i&amp;&amp;o(u,&quot;name&quot;,{configurable:!0,get:function(){try{return f(c,s(this))[1]}catch(e){return&quot;&quot;}}})},8862:(e,t,r)=&gt;{var n=r(2109),i=r(5005),a=r(2104),o=r(6916),u=r(1702),s=r(7293),c=r(614),f=r(2190),l=r(206),p=r(8044),m=r(6293),h=String,d=i(&quot;JSON&quot;,&quot;stringify&quot;),v=u(/./.exec),y=u(&quot;&quot;.charAt),g=u(&quot;&quot;.charCodeAt),x=u(&quot;&quot;.replace),b=u(1..toString),w=/[\suD800-\suDFFF]/g,N=/^[\suD800-\suDBFF]$/,D=/^[\suDC00-\suDFFF]$/,E=!m||s((function(){var e=i(&quot;Symbol&quot;)();return&quot;[null]&quot;!=d([e])||&quot;{}&quot;!=d({a:e})||&quot;{}&quot;!=d(Object(e))})),A=s((function(){return'&quot;\s\sudf06\s\sud834&quot;'!==d(&quot;\sudf06\sud834&quot;)||'&quot;\s\sudead&quot;'!==d(&quot;\sudead&quot;)})),S=function(e,t){var r=l(arguments),n=p(t);if(c(n)||void 0!==e&amp;&amp;!f(e))return r[1]=function(e,t){if(c(n)&amp;&amp;(t=o(n,this,h(e),t)),!f(t))return t},a(d,null,r)},C=function(e,t,r){var n=y(r,t-1),i=y(r,t+1);return v(N,e)&amp;&amp;!v(D,i)||v(D,e)&amp;&amp;!v(N,n)?&quot;\s\su&quot;+b(g(e,0),16):e};d&amp;&amp;n({target:&quot;JSON&quot;,stat:!0,arity:3,forced:E||A},{stringify:function(e,t,r){var n=l(arguments),i=a(E?S:d,null,n);return A&amp;&amp;&quot;string&quot;==typeof i?x(i,w,C):i}})},9098:(e,t,r)=&gt;{&quot;use strict&quot;;r(7710)(&quot;Map&quot;,(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),r(5631))},1532:(e,t,r)=&gt;{r(9098)},9752:(e,t,r)=&gt;{var n=r(2109),i=r(6513),a=Math.acosh,o=Math.log,u=Math.sqrt,s=Math.LN2;n({target:&quot;Math&quot;,stat:!0,forced:!a||710!=Math.floor(a(Number.MAX_VALUE))||a(1/0)!=1/0},{acosh:function(e){var t=+e;return t&lt;1?NaN:t&gt;94906265.62425156?o(t)+s:i(t-1+u(t-1)*u(t+1))}})},2376:(e,t,r)=&gt;{var n=r(2109),i=Math.asinh,a=Math.log,o=Math.sqrt;n({target:&quot;Math&quot;,stat:!0,forced:!(i&amp;&amp;1/i(0)&gt;0)},{asinh:function e(t){var r=+t;return isFinite(r)&amp;&amp;0!=r?r&lt;0?-e(-r):a(r+o(r*r+1)):r}})},3181:(e,t,r)=&gt;{var n=r(2109),i=Math.atanh,a=Math.log;n({target:&quot;Math&quot;,stat:!0,forced:!(i&amp;&amp;1/i(-0)&lt;0)},{atanh:function(e){var t=+e;return 0==t?t:a((1+t)/(1-t))/2}})},3484:(e,t,r)=&gt;{var n=r(2109),i=r(4310),a=Math.abs,o=Math.pow;n({target:&quot;Math&quot;,stat:!0},{cbrt:function(e){var t=+e;return i(t)*o(a(t),1/3)}})},8621:(e,t,r)=&gt;{var n=r(2109),i=r(6736),a=Math.cosh,o=Math.abs,u=Math.E;n({target:&quot;Math&quot;,stat:!0,forced:!a||a(710)===1/0},{cosh:function(e){var t=i(o(e)-1)+1;return(t+1/(t*u*u))*(u/2)}})},5890:(e,t,r)=&gt;{var n=r(2109),i=r(6736);n({target:&quot;Math&quot;,stat:!0,forced:i!=Math.expm1},{expm1:i})},658:(e,t,r)=&gt;{r(2109)({target:&quot;Math&quot;,stat:!0},{log10:r(403)})},197:(e,t,r)=&gt;{r(2109)({target:&quot;Math&quot;,stat:!0},{log1p:r(6513)})},4914:(e,t,r)=&gt;{var n=r(2109),i=Math.log,a=Math.LN2;n({target:&quot;Math&quot;,stat:!0},{log2:function(e){return i(e)/a}})},2420:(e,t,r)=&gt;{r(2109)({target:&quot;Math&quot;,stat:!0},{sign:r(4310)})},160:(e,t,r)=&gt;{var n=r(2109),i=r(7293),a=r(6736),o=Math.abs,u=Math.exp,s=Math.E;n({target:&quot;Math&quot;,stat:!0,forced:i((function(){return-2e-17!=Math.sinh(-2e-17)}))},{sinh:function(e){var t=+e;return o(t)&lt;1?(a(t)-a(-t))/2:(u(t-1)-u(-t-1))*(s/2)}})},970:(e,t,r)=&gt;{var n=r(2109),i=r(6736),a=Math.exp;n({target:&quot;Math&quot;,stat:!0},{tanh:function(e){var t=+e,r=i(t),n=i(-t);return r==1/0?1:n==1/0?-1:(r-n)/(a(t)+a(-t))}})},9653:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2109),i=r(1913),a=r(9781),o=r(7854),u=r(857),s=r(1702),c=r(4705),f=r(2597),l=r(9587),p=r(7976),m=r(2190),h=r(7593),d=r(7293),v=r(8006).f,y=r(1236).f,g=r(3070).f,x=r(863),b=r(3111).trim,w=&quot;Number&quot;,N=o[w],D=u[w],E=N.prototype,A=o.TypeError,S=s(&quot;&quot;.slice),C=s(&quot;&quot;.charCodeAt),M=c(w,!N(&quot; 0o1&quot;)||!N(&quot;0b1&quot;)||N(&quot;+0x1&quot;)),F=function(e){var t,r=arguments.length&lt;1?0:N(function(e){var t=h(e,&quot;number&quot;);return&quot;bigint&quot;==typeof t?t:function(e){var t,r,n,i,a,o,u,s,c=h(e,&quot;number&quot;);if(m(c))throw A(&quot;Cannot convert a Symbol value to a number&quot;);if(&quot;string&quot;==typeof c&amp;&amp;c.length&gt;2)if(c=b(c),43===(t=C(c,0))||45===t){if(88===(r=C(c,2))||120===r)return NaN}else if(48===t){switch(C(c,1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+c}for(o=(a=S(c,2)).length,u=0;u&lt;o;u++)if((s=C(a,u))&lt;48||s&gt;i)return NaN;return parseInt(a,n)}return+c}(t)}(e));return p(E,t=this)&amp;&amp;d((function(){x(t)}))?l(Object(r),this,F):r};F.prototype=E,M&amp;&amp;!i&amp;&amp;(E.constructor=F),n({global:!0,constructor:!0,wrap:!0,forced:M},{Number:F});var O=function(e,t){for(var r,n=a?v(t):&quot;MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range&quot;.split(&quot;,&quot;),i=0;n.length&gt;i;i++)f(t,r=n[i])&amp;&amp;!f(e,r)&amp;&amp;g(e,r,y(t,r))};i&amp;&amp;D&amp;&amp;O(u[w],D),(M||i)&amp;&amp;O(u[w],N)},3299:(e,t,r)=&gt;{r(2109)({target:&quot;Number&quot;,stat:!0,nonConfigurable:!0,nonWritable:!0},{EPSILON:Math.pow(2,-52)})},4048:(e,t,r)=&gt;{r(2109)({target:&quot;Number&quot;,stat:!0},{isNaN:function(e){return e!=e}})},6977:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2109),i=r(1702),a=r(9303),o=r(863),u=r(8415),s=r(7293),c=RangeError,f=String,l=Math.floor,p=i(u),m=i(&quot;&quot;.slice),h=i(1..toFixed),d=function(e,t,r){return 0===t?r:t%2==1?d(e,t-1,r*e):d(e*e,t/2,r)},v=function(e,t,r){for(var n=-1,i=r;++n&lt;6;)i+=t*e[n],e[n]=i%1e7,i=l(i/1e7)},y=function(e,t){for(var r=6,n=0;--r&gt;=0;)n+=e[r],e[r]=l(n/t),n=n%t*1e7},g=function(e){for(var t=6,r=&quot;&quot;;--t&gt;=0;)if(&quot;&quot;!==r||0===t||0!==e[t]){var n=f(e[t]);r=&quot;&quot;===r?n:r+p(&quot;0&quot;,7-n.length)+n}return r};n({target:&quot;Number&quot;,proto:!0,forced:s((function(){return&quot;0.000&quot;!==h(8e-5,3)||&quot;1&quot;!==h(.9,0)||&quot;1.25&quot;!==h(1.255,2)||&quot;1000000000000000128&quot;!==h(0xde0b6b3a7640080,0)}))||!s((function(){h({})}))},{toFixed:function(e){var t,r,n,i,u=o(this),s=a(e),l=[0,0,0,0,0,0],h=&quot;&quot;,x=&quot;0&quot;;if(s&lt;0||s&gt;20)throw c(&quot;Incorrect fraction digits&quot;);if(u!=u)return&quot;NaN&quot;;if(u&lt;=-1e21||u&gt;=1e21)return f(u);if(u&lt;0&amp;&amp;(h=&quot;-&quot;,u=-u),u&gt;1e-21)if(r=(t=function(e){for(var t=0,r=e;r&gt;=4096;)t+=12,r/=4096;for(;r&gt;=2;)t+=1,r/=2;return t}(u*d(2,69,1))-69)&lt;0?u*d(2,-t,1):u/d(2,t,1),r*=4503599627370496,(t=52-t)&gt;0){for(v(l,0,r),n=s;n&gt;=7;)v(l,1e7,0),n-=7;for(v(l,d(10,n,1),0),n=t-1;n&gt;=23;)y(l,1&lt;&lt;23),n-=23;y(l,1&lt;&lt;n),v(l,1,1),y(l,2),x=g(l)}else v(l,0,r),v(l,1&lt;&lt;-t,0),x=g(l)+p(&quot;0&quot;,s);return s&gt;0?h+((i=x.length)&lt;=s?&quot;0.&quot;+p(&quot;0&quot;,s-i)+x:m(x,0,i-s)+&quot;.&quot;+m(x,i-s)):h+x}})},5147:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2109),i=r(1702),a=r(7293),o=r(863),u=i(1..toPrecision);n({target:&quot;Number&quot;,proto:!0,forced:a((function(){return&quot;1&quot;!==u(1,void 0)}))||!a((function(){u({})}))},{toPrecision:function(e){return void 0===e?u(o(this)):u(o(this),e)}})},8011:(e,t,r)=&gt;{r(2109)({target:&quot;Object&quot;,stat:!0,sham:!r(9781)},{create:r(30)})},3321:(e,t,r)=&gt;{var n=r(2109),i=r(9781),a=r(6048).f;n({target:&quot;Object&quot;,stat:!0,forced:Object.defineProperties!==a,sham:!i},{defineProperties:a})},9070:(e,t,r)=&gt;{var n=r(2109),i=r(9781),a=r(3070).f;n({target:&quot;Object&quot;,stat:!0,forced:Object.defineProperty!==a,sham:!i},{defineProperty:a})},5003:(e,t,r)=&gt;{var n=r(2109),i=r(7293),a=r(5656),o=r(1236).f,u=r(9781);n({target:&quot;Object&quot;,stat:!0,forced:!u||i((function(){o(1)})),sham:!u},{getOwnPropertyDescriptor:function(e,t){return o(a(e),t)}})},9337:(e,t,r)=&gt;{var n=r(2109),i=r(9781),a=r(3887),o=r(5656),u=r(1236),s=r(6135);n({target:&quot;Object&quot;,stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){for(var t,r,n=o(e),i=u.f,c=a(n),f={},l=0;c.length&gt;l;)void 0!==(r=i(n,t=c[l++]))&amp;&amp;s(f,t,r);return f}})},9660:(e,t,r)=&gt;{var n=r(2109),i=r(6293),a=r(7293),o=r(5181),u=r(7908);n({target:&quot;Object&quot;,stat:!0,forced:!i||a((function(){o.f(1)}))},{getOwnPropertySymbols:function(e){var t=o.f;return t?t(u(e)):[]}})},489:(e,t,r)=&gt;{var n=r(2109),i=r(7293),a=r(7908),o=r(9518),u=r(8544);n({target:&quot;Object&quot;,stat:!0,forced:i((function(){o(1)})),sham:!u},{getPrototypeOf:function(e){return o(a(e))}})},7941:(e,t,r)=&gt;{var n=r(2109),i=r(7908),a=r(1956);n({target:&quot;Object&quot;,stat:!0,forced:r(7293)((function(){a(1)}))},{keys:function(e){return a(i(e))}})},1539:(e,t,r)=&gt;{var n=r(1694),i=r(8052),a=r(288);n||i(Object.prototype,&quot;toString&quot;,a,{unsafe:!0})},4678:(e,t,r)=&gt;{var n=r(2109),i=r(2814);n({global:!0,forced:parseFloat!=i},{parseFloat:i})},1058:(e,t,r)=&gt;{var n=r(2109),i=r(3009);n({global:!0,forced:parseInt!=i},{parseInt:i})},821:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2109),i=r(6916),a=r(9662),o=r(8523),u=r(2534),s=r(408);n({target:&quot;Promise&quot;,stat:!0,forced:r(612)},{all:function(e){var t=this,r=o.f(t),n=r.resolve,c=r.reject,f=u((function(){var r=a(t.resolve),o=[],u=0,f=1;s(e,(function(e){var a=u++,s=!1;f++,i(r,t,e).then((function(e){s||(s=!0,o[a]=e,--f||n(o))}),c)})),--f||n(o)}));return f.error&amp;&amp;c(f.value),r.promise}})},4164:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2109),i=r(1913),a=r(3702).CONSTRUCTOR,o=r(2492),u=r(5005),s=r(614),c=r(8052),f=o&amp;&amp;o.prototype;if(n({target:&quot;Promise&quot;,proto:!0,forced:a,real:!0},{catch:function(e){return this.then(void 0,e)}}),!i&amp;&amp;s(o)){var l=u(&quot;Promise&quot;).prototype.catch;f.catch!==l&amp;&amp;c(f,&quot;catch&quot;,l,{unsafe:!0})}},3401:(e,t,r)=&gt;{&quot;use strict&quot;;var n,i,a,o=r(2109),u=r(1913),s=r(5268),c=r(7854),f=r(6916),l=r(8052),p=r(7674),m=r(8003),h=r(6340),d=r(9662),v=r(614),y=r(111),g=r(5787),x=r(6707),b=r(261).set,w=r(5948),N=r(842),D=r(2534),E=r(8572),A=r(9909),S=r(2492),C=r(3702),M=r(8523),F=&quot;Promise&quot;,O=C.CONSTRUCTOR,T=C.REJECTION_EVENT,B=C.SUBCLASSING,_=A.getterFor(F),k=A.set,I=S&amp;&amp;S.prototype,R=S,z=I,q=c.TypeError,j=c.document,P=c.process,L=M.f,U=L,$=!!(j&amp;&amp;j.createEvent&amp;&amp;c.dispatchEvent),H=&quot;unhandledrejection&quot;,G=function(e){var t;return!(!y(e)||!v(t=e.then))&amp;&amp;t},V=function(e,t){var r,n,i,a=t.value,o=1==t.state,u=o?e.ok:e.fail,s=e.resolve,c=e.reject,l=e.domain;try{u?(o||(2===t.rejection&amp;&amp;X(t),t.rejection=1),!0===u?r=a:(l&amp;&amp;l.enter(),r=u(a),l&amp;&amp;(l.exit(),i=!0)),r===e.promise?c(q(&quot;Promise-chain cycle&quot;)):(n=G(r))?f(n,r,s,c):s(r)):c(a)}catch(e){l&amp;&amp;!i&amp;&amp;l.exit(),c(e)}},Z=function(e,t){e.notified||(e.notified=!0,w((function(){for(var r,n=e.reactions;r=n.get();)V(r,e);e.notified=!1,t&amp;&amp;!e.rejection&amp;&amp;Y(e)})))},W=function(e,t,r){var n,i;$?((n=j.createEvent(&quot;Event&quot;)).promise=t,n.reason=r,n.initEvent(e,!1,!0),c.dispatchEvent(n)):n={promise:t,reason:r},!T&amp;&amp;(i=c[&quot;on&quot;+e])?i(n):e===H&amp;&amp;N(&quot;Unhandled promise rejection&quot;,r)},Y=function(e){f(b,c,(function(){var t,r=e.facade,n=e.value;if(J(e)&amp;&amp;(t=D((function(){s?P.emit(&quot;unhandledRejection&quot;,n,r):W(H,r,n)})),e.rejection=s||J(e)?2:1,t.error))throw t.value}))},J=function(e){return 1!==e.rejection&amp;&amp;!e.parent},X=function(e){f(b,c,(function(){var t=e.facade;s?P.emit(&quot;rejectionHandled&quot;,t):W(&quot;rejectionhandled&quot;,t,e.value)}))},Q=function(e,t,r){return function(n){e(t,n,r)}},K=function(e,t,r){e.done||(e.done=!0,r&amp;&amp;(e=r),e.value=t,e.state=2,Z(e,!0))},ee=function(e,t,r){if(!e.done){e.done=!0,r&amp;&amp;(e=r);try{if(e.facade===t)throw q(&quot;Promise can't be resolved itself&quot;);var n=G(t);n?w((function(){var r={done:!1};try{f(n,t,Q(ee,r,e),Q(K,r,e))}catch(t){K(r,t,e)}})):(e.value=t,e.state=1,Z(e,!1))}catch(t){K({done:!1},t,e)}}};if(O&amp;&amp;(z=(R=function(e){g(this,z),d(e),f(n,this);var t=_(this);try{e(Q(ee,t),Q(K,t))}catch(e){K(t,e)}}).prototype,(n=function(e){k(this,{type:F,done:!1,notified:!1,parent:!1,reactions:new E,rejection:!1,state:0,value:void 0})}).prototype=l(z,&quot;then&quot;,(function(e,t){var r=_(this),n=L(x(this,R));return r.parent=!0,n.ok=!v(e)||e,n.fail=v(t)&amp;&amp;t,n.domain=s?P.domain:void 0,0==r.state?r.reactions.add(n):w((function(){V(n,r)})),n.promise})),i=function(){var e=new n,t=_(e);this.promise=e,this.resolve=Q(ee,t),this.reject=Q(K,t)},M.f=L=function(e){return e===R||void 0===e?new i(e):U(e)},!u&amp;&amp;v(S)&amp;&amp;I!==Object.prototype)){a=I.then,B||l(I,&quot;then&quot;,(function(e,t){var r=this;return new R((function(e,t){f(a,r,e,t)})).then(e,t)}),{unsafe:!0});try{delete I.constructor}catch(e){}p&amp;&amp;p(I,z)}o({global:!0,constructor:!0,wrap:!0,forced:O},{Promise:R}),m(R,F,!1,!0),h(F)},8674:(e,t,r)=&gt;{r(3401),r(821),r(4164),r(6027),r(683),r(6294)},6027:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2109),i=r(6916),a=r(9662),o=r(8523),u=r(2534),s=r(408);n({target:&quot;Promise&quot;,stat:!0,forced:r(612)},{race:function(e){var t=this,r=o.f(t),n=r.reject,c=u((function(){var o=a(t.resolve);s(e,(function(e){i(o,t,e).then(r.resolve,n)}))}));return c.error&amp;&amp;n(c.value),r.promise}})},683:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2109),i=r(6916),a=r(8523);n({target:&quot;Promise&quot;,stat:!0,forced:r(3702).CONSTRUCTOR},{reject:function(e){var t=a.f(this);return i(t.reject,void 0,e),t.promise}})},6294:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2109),i=r(5005),a=r(1913),o=r(2492),u=r(3702).CONSTRUCTOR,s=r(9478),c=i(&quot;Promise&quot;),f=a&amp;&amp;!u;n({target:&quot;Promise&quot;,stat:!0,forced:a||u},{resolve:function(e){return s(f&amp;&amp;this===c?o:this,e)}})},2419:(e,t,r)=&gt;{var n=r(2109),i=r(5005),a=r(2104),o=r(7065),u=r(9483),s=r(9670),c=r(111),f=r(30),l=r(7293),p=i(&quot;Reflect&quot;,&quot;construct&quot;),m=Object.prototype,h=[].push,d=l((function(){function e(){}return!(p((function(){}),[],e)instanceof e)})),v=!l((function(){p((function(){}))})),y=d||v;n({target:&quot;Reflect&quot;,stat:!0,forced:y,sham:y},{construct:function(e,t){u(e),s(t);var r=arguments.length&lt;3?e:u(arguments[2]);if(v&amp;&amp;!d)return p(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return a(h,n,t),new(a(o,e,n))}var i=r.prototype,l=f(c(i)?i:m),y=a(e,l,t);return c(y)?y:l}})},1299:(e,t,r)=&gt;{var n=r(2109),i=r(7854),a=r(8003);n({global:!0},{Reflect:{}}),a(i.Reflect,&quot;Reflect&quot;,!0)},4603:(e,t,r)=&gt;{var n=r(9781),i=r(7854),a=r(1702),o=r(4705),u=r(9587),s=r(8880),c=r(8006).f,f=r(7976),l=r(7850),p=r(1340),m=r(4706),h=r(2999),d=r(2626),v=r(8052),y=r(7293),g=r(2597),x=r(9909).enforce,b=r(6340),w=r(5112),N=r(9441),D=r(7168),E=w(&quot;match&quot;),A=i.RegExp,S=A.prototype,C=i.SyntaxError,M=a(S.exec),F=a(&quot;&quot;.charAt),O=a(&quot;&quot;.replace),T=a(&quot;&quot;.indexOf),B=a(&quot;&quot;.slice),_=/^\s?&lt;[^\ss\sd!#%&amp;*+&lt;=&gt;@^][^\ss!#%&amp;*+&lt;=&gt;@^]*&gt;/,k=/a/g,I=/a/g,R=new A(k)!==k,z=h.MISSED_STICKY,q=h.UNSUPPORTED_Y;if(o(&quot;RegExp&quot;,n&amp;&amp;(!R||z||N||D||y((function(){return I[E]=!1,A(k)!=k||A(I)==I||&quot;/a/i&quot;!=A(k,&quot;i&quot;)}))))){for(var j=function(e,t){var r,n,i,a,o,c,h=f(S,this),d=l(e),v=void 0===t,y=[],b=e;if(!h&amp;&amp;d&amp;&amp;v&amp;&amp;e.constructor===j)return e;if((d||f(S,e))&amp;&amp;(e=e.source,v&amp;&amp;(t=m(b))),e=void 0===e?&quot;&quot;:p(e),t=void 0===t?&quot;&quot;:p(t),b=e,N&amp;&amp;&quot;dotAll&quot;in k&amp;&amp;(n=!!t&amp;&amp;T(t,&quot;s&quot;)&gt;-1)&amp;&amp;(t=O(t,/s/g,&quot;&quot;)),r=t,z&amp;&amp;&quot;sticky&quot;in k&amp;&amp;(i=!!t&amp;&amp;T(t,&quot;y&quot;)&gt;-1)&amp;&amp;q&amp;&amp;(t=O(t,/y/g,&quot;&quot;)),D&amp;&amp;(a=function(e){for(var t,r=e.length,n=0,i=&quot;&quot;,a=[],o={},u=!1,s=!1,c=0,f=&quot;&quot;;n&lt;=r;n++){if(&quot;\s\s&quot;===(t=F(e,n)))t+=F(e,++n);else if(&quot;]&quot;===t)u=!1;else if(!u)switch(!0){case&quot;[&quot;===t:u=!0;break;case&quot;(&quot;===t:M(_,B(e,n+1))&amp;&amp;(n+=2,s=!0),i+=t,c++;continue;case&quot;&gt;&quot;===t&amp;&amp;s:if(&quot;&quot;===f||g(o,f))throw new C(&quot;Invalid capture group name&quot;);o[f]=!0,a[a.length]=[f,c],s=!1,f=&quot;&quot;;continue}s?f+=t:i+=t}return[i,a]}(e),e=a[0],y=a[1]),o=u(A(e,t),h?this:S,j),(n||i||y.length)&amp;&amp;(c=x(o),n&amp;&amp;(c.dotAll=!0,c.raw=j(function(e){for(var t,r=e.length,n=0,i=&quot;&quot;,a=!1;n&lt;=r;n++)&quot;\s\s&quot;!==(t=F(e,n))?a||&quot;.&quot;!==t?(&quot;[&quot;===t?a=!0:&quot;]&quot;===t&amp;&amp;(a=!1),i+=t):i+=&quot;[\s\ss\s\sS]&quot;:i+=t+F(e,++n);return i}(e),r)),i&amp;&amp;(c.sticky=!0),y.length&amp;&amp;(c.groups=y)),e!==b)try{s(o,&quot;source&quot;,&quot;&quot;===b?&quot;(?:)&quot;:b)}catch(e){}return o},P=c(A),L=0;P.length&gt;L;)d(j,A,P[L++]);S.constructor=j,j.prototype=S,v(i,&quot;RegExp&quot;,j,{constructor:!0})}b(&quot;RegExp&quot;)},8450:(e,t,r)=&gt;{var n=r(9781),i=r(9441),a=r(4326),o=r(7045),u=r(9909).get,s=RegExp.prototype,c=TypeError;n&amp;&amp;i&amp;&amp;o(s,&quot;dotAll&quot;,{configurable:!0,get:function(){if(this!==s){if(&quot;RegExp&quot;===a(this))return!!u(this).dotAll;throw c(&quot;Incompatible receiver, RegExp required&quot;)}}})},4916:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2109),i=r(2261);n({target:&quot;RegExp&quot;,proto:!0,forced:/./.exec!==i},{exec:i})},8386:(e,t,r)=&gt;{var n=r(9781),i=r(2999).MISSED_STICKY,a=r(4326),o=r(7045),u=r(9909).get,s=RegExp.prototype,c=TypeError;n&amp;&amp;i&amp;&amp;o(s,&quot;sticky&quot;,{configurable:!0,get:function(){if(this!==s){if(&quot;RegExp&quot;===a(this))return!!u(this).sticky;throw c(&quot;Incompatible receiver, RegExp required&quot;)}}})},7601:(e,t,r)=&gt;{&quot;use strict&quot;;r(4916);var n,i,a=r(2109),o=r(6916),u=r(614),s=r(9670),c=r(1340),f=(n=!1,(i=/[ac]/).exec=function(){return n=!0,/./.exec.apply(this,arguments)},!0===i.test(&quot;abc&quot;)&amp;&amp;n),l=/./.test;a({target:&quot;RegExp&quot;,proto:!0,forced:!f},{test:function(e){var t=s(this),r=c(e),n=t.exec;if(!u(n))return o(l,t,r);var i=o(n,t,r);return null!==i&amp;&amp;(s(i),!0)}})},9714:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(6530).PROPER,i=r(8052),a=r(9670),o=r(1340),u=r(7293),s=r(4706),c=&quot;toString&quot;,f=RegExp.prototype[c],l=u((function(){return&quot;/a/b&quot;!=f.call({source:&quot;a&quot;,flags:&quot;b&quot;})})),p=n&amp;&amp;f.name!=c;(l||p)&amp;&amp;i(RegExp.prototype,c,(function(){var e=a(this);return&quot;/&quot;+o(e.source)+&quot;/&quot;+o(s(e))}),{unsafe:!0})},7227:(e,t,r)=&gt;{&quot;use strict&quot;;r(7710)(&quot;Set&quot;,(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),r(5631))},189:(e,t,r)=&gt;{r(7227)},2023:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2109),i=r(1702),a=r(3929),o=r(4488),u=r(1340),s=r(4964),c=i(&quot;&quot;.indexOf);n({target:&quot;String&quot;,proto:!0,forced:!s(&quot;includes&quot;)},{includes:function(e){return!!~c(u(o(this)),u(a(e)),arguments.length&gt;1?arguments[1]:void 0)}})},8783:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(8710).charAt,i=r(1340),a=r(9909),o=r(1656),u=r(6178),s=&quot;String Iterator&quot;,c=a.set,f=a.getterFor(s);o(String,&quot;String&quot;,(function(e){c(this,{type:s,string:i(e),index:0})}),(function(){var e,t=f(this),r=t.string,i=t.index;return i&gt;=r.length?u(void 0,!0):(e=n(r,i),t.index+=e.length,u(e,!1))}))},4723:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(6916),i=r(7007),a=r(9670),o=r(8554),u=r(7466),s=r(1340),c=r(4488),f=r(8173),l=r(1530),p=r(7651);i(&quot;match&quot;,(function(e,t,r){return[function(t){var r=c(this),i=o(t)?void 0:f(t,e);return i?n(i,t,r):new RegExp(t)[e](s(r))},function(e){var n=a(this),i=s(e),o=r(t,n,i);if(o.done)return o.value;if(!n.global)return p(n,i);var c=n.unicode;n.lastIndex=0;for(var f,m=[],h=0;null!==(f=p(n,i));){var d=s(f[0]);m[h]=d,&quot;&quot;===d&amp;&amp;(n.lastIndex=l(i,u(n.lastIndex),c)),h++}return 0===h?null:m}]}))},2481:(e,t,r)=&gt;{r(2109)({target:&quot;String&quot;,proto:!0},{repeat:r(8415)})},5306:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2104),i=r(6916),a=r(1702),o=r(7007),u=r(7293),s=r(9670),c=r(614),f=r(8554),l=r(9303),p=r(7466),m=r(1340),h=r(4488),d=r(1530),v=r(8173),y=r(647),g=r(7651),x=r(5112)(&quot;replace&quot;),b=Math.max,w=Math.min,N=a([].concat),D=a([].push),E=a(&quot;&quot;.indexOf),A=a(&quot;&quot;.slice),S=&quot;$0&quot;===&quot;a&quot;.replace(/./,&quot;$0&quot;),C=!!/./[x]&amp;&amp;&quot;&quot;===/./[x](&quot;a&quot;,&quot;$0&quot;);o(&quot;replace&quot;,(function(e,t,r){var a=C?&quot;$&quot;:&quot;$0&quot;;return[function(e,r){var n=h(this),a=f(e)?void 0:v(e,x);return a?i(a,e,n,r):i(t,m(n),e,r)},function(e,i){var o=s(this),u=m(e);if(&quot;string&quot;==typeof i&amp;&amp;-1===E(i,a)&amp;&amp;-1===E(i,&quot;$&lt;&quot;)){var f=r(t,o,u,i);if(f.done)return f.value}var h=c(i);h||(i=m(i));var v=o.global;if(v){var x=o.unicode;o.lastIndex=0}for(var S=[];;){var C=g(o,u);if(null===C)break;if(D(S,C),!v)break;&quot;&quot;===m(C[0])&amp;&amp;(o.lastIndex=d(u,p(o.lastIndex),x))}for(var M,F=&quot;&quot;,O=0,T=0;T&lt;S.length;T++){for(var B=m((C=S[T])[0]),_=b(w(l(C.index),u.length),0),k=[],I=1;I&lt;C.length;I++)D(k,void 0===(M=C[I])?M:String(M));var R=C.groups;if(h){var z=N([B],k,_,u);void 0!==R&amp;&amp;D(z,R);var q=m(n(i,void 0,z))}else q=y(B,u,_,k,R,i);_&gt;=O&amp;&amp;(F+=A(u,O,_)+q,O=_+B.length)}return F+A(u,O)}]}),!!u((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:&quot;7&quot;},e},&quot;7&quot;!==&quot;&quot;.replace(e,&quot;$&lt;a&gt;&quot;)}))||!S||C)},86:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2109),i=r(4230);n({target:&quot;String&quot;,proto:!0,forced:r(3429)(&quot;sub&quot;)},{sub:function(){return i(this,&quot;sub&quot;,&quot;&quot;,&quot;&quot;)}})},3650:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2109),i=r(1702),a=r(4488),o=r(9303),u=r(1340),s=i(&quot;&quot;.slice),c=Math.max,f=Math.min;n({target:&quot;String&quot;,proto:!0,forced:!&quot;&quot;.substr||&quot;b&quot;!==&quot;ab&quot;.substr(-1)},{substr:function(e,t){var r,n,i=u(a(this)),l=i.length,p=o(e);return p===1/0&amp;&amp;(p=0),p&lt;0&amp;&amp;(p=c(l+p,0)),(r=void 0===t?l:o(t))&lt;=0||r===1/0||p&gt;=(n=f(p+r,l))?&quot;&quot;:s(i,p,n)}})},3210:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2109),i=r(3111).trim;n({target:&quot;String&quot;,proto:!0,forced:r(6091)(&quot;trim&quot;)},{trim:function(){return i(this)}})},4032:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2109),i=r(7854),a=r(6916),o=r(1702),u=r(1913),s=r(9781),c=r(6293),f=r(7293),l=r(2597),p=r(7976),m=r(9670),h=r(5656),d=r(4948),v=r(1340),y=r(9114),g=r(30),x=r(1956),b=r(8006),w=r(1156),N=r(5181),D=r(1236),E=r(3070),A=r(6048),S=r(5296),C=r(8052),M=r(7045),F=r(2309),O=r(6200),T=r(3501),B=r(9711),_=r(5112),k=r(6061),I=r(6800),R=r(6532),z=r(8003),q=r(9909),j=r(2092).forEach,P=O(&quot;hidden&quot;),L=&quot;Symbol&quot;,U=&quot;prototype&quot;,$=q.set,H=q.getterFor(L),G=Object[U],V=i.Symbol,Z=V&amp;&amp;V[U],W=i.TypeError,Y=i.QObject,J=D.f,X=E.f,Q=w.f,K=S.f,ee=o([].push),te=F(&quot;symbols&quot;),re=F(&quot;op-symbols&quot;),ne=F(&quot;wks&quot;),ie=!Y||!Y[U]||!Y[U].findChild,ae=s&amp;&amp;f((function(){return 7!=g(X({},&quot;a&quot;,{get:function(){return X(this,&quot;a&quot;,{value:7}).a}})).a}))?function(e,t,r){var n=J(G,t);n&amp;&amp;delete G[t],X(e,t,r),n&amp;&amp;e!==G&amp;&amp;X(G,t,n)}:X,oe=function(e,t){var r=te[e]=g(Z);return $(r,{type:L,tag:e,description:t}),s||(r.description=t),r},ue=function(e,t,r){e===G&amp;&amp;ue(re,t,r),m(e);var n=d(t);return m(r),l(te,n)?(r.enumerable?(l(e,P)&amp;&amp;e[P][n]&amp;&amp;(e[P][n]=!1),r=g(r,{enumerable:y(0,!1)})):(l(e,P)||X(e,P,y(1,{})),e[P][n]=!0),ae(e,n,r)):X(e,n,r)},se=function(e,t){m(e);var r=h(t),n=x(r).concat(pe(r));return j(n,(function(t){s&amp;&amp;!a(ce,r,t)||ue(e,t,r[t])})),e},ce=function(e){var t=d(e),r=a(K,this,t);return!(this===G&amp;&amp;l(te,t)&amp;&amp;!l(re,t))&amp;&amp;(!(r||!l(this,t)||!l(te,t)||l(this,P)&amp;&amp;this[P][t])||r)},fe=function(e,t){var r=h(e),n=d(t);if(r!==G||!l(te,n)||l(re,n)){var i=J(r,n);return!i||!l(te,n)||l(r,P)&amp;&amp;r[P][n]||(i.enumerable=!0),i}},le=function(e){var t=Q(h(e)),r=[];return j(t,(function(e){l(te,e)||l(T,e)||ee(r,e)})),r},pe=function(e){var t=e===G,r=Q(t?re:h(e)),n=[];return j(r,(function(e){!l(te,e)||t&amp;&amp;!l(G,e)||ee(n,te[e])})),n};c||(C(Z=(V=function(){if(p(Z,this))throw W(&quot;Symbol is not a constructor&quot;);var e=arguments.length&amp;&amp;void 0!==arguments[0]?v(arguments[0]):void 0,t=B(e),r=function(e){this===G&amp;&amp;a(r,re,e),l(this,P)&amp;&amp;l(this[P],t)&amp;&amp;(this[P][t]=!1),ae(this,t,y(1,e))};return s&amp;&amp;ie&amp;&amp;ae(G,t,{configurable:!0,set:r}),oe(t,e)})[U],&quot;toString&quot;,(function(){return H(this).tag})),C(V,&quot;withoutSetter&quot;,(function(e){return oe(B(e),e)})),S.f=ce,E.f=ue,A.f=se,D.f=fe,b.f=w.f=le,N.f=pe,k.f=function(e){return oe(_(e),e)},s&amp;&amp;(M(Z,&quot;description&quot;,{configurable:!0,get:function(){return H(this).description}}),u||C(G,&quot;propertyIsEnumerable&quot;,ce,{unsafe:!0}))),n({global:!0,constructor:!0,wrap:!0,forced:!c,sham:!c},{Symbol:V}),j(x(ne),(function(e){I(e)})),n({target:L,stat:!0,forced:!c},{useSetter:function(){ie=!0},useSimple:function(){ie=!1}}),n({target:&quot;Object&quot;,stat:!0,forced:!c,sham:!s},{create:function(e,t){return void 0===t?g(e):se(g(e),t)},defineProperty:ue,defineProperties:se,getOwnPropertyDescriptor:fe}),n({target:&quot;Object&quot;,stat:!0,forced:!c},{getOwnPropertyNames:le}),R(),z(V,L),T[P]=!0},1817:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2109),i=r(9781),a=r(7854),o=r(1702),u=r(2597),s=r(614),c=r(7976),f=r(1340),l=r(7045),p=r(9920),m=a.Symbol,h=m&amp;&amp;m.prototype;if(i&amp;&amp;s(m)&amp;&amp;(!(&quot;description&quot;in h)||void 0!==m().description)){var d={},v=function(){var e=arguments.length&lt;1||void 0===arguments[0]?void 0:f(arguments[0]),t=c(h,this)?new m(e):void 0===e?m():m(e);return&quot;&quot;===e&amp;&amp;(d[t]=!0),t};p(v,m),v.prototype=h,h.constructor=v;var y=&quot;Symbol(test)&quot;==String(m(&quot;test&quot;)),g=o(h.valueOf),x=o(h.toString),b=/^Symbol\s((.*)\s)[^)]+$/,w=o(&quot;&quot;.replace),N=o(&quot;&quot;.slice);l(h,&quot;description&quot;,{configurable:!0,get:function(){var e=g(this);if(u(d,e))return&quot;&quot;;var t=x(e),r=y?N(t,7,-1):w(t,b,&quot;$1&quot;);return&quot;&quot;===r?void 0:r}}),n({global:!0,constructor:!0,forced:!0},{Symbol:v})}},763:(e,t,r)=&gt;{var n=r(2109),i=r(5005),a=r(2597),o=r(1340),u=r(2309),s=r(2015),c=u(&quot;string-to-symbol-registry&quot;),f=u(&quot;symbol-to-string-registry&quot;);n({target:&quot;Symbol&quot;,stat:!0,forced:!s},{for:function(e){var t=o(e);if(a(c,t))return c[t];var r=i(&quot;Symbol&quot;)(t);return c[t]=r,f[r]=t,r}})},2165:(e,t,r)=&gt;{r(6800)(&quot;iterator&quot;)},2526:(e,t,r)=&gt;{r(4032),r(763),r(6620),r(8862),r(9660)},6620:(e,t,r)=&gt;{var n=r(2109),i=r(2597),a=r(2190),o=r(6330),u=r(2309),s=r(2015),c=u(&quot;symbol-to-string-registry&quot;);n({target:&quot;Symbol&quot;,stat:!0,forced:!s},{keyFor:function(e){if(!a(e))throw TypeError(o(e)+&quot; is not a symbol&quot;);if(i(c,e))return c[e]}})},4747:(e,t,r)=&gt;{var n=r(7854),i=r(8324),a=r(8509),o=r(8533),u=r(8880),s=function(e){if(e&amp;&amp;e.forEach!==o)try{u(e,&quot;forEach&quot;,o)}catch(t){e.forEach=o}};for(var c in i)i[c]&amp;&amp;s(n[c]&amp;&amp;n[c].prototype);s(a)},3948:(e,t,r)=&gt;{var n=r(7854),i=r(8324),a=r(8509),o=r(6992),u=r(8880),s=r(5112),c=s(&quot;iterator&quot;),f=s(&quot;toStringTag&quot;),l=o.values,p=function(e,t){if(e){if(e[c]!==l)try{u(e,c,l)}catch(t){e[c]=l}if(e[f]||u(e,f,t),i[t])for(var r in o)if(e[r]!==o[r])try{u(e,r,o[r])}catch(t){e[r]=o[r]}}};for(var m in i)p(n[m]&amp;&amp;n[m].prototype,m);p(a,&quot;DOMTokenList&quot;)},3753:(e,t,r)=&gt;{&quot;use strict&quot;;var n=r(2109),i=r(6916);n({target:&quot;URL&quot;,proto:!0,enumerable:!0},{toJSON:function(){return i(URL.prototype.toString,this)}})},7928:e=&gt;{&quot;use strict&quot;;var t=Object.assign||function(e){for(var t=1;t&lt;arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&amp;&amp;(e[n]=r[n])}return e},r={&quot;{&quot;:&quot;\s\s{&quot;,&quot;}&quot;:&quot;\s\s}&quot;,&quot;\s\s&quot;:&quot;\s\stextbackslash{}&quot;,&quot;#&quot;:&quot;\s\s#&quot;,$:&quot;\s\s$&quot;,&quot;%&quot;:&quot;\s\s%&quot;,&quot;&amp;&quot;:&quot;\s\s&amp;&quot;,&quot;^&quot;:&quot;\s\stextasciicircum{}&quot;,_:&quot;\s\s_&quot;,&quot;~&quot;:&quot;\s\stextasciitilde{}&quot;},n={&quot;–&quot;:&quot;\s\s--&quot;,&quot;—&quot;:&quot;\s\s---&quot;,&quot; &quot;:&quot;~&quot;,&quot;\st&quot;:&quot;\s\sqquad{}&quot;,&quot;\sr\sn&quot;:&quot;\s\snewline{}&quot;,&quot;\sn&quot;:&quot;\s\snewline{}&quot;},i=function(e,r){return t({},e,r)};e.exports=function(e){for(var a=arguments.length&gt;1&amp;&amp;void 0!==arguments[1]?arguments[1]:{},o=a.preserveFormatting,u=void 0!==o&amp;&amp;o,s=a.escapeMapFn,c=void 0===s?i:s,f=String(e),l=&quot;&quot;,p=c(t({},r),u?t({},n):{}),m=Object.keys(p),h=function(){var e=!1;m.forEach((function(t,r){e||f.length&gt;=t.length&amp;&amp;f.slice(0,t.length)===t&amp;&amp;(l+=p[m[r]],f=f.slice(t.length,f.length),e=!0)})),e||(l+=f.slice(0,1),f=f.slice(1,f.length))};f;)h();return l}},5628:function(e,t){var r;!function(n){&quot;use strict&quot;;var i={s:1,n:0,d:1};function a(e,t){if(isNaN(e=parseInt(e,10)))throw f.InvalidParameter;return e*t}function o(e,t){if(0===t)throw f.DivisionByZero;var r=Object.create(f.prototype);r.s=e&lt;0?-1:1;var n=c(e=e&lt;0?-e:e,t);return r.n=e/n,r.d=t/n,r}function u(e){for(var t={},r=e,n=2,i=4;i&lt;=r;){for(;r%n==0;)r/=n,t[n]=(t[n]||0)+1;i+=1+2*n++}return r!==e?r&gt;1&amp;&amp;(t[r]=(t[r]||0)+1):t[e]=(t[e]||0)+1,t}var s=function(e,t){var r,n=0,o=1,u=1,s=0,c=0,l=0,p=1,m=1,h=0,d=1,v=1,y=1,g=1e7;if(null==e);else if(void 0!==t){if(u=(n=e)*(o=t),n%1!=0||o%1!=0)throw f.NonIntegerParameter}else switch(typeof e){case&quot;object&quot;:if(&quot;d&quot;in e&amp;&amp;&quot;n&quot;in e)n=e.n,o=e.d,&quot;s&quot;in e&amp;&amp;(n*=e.s);else{if(!(0 in e))throw f.InvalidParameter;n=e[0],1 in e&amp;&amp;(o=e[1])}u=n*o;break;case&quot;number&quot;:if(e&lt;0&amp;&amp;(u=e,e=-e),e%1==0)n=e;else if(e&gt;0){for(e&gt;=1&amp;&amp;(e/=m=Math.pow(10,Math.floor(1+Math.log(e)/Math.LN10)));d&lt;=g&amp;&amp;y&lt;=g;){if(e===(r=(h+v)/(d+y))){d+y&lt;=g?(n=h+v,o=d+y):y&gt;d?(n=v,o=y):(n=h,o=d);break}e&gt;r?(h+=v,d+=y):(v+=h,y+=d),d&gt;g?(n=v,o=y):(n=h,o=d)}n*=m}else(isNaN(e)||isNaN(t))&amp;&amp;(o=n=NaN);break;case&quot;string&quot;:if(null===(d=e.match(/\sd+|./g)))throw f.InvalidParameter;if(&quot;-&quot;===d[h]?(u=-1,h++):&quot;+&quot;===d[h]&amp;&amp;h++,d.length===h+1?c=a(d[h++],u):&quot;.&quot;===d[h+1]||&quot;.&quot;===d[h]?(&quot;.&quot;!==d[h]&amp;&amp;(s=a(d[h++],u)),(1+ ++h===d.length||&quot;(&quot;===d[h+1]&amp;&amp;&quot;)&quot;===d[h+3]||&quot;'&quot;===d[h+1]&amp;&amp;&quot;'&quot;===d[h+3])&amp;&amp;(c=a(d[h],u),p=Math.pow(10,d[h].length),h++),(&quot;(&quot;===d[h]&amp;&amp;&quot;)&quot;===d[h+2]||&quot;'&quot;===d[h]&amp;&amp;&quot;'&quot;===d[h+2])&amp;&amp;(l=a(d[h+1],u),m=Math.pow(10,d[h+1].length)-1,h+=3)):&quot;/&quot;===d[h+1]||&quot;:&quot;===d[h+1]?(c=a(d[h],u),p=a(d[h+2],1),h+=3):&quot;/&quot;===d[h+3]&amp;&amp;&quot; &quot;===d[h+1]&amp;&amp;(s=a(d[h],u),c=a(d[h+2],u),p=a(d[h+4],1),h+=5),d.length&lt;=h){u=n=l+(o=p*m)*s+m*c;break}default:throw f.InvalidParameter}if(0===o)throw f.DivisionByZero;i.s=u&lt;0?-1:1,i.n=Math.abs(n),i.d=Math.abs(o)};function c(e,t){if(!e)return t;if(!t)return e;for(;;){if(!(e%=t))return t;if(!(t%=e))return e}}function f(e,t){if(s(e,t),!(this instanceof f))return o(i.s*i.n,i.d);e=c(i.d,i.n),this.s=i.s,this.n=i.n/e,this.d=i.d/e}f.DivisionByZero=new Error(&quot;Division by Zero&quot;),f.InvalidParameter=new Error(&quot;Invalid argument&quot;),f.NonIntegerParameter=new Error(&quot;Parameters must be integer&quot;),f.prototype={s:1,n:0,d:1,abs:function(){return o(this.n,this.d)},neg:function(){return o(-this.s*this.n,this.d)},add:function(e,t){return s(e,t),o(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d)},sub:function(e,t){return s(e,t),o(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d)},mul:function(e,t){return s(e,t),o(this.s*i.s*this.n*i.n,this.d*i.d)},div:function(e,t){return s(e,t),o(this.s*i.s*this.n*i.d,this.d*i.n)},clone:function(){return o(this.s*this.n,this.d)},mod:function(e,t){if(isNaN(this.n)||isNaN(this.d))return new f(NaN);if(void 0===e)return o(this.s*this.n%this.d,1);if(s(e,t),0===i.n&amp;&amp;0===this.d)throw f.DivisionByZero;return o(this.s*(i.d*this.n)%(i.n*this.d),i.d*this.d)},gcd:function(e,t){return s(e,t),o(c(i.n,this.n)*c(i.d,this.d),i.d*this.d)},lcm:function(e,t){return s(e,t),0===i.n&amp;&amp;0===this.n?o(0,1):o(i.n*this.n,c(i.n,this.n)*c(i.d,this.d))},ceil:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new f(NaN):o(Math.ceil(e*this.s*this.n/this.d),e)},floor:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new f(NaN):o(Math.floor(e*this.s*this.n/this.d),e)},round:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new f(NaN):o(Math.round(e*this.s*this.n/this.d),e)},inverse:function(){return o(this.s*this.d,this.n)},pow:function(e,t){if(s(e,t),1===i.d)return i.s&lt;0?o(Math.pow(this.s*this.d,i.n),Math.pow(this.n,i.n)):o(Math.pow(this.s*this.n,i.n),Math.pow(this.d,i.n));if(this.s&lt;0)return null;var r=u(this.n),n=u(this.d),a=1,c=1;for(var f in r)if(&quot;1&quot;!==f){if(&quot;0&quot;===f){a=0;break}if(r[f]*=i.n,r[f]%i.d!=0)return null;r[f]/=i.d,a*=Math.pow(f,r[f])}for(var f in n)if(&quot;1&quot;!==f){if(n[f]*=i.n,n[f]%i.d!=0)return null;n[f]/=i.d,c*=Math.pow(f,n[f])}return i.s&lt;0?o(c,a):o(a,c)},equals:function(e,t){return s(e,t),this.s*this.n*i.d==i.s*i.n*this.d},compare:function(e,t){s(e,t);var r=this.s*this.n*i.d-i.s*i.n*this.d;return(0&lt;r)-(r&lt;0)},simplify:function(e){if(isNaN(this.n)||isNaN(this.d))return this;e=e||.001;for(var t=this.abs(),r=t.toContinued(),n=1;n&lt;r.length;n++){for(var i=o(r[n-1],1),a=n-2;a&gt;=0;a--)i=i.inverse().add(r[a]);if(i.sub(t).abs().valueOf()&lt;e)return i.mul(this.s)}return this},divisible:function(e,t){return s(e,t),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(e){var t,r=&quot;&quot;,n=this.n,i=this.d;return this.s&lt;0&amp;&amp;(r+=&quot;-&quot;),1===i?r+=n:(e&amp;&amp;(t=Math.floor(n/i))&gt;0&amp;&amp;(r+=t,r+=&quot; &quot;,n%=i),r+=n,r+=&quot;/&quot;,r+=i),r},toLatex:function(e){var t,r=&quot;&quot;,n=this.n,i=this.d;return this.s&lt;0&amp;&amp;(r+=&quot;-&quot;),1===i?r+=n:(e&amp;&amp;(t=Math.floor(n/i))&gt;0&amp;&amp;(r+=t,n%=i),r+=&quot;\s\sfrac{&quot;,r+=n,r+=&quot;}{&quot;,r+=i,r+=&quot;}&quot;),r},toContinued:function(){var e,t=this.n,r=this.d,n=[];if(isNaN(t)||isNaN(r))return n;do{n.push(Math.floor(t/r)),e=t%r,t=r,r=e}while(1!==t);return n},toString:function(e){var t=this.n,r=this.d;if(isNaN(t)||isNaN(r))return&quot;NaN&quot;;e=e||15;var n=function(e,t){for(;t%2==0;t/=2);for(;t%5==0;t/=5);if(1===t)return 0;for(var r=10%t,n=1;1!==r;n++)if(r=10*r%t,n&gt;2e3)return 0;return n}(0,r),i=function(e,t,r){for(var n=1,i=function(e,t,r){for(var n=1;t&gt;0;e=e*e%r,t&gt;&gt;=1)1&amp;t&amp;&amp;(n=n*e%r);return n}(10,r,t),a=0;a&lt;300;a++){if(n===i)return a;n=10*n%t,i=10*i%t}return 0}(0,r,n),a=this.s&lt;0?&quot;-&quot;:&quot;&quot;;if(a+=t/r|0,t%=r,(t*=10)&amp;&amp;(a+=&quot;.&quot;),n){for(var o=i;o--;)a+=t/r|0,t%=r,t*=10;for(a+=&quot;(&quot;,o=n;o--;)a+=t/r|0,t%=r,t*=10;a+=&quot;)&quot;}else for(o=e;t&amp;&amp;o--;)a+=t/r|0,t%=r,t*=10;return a}},void 0===(r=function(){return f}.apply(t,[]))||(e.exports=r)}()},3228:e=&gt;{e.exports=function e(t,r){&quot;use strict&quot;;var n,i,a=/(^([+\s-]?(?:0|[1-9]\sd*)(?:\s.\sd*)?(?:[eE][+\s-]?\sd+)?)?$|^0x[0-9a-f]+$|\sd+)/gi,o=/(^[ ]*|[ ]*$)/g,u=/(^([\sw ]+,?[\sw ]+)?[\sw ]+,?[\sw ]+\sd+:\sd+(:\sd+)?[\sw ]?|^\sd{1,4}[\s/\s-]\sd{1,4}[\s/\s-]\sd{1,4}|^\sw+, \sw+ \sd+, \sd{4})/,s=/^0x[0-9a-f]+$/i,c=/^0/,f=function(t){return e.insensitive&amp;&amp;(&quot;&quot;+t).toLowerCase()||&quot;&quot;+t},l=f(t).replace(o,&quot;&quot;)||&quot;&quot;,p=f(r).replace(o,&quot;&quot;)||&quot;&quot;,m=l.replace(a,&quot;\s0$1\s0&quot;).replace(/\s0$/,&quot;&quot;).replace(/^\s0/,&quot;&quot;).split(&quot;\s0&quot;),h=p.replace(a,&quot;\s0$1\s0&quot;).replace(/\s0$/,&quot;&quot;).replace(/^\s0/,&quot;&quot;).split(&quot;\s0&quot;),d=parseInt(l.match(s),16)||1!==m.length&amp;&amp;l.match(u)&amp;&amp;Date.parse(l),v=parseInt(p.match(s),16)||d&amp;&amp;p.match(u)&amp;&amp;Date.parse(p)||null;if(v){if(d&lt;v)return-1;if(d&gt;v)return 1}for(var y=0,g=Math.max(m.length,h.length);y&lt;g;y++){if(n=!(m[y]||&quot;&quot;).match(c)&amp;&amp;parseFloat(m[y])||m[y]||0,i=!(h[y]||&quot;&quot;).match(c)&amp;&amp;parseFloat(h[y])||h[y]||0,isNaN(n)!==isNaN(i))return isNaN(n)?1:-1;if(typeof n!=typeof i&amp;&amp;(n+=&quot;&quot;,i+=&quot;&quot;),n&lt;i)return-1;if(n&gt;i)return 1}return 0}},6377:(e,t,r)=&gt;{var n=r(4832),i=r(8652),a=r(801),o=r(2030),u=r(3618),s=r(9049),c=r(1971);c.alea=n,c.xor128=i,c.xorwow=a,c.xorshift7=o,c.xor4096=u,c.tychei=s,e.exports=c},4832:function(e,t,r){var n;!function(e,i,a){function o(e){var t,r=this,n=(t=4022871197,function(e){e=String(e);for(var r=0;r&lt;e.length;r++){var n=.02519603282416938*(t+=e.charCodeAt(r));n-=t=n&gt;&gt;&gt;0,t=(n*=t)&gt;&gt;&gt;0,t+=4294967296*(n-=t)}return 2.3283064365386963e-10*(t&gt;&gt;&gt;0)});r.next=function(){var e=2091639*r.s0+2.3283064365386963e-10*r.c;return r.s0=r.s1,r.s1=r.s2,r.s2=e-(r.c=0|e)},r.c=1,r.s0=n(&quot; &quot;),r.s1=n(&quot; &quot;),r.s2=n(&quot; &quot;),r.s0-=n(e),r.s0&lt;0&amp;&amp;(r.s0+=1),r.s1-=n(e),r.s1&lt;0&amp;&amp;(r.s1+=1),r.s2-=n(e),r.s2&lt;0&amp;&amp;(r.s2+=1),n=null}function u(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function s(e,t){var r=new o(e),n=t&amp;&amp;t.state,i=r.next;return i.int32=function(){return 4294967296*r.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,n&amp;&amp;(&quot;object&quot;==typeof n&amp;&amp;u(n,r),i.state=function(){return u(r,{})}),i}i&amp;&amp;i.exports?i.exports=s:r.amdD&amp;&amp;r.amdO?void 0===(n=function(){return s}.call(t,r,t,i))||(i.exports=n):this.alea=s}(0,e=r.nmd(e),r.amdD)},9049:function(e,t,r){var n;!function(e,i,a){function o(e){var t=this,r=&quot;&quot;;t.next=function(){var e=t.b,r=t.c,n=t.d,i=t.a;return e=e&lt;&lt;25^e&gt;&gt;&gt;7^r,r=r-n|0,n=n&lt;&lt;24^n&gt;&gt;&gt;8^i,i=i-e|0,t.b=e=e&lt;&lt;20^e&gt;&gt;&gt;12^r,t.c=r=r-n|0,t.d=n&lt;&lt;16^r&gt;&gt;&gt;16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):r+=e;for(var n=0;n&lt;r.length+20;n++)t.b^=0|r.charCodeAt(n),t.next()}function u(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function s(e,t){var r=new o(e),n=t&amp;&amp;t.state,i=function(){return(r.next()&gt;&gt;&gt;0)/4294967296};return i.double=function(){do{var e=((r.next()&gt;&gt;&gt;11)+(r.next()&gt;&gt;&gt;0)/4294967296)/(1&lt;&lt;21)}while(0===e);return e},i.int32=r.next,i.quick=i,n&amp;&amp;(&quot;object&quot;==typeof n&amp;&amp;u(n,r),i.state=function(){return u(r,{})}),i}i&amp;&amp;i.exports?i.exports=s:r.amdD&amp;&amp;r.amdO?void 0===(n=function(){return s}.call(t,r,t,i))||(i.exports=n):this.tychei=s}(0,e=r.nmd(e),r.amdD)},8652:function(e,t,r){var n;!function(e,i,a){function o(e){var t=this,r=&quot;&quot;;t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x&lt;&lt;11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w&gt;&gt;&gt;19^e^e&gt;&gt;&gt;8},e===(0|e)?t.x=e:r+=e;for(var n=0;n&lt;r.length+64;n++)t.x^=0|r.charCodeAt(n),t.next()}function u(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function s(e,t){var r=new o(e),n=t&amp;&amp;t.state,i=function(){return(r.next()&gt;&gt;&gt;0)/4294967296};return i.double=function(){do{var e=((r.next()&gt;&gt;&gt;11)+(r.next()&gt;&gt;&gt;0)/4294967296)/(1&lt;&lt;21)}while(0===e);return e},i.int32=r.next,i.quick=i,n&amp;&amp;(&quot;object&quot;==typeof n&amp;&amp;u(n,r),i.state=function(){return u(r,{})}),i}i&amp;&amp;i.exports?i.exports=s:r.amdD&amp;&amp;r.amdO?void 0===(n=function(){return s}.call(t,r,t,i))||(i.exports=n):this.xor128=s}(0,e=r.nmd(e),r.amdD)},3618:function(e,t,r){var n;!function(e,i,a){function o(e){var t=this;t.next=function(){var e,r,n=t.w,i=t.X,a=t.i;return t.w=n=n+1640531527|0,r=i[a+34&amp;127],e=i[a=a+1&amp;127],r^=r&lt;&lt;13,e^=e&lt;&lt;17,r^=r&gt;&gt;&gt;15,e^=e&gt;&gt;&gt;12,r=i[a]=r^e,t.i=a,r+(n^n&gt;&gt;&gt;16)|0},function(e,t){var r,n,i,a,o,u=[],s=128;for(t===(0|t)?(n=t,t=null):(t+=&quot;\s0&quot;,n=0,s=Math.max(s,t.length)),i=0,a=-32;a&lt;s;++a)t&amp;&amp;(n^=t.charCodeAt((a+32)%t.length)),0===a&amp;&amp;(o=n),n^=n&lt;&lt;10,n^=n&gt;&gt;&gt;15,n^=n&lt;&lt;4,n^=n&gt;&gt;&gt;13,a&gt;=0&amp;&amp;(o=o+1640531527|0,i=0==(r=u[127&amp;a]^=n+o)?i+1:0);for(i&gt;=128&amp;&amp;(u[127&amp;(t&amp;&amp;t.length||0)]=-1),i=127,a=512;a&gt;0;--a)n=u[i+34&amp;127],r=u[i=i+1&amp;127],n^=n&lt;&lt;13,r^=r&lt;&lt;17,n^=n&gt;&gt;&gt;15,r^=r&gt;&gt;&gt;12,u[i]=n^r;e.w=o,e.X=u,e.i=i}(t,e)}function u(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function s(e,t){null==e&amp;&amp;(e=+new Date);var r=new o(e),n=t&amp;&amp;t.state,i=function(){return(r.next()&gt;&gt;&gt;0)/4294967296};return i.double=function(){do{var e=((r.next()&gt;&gt;&gt;11)+(r.next()&gt;&gt;&gt;0)/4294967296)/(1&lt;&lt;21)}while(0===e);return e},i.int32=r.next,i.quick=i,n&amp;&amp;(n.X&amp;&amp;u(n,r),i.state=function(){return u(r,{})}),i}i&amp;&amp;i.exports?i.exports=s:r.amdD&amp;&amp;r.amdO?void 0===(n=function(){return s}.call(t,r,t,i))||(i.exports=n):this.xor4096=s}(0,e=r.nmd(e),r.amdD)},2030:function(e,t,r){var n;!function(e,i,a){function o(e){var t=this;t.next=function(){var e,r,n=t.x,i=t.i;return e=n[i],r=(e^=e&gt;&gt;&gt;7)^e&lt;&lt;24,r^=(e=n[i+1&amp;7])^e&gt;&gt;&gt;10,r^=(e=n[i+3&amp;7])^e&gt;&gt;&gt;3,r^=(e=n[i+4&amp;7])^e&lt;&lt;7,e=n[i+7&amp;7],r^=(e^=e&lt;&lt;13)^e&lt;&lt;9,n[i]=r,t.i=i+1&amp;7,r},function(e,t){var r,n=[];if(t===(0|t))n[0]=t;else for(t=&quot;&quot;+t,r=0;r&lt;t.length;++r)n[7&amp;r]=n[7&amp;r]&lt;&lt;15^t.charCodeAt(r)+n[r+1&amp;7]&lt;&lt;13;for(;n.length&lt;8;)n.push(0);for(r=0;r&lt;8&amp;&amp;0===n[r];++r);for(8==r?n[7]=-1:n[r],e.x=n,e.i=0,r=256;r&gt;0;--r)e.next()}(t,e)}function u(e,t){return t.x=e.x.slice(),t.i=e.i,t}function s(e,t){null==e&amp;&amp;(e=+new Date);var r=new o(e),n=t&amp;&amp;t.state,i=function(){return(r.next()&gt;&gt;&gt;0)/4294967296};return i.double=function(){do{var e=((r.next()&gt;&gt;&gt;11)+(r.next()&gt;&gt;&gt;0)/4294967296)/(1&lt;&lt;21)}while(0===e);return e},i.int32=r.next,i.quick=i,n&amp;&amp;(n.x&amp;&amp;u(n,r),i.state=function(){return u(r,{})}),i}i&amp;&amp;i.exports?i.exports=s:r.amdD&amp;&amp;r.amdO?void 0===(n=function(){return s}.call(t,r,t,i))||(i.exports=n):this.xorshift7=s}(0,e=r.nmd(e),r.amdD)},801:function(e,t,r){var n;!function(e,i,a){function o(e){var t=this,r=&quot;&quot;;t.next=function(){var e=t.x^t.x&gt;&gt;&gt;2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v&lt;&lt;4^e^e&lt;&lt;1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:r+=e;for(var n=0;n&lt;r.length+64;n++)t.x^=0|r.charCodeAt(n),n==r.length&amp;&amp;(t.d=t.x&lt;&lt;10^t.x&gt;&gt;&gt;4),t.next()}function u(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function s(e,t){var r=new o(e),n=t&amp;&amp;t.state,i=function(){return(r.next()&gt;&gt;&gt;0)/4294967296};return i.double=function(){do{var e=((r.next()&gt;&gt;&gt;11)+(r.next()&gt;&gt;&gt;0)/4294967296)/(1&lt;&lt;21)}while(0===e);return e},i.int32=r.next,i.quick=i,n&amp;&amp;(&quot;object&quot;==typeof n&amp;&amp;u(n,r),i.state=function(){return u(r,{})}),i}i&amp;&amp;i.exports?i.exports=s:r.amdD&amp;&amp;r.amdO?void 0===(n=function(){return s}.call(t,r,t,i))||(i.exports=n):this.xorwow=s}(0,e=r.nmd(e),r.amdD)},1971:function(e,t,r){var n;!function(i,a,o){var u,s=256,c=o.pow(s,6),f=o.pow(2,52),l=2*f,p=s-1;function m(e,t,r){var n=[],p=y(v((t=1==t?{entropy:!0}:t||{}).entropy?[e,g(a)]:null==e?function(){try{var e;return u&amp;&amp;(e=u.randomBytes)?e=e(s):(e=new Uint8Array(s),(i.crypto||i.msCrypto).getRandomValues(e)),g(e)}catch(e){var t=i.navigator,r=t&amp;&amp;t.plugins;return[+new Date,i,r,i.screen,g(a)]}}():e,3),n),m=new h(n),x=function(){for(var e=m.g(6),t=c,r=0;e&lt;f;)e=(e+r)*s,t*=s,r=m.g(1);for(;e&gt;=l;)e/=2,t/=2,r&gt;&gt;&gt;=1;return(e+r)/t};return x.int32=function(){return 0|m.g(4)},x.quick=function(){return m.g(4)/4294967296},x.double=x,y(g(m.S),a),(t.pass||r||function(e,t,r,n){return n&amp;&amp;(n.S&amp;&amp;d(n,m),e.state=function(){return d(m,{})}),r?(o.random=e,t):e})(x,p,&quot;global&quot;in t?t.global:this==o,t.state)}function h(e){var t,r=e.length,n=this,i=0,a=n.i=n.j=0,o=n.S=[];for(r||(e=[r++]);i&lt;s;)o[i]=i++;for(i=0;i&lt;s;i++)o[i]=o[a=p&amp;a+e[i%r]+(t=o[i])],o[a]=t;(n.g=function(e){for(var t,r=0,i=n.i,a=n.j,o=n.S;e--;)t=o[i=p&amp;i+1],r=r*s+o[p&amp;(o[i]=o[a=p&amp;a+t])+(o[a]=t)];return n.i=i,n.j=a,r})(s)}function d(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function v(e,t){var r,n=[],i=typeof e;if(t&amp;&amp;&quot;object&quot;==i)for(r in e)try{n.push(v(e[r],t-1))}catch(e){}return n.length?n:&quot;string&quot;==i?e:e+&quot;\s0&quot;}function y(e,t){for(var r,n=e+&quot;&quot;,i=0;i&lt;n.length;)t[p&amp;i]=p&amp;(r^=19*t[p&amp;i])+n.charCodeAt(i++);return g(t)}function g(e){return String.fromCharCode.apply(0,e)}if(y(o.random(),a),e.exports){e.exports=m;try{u=r(5042)}catch(e){}}else void 0===(n=function(){return m}.call(t,r,t,e))||(e.exports=n)}(&quot;undefined&quot;!=typeof self?self:this,[],Math)},4279:e=&gt;{function t(){}t.prototype={on:function(e,t,r){var n=this.e||(this.e={});return(n[e]||(n[e]=[])).push({fn:t,ctx:r}),this},once:function(e,t,r){var n=this;function i(){n.off(e,i),t.apply(r,arguments)}return i._=t,this.on(e,i,r)},emit:function(e){for(var t=[].slice.call(arguments,1),r=((this.e||(this.e={}))[e]||[]).slice(),n=0,i=r.length;n&lt;i;n++)r[n].fn.apply(r[n].ctx,t);return this},off:function(e,t){var r=this.e||(this.e={}),n=r[e],i=[];if(n&amp;&amp;t)for(var a=0,o=n.length;a&lt;o;a++)n[a].fn!==t&amp;&amp;n[a].fn._!==t&amp;&amp;i.push(n[a]);return i.length?r[e]=i:delete r[e],this}},e.exports=t,e.exports.TinyEmitter=t},5042:()=&gt;{},7061:(e,t,r)=&gt;{var n=r(8698).default;function i(){&quot;use strict&quot;;e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},r=Object.prototype,a=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},u=&quot;function&quot;==typeof Symbol?Symbol:{},s=u.iterator||&quot;@@iterator&quot;,c=u.asyncIterator||&quot;@@asyncIterator&quot;,f=u.toStringTag||&quot;@@toStringTag&quot;;function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},&quot;&quot;)}catch(e){l=function(e,t,r){return e[t]=r}}function p(e,t,r,n){var i=t&amp;&amp;t.prototype instanceof d?t:d,a=Object.create(i.prototype),u=new M(n||[]);return o(a,&quot;_invoke&quot;,{value:E(e,r,u)}),a}function m(e,t,r){try{return{type:&quot;normal&quot;,arg:e.call(t,r)}}catch(e){return{type:&quot;throw&quot;,arg:e}}}t.wrap=p;var h={};function d(){}function v(){}function y(){}var g={};l(g,s,(function(){return this}));var x=Object.getPrototypeOf,b=x&amp;&amp;x(x(F([])));b&amp;&amp;b!==r&amp;&amp;a.call(b,s)&amp;&amp;(g=b);var w=y.prototype=d.prototype=Object.create(g);function N(e){[&quot;next&quot;,&quot;throw&quot;,&quot;return&quot;].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function D(e,t){function r(i,o,u,s){var c=m(e[i],e,o);if(&quot;throw&quot;!==c.type){var f=c.arg,l=f.value;return l&amp;&amp;&quot;object&quot;==n(l)&amp;&amp;a.call(l,&quot;__await&quot;)?t.resolve(l.__await).then((function(e){r(&quot;next&quot;,e,u,s)}),(function(e){r(&quot;throw&quot;,e,u,s)})):t.resolve(l).then((function(e){f.value=e,u(f)}),(function(e){return r(&quot;throw&quot;,e,u,s)}))}s(c.arg)}var i;o(this,&quot;_invoke&quot;,{value:function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}})}function E(e,t,r){var n=&quot;suspendedStart&quot;;return function(i,a){if(&quot;executing&quot;===n)throw new Error(&quot;Generator is already running&quot;);if(&quot;completed&quot;===n){if(&quot;throw&quot;===i)throw a;return{value:void 0,done:!0}}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var u=A(o,r);if(u){if(u===h)continue;return u}}if(&quot;next&quot;===r.method)r.sent=r._sent=r.arg;else if(&quot;throw&quot;===r.method){if(&quot;suspendedStart&quot;===n)throw n=&quot;completed&quot;,r.arg;r.dispatchException(r.arg)}else&quot;return&quot;===r.method&amp;&amp;r.abrupt(&quot;return&quot;,r.arg);n=&quot;executing&quot;;var s=m(e,t,r);if(&quot;normal&quot;===s.type){if(n=r.done?&quot;completed&quot;:&quot;suspendedYield&quot;,s.arg===h)continue;return{value:s.arg,done:r.done}}&quot;throw&quot;===s.type&amp;&amp;(n=&quot;completed&quot;,r.method=&quot;throw&quot;,r.arg=s.arg)}}}function A(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,&quot;throw&quot;===r&amp;&amp;e.iterator.return&amp;&amp;(t.method=&quot;return&quot;,t.arg=void 0,A(e,t),&quot;throw&quot;===t.method)||&quot;return&quot;!==r&amp;&amp;(t.method=&quot;throw&quot;,t.arg=new TypeError(&quot;The iterator does not provide a '&quot;+r+&quot;' method&quot;)),h;var i=m(n,e.iterator,t.arg);if(&quot;throw&quot;===i.type)return t.method=&quot;throw&quot;,t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,&quot;return&quot;!==t.method&amp;&amp;(t.method=&quot;next&quot;,t.arg=void 0),t.delegate=null,h):a:(t.method=&quot;throw&quot;,t.arg=new TypeError(&quot;iterator result is not an object&quot;),t.delegate=null,h)}function S(e){var t={tryLoc:e[0]};1 in e&amp;&amp;(t.catchLoc=e[1]),2 in e&amp;&amp;(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type=&quot;normal&quot;,delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:&quot;root&quot;}],e.forEach(S,this),this.reset(!0)}function F(e){if(e){var t=e[s];if(t)return t.call(e);if(&quot;function&quot;==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r&lt;e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:O}}function O(){return{value:void 0,done:!0}}return v.prototype=y,o(w,&quot;constructor&quot;,{value:y,configurable:!0}),o(y,&quot;constructor&quot;,{value:v,configurable:!0}),v.displayName=l(y,f,&quot;GeneratorFunction&quot;),t.isGeneratorFunction=function(e){var t=&quot;function&quot;==typeof e&amp;&amp;e.constructor;return!!t&amp;&amp;(t===v||&quot;GeneratorFunction&quot;===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,f,&quot;GeneratorFunction&quot;)),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},N(D.prototype),l(D.prototype,c,(function(){return this})),t.AsyncIterator=D,t.async=function(e,r,n,i,a){void 0===a&amp;&amp;(a=Promise);var o=new D(p(e,r,n,i),a);return t.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},N(w),l(w,f,&quot;Generator&quot;),l(w,s,(function(){return this})),l(w,&quot;toString&quot;,(function(){return&quot;[object Generator]&quot;})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=F,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method=&quot;next&quot;,this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)&quot;t&quot;===t.charAt(0)&amp;&amp;a.call(this,t)&amp;&amp;!isNaN(+t.slice(1))&amp;&amp;(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if(&quot;throw&quot;===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return o.type=&quot;throw&quot;,o.arg=e,t.next=r,n&amp;&amp;(t.method=&quot;next&quot;,t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n&gt;=0;--n){var i=this.tryEntries[n],o=i.completion;if(&quot;root&quot;===i.tryLoc)return r(&quot;end&quot;);if(i.tryLoc&lt;=this.prev){var u=a.call(i,&quot;catchLoc&quot;),s=a.call(i,&quot;finallyLoc&quot;);if(u&amp;&amp;s){if(this.prev&lt;i.catchLoc)return r(i.catchLoc,!0);if(this.prev&lt;i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev&lt;i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error(&quot;try statement without catch or finally&quot;);if(this.prev&lt;i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r&gt;=0;--r){var n=this.tryEntries[r];if(n.tryLoc&lt;=this.prev&amp;&amp;a.call(n,&quot;finallyLoc&quot;)&amp;&amp;this.prev&lt;n.finallyLoc){var i=n;break}}i&amp;&amp;(&quot;break&quot;===e||&quot;continue&quot;===e)&amp;&amp;i.tryLoc&lt;=t&amp;&amp;t&lt;=i.finallyLoc&amp;&amp;(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method=&quot;next&quot;,this.next=i.finallyLoc,h):this.complete(o)},complete:function(e,t){if(&quot;throw&quot;===e.type)throw e.arg;return&quot;break&quot;===e.type||&quot;continue&quot;===e.type?this.next=e.arg:&quot;return&quot;===e.type?(this.rval=this.arg=e.arg,this.method=&quot;return&quot;,this.next=&quot;end&quot;):&quot;normal&quot;===e.type&amp;&amp;t&amp;&amp;(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t&gt;=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t&gt;=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if(&quot;throw&quot;===n.type){var i=n.arg;C(r)}return i}}throw new Error(&quot;illegal catch attempt&quot;)},delegateYield:function(e,t,r){return this.delegate={iterator:F(e),resultName:t,nextLoc:r},&quot;next&quot;===this.method&amp;&amp;(this.arg=void 0),h}},t}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},8698:e=&gt;{function t(r){return e.exports=t=&quot;function&quot;==typeof Symbol&amp;&amp;&quot;symbol&quot;==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&amp;&amp;&quot;function&quot;==typeof Symbol&amp;&amp;e.constructor===Symbol&amp;&amp;e!==Symbol.prototype?&quot;symbol&quot;:typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4687:(e,t,r)=&gt;{var n=r(7061)();e.exports=n;try{regeneratorRuntime=n}catch(e){&quot;object&quot;==typeof globalThis?globalThis.regeneratorRuntime=n:Function(&quot;r&quot;,&quot;regeneratorRuntime = r&quot;)(n)}},4814:function(e){e.exports=function(){&quot;use strict&quot;;function e(e,r){var n=&quot;undefined&quot;!=typeof Symbol&amp;&amp;e[Symbol.iterator]||e[&quot;@@iterator&quot;];if(!n){if(Array.isArray(e)||(n=function(e,r){if(e){if(&quot;string&quot;==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return&quot;Object&quot;===n&amp;&amp;e.constructor&amp;&amp;(n=e.constructor.name),&quot;Map&quot;===n||&quot;Set&quot;===n?Array.from(e):&quot;Arguments&quot;===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}(e))||r&amp;&amp;e&amp;&amp;&quot;number&quot;==typeof e.length){n&amp;&amp;(e=n);var i=0,a=function(){};return{s:a,n:function(){return i&gt;=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError(&quot;Invalid attempt to iterate non-iterable instance.\snIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.&quot;)}var o,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}function t(e,t){(null==t||t&gt;e.length)&amp;&amp;(t=e.length);for(var r=0,n=new Array(t);r&lt;t;r++)n[r]=e[r];return n}function r(e){return r=&quot;function&quot;==typeof Symbol&amp;&amp;&quot;symbol&quot;==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&amp;&amp;&quot;function&quot;==typeof Symbol&amp;&amp;e.constructor===Symbol&amp;&amp;e!==Symbol.prototype?&quot;symbol&quot;:typeof e},r(e)}function n(){return!0}function i(){return!1}function a(){}var o=&quot;Argument is not a typed-function.&quot;;return function t(){function u(e){return&quot;object&quot;===r(e)&amp;&amp;null!==e&amp;&amp;e.constructor===Object}var s,c,f=[{name:&quot;number&quot;,test:function(e){return&quot;number&quot;==typeof e}},{name:&quot;string&quot;,test:function(e){return&quot;string&quot;==typeof e}},{name:&quot;boolean&quot;,test:function(e){return&quot;boolean&quot;==typeof e}},{name:&quot;Function&quot;,test:function(e){return&quot;function&quot;==typeof e}},{name:&quot;Array&quot;,test:Array.isArray},{name:&quot;Date&quot;,test:function(e){return e instanceof Date}},{name:&quot;RegExp&quot;,test:function(e){return e instanceof RegExp}},{name:&quot;Object&quot;,test:u},{name:&quot;null&quot;,test:function(e){return null===e}},{name:&quot;undefined&quot;,test:function(e){return void 0===e}}],l={name:&quot;any&quot;,test:n,isAny:!0},p=0,m={createCount:0};function h(t){var r=s.get(t);if(r)return r;var n,i,a='Unknown type &quot;'+t+'&quot;',o=t.toLowerCase(),u=e(c);try{for(u.s();!(i=u.n()).done;)if((n=i.value).toLowerCase()===o){a+='. Did you mean &quot;'+n+'&quot; ?';break}}catch(e){u.e(e)}finally{u.f()}throw new TypeError(a)}function d(e){for(var t=arguments.length&gt;1&amp;&amp;void 0!==arguments[1]?arguments[1]:&quot;any&quot;,r=t?h(t).index:c.length,n=[],i=0;i&lt;e.length;++i){if(!e[i]||&quot;string&quot;!=typeof e[i].name||&quot;function&quot;!=typeof e[i].test)throw new TypeError(&quot;Object with properties {name: string, test: function} expected&quot;);var a=e[i].name;if(s.has(a))throw new TypeError('Duplicate type name &quot;'+a+'&quot;');n.push(a),s.set(a,{name:a,test:e[i].test,isAny:e[i].isAny,index:r+i,conversionsTo:[]})}var o=c.slice(r);c=c.slice(0,r).concat(n).concat(o);for(var u=r+n.length;u&lt;c.length;++u)s.get(c[u]).index=u}function v(){s=new Map,c=[],p=0,d([l],!1)}function y(e){var t=c.filter((function(t){var r=s.get(t);return!r.isAny&amp;&amp;r.test(e)}));return t.length?t:[&quot;any&quot;]}function g(e){return e&amp;&amp;&quot;function&quot;==typeof e&amp;&amp;&quot;_typedFunctionData&quot;in e}function x(t,r,n){if(!g(t))throw new TypeError(o);var i=n&amp;&amp;n.exact,a=E(Array.isArray(r)?r.join(&quot;,&quot;):r),u=b(a);if(!i||u in t.signatures){var s=t._typedFunctionData.signatureMap.get(u);if(s)return s}var c,f,l,p=a.length;if(i)for(f in c=[],t.signatures)c.push(t._typedFunctionData.signatureMap.get(f));else c=t._typedFunctionData.signatures;for(var m=0;m&lt;p;++m){var h,d=a[m],v=[],y=void 0,x=e(c);try{for(x.s();!(h=x.n()).done;){var w=M((y=h.value).params,m);if(w&amp;&amp;(!d.restParam||w.restParam)){if(!w.hasAny&amp;&amp;&quot;continue&quot;===function(){var e=D(w);if(d.types.some((function(t){return!e.has(t.name)})))return&quot;continue&quot;}())continue;v.push(y)}}}catch(e){x.e(e)}finally{x.f()}if(0===(c=v).length)break}var N,A=e(c);try{for(A.s();!(N=A.n()).done;)if((l=N.value).params.length&lt;=p)return l}catch(e){A.e(e)}finally{A.f()}throw new TypeError(&quot;Signature not found (signature: &quot;+(t.name||&quot;unnamed&quot;)+&quot;(&quot;+b(a,&quot;, &quot;)+&quot;))&quot;)}function b(e){var t=arguments.length&gt;1&amp;&amp;void 0!==arguments[1]?arguments[1]:&quot;,&quot;;return e.map((function(e){return e.name})).join(t)}function w(e){var t=0===e.indexOf(&quot;...&quot;),r=(t?e.length&gt;3?e.slice(3):&quot;any&quot;:e).split(&quot;|&quot;).map((function(e){return h(e.trim())})),n=!1,i=t?&quot;...&quot;:&quot;&quot;;return{types:r.map((function(e){return n=e.isAny||n,i+=e.name+&quot;|&quot;,{name:e.name,typeIndex:e.index,test:e.test,isAny:e.isAny,conversion:null,conversionIndex:-1}})),name:i.slice(0,-1),hasAny:n,hasConversion:!1,restParam:t}}function N(t){var r=function(t){if(0===t.length)return[];var r=t.map(h);t.length&gt;1&amp;&amp;r.sort((function(e,t){return e.index-t.index}));var n=r[0].conversionsTo;if(1===t.length)return n;n=n.concat([]);for(var i=new Set(t),a=1;a&lt;r.length;++a){var o,u=void 0,s=e(r[a].conversionsTo);try{for(s.s();!(o=s.n()).done;)u=o.value,i.has(u.from)||(n.push(u),i.add(u.from))}catch(e){s.e(e)}finally{s.f()}}return n}(t.types.map((function(e){return e.name}))),n=t.hasAny,i=t.name,a=r.map((function(e){var t=h(e.from);return n=t.isAny||n,i+=&quot;|&quot;+e.from,{name:e.from,typeIndex:t.index,test:t.test,isAny:t.isAny,conversion:e,conversionIndex:e.index}}));return{types:t.types.concat(a),name:i,hasAny:n,hasConversion:a.length&gt;0,restParam:t.restParam}}function D(e){return e.typeSet||(e.typeSet=new Set,e.types.forEach((function(t){return e.typeSet.add(t.name)}))),e.typeSet}function E(e){var t=[];if(&quot;string&quot;!=typeof e)throw new TypeError(&quot;Signatures must be strings&quot;);var r=e.trim();if(&quot;&quot;===r)return t;for(var n=r.split(&quot;,&quot;),i=0;i&lt;n.length;++i){var a=w(n[i].trim());if(a.restParam&amp;&amp;i!==n.length-1)throw new SyntaxError('Unexpected rest parameter &quot;'+n[i]+'&quot;: only allowed for the last parameter');if(0===a.types.length)return null;t.push(a)}return t}function A(e){var t=G(e);return!!t&amp;&amp;t.restParam}function S(e){if(e&amp;&amp;0!==e.types.length){if(1===e.types.length)return h(e.types[0].name).test;if(2===e.types.length){var t=h(e.types[0].name).test,r=h(e.types[1].name).test;return function(e){return t(e)||r(e)}}var i=e.types.map((function(e){return h(e.name).test}));return function(e){for(var t=0;t&lt;i.length;t++)if(i[t](e))return!0;return!1}}return n}function C(e){var t,r,n;if(A(e)){var i=(t=H(e).map(S)).length,a=S(G(e));return function(e){for(var r=0;r&lt;t.length;r++)if(!t[r](e[r]))return!1;return function(e){for(var t=i;t&lt;e.length;t++)if(!a(e[t]))return!1;return!0}(e)&amp;&amp;e.length&gt;=i+1}}return 0===e.length?function(e){return 0===e.length}:1===e.length?(r=S(e[0]),function(e){return r(e[0])&amp;&amp;1===e.length}):2===e.length?(r=S(e[0]),n=S(e[1]),function(e){return r(e[0])&amp;&amp;n(e[1])&amp;&amp;2===e.length}):(t=e.map(S),function(e){for(var r=0;r&lt;t.length;r++)if(!t[r](e[r]))return!1;return e.length===t.length})}function M(e,t){return t&lt;e.length?e[t]:A(e)?G(e):null}function F(e,t){var r=M(e,t);return r?D(r):new Set}function O(e){return null===e.conversion||void 0===e.conversion}function T(t,r){var n=new Set;return t.forEach((function(t){var i,a,o=e(F(t.params,r));try{for(o.s();!(a=o.n()).done;)i=a.value,n.add(i)}catch(e){o.e(e)}finally{o.f()}})),n.has(&quot;any&quot;)?[&quot;any&quot;]:Array.from(n)}function B(e,t,n){var i,a,o,u=e||&quot;unnamed&quot;,s=n,c=function(){var e=[];if(s.forEach((function(r){var n=S(M(r.params,o));(o&lt;r.params.length||A(r.params))&amp;&amp;n(t[o])&amp;&amp;e.push(r)})),0===e.length){if((a=T(s,o)).length&gt;0){var r=y(t[o]);return(i=new TypeError(&quot;Unexpected type of argument in function &quot;+u+&quot; (expected: &quot;+a.join(&quot; or &quot;)+&quot;, actual: &quot;+r.join(&quot; | &quot;)+&quot;, index: &quot;+o+&quot;)&quot;)).data={category:&quot;wrongType&quot;,fn:u,index:o,actual:r,expected:a},{v:i}}}else s=e};for(o=0;o&lt;t.length;o++){var f=c();if(&quot;object&quot;===r(f))return f.v}var l=s.map((function(e){return A(e.params)?1/0:e.params.length}));if(t.length&lt;Math.min.apply(null,l))return a=T(s,o),(i=new TypeError(&quot;Too few arguments in function &quot;+u+&quot; (expected: &quot;+a.join(&quot; or &quot;)+&quot;, index: &quot;+t.length+&quot;)&quot;)).data={category:&quot;tooFewArgs&quot;,fn:u,index:t.length,expected:a},i;var p=Math.max.apply(null,l);if(t.length&gt;p)return(i=new TypeError(&quot;Too many arguments in function &quot;+u+&quot; (expected: &quot;+p+&quot;, actual: &quot;+t.length+&quot;)&quot;)).data={category:&quot;tooManyArgs&quot;,fn:u,index:t.length,expectedLength:p},i;for(var m=[],h=0;h&lt;t.length;++h)m.push(y(t[h]).join(&quot;|&quot;));return(i=new TypeError('Arguments of type &quot;'+m.join(&quot;, &quot;)+'&quot; do not match any of the defined signatures of function '+u+&quot;.&quot;)).data={category:&quot;mismatch&quot;,actual:m},i}function _(e){for(var t=c.length+1,r=0;r&lt;e.types.length;r++)O(e.types[r])&amp;&amp;(t=Math.min(t,e.types[r].typeIndex));return t}function k(e){for(var t=p+1,r=0;r&lt;e.types.length;r++)O(e.types[r])||(t=Math.min(t,e.types[r].conversionIndex));return t}function I(e,t){if(e.hasAny){if(!t.hasAny)return 1}else if(t.hasAny)return-1;if(e.restParam){if(!t.restParam)return 1}else if(t.restParam)return-1;if(e.hasConversion){if(!t.hasConversion)return 1}else if(t.hasConversion)return-1;var r=_(e)-_(t);if(r&lt;0)return-1;if(r&gt;0)return 1;var n=k(e)-k(t);return n&lt;0?-1:n&gt;0?1:0}function R(t,r){var n=t.params,i=r.params,a=G(n),o=G(i),u=A(n),s=A(i);if(u&amp;&amp;a.hasAny){if(!s||!o.hasAny)return 1}else if(s&amp;&amp;o.hasAny)return-1;var c,f,l=0,p=0,m=e(n);try{for(m.s();!(f=m.n()).done;)(c=f.value).hasAny&amp;&amp;++l,c.hasConversion&amp;&amp;++p}catch(e){m.e(e)}finally{m.f()}var h,d=0,v=0,y=e(i);try{for(y.s();!(h=y.n()).done;)(c=h.value).hasAny&amp;&amp;++d,c.hasConversion&amp;&amp;++v}catch(e){y.e(e)}finally{y.f()}if(l!==d)return l-d;if(u&amp;&amp;a.hasConversion){if(!s||!o.hasConversion)return 1}else if(s&amp;&amp;o.hasConversion)return-1;if(p!==v)return p-v;if(u){if(!s)return 1}else if(s)return-1;var g=(n.length-i.length)*(u?-1:1);if(0!==g)return g;for(var x,b=[],w=0,N=0;N&lt;n.length;++N){var D=I(n[N],i[N]);b.push(D),w+=D}if(0!==w)return w;for(var E=0,S=b;E&lt;S.length;E++)if(0!==(x=S[E]))return x;return 0}function z(e,t){var r=t;if(e.some((function(e){return e.hasConversion}))){var n=A(e),i=e.map(q);r=function(){for(var e=[],r=n?arguments.length-1:arguments.length,a=0;a&lt;r;a++)e[a]=i[a](arguments[a]);return n&amp;&amp;(e[r]=arguments[r].map(i[r])),t.apply(this,e)}}var a=r;if(A(e)){var o=e.length-1;a=function(){return r.apply(this,V(arguments,0,o).concat([V(arguments,o)]))}}return a}function q(e){var t,r,n,i,a=[],o=[];switch(e.types.forEach((function(e){e.conversion&amp;&amp;(a.push(h(e.conversion.from).test),o.push(e.conversion.convert))})),o.length){case 0:return function(e){return e};case 1:return t=a[0],n=o[0],function(e){return t(e)?n(e):e};case 2:return t=a[0],r=a[1],n=o[0],i=o[1],function(e){return t(e)?n(e):r(e)?i(e):e};default:return function(e){for(var t=0;t&lt;o.length;t++)if(a[t](e))return o[t](e);return e}}}function j(e){return function e(t,r,n){if(r&lt;t.length){var i=t[r],a=[];if(i.restParam){var o=i.types.filter(O);o.length&lt;i.types.length&amp;&amp;a.push({types:o,name:&quot;...&quot;+o.map((function(e){return e.name})).join(&quot;|&quot;),hasAny:o.some((function(e){return e.isAny})),hasConversion:!1,restParam:!0}),a.push(i)}else a=i.types.map((function(e){return{types:[e],name:e.name,hasAny:e.isAny,hasConversion:e.conversion,restParam:!1}}));return u=a,s=function(i){return e(t,r+1,n.concat([i]))},Array.prototype.concat.apply([],u.map(s))}var u,s;return[n]}(e,0,[])}function P(t,r,n){var i,a,o=[],u=e(t);try{for(u.s();!(a=u.n()).done;){var s=n[i=a.value];if(&quot;number&quot;!=typeof s)throw new TypeError('No definition for referenced signature &quot;'+i+'&quot;');if(&quot;function&quot;!=typeof(s=r[s]))return!1;o.push(s)}}catch(e){u.e(e)}finally{u.f()}return o}function L(e,t,r){for(var n=function(e){return e.map((function(e){return J(e)?W(e.referToSelf.callback):Y(e)?Z(e.referTo.references,e.referTo.callback):e}))}(e),i=new Array(n.length).fill(!1),a=!0;a;){a=!1;for(var o=!0,u=0;u&lt;n.length;++u)if(!i[u]){var s=n[u];if(J(s))n[u]=s.referToSelf.callback(r),n[u].referToSelf=s.referToSelf,i[u]=!0,o=!1;else if(Y(s)){var c=P(s.referTo.references,n,t);c?(n[u]=s.referTo.callback.apply(this,c),n[u].referTo=s.referTo,i[u]=!0,o=!1):a=!0}}if(o&amp;&amp;a)throw new SyntaxError(&quot;Circular reference detected in resolving typed.referTo&quot;)}return n}function U(t,r){if(m.createCount++,0===Object.keys(r).length)throw new SyntaxError(&quot;No signatures provided&quot;);m.warnAgainstDeprecatedThis&amp;&amp;function(e){var t=/\sbthis(\s(|\s.signatures\sb)/;Object.keys(e).forEach((function(r){var n=e[r];if(t.test(n.toString()))throw new SyntaxError(&quot;Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.&quot;)}))}(r);var n,o=[],u=[],s={},c=[],f=function(){if(!Object.prototype.hasOwnProperty.call(r,n))return&quot;continue&quot;;var t=E(n);if(!t)return&quot;continue&quot;;o.forEach((function(r){if(function(t,r){for(var n=Math.max(t.length,r.length),i=0;i&lt;n;i++){var a,o=F(t,i),u=!1,s=void 0,c=e(F(r,i));try{for(c.s();!(a=c.n()).done;)if(s=a.value,o.has(s)){u=!0;break}}catch(e){c.e(e)}finally{c.f()}if(!u)return!1}var f=t.length,l=r.length,p=A(t),m=A(r);return p?m?f===l:l&gt;=f:m?f&gt;=l:f===l}(r,t))throw new TypeError('Conflicting signatures &quot;'+b(r)+'&quot; and &quot;'+b(t)+'&quot;.')})),o.push(t);var i=u.length;u.push(r[n]);var a,f=void 0,l=e(j(t.map(N)));try{for(l.s();!(a=l.n()).done;){var p=b(f=a.value);c.push({params:f,name:p,fn:i}),f.every((function(e){return!e.hasConversion}))&amp;&amp;(s[p]=i)}}catch(e){l.e(e)}finally{l.f()}};for(n in r)f();c.sort(R);var l,p=L(u,s,me);for(l in s)Object.prototype.hasOwnProperty.call(s,l)&amp;&amp;(s[l]=p[s[l]]);for(var h=[],d=new Map,v=0,y=c;v&lt;y.length;v++)l=y[v],d.has(l.name)||(l.fn=p[l.fn],h.push(l),d.set(l.name,l));for(var g=h[0]&amp;&amp;h[0].params.length&lt;=2&amp;&amp;!A(h[0].params),x=h[1]&amp;&amp;h[1].params.length&lt;=2&amp;&amp;!A(h[1].params),w=h[2]&amp;&amp;h[2].params.length&lt;=2&amp;&amp;!A(h[2].params),D=h[3]&amp;&amp;h[3].params.length&lt;=2&amp;&amp;!A(h[3].params),M=h[4]&amp;&amp;h[4].params.length&lt;=2&amp;&amp;!A(h[4].params),O=h[5]&amp;&amp;h[5].params.length&lt;=2&amp;&amp;!A(h[5].params),T=g&amp;&amp;x&amp;&amp;w&amp;&amp;D&amp;&amp;M&amp;&amp;O,B=0;B&lt;h.length;++B)h[B].test=C(h[B].params);for(var _=g?S(h[0].params[0]):i,k=x?S(h[1].params[0]):i,I=w?S(h[2].params[0]):i,q=D?S(h[3].params[0]):i,P=M?S(h[4].params[0]):i,U=O?S(h[5].params[0]):i,$=g?S(h[0].params[1]):i,H=x?S(h[1].params[1]):i,G=w?S(h[2].params[1]):i,V=D?S(h[3].params[1]):i,Z=M?S(h[4].params[1]):i,W=O?S(h[5].params[1]):i,Y=0;Y&lt;h.length;++Y)h[Y].implementation=z(h[Y].params,h[Y].fn);var J=g?h[0].implementation:a,X=x?h[1].implementation:a,Q=w?h[2].implementation:a,K=D?h[3].implementation:a,ee=M?h[4].implementation:a,te=O?h[5].implementation:a,re=g?h[0].params.length:-1,ne=x?h[1].params.length:-1,ie=w?h[2].params.length:-1,ae=D?h[3].params.length:-1,oe=M?h[4].params.length:-1,ue=O?h[5].params.length:-1,se=T?6:0,ce=h.length,fe=h.map((function(e){return e.test})),le=h.map((function(e){return e.implementation})),pe=function(){for(var e=se;e&lt;ce;e++)if(fe[e](arguments))return le[e].apply(this,arguments);return m.onMismatch(t,arguments,h)};function me(e,t){return arguments.length===re&amp;&amp;_(e)&amp;&amp;$(t)?J.apply(this,arguments):arguments.length===ne&amp;&amp;k(e)&amp;&amp;H(t)?X.apply(this,arguments):arguments.length===ie&amp;&amp;I(e)&amp;&amp;G(t)?Q.apply(this,arguments):arguments.length===ae&amp;&amp;q(e)&amp;&amp;V(t)?K.apply(this,arguments):arguments.length===oe&amp;&amp;P(e)&amp;&amp;Z(t)?ee.apply(this,arguments):arguments.length===ue&amp;&amp;U(e)&amp;&amp;W(t)?te.apply(this,arguments):pe.apply(this,arguments)}try{Object.defineProperty(me,&quot;name&quot;,{value:t})}catch(e){}return me.signatures=s,me._typedFunctionData={signatures:h,signatureMap:d},me}function $(e,t,r){throw B(e,t,r)}function H(e){return V(e,0,e.length-1)}function G(e){return e[e.length-1]}function V(e,t,r){return Array.prototype.slice.call(e,t,r)}function Z(e,t){return{referTo:{references:e,callback:t}}}function W(e){if(&quot;function&quot;!=typeof e)throw new TypeError(&quot;Callback function expected as first argument&quot;);return{referToSelf:{callback:e}}}function Y(e){return e&amp;&amp;&quot;object&quot;===r(e.referTo)&amp;&amp;Array.isArray(e.referTo.references)&amp;&amp;&quot;function&quot;==typeof e.referTo.callback}function J(e){return e&amp;&amp;&quot;object&quot;===r(e.referToSelf)&amp;&amp;&quot;function&quot;==typeof e.referToSelf.callback}function X(e,t){if(!e)return t;if(t&amp;&amp;t!==e){var r=new Error(&quot;Function names do not match (expected: &quot;+e+&quot;, actual: &quot;+t+&quot;)&quot;);throw r.data={actual:t,expected:e},r}return e}function Q(e){var t;for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&amp;&amp;(g(e[r])||&quot;string&quot;==typeof e[r].signature)&amp;&amp;(t=X(t,e[r].name));return t}function K(e,t){var r;for(r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(r in e&amp;&amp;t[r]!==e[r]){var n=new Error('Signature &quot;'+r+'&quot; is defined twice');throw n.data={signature:r,sourceFunction:t[r],destFunction:e[r]},n}e[r]=t[r]}}v(),d(f);var ee=m;function te(e){if(!e||&quot;string&quot;!=typeof e.from||&quot;string&quot;!=typeof e.to||&quot;function&quot;!=typeof e.convert)throw new TypeError(&quot;Object with properties {from: string, to: string, convert: function} expected&quot;);if(e.to===e.from)throw new SyntaxError('Illegal to define conversion from &quot;'+e.from+'&quot; to itself.')}return m=function(e){for(var t=&quot;string&quot;==typeof e,r=t?e:&quot;&quot;,n={},i=t?1:0;i&lt;arguments.length;++i){var a=arguments[i],o={},s=void 0;if(&quot;function&quot;==typeof a?(s=a.name,&quot;string&quot;==typeof a.signature?o[a.signature]=a:g(a)&amp;&amp;(o=a.signatures)):u(a)&amp;&amp;(o=a,t||(s=Q(a))),0===Object.keys(o).length){var c=new TypeError(&quot;Argument to 'typed' at index &quot;+i+&quot; is not a (typed) function, nor an object with signatures as keys and functions as values.&quot;);throw c.data={index:i,argument:a},c}t||(r=X(r,s)),K(n,o)}return U(r||&quot;&quot;,n)},m.create=t,m.createCount=ee.createCount,m.onMismatch=$,m.throwMismatchError=$,m.createError=B,m.clear=v,m.clearConversions=function(){var t,r,n=e(c);try{for(n.s();!(r=n.n()).done;)t=r.value,s.get(t).conversionsTo=[]}catch(e){n.e(e)}finally{n.f()}p=0},m.addTypes=d,m._findType=h,m.referTo=function(){var e=H(arguments).map((function(e){return b(E(e))})),t=G(arguments);if(&quot;function&quot;!=typeof t)throw new TypeError(&quot;Callback function expected as last argument&quot;);return Z(e,t)},m.referToSelf=W,m.convert=function(e,t){var r=h(t);if(r.test(e))return e;var n=r.conversionsTo;if(0===n.length)throw new Error(&quot;There are no conversions to &quot;+t+&quot; defined.&quot;);for(var i=0;i&lt;n.length;i++)if(h(n[i].from).test(e))return n[i].convert(e);throw new Error(&quot;Cannot convert &quot;+e+&quot; to &quot;+t)},m.findSignature=x,m.find=function(e,t,r){return x(e,t,r).implementation},m.isTypedFunction=g,m.warnAgainstDeprecatedThis=!0,m.addType=function(e,t){var r=&quot;any&quot;;!1!==t&amp;&amp;s.has(&quot;Object&quot;)&amp;&amp;(r=&quot;Object&quot;),m.addTypes([e],r)},m.addConversion=function(e){te(e);var t=h(e.to);if(!t.conversionsTo.every((function(t){return t.from!==e.from})))throw new Error('There is already a conversion from &quot;'+e.from+'&quot; to &quot;'+t.name+'&quot;');t.conversionsTo.push({from:e.from,convert:e.convert,index:p++})},m.addConversions=function(e){e.forEach(m.addConversion)},m.removeConversion=function(e){te(e);var t=h(e.to),r=function(e,t){for(var r=0;r&lt;e.length;r++)if(t(e[r]))return e[r]}(t.conversionsTo,(function(t){return t.from===e.from}));if(!r)throw new Error(&quot;Attempt to remove nonexistent conversion from &quot;+e.from+&quot; to &quot;+e.to);if(r.convert!==e.convert)throw new Error(&quot;Conversion to remove does not match existing conversion&quot;);var n=t.conversionsTo.indexOf(r);t.conversionsTo.splice(n,1)},m.resolve=function(e,t){if(!g(e))throw new TypeError(o);for(var r=e._typedFunctionData.signatures,n=0;n&lt;r.length;++n)if(r[n].test(t))return r[n];return null},m}()}()}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}r.amdD=function(){throw new Error(&quot;define cannot be used indirect&quot;)},r.amdO={},r.d=(e,t)=&gt;{for(var n in t)r.o(t,n)&amp;&amp;!r.o(e,n)&amp;&amp;Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=&gt;Object.prototype.hasOwnProperty.call(e,t),r.r=e=&gt;{&quot;undefined&quot;!=typeof Symbol&amp;&amp;Symbol.toStringTag&amp;&amp;Object.defineProperty(e,Symbol.toStringTag,{value:&quot;Module&quot;}),Object.defineProperty(e,&quot;__esModule&quot;,{value:!0})},r.nmd=e=&gt;(e.paths=[],e.children||(e.children=[]),e);var n={};return(()=&gt;{&quot;use strict&quot;;r.d(n,{default:()=&gt;_y});var e={};function t(e){return t=&quot;function&quot;==typeof Symbol&amp;&amp;&quot;symbol&quot;==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&amp;&amp;&quot;function&quot;==typeof Symbol&amp;&amp;e.constructor===Symbol&amp;&amp;e!==Symbol.prototype?&quot;symbol&quot;:typeof e},t(e)}function i(e){return&quot;number&quot;==typeof e}function a(e){return!(!e||&quot;object&quot;!==t(e)||&quot;function&quot;!=typeof e.constructor)&amp;&amp;(!0===e.isBigNumber&amp;&amp;&quot;object&quot;===t(e.constructor.prototype)&amp;&amp;!0===e.constructor.prototype.isBigNumber||&quot;function&quot;==typeof e.constructor.isDecimal&amp;&amp;!0===e.constructor.isDecimal(e))}function o(e){return e&amp;&amp;&quot;object&quot;===t(e)&amp;&amp;!0===Object.getPrototypeOf(e).isComplex||!1}function u(e){return e&amp;&amp;&quot;object&quot;===t(e)&amp;&amp;!0===Object.getPrototypeOf(e).isFraction||!1}function s(e){return e&amp;&amp;!0===e.constructor.prototype.isUnit||!1}function c(e){return&quot;string&quot;==typeof e}r.r(e),r.d(e,{createAbs:()=&gt;ta,createAccessorNode:()=&gt;fp,createAcos:()=&gt;Nf,createAcosh:()=&gt;Lf,createAcot:()=&gt;$f,createAcoth:()=&gt;Gf,createAcsc:()=&gt;Zf,createAcsch:()=&gt;Yf,createAdd:()=&gt;Vl,createAddScalar:()=&gt;oa,createAnd:()=&gt;yc,createApply:()=&gt;na,createApplyTransform:()=&gt;ry,createArg:()=&gt;Zo,createArrayNode:()=&gt;pp,createAsec:()=&gt;Xf,createAsech:()=&gt;Kf,createAsin:()=&gt;tl,createAsinh:()=&gt;rl,createAssignmentNode:()=&gt;bp,createAtan:()=&gt;nl,createAtan2:()=&gt;al,createAtanh:()=&gt;ul,createAtomicMass:()=&gt;_v,createAvogadro:()=&gt;kv,createBellNumbers:()=&gt;id,createBigNumberClass:()=&gt;Ir,createBignumber:()=&gt;hi,createBin:()=&gt;Fs,createBitAnd:()=&gt;jo,createBitNot:()=&gt;Lo,createBitOr:()=&gt;$o,createBitXor:()=&gt;Vo,createBlockNode:()=&gt;Np,createBohrMagneton:()=&gt;mv,createBohrRadius:()=&gt;xv,createBoltzmann:()=&gt;Iv,createBoolean:()=&gt;mi,createCatalan:()=&gt;od,createCbrt:()=&gt;sa,createCeil:()=&gt;ga,createChain:()=&gt;zm,createChainClass:()=&gt;Om,createClassicalElectronRadius:()=&gt;bv,createClone:()=&gt;Fn,createColumn:()=&gt;fu,createColumnTransform:()=&gt;ny,createCombinations:()=&gt;wh,createCombinationsWithRep:()=&gt;Eh,createCompare:()=&gt;xc,createCompareNatural:()=&gt;Dc,createCompareText:()=&gt;Sc,createCompile:()=&gt;nm,createComplex:()=&gt;di,createComplexClass:()=&gt;zr,createComposition:()=&gt;sd,createConcat:()=&gt;uu,createConcatTransform:()=&gt;gy,createConditionalNode:()=&gt;Ep,createConductanceQuantum:()=&gt;hv,createConj:()=&gt;Yo,createConstantNode:()=&gt;_p,createCos:()=&gt;cl,createCosh:()=&gt;ll,createCot:()=&gt;pl,createCoth:()=&gt;hl,createCoulomb:()=&gt;lv,createCount:()=&gt;pu,createCreateUnit:()=&gt;bf,createCross:()=&gt;hu,createCsc:()=&gt;dl,createCsch:()=&gt;yl,createCtranspose:()=&gt;ss,createCube:()=&gt;ba,createCumSum:()=&gt;uh,createCumSumTransform:()=&gt;Ey,createDeepEqual:()=&gt;Gc,createDenseMatrixClass:()=&gt;Cn,createDerivative:()=&gt;Sd,createDet:()=&gt;qm,createDeuteronMass:()=&gt;Sv,createDiag:()=&gt;vu,createDiff:()=&gt;ku,createDiffTransform:()=&gt;by,createDistance:()=&gt;nh,createDivide:()=&gt;th,createDivideScalar:()=&gt;Ps,createDot:()=&gt;Xl,createDotDivide:()=&gt;Ks,createDotMultiply:()=&gt;wo,createDotPow:()=&gt;Xs,createE:()=&gt;Gd,createEfimovFactor:()=&gt;Bv,createEigs:()=&gt;Hm,createElectricConstant:()=&gt;cv,createElectronMass:()=&gt;wv,createElementaryCharge:()=&gt;pv,createEqual:()=&gt;Mc,createEqualScalar:()=&gt;ui,createEqualText:()=&gt;Tc,createErf:()=&gt;vs,createEvaluate:()=&gt;am,createExp:()=&gt;wa,createExpm:()=&gt;Vm,createExpm1:()=&gt;Da,createFactorial:()=&gt;zh,createFalse:()=&gt;jd,createFaraday:()=&gt;Rv,createFermiCoupling:()=&gt;Nv,createFft:()=&gt;ls,createFibonacciHeapClass:()=&gt;nf,createFilter:()=&gt;gu,createFilterTransform:()=&gt;ay,createFineStructure:()=&gt;Dv,createFirstRadiation:()=&gt;zv,createFix:()=&gt;Ca,createFlatten:()=&gt;wu,createFloor:()=&gt;Ta,createForEach:()=&gt;Du,createForEachTransform:()=&gt;uy,createFormat:()=&gt;Ms,createFraction:()=&gt;vi,createFractionClass:()=&gt;jr,createFreqz:()=&gt;Bd,createFunctionAssignmentNode:()=&gt;Rp,createFunctionNode:()=&gt;Kp,createGamma:()=&gt;_h,createGasConstant:()=&gt;jv,createGcd:()=&gt;Ga,createGetMatrixDataType:()=&gt;Su,createGravitationConstant:()=&gt;av,createGravity:()=&gt;Wv,createHartreeEnergy:()=&gt;Ev,createHasNumericValue:()=&gt;Yn,createHelp:()=&gt;Im,createHelpClass:()=&gt;Fm,createHex:()=&gt;Ts,createHypot:()=&gt;Wl,createI:()=&gt;Kd,createIdentity:()=&gt;Mu,createIfft:()=&gt;ms,createIm:()=&gt;Jo,createImmutableDenseMatrixClass:()=&gt;tf,createIndex:()=&gt;ep,createIndexClass:()=&gt;rf,createIndexNode:()=&gt;qp,createIndexTransform:()=&gt;sy,createInfinity:()=&gt;Ld,createIntersect:()=&gt;ih,createInv:()=&gt;jm,createInverseConductanceQuantum:()=&gt;dv,createInvmod:()=&gt;go,createIsInteger:()=&gt;qn,createIsNaN:()=&gt;ti,createIsNegative:()=&gt;Gn,createIsNumeric:()=&gt;Zn,createIsPositive:()=&gt;Xn,createIsPrime:()=&gt;zs,createIsZero:()=&gt;Kn,createKldivergence:()=&gt;jh,createKlitzing:()=&gt;gv,createKron:()=&gt;Ou,createLN10:()=&gt;Wd,createLN2:()=&gt;Zd,createLOG10E:()=&gt;Jd,createLOG2E:()=&gt;Yd,createLarger:()=&gt;jc,createLargerEq:()=&gt;Uc,createLcm:()=&gt;Wa,createLeafCount:()=&gt;fd,createLeftShift:()=&gt;pc,createLgamma:()=&gt;Ih,createLog:()=&gt;Gs,createLog10:()=&gt;Ja,createLog1p:()=&gt;Zs,createLog2:()=&gt;Qa,createLoschmidt:()=&gt;qv,createLsolve:()=&gt;rc,createLsolveAll:()=&gt;oc,createLup:()=&gt;cm,createLusolve:()=&gt;Sm,createLyap:()=&gt;eh,createMad:()=&gt;ph,createMagneticConstant:()=&gt;sv,createMagneticFluxQuantum:()=&gt;vv,createMap:()=&gt;Tu,createMapTransform:()=&gt;cy,createMatrix:()=&gt;gi,createMatrixClass:()=&gt;Lr,createMatrixFromColumns:()=&gt;Si,createMatrixFromFunction:()=&gt;bi,createMatrixFromRows:()=&gt;Di,createMax:()=&gt;Kc,createMaxTransform:()=&gt;py,createMean:()=&gt;ch,createMeanTransform:()=&gt;my,createMedian:()=&gt;lh,createMin:()=&gt;ef,createMinTransform:()=&gt;hy,createMod:()=&gt;to,createMode:()=&gt;Ds,createMolarMass:()=&gt;Vv,createMolarMassC12:()=&gt;Zv,createMolarPlanckConstant:()=&gt;Pv,createMolarVolume:()=&gt;Lv,createMultinomial:()=&gt;Lh,createMultiply:()=&gt;io,createMultiplyScalar:()=&gt;ro,createNaN:()=&gt;Ud,createNeutronMass:()=&gt;Cv,createNode:()=&gt;rp,createNorm:()=&gt;Jl,createNot:()=&gt;nu,createNthRoot:()=&gt;oo,createNthRoots:()=&gt;Ys,createNuclearMagneton:()=&gt;yv,createNull:()=&gt;Pd,createNumber:()=&gt;ci,createNumeric:()=&gt;qs,createObjectNode:()=&gt;Pp,createOct:()=&gt;Os,createOnes:()=&gt;Iu,createOperatorNode:()=&gt;Up,createOr:()=&gt;iu,createParenthesisNode:()=&gt;Hp,createParse:()=&gt;tm,createParser:()=&gt;sm,createParserClass:()=&gt;om,createPartitionSelect:()=&gt;Jc,createPermutations:()=&gt;$h,createPhi:()=&gt;Vd,createPi:()=&gt;$d,createPickRandom:()=&gt;Yh,createPinv:()=&gt;Lm,createPlanckCharge:()=&gt;Qv,createPlanckConstant:()=&gt;ov,createPlanckLength:()=&gt;Yv,createPlanckMass:()=&gt;Jv,createPlanckTemperature:()=&gt;Kv,createPlanckTime:()=&gt;Xv,createPolynomialRoot:()=&gt;Mm,createPow:()=&gt;Ls,createPrint:()=&gt;_s,createProd:()=&gt;Ss,createProtonMass:()=&gt;Av,createQr:()=&gt;fm,createQuantileSeq:()=&gt;vh,createQuantumOfCirculation:()=&gt;Mv,createRandom:()=&gt;Qh,createRandomInt:()=&gt;ed,createRange:()=&gt;Pu,createRangeClass:()=&gt;Pr,createRangeNode:()=&gt;Vp,createRangeTransform:()=&gt;dy,createRationalize:()=&gt;Md,createRe:()=&gt;Xo,createReducedPlanckConstant:()=&gt;uv,createRelationalNode:()=&gt;Wp,createReplacer:()=&gt;kd,createReshape:()=&gt;Uu,createResize:()=&gt;$u,createResolve:()=&gt;Nd,createResultSet:()=&gt;Qe,createReviver:()=&gt;_d,createRightArithShift:()=&gt;hc,createRightLogShift:()=&gt;vc,createRotate:()=&gt;Gu,createRotationMatrix:()=&gt;Zu,createRound:()=&gt;Hs,createRow:()=&gt;Wu,createRowTransform:()=&gt;vy,createRydberg:()=&gt;Fv,createSQRT1_2:()=&gt;Xd,createSQRT2:()=&gt;Qd,createSackurTetrode:()=&gt;Uv,createSchur:()=&gt;Qm,createSec:()=&gt;gl,createSech:()=&gt;bl,createSecondRadiation:()=&gt;$v,createSetCartesian:()=&gt;Cl,createSetDifference:()=&gt;Fl,createSetDistinct:()=&gt;Tl,createSetIntersect:()=&gt;_l,createSetIsSubset:()=&gt;Il,createSetMultiplicity:()=&gt;zl,createSetPowerset:()=&gt;jl,createSetSize:()=&gt;Ll,createSetSymDifference:()=&gt;$l,createSetUnion:()=&gt;Gl,createSign:()=&gt;so,createSimplify:()=&gt;vd,createSimplifyConstant:()=&gt;xd,createSimplifyCore:()=&gt;wd,createSin:()=&gt;wl,createSinh:()=&gt;Dl,createSize:()=&gt;Ju,createSlu:()=&gt;Dm,createSmaller:()=&gt;_c,createSmallerEq:()=&gt;Rc,createSolveODE:()=&gt;ds,createSort:()=&gt;Qc,createSpaClass:()=&gt;af,createSparse:()=&gt;gf,createSparseMatrixClass:()=&gt;si,createSpeedOfLight:()=&gt;iv,createSplitUnit:()=&gt;Mi,createSqrt:()=&gt;co,createSqrtm:()=&gt;Wm,createSquare:()=&gt;lo,createSqueeze:()=&gt;Qu,createStd:()=&gt;yh,createStdTransform:()=&gt;wy,createStefanBoltzmann:()=&gt;Hv,createStirlingS2:()=&gt;rd,createString:()=&gt;li,createSubset:()=&gt;es,createSubsetTransform:()=&gt;yy,createSubtract:()=&gt;mo,createSum:()=&gt;ah,createSumTransform:()=&gt;Ny,createSylvester:()=&gt;Jm,createSymbolNode:()=&gt;Yp,createSymbolicEqual:()=&gt;Ed,createTan:()=&gt;El,createTanh:()=&gt;Al,createTau:()=&gt;Hd,createThomsonCrossSection:()=&gt;Ov,createTo:()=&gt;Is,createTrace:()=&gt;Ql,createTranspose:()=&gt;os,createTrue:()=&gt;qd,createTypeOf:()=&gt;ni,createTyped:()=&gt;Ve,createUnaryMinus:()=&gt;Qi,createUnaryPlus:()=&gt;ea,createUnequal:()=&gt;Zc,createUnitClass:()=&gt;hf,createUnitFunction:()=&gt;vf,createUppercaseE:()=&gt;tv,createUppercasePi:()=&gt;ev,createUsolve:()=&gt;ic,createUsolveAll:()=&gt;sc,createVacuumImpedance:()=&gt;fv,createVariance:()=&gt;dh,createVarianceTransform:()=&gt;Sy,createVersion:()=&gt;rv,createWeakMixingAngle:()=&gt;Tv,createWienDisplacement:()=&gt;Gv,createXgcd:()=&gt;vo,createXor:()=&gt;au,createZeros:()=&gt;fs,createZpk2tf:()=&gt;Od}),r(4916),r(7601),r(9653),r(6699),r(5212),r(1539),r(2023),r(489),r(9753),r(3710),r(4603),r(8450),r(8386),r(9714),r(8309);var f=Array.isArray;function l(e){return e&amp;&amp;!0===e.constructor.prototype.isMatrix||!1}function p(e){return Array.isArray(e)||l(e)}function m(e){return e&amp;&amp;e.isDenseMatrix&amp;&amp;!0===e.constructor.prototype.isMatrix||!1}function h(e){return e&amp;&amp;e.isSparseMatrix&amp;&amp;!0===e.constructor.prototype.isMatrix||!1}function d(e){return e&amp;&amp;!0===e.constructor.prototype.isRange||!1}function v(e){return e&amp;&amp;!0===e.constructor.prototype.isIndex||!1}function y(e){return&quot;boolean&quot;==typeof e}function g(e){return e&amp;&amp;!0===e.constructor.prototype.isResultSet||!1}function x(e){return e&amp;&amp;!0===e.constructor.prototype.isHelp||!1}function b(e){return&quot;function&quot;==typeof e}function w(e){return e instanceof Date}function N(e){return e instanceof RegExp}function D(e){return!(!e||&quot;object&quot;!==t(e)||e.constructor!==Object||o(e)||u(e))}function E(e){return null===e}function A(e){return void 0===e}function S(e){return e&amp;&amp;!0===e.isAccessorNode&amp;&amp;!0===e.constructor.prototype.isNode||!1}function C(e){return e&amp;&amp;!0===e.isArrayNode&amp;&amp;!0===e.constructor.prototype.isNode||!1}function M(e){return e&amp;&amp;!0===e.isAssignmentNode&amp;&amp;!0===e.constructor.prototype.isNode||!1}function F(e){return e&amp;&amp;!0===e.isBlockNode&amp;&amp;!0===e.constructor.prototype.isNode||!1}function O(e){return e&amp;&amp;!0===e.isConditionalNode&amp;&amp;!0===e.constructor.prototype.isNode||!1}function T(e){return e&amp;&amp;!0===e.isConstantNode&amp;&amp;!0===e.constructor.prototype.isNode||!1}function B(e){return T(e)||q(e)&amp;&amp;1===e.args.length&amp;&amp;T(e.args[0])&amp;&amp;&quot;-+~&quot;.includes(e.op)}function _(e){return e&amp;&amp;!0===e.isFunctionAssignmentNode&amp;&amp;!0===e.constructor.prototype.isNode||!1}function k(e){return e&amp;&amp;!0===e.isFunctionNode&amp;&amp;!0===e.constructor.prototype.isNode||!1}function I(e){return e&amp;&amp;!0===e.isIndexNode&amp;&amp;!0===e.constructor.prototype.isNode||!1}function R(e){return e&amp;&amp;!0===e.isNode&amp;&amp;!0===e.constructor.prototype.isNode||!1}function z(e){return e&amp;&amp;!0===e.isObjectNode&amp;&amp;!0===e.constructor.prototype.isNode||!1}function q(e){return e&amp;&amp;!0===e.isOperatorNode&amp;&amp;!0===e.constructor.prototype.isNode||!1}function j(e){return e&amp;&amp;!0===e.isParenthesisNode&amp;&amp;!0===e.constructor.prototype.isNode||!1}function P(e){return e&amp;&amp;!0===e.isRangeNode&amp;&amp;!0===e.constructor.prototype.isNode||!1}function L(e){return e&amp;&amp;!0===e.isRelationalNode&amp;&amp;!0===e.constructor.prototype.isNode||!1}function U(e){return e&amp;&amp;!0===e.isSymbolNode&amp;&amp;!0===e.constructor.prototype.isNode||!1}function $(e){return e&amp;&amp;!0===e.constructor.prototype.isChain||!1}function H(e){var r=t(e);return&quot;object&quot;===r?null===e?&quot;null&quot;:a(e)?&quot;BigNumber&quot;:e.constructor&amp;&amp;e.constructor.name?e.constructor.name:&quot;Object&quot;:r}var G=r(4814);function V(e){return&quot;boolean&quot;==typeof e||!!isFinite(e)&amp;&amp;e===Math.round(e)}r(2420),r(4914),r(658),r(197),r(3484),r(5890),r(2222),r(5306),r(4723),r(4678),r(2772),r(1249),r(1058),r(9600),r(7042),r(561),r(3299),r(9752),r(2376),r(3181),r(8621),r(160),r(970);var Z=Math.sign||function(e){return e&gt;0?1:e&lt;0?-1:0},W=Math.log2||function(e){return Math.log(e)/Math.LN2},Y=Math.log10||function(e){return Math.log(e)/Math.LN10},J=Math.log1p||function(e){return Math.log(e+1)},X=Math.cbrt||function(e){if(0===e)return e;var t,r=e&lt;0;return r&amp;&amp;(e=-e),t=isFinite(e)?(e/((t=Math.exp(Math.log(e)/3))*t)+2*t)/3:e,r?-t:t},Q=Math.expm1||function(e){return e&gt;=2e-4||e&lt;=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function K(e,t,r){var n={2:&quot;0b&quot;,8:&quot;0o&quot;,16:&quot;0x&quot;}[t],i=&quot;&quot;;if(r){if(r&lt;1)throw new Error(&quot;size must be in greater than 0&quot;);if(!V(r))throw new Error(&quot;size must be an integer&quot;);if(e&gt;Math.pow(2,r-1)-1||e&lt;-Math.pow(2,r-1))throw new Error(&quot;Value must be in range [-2^&quot;.concat(r-1,&quot;, 2^&quot;).concat(r-1,&quot;-1]&quot;));if(!V(e))throw new Error(&quot;Value must be an integer&quot;);e&lt;0&amp;&amp;(e+=Math.pow(2,r)),i=&quot;i&quot;.concat(r)}var a=&quot;&quot;;return e&lt;0&amp;&amp;(e=-e,a=&quot;-&quot;),&quot;&quot;.concat(a).concat(n).concat(e.toString(t)).concat(i)}function ee(e,t){if(&quot;function&quot;==typeof t)return t(e);if(e===1/0)return&quot;Infinity&quot;;if(e===-1/0)return&quot;-Infinity&quot;;if(isNaN(e))return&quot;NaN&quot;;var r,n,a=&quot;auto&quot;;if(t&amp;&amp;(t.notation&amp;&amp;(a=t.notation),i(t)?r=t:i(t.precision)&amp;&amp;(r=t.precision),t.wordSize&amp;&amp;&quot;number&quot;!=typeof(n=t.wordSize)))throw new Error('Option &quot;wordSize&quot; must be a number');switch(a){case&quot;fixed&quot;:return re(e,r);case&quot;exponential&quot;:return ne(e,r);case&quot;engineering&quot;:return function(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=ie(te(e),t),n=r.exponent,a=r.coefficients,o=n%3==0?n:n&lt;0?n-3-n%3:n-n%3;if(i(t))for(;t&gt;a.length||n-o+1&gt;a.length;)a.push(0);else for(var u=Math.abs(n-o)-(a.length-1),s=0;s&lt;u;s++)a.push(0);for(var c=Math.abs(n-o),f=1;c&gt;0;)f++,c--;var l=a.slice(f).join(&quot;&quot;),p=i(t)&amp;&amp;l.length||l.match(/[1-9]/)?&quot;.&quot;+l:&quot;&quot;,m=a.slice(0,f).join(&quot;&quot;)+p+&quot;e&quot;+(n&gt;=0?&quot;+&quot;:&quot;&quot;)+o.toString();return r.sign+m}(e,r);case&quot;bin&quot;:return K(e,2,n);case&quot;oct&quot;:return K(e,8,n);case&quot;hex&quot;:return K(e,16,n);case&quot;auto&quot;:return function(e,t,r){if(isNaN(e)||!isFinite(e))return String(e);var n=r&amp;&amp;void 0!==r.lowerExp?r.lowerExp:-3,i=r&amp;&amp;void 0!==r.upperExp?r.upperExp:5,a=te(e),o=t?ie(a,t):a;if(o.exponent&lt;n||o.exponent&gt;=i)return ne(e,t);var u=o.coefficients,s=o.exponent;u.length&lt;t&amp;&amp;(u=u.concat(ae(t-u.length))),u=u.concat(ae(s-u.length+1+(u.length&lt;t?t-u.length:0)));var c=s&gt;0?s:0;return c&lt;(u=ae(-s).concat(u)).length-1&amp;&amp;u.splice(c+1,0,&quot;.&quot;),o.sign+u.join(&quot;&quot;)}(e,r,t&amp;&amp;t).replace(/((\s.\sd*?)(0+))($|e)/,(function(){var e=arguments[2],t=arguments[4];return&quot;.&quot;!==e?e+t:t}));default:throw new Error('Unknown notation &quot;'+a+'&quot;. Choose &quot;auto&quot;, &quot;exponential&quot;, &quot;fixed&quot;, &quot;bin&quot;, &quot;oct&quot;, or &quot;hex.')}}function te(e){var t=String(e).toLowerCase().match(/^(-?)(\sd+\s.?\sd*)(e([+-]?\sd+))?$/);if(!t)throw new SyntaxError(&quot;Invalid number &quot;+e);var r=t[1],n=t[2],i=parseFloat(t[4]||&quot;0&quot;),a=n.indexOf(&quot;.&quot;);i+=-1!==a?a-1:n.length-1;var o=n.replace(&quot;.&quot;,&quot;&quot;).replace(/^0*/,(function(e){return i-=e.length,&quot;&quot;})).replace(/0*$/,&quot;&quot;).split(&quot;&quot;).map((function(e){return parseInt(e)}));return 0===o.length&amp;&amp;(o.push(0),i++),{sign:r,coefficients:o,exponent:i}}function re(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=te(e),n=&quot;number&quot;==typeof t?ie(r,r.exponent+1+t):r,i=n.coefficients,a=n.exponent+1,o=a+(t||0);return i.length&lt;o&amp;&amp;(i=i.concat(ae(o-i.length))),a&lt;0&amp;&amp;(i=ae(1-a).concat(i),a=1),a&lt;i.length&amp;&amp;i.splice(a,0,0===a?&quot;0.&quot;:&quot;.&quot;),n.sign+i.join(&quot;&quot;)}function ne(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=te(e),n=t?ie(r,t):r,i=n.coefficients,a=n.exponent;i.length&lt;t&amp;&amp;(i=i.concat(ae(t-i.length)));var o=i.shift();return n.sign+o+(i.length&gt;0?&quot;.&quot;+i.join(&quot;&quot;):&quot;&quot;)+&quot;e&quot;+(a&gt;=0?&quot;+&quot;:&quot;&quot;)+a}function ie(e,t){for(var r={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},n=r.coefficients;t&lt;=0;)n.unshift(0),r.exponent++,t++;if(n.length&gt;t&amp;&amp;n.splice(t,n.length-t)[0]&gt;=5){var i=t-1;for(n[i]++;10===n[i];)n.pop(),0===i&amp;&amp;(n.unshift(0),r.exponent++,i++),n[--i]++}return r}function ae(e){for(var t=[],r=0;r&lt;e;r++)t.push(0);return t}var oe=Number.EPSILON||2220446049250313e-31;function ue(e,t,r){if(null==r)return e===t;if(e===t)return!0;if(isNaN(e)||isNaN(t))return!1;if(isFinite(e)&amp;&amp;isFinite(t)){var n=Math.abs(e-t);return n&lt;oe||n&lt;=Math.max(Math.abs(e),Math.abs(t))*r}return!1}var se=Math.acosh||function(e){return Math.log(Math.sqrt(e*e-1)+e)},ce=Math.asinh||function(e){return Math.log(Math.sqrt(e*e+1)+e)},fe=Math.atanh||function(e){return Math.log((1+e)/(1-e))/2},le=Math.cosh||function(e){return(Math.exp(e)+Math.exp(-e))/2},pe=Math.sinh||function(e){return(Math.exp(e)-Math.exp(-e))/2},me=Math.tanh||function(e){var t=Math.exp(2*e);return(t-1)/(t+1)};function he(e){var r=t(e);if(&quot;number&quot;===r||&quot;string&quot;===r||&quot;boolean&quot;===r||null==e)return e;if(&quot;function&quot;==typeof e.clone)return e.clone();if(Array.isArray(e))return e.map((function(e){return he(e)}));if(e instanceof Date)return new Date(e.valueOf());if(a(e))return e;if(e instanceof RegExp)throw new TypeError(&quot;Cannot clone &quot;+e);return de(e,he)}function de(e,t){var r={};for(var n in e)Ne(e,n)&amp;&amp;(r[n]=t(e[n]));return r}function ve(e,t){for(var r in t)Ne(t,r)&amp;&amp;(e[r]=t[r]);return e}function ye(e,t){if(Array.isArray(t))throw new TypeError(&quot;Arrays are not supported by deepExtend&quot;);for(var r in t)if(Ne(t,r)&amp;&amp;!(r in Object.prototype)&amp;&amp;!(r in Function.prototype))if(t[r]&amp;&amp;t[r].constructor===Object)void 0===e[r]&amp;&amp;(e[r]={}),e[r]&amp;&amp;e[r].constructor===Object?ye(e[r],t[r]):e[r]=t[r];else{if(Array.isArray(t[r]))throw new TypeError(&quot;Arrays are not supported by deepExtend&quot;);e[r]=t[r]}return e}function ge(e,t){var r,n,i;if(Array.isArray(e)){if(!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(n=0,i=e.length;n&lt;i;n++)if(!ge(e[n],t[n]))return!1;return!0}if(&quot;function&quot;==typeof e)return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(r in e)if(!(r in t)||!ge(e[r],t[r]))return!1;for(r in t)if(!(r in e))return!1;return!0}return e===t}function xe(e){var t={};return be(e,t),t}function be(e,r){for(var n in e)if(Ne(e,n)){var i=e[n];&quot;object&quot;===t(i)&amp;&amp;null!==i?be(i,r):r[n]=i}}function we(e,t,r){var n,i=!0;Object.defineProperty(e,t,{get:function(){return i&amp;&amp;(n=r(),i=!1),n},set:function(e){n=e,i=!1},configurable:!0,enumerable:!0})}function Ne(e,t){return e&amp;&amp;Object.hasOwnProperty.call(e,t)}function De(e){return Object.keys(e).map((function(t){return e[t]}))}function Ee(e,t,r,n){function i(n){var i=function(e,t){for(var r={},n=0;n&lt;t.length;n++){var i=t[n],a=e[i];void 0!==a&amp;&amp;(r[i]=a)}return r}(n,t.map(Se));return function(e,t,r){if(!t.filter((function(e){return!function(e){return e&amp;&amp;&quot;?&quot;===e[0]}(e)})).every((function(e){return void 0!==r[e]}))){var n=t.filter((function(e){return void 0===r[e]}));throw new Error('Cannot create function &quot;'.concat(e,'&quot;, ')+&quot;some dependencies are missing: &quot;.concat(n.map((function(e){return'&quot;'.concat(e,'&quot;')})).join(&quot;, &quot;),&quot;.&quot;))}}(e,t,n),r(i)}return i.isFactory=!0,i.fn=e,i.dependencies=t.slice().sort(),n&amp;&amp;(i.meta=n),i}function Ae(e){return&quot;function&quot;==typeof e&amp;&amp;&quot;string&quot;==typeof e.fn&amp;&amp;Array.isArray(e.dependencies)}function Se(e){return e&amp;&amp;&quot;?&quot;===e[0]?e.slice(1):e}function Ce(e,t){if(!(e instanceof t))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function Me(e){var r=function(e,r){if(&quot;object&quot;!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,&quot;string&quot;);if(&quot;object&quot;!==t(i))return i;throw new TypeError(&quot;@@toPrimitive must return a primitive value.&quot;)}return String(e)}(e);return&quot;symbol&quot;===t(r)?r:String(r)}function Fe(e,t){for(var r=0;r&lt;t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,&quot;value&quot;in n&amp;&amp;(n.writable=!0),Object.defineProperty(e,Me(n.key),n)}}function Oe(e,t,r){return t&amp;&amp;Fe(e.prototype,t),r&amp;&amp;Fe(e,r),Object.defineProperty(e,&quot;prototype&quot;,{writable:!1}),e}function Te(e,t){if(Ie(e)&amp;&amp;_e(e,t))return e[t];if(&quot;function&quot;==typeof e[t]&amp;&amp;ke(e,t))throw new Error('Cannot access method &quot;'+t+'&quot; as a property');throw new Error('No access to property &quot;'+t+'&quot;')}function Be(e,t,r){if(Ie(e)&amp;&amp;_e(e,t))return e[t]=r,r;throw new Error('No access to property &quot;'+t+'&quot;')}function _e(e,r){return!(!e||&quot;object&quot;!==t(e)||!Ne(Re,r)&amp;&amp;(r in Object.prototype||r in Function.prototype))}function ke(e,t){return!(null==e||&quot;function&quot;!=typeof e[t]||Ne(e,t)&amp;&amp;Object.getPrototypeOf&amp;&amp;t in Object.getPrototypeOf(e)||!Ne(ze,t)&amp;&amp;(t in Object.prototype||t in Function.prototype))}function Ie(e){return&quot;object&quot;===t(e)&amp;&amp;e&amp;&amp;e.constructor===Object}r(2707),r(9554),r(4747),r(7327),r(6541),r(9070),r(7941),r(6992),r(1532),r(8783),r(3948),r(1038),r(2526),r(1817),r(2165);var Re={length:!0,name:!0},ze={toString:!0,valueOf:!0,toLocaleString:!0};function qe(e,t){var r=&quot;undefined&quot;!=typeof Symbol&amp;&amp;e[Symbol.iterator]||e[&quot;@@iterator&quot;];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if(&quot;string&quot;==typeof e)return je(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return&quot;Object&quot;===r&amp;&amp;e.constructor&amp;&amp;(r=e.constructor.name),&quot;Map&quot;===r||&quot;Set&quot;===r?Array.from(e):&quot;Arguments&quot;===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?je(e,t):void 0}}(e))||t&amp;&amp;e&amp;&amp;&quot;number&quot;==typeof e.length){r&amp;&amp;(e=r);var n=0,i=function(){};return{s:i,n:function(){return n&gt;=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError(&quot;Invalid attempt to iterate non-iterable instance.\snIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.&quot;)}var a,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw a}}}}function je(e,t){(null==t||t&gt;e.length)&amp;&amp;(t=e.length);for(var r=0,n=new Array(t);r&lt;t;r++)n[r]=e[r];return n}var Pe=function(){function e(t){Ce(this,e),this.wrappedObject=t}return Oe(e,[{key:&quot;keys&quot;,value:function(){return Object.keys(this.wrappedObject)}},{key:&quot;get&quot;,value:function(e){return Te(this.wrappedObject,e)}},{key:&quot;set&quot;,value:function(e,t){return Be(this.wrappedObject,e,t),this}},{key:&quot;has&quot;,value:function(e){return e in this.wrappedObject}}]),e}();function Le(){return new Map}function Ue(e){if(!e)return Le();if($e(e))return e;if(D(e))return new Pe(e);throw new Error(&quot;createMap can create maps from objects or Maps&quot;)}function $e(e){return!!e&amp;&amp;(e instanceof Map||e instanceof Pe||&quot;function&quot;==typeof e.set&amp;&amp;&quot;function&quot;==typeof e.get&amp;&amp;&quot;function&quot;==typeof e.keys&amp;&amp;&quot;function&quot;==typeof e.has)}function He(e){for(var t=arguments.length,r=new Array(t&gt;1?t-1:0),n=1;n&lt;t;n++)r[n-1]=arguments[n];for(var i=0,a=r;i&lt;a.length;i++){var o=a[i];if(o)if($e(o)){var u,s=qe(o.keys());try{for(s.s();!(u=s.n()).done;){var c=u.value;e.set(c,o.get(c))}}catch(e){s.e(e)}finally{s.f()}}else if(D(o))for(var f=0,l=Object.keys(o);f&lt;l.length;f++){var p=l[f];e.set(p,o[p])}}return e}var Ge=function(){return Ge=G.create,G},Ve=Ee(&quot;typed&quot;,[&quot;?BigNumber&quot;,&quot;?Complex&quot;,&quot;?DenseMatrix&quot;,&quot;?Fraction&quot;],(function(e){var t=e.BigNumber,r=e.Complex,n=e.DenseMatrix,B=e.Fraction,H=Ge();return H.clear(),H.addTypes([{name:&quot;number&quot;,test:i},{name:&quot;Complex&quot;,test:o},{name:&quot;BigNumber&quot;,test:a},{name:&quot;Fraction&quot;,test:u},{name:&quot;Unit&quot;,test:s},{name:&quot;identifier&quot;,test:function(e){return c&amp;&amp;/^(?:[A-Za-z\sxAA\sxB5\sxBA\sxC0-\sxD6\sxD8-\sxF6\sxF8-\su02C1\su02C6-\su02D1\su02E0-\su02E4\su02EC\su02EE\su0370-\su0374\su0376\su0377\su037A-\su037D\su037F\su0386\su0388-\su038A\su038C\su038E-\su03A1\su03A3-\su03F5\su03F7-\su0481\su048A-\su052F\su0531-\su0556\su0559\su0560-\su0588\su05D0-\su05EA\su05EF-\su05F2\su0620-\su064A\su066E\su066F\su0671-\su06D3\su06D5\su06E5\su06E6\su06EE\su06EF\su06FA-\su06FC\su06FF\su0710\su0712-\su072F\su074D-\su07A5\su07B1\su07CA-\su07EA\su07F4\su07F5\su07FA\su0800-\su0815\su081A\su0824\su0828\su0840-\su0858\su0860-\su086A\su0870-\su0887\su0889-\su088E\su08A0-\su08C9\su0904-\su0939\su093D\su0950\su0958-\su0961\su0971-\su0980\su0985-\su098C\su098F\su0990\su0993-\su09A8\su09AA-\su09B0\su09B2\su09B6-\su09B9\su09BD\su09CE\su09DC\su09DD\su09DF-\su09E1\su09F0\su09F1\su09FC\su0A05-\su0A0A\su0A0F\su0A10\su0A13-\su0A28\su0A2A-\su0A30\su0A32\su0A33\su0A35\su0A36\su0A38\su0A39\su0A59-\su0A5C\su0A5E\su0A72-\su0A74\su0A85-\su0A8D\su0A8F-\su0A91\su0A93-\su0AA8\su0AAA-\su0AB0\su0AB2\su0AB3\su0AB5-\su0AB9\su0ABD\su0AD0\su0AE0\su0AE1\su0AF9\su0B05-\su0B0C\su0B0F\su0B10\su0B13-\su0B28\su0B2A-\su0B30\su0B32\su0B33\su0B35-\su0B39\su0B3D\su0B5C\su0B5D\su0B5F-\su0B61\su0B71\su0B83\su0B85-\su0B8A\su0B8E-\su0B90\su0B92-\su0B95\su0B99\su0B9A\su0B9C\su0B9E\su0B9F\su0BA3\su0BA4\su0BA8-\su0BAA\su0BAE-\su0BB9\su0BD0\su0C05-\su0C0C\su0C0E-\su0C10\su0C12-\su0C28\su0C2A-\su0C39\su0C3D\su0C58-\su0C5A\su0C5D\su0C60\su0C61\su0C80\su0C85-\su0C8C\su0C8E-\su0C90\su0C92-\su0CA8\su0CAA-\su0CB3\su0CB5-\su0CB9\su0CBD\su0CDD\su0CDE\su0CE0\su0CE1\su0CF1\su0CF2\su0D04-\su0D0C\su0D0E-\su0D10\su0D12-\su0D3A\su0D3D\su0D4E\su0D54-\su0D56\su0D5F-\su0D61\su0D7A-\su0D7F\su0D85-\su0D96\su0D9A-\su0DB1\su0DB3-\su0DBB\su0DBD\su0DC0-\su0DC6\su0E01-\su0E30\su0E32\su0E33\su0E40-\su0E46\su0E81\su0E82\su0E84\su0E86-\su0E8A\su0E8C-\su0EA3\su0EA5\su0EA7-\su0EB0\su0EB2\su0EB3\su0EBD\su0EC0-\su0EC4\su0EC6\su0EDC-\su0EDF\su0F00\su0F40-\su0F47\su0F49-\su0F6C\su0F88-\su0F8C\su1000-\su102A\su103F\su1050-\su1055\su105A-\su105D\su1061\su1065\su1066\su106E-\su1070\su1075-\su1081\su108E\su10A0-\su10C5\su10C7\su10CD\su10D0-\su10FA\su10FC-\su1248\su124A-\su124D\su1250-\su1256\su1258\su125A-\su125D\su1260-\su1288\su128A-\su128D\su1290-\su12B0\su12B2-\su12B5\su12B8-\su12BE\su12C0\su12C2-\su12C5\su12C8-\su12D6\su12D8-\su1310\su1312-\su1315\su1318-\su135A\su1380-\su138F\su13A0-\su13F5\su13F8-\su13FD\su1401-\su166C\su166F-\su167F\su1681-\su169A\su16A0-\su16EA\su16F1-\su16F8\su1700-\su1711\su171F-\su1731\su1740-\su1751\su1760-\su176C\su176E-\su1770\su1780-\su17B3\su17D7\su17DC\su1820-\su1878\su1880-\su1884\su1887-\su18A8\su18AA\su18B0-\su18F5\su1900-\su191E\su1950-\su196D\su1970-\su1974\su1980-\su19AB\su19B0-\su19C9\su1A00-\su1A16\su1A20-\su1A54\su1AA7\su1B05-\su1B33\su1B45-\su1B4C\su1B83-\su1BA0\su1BAE\su1BAF\su1BBA-\su1BE5\su1C00-\su1C23\su1C4D-\su1C4F\su1C5A-\su1C7D\su1C80-\su1C88\su1C90-\su1CBA\su1CBD-\su1CBF\su1CE9-\su1CEC\su1CEE-\su1CF3\su1CF5\su1CF6\su1CFA\su1D00-\su1DBF\su1E00-\su1F15\su1F18-\su1F1D\su1F20-\su1F45\su1F48-\su1F4D\su1F50-\su1F57\su1F59\su1F5B\su1F5D\su1F5F-\su1F7D\su1F80-\su1FB4\su1FB6-\su1FBC\su1FBE\su1FC2-\su1FC4\su1FC6-\su1FCC\su1FD0-\su1FD3\su1FD6-\su1FDB\su1FE0-\su1FEC\su1FF2-\su1FF4\su1FF6-\su1FFC\su2071\su207F\su2090-\su209C\su2102\su2107\su210A-\su2113\su2115\su2119-\su211D\su2124\su2126\su2128\su212A-\su212D\su212F-\su2139\su213C-\su213F\su2145-\su2149\su214E\su2183\su2184\su2C00-\su2CE4\su2CEB-\su2CEE\su2CF2\su2CF3\su2D00-\su2D25\su2D27\su2D2D\su2D30-\su2D67\su2D6F\su2D80-\su2D96\su2DA0-\su2DA6\su2DA8-\su2DAE\su2DB0-\su2DB6\su2DB8-\su2DBE\su2DC0-\su2DC6\su2DC8-\su2DCE\su2DD0-\su2DD6\su2DD8-\su2DDE\su2E2F\su3005\su3006\su3031-\su3035\su303B\su303C\su3041-\su3096\su309D-\su309F\su30A1-\su30FA\su30FC-\su30FF\su3105-\su312F\su3131-\su318E\su31A0-\su31BF\su31F0-\su31FF\su3400-\su4DBF\su4E00-\suA48C\suA4D0-\suA4FD\suA500-\suA60C\suA610-\suA61F\suA62A\suA62B\suA640-\suA66E\suA67F-\suA69D\suA6A0-\suA6E5\suA717-\suA71F\suA722-\suA788\suA78B-\suA7CA\suA7D0\suA7D1\suA7D3\suA7D5-\suA7D9\suA7F2-\suA801\suA803-\suA805\suA807-\suA80A\suA80C-\suA822\suA840-\suA873\suA882-\suA8B3\suA8F2-\suA8F7\suA8FB\suA8FD\suA8FE\suA90A-\suA925\suA930-\suA946\suA960-\suA97C\suA984-\suA9B2\suA9CF\suA9E0-\suA9E4\suA9E6-\suA9EF\suA9FA-\suA9FE\suAA00-\suAA28\suAA40-\suAA42\suAA44-\suAA4B\suAA60-\suAA76\suAA7A\suAA7E-\suAAAF\suAAB1\suAAB5\suAAB6\suAAB9-\suAABD\suAAC0\suAAC2\suAADB-\suAADD\suAAE0-\suAAEA\suAAF2-\suAAF4\suAB01-\suAB06\suAB09-\suAB0E\suAB11-\suAB16\suAB20-\suAB26\suAB28-\suAB2E\suAB30-\suAB5A\suAB5C-\suAB69\suAB70-\suABE2\suAC00-\suD7A3\suD7B0-\suD7C6\suD7CB-\suD7FB\suF900-\suFA6D\suFA70-\suFAD9\suFB00-\suFB06\suFB13-\suFB17\suFB1D\suFB1F-\suFB28\suFB2A-\suFB36\suFB38-\suFB3C\suFB3E\suFB40\suFB41\suFB43\suFB44\suFB46-\suFBB1\suFBD3-\suFD3D\suFD50-\suFD8F\suFD92-\suFDC7\suFDF0-\suFDFB\suFE70-\suFE74\suFE76-\suFEFC\suFF21-\suFF3A\suFF41-\suFF5A\suFF66-\suFFBE\suFFC2-\suFFC7\suFFCA-\suFFCF\suFFD2-\suFFD7\suFFDA-\suFFDC]|\suD800[\suDC00-\suDC0B\suDC0D-\suDC26\suDC28-\suDC3A\suDC3C\suDC3D\suDC3F-\suDC4D\suDC50-\suDC5D\suDC80-\suDCFA\suDE80-\suDE9C\suDEA0-\suDED0\suDF00-\suDF1F\suDF2D-\suDF40\suDF42-\suDF49\suDF50-\suDF75\suDF80-\suDF9D\suDFA0-\suDFC3\suDFC8-\suDFCF]|\suD801[\suDC00-\suDC9D\suDCB0-\suDCD3\suDCD8-\suDCFB\suDD00-\suDD27\suDD30-\suDD63\suDD70-\suDD7A\suDD7C-\suDD8A\suDD8C-\suDD92\suDD94\suDD95\suDD97-\suDDA1\suDDA3-\suDDB1\suDDB3-\suDDB9\suDDBB\suDDBC\suDE00-\suDF36\suDF40-\suDF55\suDF60-\suDF67\suDF80-\suDF85\suDF87-\suDFB0\suDFB2-\suDFBA]|\suD802[\suDC00-\suDC05\suDC08\suDC0A-\suDC35\suDC37\suDC38\suDC3C\suDC3F-\suDC55\suDC60-\suDC76\suDC80-\suDC9E\suDCE0-\suDCF2\suDCF4\suDCF5\suDD00-\suDD15\suDD20-\suDD39\suDD80-\suDDB7\suDDBE\suDDBF\suDE00\suDE10-\suDE13\suDE15-\suDE17\suDE19-\suDE35\suDE60-\suDE7C\suDE80-\suDE9C\suDEC0-\suDEC7\suDEC9-\suDEE4\suDF00-\suDF35\suDF40-\suDF55\suDF60-\suDF72\suDF80-\suDF91]|\suD803[\suDC00-\suDC48\suDC80-\suDCB2\suDCC0-\suDCF2\suDD00-\suDD23\suDE80-\suDEA9\suDEB0\suDEB1\suDF00-\suDF1C\suDF27\suDF30-\suDF45\suDF70-\suDF81\suDFB0-\suDFC4\suDFE0-\suDFF6]|\suD804[\suDC03-\suDC37\suDC71\suDC72\suDC75\suDC83-\suDCAF\suDCD0-\suDCE8\suDD03-\suDD26\suDD44\suDD47\suDD50-\suDD72\suDD76\suDD83-\suDDB2\suDDC1-\suDDC4\suDDDA\suDDDC\suDE00-\suDE11\suDE13-\suDE2B\suDE3F\suDE40\suDE80-\suDE86\suDE88\suDE8A-\suDE8D\suDE8F-\suDE9D\suDE9F-\suDEA8\suDEB0-\suDEDE\suDF05-\suDF0C\suDF0F\suDF10\suDF13-\suDF28\suDF2A-\suDF30\suDF32\suDF33\suDF35-\suDF39\suDF3D\suDF50\suDF5D-\suDF61]|\suD805[\suDC00-\suDC34\suDC47-\suDC4A\suDC5F-\suDC61\suDC80-\suDCAF\suDCC4\suDCC5\suDCC7\suDD80-\suDDAE\suDDD8-\suDDDB\suDE00-\suDE2F\suDE44\suDE80-\suDEAA\suDEB8\suDF00-\suDF1A\suDF40-\suDF46]|\suD806[\suDC00-\suDC2B\suDCA0-\suDCDF\suDCFF-\suDD06\suDD09\suDD0C-\suDD13\suDD15\suDD16\suDD18-\suDD2F\suDD3F\suDD41\suDDA0-\suDDA7\suDDAA-\suDDD0\suDDE1\suDDE3\suDE00\suDE0B-\suDE32\suDE3A\suDE50\suDE5C-\suDE89\suDE9D\suDEB0-\suDEF8]|\suD807[\suDC00-\suDC08\suDC0A-\suDC2E\suDC40\suDC72-\suDC8F\suDD00-\suDD06\suDD08\suDD09\suDD0B-\suDD30\suDD46\suDD60-\suDD65\suDD67\suDD68\suDD6A-\suDD89\suDD98\suDEE0-\suDEF2\suDF02\suDF04-\suDF10\suDF12-\suDF33\suDFB0]|\suD808[\suDC00-\suDF99]|\suD809[\suDC80-\suDD43]|\suD80B[\suDF90-\suDFF0]|[\suD80C\suD81C-\suD820\suD822\suD840-\suD868\suD86A-\suD86C\suD86F-\suD872\suD874-\suD879\suD880-\suD883\suD885-\suD887][\suDC00-\suDFFF]|\suD80D[\suDC00-\suDC2F\suDC41-\suDC46]|\suD811[\suDC00-\suDE46]|\suD81A[\suDC00-\suDE38\suDE40-\suDE5E\suDE70-\suDEBE\suDED0-\suDEED\suDF00-\suDF2F\suDF40-\suDF43\suDF63-\suDF77\suDF7D-\suDF8F]|\suD81B[\suDE40-\suDE7F\suDF00-\suDF4A\suDF50\suDF93-\suDF9F\suDFE0\suDFE1\suDFE3]|\suD821[\suDC00-\suDFF7]|\suD823[\suDC00-\suDCD5\suDD00-\suDD08]|\suD82B[\suDFF0-\suDFF3\suDFF5-\suDFFB\suDFFD\suDFFE]|\suD82C[\suDC00-\suDD22\suDD32\suDD50-\suDD52\suDD55\suDD64-\suDD67\suDD70-\suDEFB]|\suD82F[\suDC00-\suDC6A\suDC70-\suDC7C\suDC80-\suDC88\suDC90-\suDC99]|\suD835[\suDC00-\suDC54\suDC56-\suDC9C\suDC9E\suDC9F\suDCA2\suDCA5\suDCA6\suDCA9-\suDCAC\suDCAE-\suDCB9\suDCBB\suDCBD-\suDCC3\suDCC5-\suDD05\suDD07-\suDD0A\suDD0D-\suDD14\suDD16-\suDD1C\suDD1E-\suDD39\suDD3B-\suDD3E\suDD40-\suDD44\suDD46\suDD4A-\suDD50\suDD52-\suDEA5\suDEA8-\suDEC0\suDEC2-\suDEDA\suDEDC-\suDEFA\suDEFC-\suDF14\suDF16-\suDF34\suDF36-\suDF4E\suDF50-\suDF6E\suDF70-\suDF88\suDF8A-\suDFA8\suDFAA-\suDFC2\suDFC4-\suDFCB]|\suD837[\suDF00-\suDF1E\suDF25-\suDF2A]|\suD838[\suDC30-\suDC6D\suDD00-\suDD2C\suDD37-\suDD3D\suDD4E\suDE90-\suDEAD\suDEC0-\suDEEB]|\suD839[\suDCD0-\suDCEB\suDFE0-\suDFE6\suDFE8-\suDFEB\suDFED\suDFEE\suDFF0-\suDFFE]|\suD83A[\suDC00-\suDCC4\suDD00-\suDD43\suDD4B]|\suD83B[\suDE00-\suDE03\suDE05-\suDE1F\suDE21\suDE22\suDE24\suDE27\suDE29-\suDE32\suDE34-\suDE37\suDE39\suDE3B\suDE42\suDE47\suDE49\suDE4B\suDE4D-\suDE4F\suDE51\suDE52\suDE54\suDE57\suDE59\suDE5B\suDE5D\suDE5F\suDE61\suDE62\suDE64\suDE67-\suDE6A\suDE6C-\suDE72\suDE74-\suDE77\suDE79-\suDE7C\suDE7E\suDE80-\suDE89\suDE8B-\suDE9B\suDEA1-\suDEA3\suDEA5-\suDEA9\suDEAB-\suDEBB]|\suD869[\suDC00-\suDEDF\suDF00-\suDFFF]|\suD86D[\suDC00-\suDF39\suDF40-\suDFFF]|\suD86E[\suDC00-\suDC1D\suDC20-\suDFFF]|\suD873[\suDC00-\suDEA1\suDEB0-\suDFFF]|\suD87A[\suDC00-\suDFE0]|\suD87E[\suDC00-\suDE1D]|\suD884[\suDC00-\suDF4A\suDF50-\suDFFF]|\suD888[\suDC00-\suDFAF])(?:[0-9A-Za-z\sxAA\sxB5\sxBA\sxC0-\sxD6\sxD8-\sxF6\sxF8-\su02C1\su02C6-\su02D1\su02E0-\su02E4\su02EC\su02EE\su0370-\su0374\su0376\su0377\su037A-\su037D\su037F\su0386\su0388-\su038A\su038C\su038E-\su03A1\su03A3-\su03F5\su03F7-\su0481\su048A-\su052F\su0531-\su0556\su0559\su0560-\su0588\su05D0-\su05EA\su05EF-\su05F2\su0620-\su064A\su066E\su066F\su0671-\su06D3\su06D5\su06E5\su06E6\su06EE\su06EF\su06FA-\su06FC\su06FF\su0710\su0712-\su072F\su074D-\su07A5\su07B1\su07CA-\su07EA\su07F4\su07F5\su07FA\su0800-\su0815\su081A\su0824\su0828\su0840-\su0858\su0860-\su086A\su0870-\su0887\su0889-\su088E\su08A0-\su08C9\su0904-\su0939\su093D\su0950\su0958-\su0961\su0971-\su0980\su0985-\su098C\su098F\su0990\su0993-\su09A8\su09AA-\su09B0\su09B2\su09B6-\su09B9\su09BD\su09CE\su09DC\su09DD\su09DF-\su09E1\su09F0\su09F1\su09FC\su0A05-\su0A0A\su0A0F\su0A10\su0A13-\su0A28\su0A2A-\su0A30\su0A32\su0A33\su0A35\su0A36\su0A38\su0A39\su0A59-\su0A5C\su0A5E\su0A72-\su0A74\su0A85-\su0A8D\su0A8F-\su0A91\su0A93-\su0AA8\su0AAA-\su0AB0\su0AB2\su0AB3\su0AB5-\su0AB9\su0ABD\su0AD0\su0AE0\su0AE1\su0AF9\su0B05-\su0B0C\su0B0F\su0B10\su0B13-\su0B28\su0B2A-\su0B30\su0B32\su0B33\su0B35-\su0B39\su0B3D\su0B5C\su0B5D\su0B5F-\su0B61\su0B71\su0B83\su0B85-\su0B8A\su0B8E-\su0B90\su0B92-\su0B95\su0B99\su0B9A\su0B9C\su0B9E\su0B9F\su0BA3\su0BA4\su0BA8-\su0BAA\su0BAE-\su0BB9\su0BD0\su0C05-\su0C0C\su0C0E-\su0C10\su0C12-\su0C28\su0C2A-\su0C39\su0C3D\su0C58-\su0C5A\su0C5D\su0C60\su0C61\su0C80\su0C85-\su0C8C\su0C8E-\su0C90\su0C92-\su0CA8\su0CAA-\su0CB3\su0CB5-\su0CB9\su0CBD\su0CDD\su0CDE\su0CE0\su0CE1\su0CF1\su0CF2\su0D04-\su0D0C\su0D0E-\su0D10\su0D12-\su0D3A\su0D3D\su0D4E\su0D54-\su0D56\su0D5F-\su0D61\su0D7A-\su0D7F\su0D85-\su0D96\su0D9A-\su0DB1\su0DB3-\su0DBB\su0DBD\su0DC0-\su0DC6\su0E01-\su0E30\su0E32\su0E33\su0E40-\su0E46\su0E81\su0E82\su0E84\su0E86-\su0E8A\su0E8C-\su0EA3\su0EA5\su0EA7-\su0EB0\su0EB2\su0EB3\su0EBD\su0EC0-\su0EC4\su0EC6\su0EDC-\su0EDF\su0F00\su0F40-\su0F47\su0F49-\su0F6C\su0F88-\su0F8C\su1000-\su102A\su103F\su1050-\su1055\su105A-\su105D\su1061\su1065\su1066\su106E-\su1070\su1075-\su1081\su108E\su10A0-\su10C5\su10C7\su10CD\su10D0-\su10FA\su10FC-\su1248\su124A-\su124D\su1250-\su1256\su1258\su125A-\su125D\su1260-\su1288\su128A-\su128D\su1290-\su12B0\su12B2-\su12B5\su12B8-\su12BE\su12C0\su12C2-\su12C5\su12C8-\su12D6\su12D8-\su1310\su1312-\su1315\su1318-\su135A\su1380-\su138F\su13A0-\su13F5\su13F8-\su13FD\su1401-\su166C\su166F-\su167F\su1681-\su169A\su16A0-\su16EA\su16F1-\su16F8\su1700-\su1711\su171F-\su1731\su1740-\su1751\su1760-\su176C\su176E-\su1770\su1780-\su17B3\su17D7\su17DC\su1820-\su1878\su1880-\su1884\su1887-\su18A8\su18AA\su18B0-\su18F5\su1900-\su191E\su1950-\su196D\su1970-\su1974\su1980-\su19AB\su19B0-\su19C9\su1A00-\su1A16\su1A20-\su1A54\su1AA7\su1B05-\su1B33\su1B45-\su1B4C\su1B83-\su1BA0\su1BAE\su1BAF\su1BBA-\su1BE5\su1C00-\su1C23\su1C4D-\su1C4F\su1C5A-\su1C7D\su1C80-\su1C88\su1C90-\su1CBA\su1CBD-\su1CBF\su1CE9-\su1CEC\su1CEE-\su1CF3\su1CF5\su1CF6\su1CFA\su1D00-\su1DBF\su1E00-\su1F15\su1F18-\su1F1D\su1F20-\su1F45\su1F48-\su1F4D\su1F50-\su1F57\su1F59\su1F5B\su1F5D\su1F5F-\su1F7D\su1F80-\su1FB4\su1FB6-\su1FBC\su1FBE\su1FC2-\su1FC4\su1FC6-\su1FCC\su1FD0-\su1FD3\su1FD6-\su1FDB\su1FE0-\su1FEC\su1FF2-\su1FF4\su1FF6-\su1FFC\su2071\su207F\su2090-\su209C\su2102\su2107\su210A-\su2113\su2115\su2119-\su211D\su2124\su2126\su2128\su212A-\su212D\su212F-\su2139\su213C-\su213F\su2145-\su2149\su214E\su2183\su2184\su2C00-\su2CE4\su2CEB-\su2CEE\su2CF2\su2CF3\su2D00-\su2D25\su2D27\su2D2D\su2D30-\su2D67\su2D6F\su2D80-\su2D96\su2DA0-\su2DA6\su2DA8-\su2DAE\su2DB0-\su2DB6\su2DB8-\su2DBE\su2DC0-\su2DC6\su2DC8-\su2DCE\su2DD0-\su2DD6\su2DD8-\su2DDE\su2E2F\su3005\su3006\su3031-\su3035\su303B\su303C\su3041-\su3096\su309D-\su309F\su30A1-\su30FA\su30FC-\su30FF\su3105-\su312F\su3131-\su318E\su31A0-\su31BF\su31F0-\su31FF\su3400-\su4DBF\su4E00-\suA48C\suA4D0-\suA4FD\suA500-\suA60C\suA610-\suA61F\suA62A\suA62B\suA640-\suA66E\suA67F-\suA69D\suA6A0-\suA6E5\suA717-\suA71F\suA722-\suA788\suA78B-\suA7CA\suA7D0\suA7D1\suA7D3\suA7D5-\suA7D9\suA7F2-\suA801\suA803-\suA805\suA807-\suA80A\suA80C-\suA822\suA840-\suA873\suA882-\suA8B3\suA8F2-\suA8F7\suA8FB\suA8FD\suA8FE\suA90A-\suA925\suA930-\suA946\suA960-\suA97C\suA984-\suA9B2\suA9CF\suA9E0-\suA9E4\suA9E6-\suA9EF\suA9FA-\suA9FE\suAA00-\suAA28\suAA40-\suAA42\suAA44-\suAA4B\suAA60-\suAA76\suAA7A\suAA7E-\suAAAF\suAAB1\suAAB5\suAAB6\suAAB9-\suAABD\suAAC0\suAAC2\suAADB-\suAADD\suAAE0-\suAAEA\suAAF2-\suAAF4\suAB01-\suAB06\suAB09-\suAB0E\suAB11-\suAB16\suAB20-\suAB26\suAB28-\suAB2E\suAB30-\suAB5A\suAB5C-\suAB69\suAB70-\suABE2\suAC00-\suD7A3\suD7B0-\suD7C6\suD7CB-\suD7FB\suF900-\suFA6D\suFA70-\suFAD9\suFB00-\suFB06\suFB13-\suFB17\suFB1D\suFB1F-\suFB28\suFB2A-\suFB36\suFB38-\suFB3C\suFB3E\suFB40\suFB41\suFB43\suFB44\suFB46-\suFBB1\suFBD3-\suFD3D\suFD50-\suFD8F\suFD92-\suFDC7\suFDF0-\suFDFB\suFE70-\suFE74\suFE76-\suFEFC\suFF21-\suFF3A\suFF41-\suFF5A\suFF66-\suFFBE\suFFC2-\suFFC7\suFFCA-\suFFCF\suFFD2-\suFFD7\suFFDA-\suFFDC]|\suD800[\suDC00-\suDC0B\suDC0D-\suDC26\suDC28-\suDC3A\suDC3C\suDC3D\suDC3F-\suDC4D\suDC50-\suDC5D\suDC80-\suDCFA\suDE80-\suDE9C\suDEA0-\suDED0\suDF00-\suDF1F\suDF2D-\suDF40\suDF42-\suDF49\suDF50-\suDF75\suDF80-\suDF9D\suDFA0-\suDFC3\suDFC8-\suDFCF]|\suD801[\suDC00-\suDC9D\suDCB0-\suDCD3\suDCD8-\suDCFB\suDD00-\suDD27\suDD30-\suDD63\suDD70-\suDD7A\suDD7C-\suDD8A\suDD8C-\suDD92\suDD94\suDD95\suDD97-\suDDA1\suDDA3-\suDDB1\suDDB3-\suDDB9\suDDBB\suDDBC\suDE00-\suDF36\suDF40-\suDF55\suDF60-\suDF67\suDF80-\suDF85\suDF87-\suDFB0\suDFB2-\suDFBA]|\suD802[\suDC00-\suDC05\suDC08\suDC0A-\suDC35\suDC37\suDC38\suDC3C\suDC3F-\suDC55\suDC60-\suDC76\suDC80-\suDC9E\suDCE0-\suDCF2\suDCF4\suDCF5\suDD00-\suDD15\suDD20-\suDD39\suDD80-\suDDB7\suDDBE\suDDBF\suDE00\suDE10-\suDE13\suDE15-\suDE17\suDE19-\suDE35\suDE60-\suDE7C\suDE80-\suDE9C\suDEC0-\suDEC7\suDEC9-\suDEE4\suDF00-\suDF35\suDF40-\suDF55\suDF60-\suDF72\suDF80-\suDF91]|\suD803[\suDC00-\suDC48\suDC80-\suDCB2\suDCC0-\suDCF2\suDD00-\suDD23\suDE80-\suDEA9\suDEB0\suDEB1\suDF00-\suDF1C\suDF27\suDF30-\suDF45\suDF70-\suDF81\suDFB0-\suDFC4\suDFE0-\suDFF6]|\suD804[\suDC03-\suDC37\suDC71\suDC72\suDC75\suDC83-\suDCAF\suDCD0-\suDCE8\suDD03-\suDD26\suDD44\suDD47\suDD50-\suDD72\suDD76\suDD83-\suDDB2\suDDC1-\suDDC4\suDDDA\suDDDC\suDE00-\suDE11\suDE13-\suDE2B\suDE3F\suDE40\suDE80-\suDE86\suDE88\suDE8A-\suDE8D\suDE8F-\suDE9D\suDE9F-\suDEA8\suDEB0-\suDEDE\suDF05-\suDF0C\suDF0F\suDF10\suDF13-\suDF28\suDF2A-\suDF30\suDF32\suDF33\suDF35-\suDF39\suDF3D\suDF50\suDF5D-\suDF61]|\suD805[\suDC00-\suDC34\suDC47-\suDC4A\suDC5F-\suDC61\suDC80-\suDCAF\suDCC4\suDCC5\suDCC7\suDD80-\suDDAE\suDDD8-\suDDDB\suDE00-\suDE2F\suDE44\suDE80-\suDEAA\suDEB8\suDF00-\suDF1A\suDF40-\suDF46]|\suD806[\suDC00-\suDC2B\suDCA0-\suDCDF\suDCFF-\suDD06\suDD09\suDD0C-\suDD13\suDD15\suDD16\suDD18-\suDD2F\suDD3F\suDD41\suDDA0-\suDDA7\suDDAA-\suDDD0\suDDE1\suDDE3\suDE00\suDE0B-\suDE32\suDE3A\suDE50\suDE5C-\suDE89\suDE9D\suDEB0-\suDEF8]|\suD807[\suDC00-\suDC08\suDC0A-\suDC2E\suDC40\suDC72-\suDC8F\suDD00-\suDD06\suDD08\suDD09\suDD0B-\suDD30\suDD46\suDD60-\suDD65\suDD67\suDD68\suDD6A-\suDD89\suDD98\suDEE0-\suDEF2\suDF02\suDF04-\suDF10\suDF12-\suDF33\suDFB0]|\suD808[\suDC00-\suDF99]|\suD809[\suDC80-\suDD43]|\suD80B[\suDF90-\suDFF0]|[\suD80C\suD81C-\suD820\suD822\suD840-\suD868\suD86A-\suD86C\suD86F-\suD872\suD874-\suD879\suD880-\suD883\suD885-\suD887][\suDC00-\suDFFF]|\suD80D[\suDC00-\suDC2F\suDC41-\suDC46]|\suD811[\suDC00-\suDE46]|\suD81A[\suDC00-\suDE38\suDE40-\suDE5E\suDE70-\suDEBE\suDED0-\suDEED\suDF00-\suDF2F\suDF40-\suDF43\suDF63-\suDF77\suDF7D-\suDF8F]|\suD81B[\suDE40-\suDE7F\suDF00-\suDF4A\suDF50\suDF93-\suDF9F\suDFE0\suDFE1\suDFE3]|\suD821[\suDC00-\suDFF7]|\suD823[\suDC00-\suDCD5\suDD00-\suDD08]|\suD82B[\suDFF0-\suDFF3\suDFF5-\suDFFB\suDFFD\suDFFE]|\suD82C[\suDC00-\suDD22\suDD32\suDD50-\suDD52\suDD55\suDD64-\suDD67\suDD70-\suDEFB]|\suD82F[\suDC00-\suDC6A\suDC70-\suDC7C\suDC80-\suDC88\suDC90-\suDC99]|\suD835[\suDC00-\suDC54\suDC56-\suDC9C\suDC9E\suDC9F\suDCA2\suDCA5\suDCA6\suDCA9-\suDCAC\suDCAE-\suDCB9\suDCBB\suDCBD-\suDCC3\suDCC5-\suDD05\suDD07-\suDD0A\suDD0D-\suDD14\suDD16-\suDD1C\suDD1E-\suDD39\suDD3B-\suDD3E\suDD40-\suDD44\suDD46\suDD4A-\suDD50\suDD52-\suDEA5\suDEA8-\suDEC0\suDEC2-\suDEDA\suDEDC-\suDEFA\suDEFC-\suDF14\suDF16-\suDF34\suDF36-\suDF4E\suDF50-\suDF6E\suDF70-\suDF88\suDF8A-\suDFA8\suDFAA-\suDFC2\suDFC4-\suDFCB]|\suD837[\suDF00-\suDF1E\suDF25-\suDF2A]|\suD838[\suDC30-\suDC6D\suDD00-\suDD2C\suDD37-\suDD3D\suDD4E\suDE90-\suDEAD\suDEC0-\suDEEB]|\suD839[\suDCD0-\suDCEB\suDFE0-\suDFE6\suDFE8-\suDFEB\suDFED\suDFEE\suDFF0-\suDFFE]|\suD83A[\suDC00-\suDCC4\suDD00-\suDD43\suDD4B]|\suD83B[\suDE00-\suDE03\suDE05-\suDE1F\suDE21\suDE22\suDE24\suDE27\suDE29-\suDE32\suDE34-\suDE37\suDE39\suDE3B\suDE42\suDE47\suDE49\suDE4B\suDE4D-\suDE4F\suDE51\suDE52\suDE54\suDE57\suDE59\suDE5B\suDE5D\suDE5F\suDE61\suDE62\suDE64\suDE67-\suDE6A\suDE6C-\suDE72\suDE74-\suDE77\suDE79-\suDE7C\suDE7E\suDE80-\suDE89\suDE8B-\suDE9B\suDEA1-\suDEA3\suDEA5-\suDEA9\suDEAB-\suDEBB]|\suD869[\suDC00-\suDEDF\suDF00-\suDFFF]|\suD86D[\suDC00-\suDF39\suDF40-\suDFFF]|\suD86E[\suDC00-\suDC1D\suDC20-\suDFFF]|\suD873[\suDC00-\suDEA1\suDEB0-\suDFFF]|\suD87A[\suDC00-\suDFE0]|\suD87E[\suDC00-\suDE1D]|\suD884[\suDC00-\suDF4A\suDF50-\suDFFF]|\suD888[\suDC00-\suDFAF])*$/.test(e)}},{name:&quot;string&quot;,test:c},{name:&quot;Chain&quot;,test:$},{name:&quot;Array&quot;,test:f},{name:&quot;Matrix&quot;,test:l},{name:&quot;DenseMatrix&quot;,test:m},{name:&quot;SparseMatrix&quot;,test:h},{name:&quot;Range&quot;,test:d},{name:&quot;Index&quot;,test:v},{name:&quot;boolean&quot;,test:y},{name:&quot;ResultSet&quot;,test:g},{name:&quot;Help&quot;,test:x},{name:&quot;function&quot;,test:b},{name:&quot;Date&quot;,test:w},{name:&quot;RegExp&quot;,test:N},{name:&quot;null&quot;,test:E},{name:&quot;undefined&quot;,test:A},{name:&quot;AccessorNode&quot;,test:S},{name:&quot;ArrayNode&quot;,test:C},{name:&quot;AssignmentNode&quot;,test:M},{name:&quot;BlockNode&quot;,test:F},{name:&quot;ConditionalNode&quot;,test:O},{name:&quot;ConstantNode&quot;,test:T},{name:&quot;FunctionNode&quot;,test:k},{name:&quot;FunctionAssignmentNode&quot;,test:_},{name:&quot;IndexNode&quot;,test:I},{name:&quot;Node&quot;,test:R},{name:&quot;ObjectNode&quot;,test:z},{name:&quot;OperatorNode&quot;,test:q},{name:&quot;ParenthesisNode&quot;,test:j},{name:&quot;RangeNode&quot;,test:P},{name:&quot;RelationalNode&quot;,test:L},{name:&quot;SymbolNode&quot;,test:U},{name:&quot;Map&quot;,test:$e},{name:&quot;Object&quot;,test:D}]),H.addConversions([{from:&quot;number&quot;,to:&quot;BigNumber&quot;,convert:function(e){if(t||Ze(e),e.toExponential().replace(/e.*$/,&quot;&quot;).replace(/^0\s.?0*|\s./,&quot;&quot;).length&gt;15)throw new TypeError(&quot;Cannot implicitly convert a number with &gt;15 significant digits to BigNumber (value: &quot;+e+&quot;). Use function bignumber(x) to convert to BigNumber.&quot;);return new t(e)}},{from:&quot;number&quot;,to:&quot;Complex&quot;,convert:function(e){return r||We(e),new r(e,0)}},{from:&quot;BigNumber&quot;,to:&quot;Complex&quot;,convert:function(e){return r||We(e),new r(e.toNumber(),0)}},{from:&quot;Fraction&quot;,to:&quot;BigNumber&quot;,convert:function(e){throw new TypeError(&quot;Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.&quot;)}},{from:&quot;Fraction&quot;,to:&quot;Complex&quot;,convert:function(e){return r||We(e),new r(e.valueOf(),0)}},{from:&quot;number&quot;,to:&quot;Fraction&quot;,convert:function(e){B||Ye(e);var t=new B(e);if(t.valueOf()!==e)throw new TypeError(&quot;Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: &quot;+e+&quot;). Use function fraction(x) to convert to Fraction.&quot;);return t}},{from:&quot;string&quot;,to:&quot;number&quot;,convert:function(e){var t=Number(e);if(isNaN(t))throw new Error('Cannot convert &quot;'+e+'&quot; to a number');return t}},{from:&quot;string&quot;,to:&quot;BigNumber&quot;,convert:function(e){t||Ze(e);try{return new t(e)}catch(t){throw new Error('Cannot convert &quot;'+e+'&quot; to BigNumber')}}},{from:&quot;string&quot;,to:&quot;Fraction&quot;,convert:function(e){B||Ye(e);try{return new B(e)}catch(t){throw new Error('Cannot convert &quot;'+e+'&quot; to Fraction')}}},{from:&quot;string&quot;,to:&quot;Complex&quot;,convert:function(e){r||We(e);try{return new r(e)}catch(t){throw new Error('Cannot convert &quot;'+e+'&quot; to Complex')}}},{from:&quot;boolean&quot;,to:&quot;number&quot;,convert:function(e){return+e}},{from:&quot;boolean&quot;,to:&quot;BigNumber&quot;,convert:function(e){return t||Ze(e),new t(+e)}},{from:&quot;boolean&quot;,to:&quot;Fraction&quot;,convert:function(e){return B||Ye(e),new B(+e)}},{from:&quot;boolean&quot;,to:&quot;string&quot;,convert:function(e){return String(e)}},{from:&quot;Array&quot;,to:&quot;Matrix&quot;,convert:function(e){return n||function(){throw new Error(&quot;Cannot convert array into a Matrix: no class 'DenseMatrix' provided&quot;)}(),new n(e)}},{from:&quot;Matrix&quot;,to:&quot;Array&quot;,convert:function(e){return e.valueOf()}}]),H.onMismatch=function(e,t,r){var n=H.createError(e,t,r);if([&quot;wrongType&quot;,&quot;mismatch&quot;].includes(n.data.category)&amp;&amp;1===t.length&amp;&amp;p(t[0])&amp;&amp;r.some((function(e){return!e.params.includes(&quot;,&quot;)}))){var i=new TypeError(&quot;Function '&quot;.concat(e,&quot;' doesn't apply to matrices. To call it &quot;)+&quot;elementwise on a matrix 'M', try 'map(M, &quot;.concat(e,&quot;)'.&quot;));throw i.data=n.data,i}throw n},H.onMismatch=function(e,t,r){var n=H.createError(e,t,r);if([&quot;wrongType&quot;,&quot;mismatch&quot;].includes(n.data.category)&amp;&amp;1===t.length&amp;&amp;p(t[0])&amp;&amp;r.some((function(e){return!e.params.includes(&quot;,&quot;)}))){var i=new TypeError(&quot;Function '&quot;.concat(e,&quot;' doesn't apply to matrices. To call it &quot;)+&quot;elementwise on a matrix 'M', try 'map(M, &quot;.concat(e,&quot;)'.&quot;));throw i.data=n.data,i}throw n},H}));function Ze(e){throw new Error(&quot;Cannot convert value &quot;.concat(e,&quot; into a BigNumber: no class 'BigNumber' provided&quot;))}function We(e){throw new Error(&quot;Cannot convert value &quot;.concat(e,&quot; into a Complex number: no class 'Complex' provided&quot;))}function Ye(e){throw new Error(&quot;Cannot convert value &quot;.concat(e,&quot; into a Fraction, no class 'Fraction' provided.&quot;))}r(5735),r(3753);var Je,Xe,Qe=Ee(&quot;ResultSet&quot;,[],(function(){function e(t){if(!(this instanceof e))throw new SyntaxError(&quot;Constructor must be called with the new operator&quot;);this.entries=t||[]}return e.prototype.type=&quot;ResultSet&quot;,e.prototype.isResultSet=!0,e.prototype.valueOf=function(){return this.entries},e.prototype.toString=function(){return&quot;[&quot;+this.entries.join(&quot;, &quot;)+&quot;]&quot;},e.prototype.toJSON=function(){return{mathjs:&quot;ResultSet&quot;,entries:this.entries}},e.fromJSON=function(t){return new e(t.entries)},e}),{isClass:!0}),Ke=(r(8011),9e15),et=1e9,tt=&quot;0123456789abcdef&quot;,rt=&quot;2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058&quot;,nt=&quot;3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789&quot;,it={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Ke,maxE:Ke,crypto:!1},at=!0,ot=&quot;[DecimalError] &quot;,ut=ot+&quot;Invalid argument: &quot;,st=ot+&quot;Precision limit exceeded&quot;,ct=ot+&quot;crypto unavailable&quot;,ft=&quot;[object Decimal]&quot;,lt=Math.floor,pt=Math.pow,mt=/^0b([01]+(\s.[01]*)?|\s.[01]+)(p[+-]?\sd+)?$/i,ht=/^0x([0-9a-f]+(\s.[0-9a-f]*)?|\s.[0-9a-f]+)(p[+-]?\sd+)?$/i,dt=/^0o([0-7]+(\s.[0-7]*)?|\s.[0-7]+)(p[+-]?\sd+)?$/i,vt=/^(\sd+(\s.\sd*)?|\s.\sd+)(e[+-]?\sd+)?$/i,yt=1e7,gt=7,xt=rt.length-1,bt=nt.length-1,wt={toStringTag:ft};function Nt(e){var t,r,n,i=e.length-1,a=&quot;&quot;,o=e[0];if(i&gt;0){for(a+=o,t=1;t&lt;i;t++)n=e[t]+&quot;&quot;,(r=gt-n.length)&amp;&amp;(a+=_t(r)),a+=n;o=e[t],(r=gt-(n=o+&quot;&quot;).length)&amp;&amp;(a+=_t(r))}else if(0===o)return&quot;0&quot;;for(;o%10==0;)o/=10;return a+o}function Dt(e,t,r){if(e!==~~e||e&lt;t||e&gt;r)throw Error(ut+e)}function Et(e,t,r,n){var i,a,o,u;for(a=e[0];a&gt;=10;a/=10)--t;return--t&lt;0?(t+=gt,i=0):(i=Math.ceil((t+1)/gt),t%=gt),a=pt(10,gt-t),u=e[i]%a|0,null==n?t&lt;3?(0==t?u=u/100|0:1==t&amp;&amp;(u=u/10|0),o=r&lt;4&amp;&amp;99999==u||r&gt;3&amp;&amp;49999==u||5e4==u||0==u):o=(r&lt;4&amp;&amp;u+1==a||r&gt;3&amp;&amp;u+1==a/2)&amp;&amp;(e[i+1]/a/100|0)==pt(10,t-2)-1||(u==a/2||0==u)&amp;&amp;0==(e[i+1]/a/100|0):t&lt;4?(0==t?u=u/1e3|0:1==t?u=u/100|0:2==t&amp;&amp;(u=u/10|0),o=(n||r&lt;4)&amp;&amp;9999==u||!n&amp;&amp;r&gt;3&amp;&amp;4999==u):o=((n||r&lt;4)&amp;&amp;u+1==a||!n&amp;&amp;r&gt;3&amp;&amp;u+1==a/2)&amp;&amp;(e[i+1]/a/1e3|0)==pt(10,t-3)-1,o}function At(e,t,r){for(var n,i,a=[0],o=0,u=e.length;o&lt;u;){for(i=a.length;i--;)a[i]*=t;for(a[0]+=tt.indexOf(e.charAt(o++)),n=0;n&lt;a.length;n++)a[n]&gt;r-1&amp;&amp;(void 0===a[n+1]&amp;&amp;(a[n+1]=0),a[n+1]+=a[n]/r|0,a[n]%=r)}return a.reverse()}wt.absoluteValue=wt.abs=function(){var e=new this.constructor(this);return e.s&lt;0&amp;&amp;(e.s=1),Ct(e)},wt.ceil=function(){return Ct(new this.constructor(this),this.e+1,2)},wt.clampedTo=wt.clamp=function(e,t){var r=this,n=r.constructor;if(e=new n(e),t=new n(t),!e.s||!t.s)return new n(NaN);if(e.gt(t))throw Error(ut+t);return r.cmp(e)&lt;0?e:r.cmp(t)&gt;0?t:new n(r)},wt.comparedTo=wt.cmp=function(e){var t,r,n,i,a=this,o=a.d,u=(e=new a.constructor(e)).d,s=a.s,c=e.s;if(!o||!u)return s&amp;&amp;c?s!==c?s:o===u?0:!o^s&lt;0?1:-1:NaN;if(!o[0]||!u[0])return o[0]?s:u[0]?-c:0;if(s!==c)return s;if(a.e!==e.e)return a.e&gt;e.e^s&lt;0?1:-1;for(t=0,r=(n=o.length)&lt;(i=u.length)?n:i;t&lt;r;++t)if(o[t]!==u[t])return o[t]&gt;u[t]^s&lt;0?1:-1;return n===i?0:n&gt;i^s&lt;0?1:-1},wt.cosine=wt.cos=function(){var e,t,r=this,n=r.constructor;return r.d?r.d[0]?(e=n.precision,t=n.rounding,n.precision=e+Math.max(r.e,r.sd())+gt,n.rounding=1,r=function(e,t){var r,n,i;if(t.isZero())return t;(n=t.d.length)&lt;32?i=(1/$t(4,r=Math.ceil(n/3))).toString():(r=16,i=&quot;2.3283064365386962890625e-10&quot;),e.precision+=r,t=Ut(e,1,t.times(i),new e(1));for(var a=r;a--;){var o=t.times(t);t=o.times(o).minus(o).times(8).plus(1)}return e.precision-=r,t}(n,Ht(n,r)),n.precision=e,n.rounding=t,Ct(2==Xe||3==Xe?r.neg():r,e,t,!0)):new n(1):new n(NaN)},wt.cubeRoot=wt.cbrt=function(){var e,t,r,n,i,a,o,u,s,c,f=this,l=f.constructor;if(!f.isFinite()||f.isZero())return new l(f);for(at=!1,(a=f.s*pt(f.s*f,1/3))&amp;&amp;Math.abs(a)!=1/0?n=new l(a.toString()):(r=Nt(f.d),(a=((e=f.e)-r.length+1)%3)&amp;&amp;(r+=1==a||-2==a?&quot;0&quot;:&quot;00&quot;),a=pt(r,1/3),e=lt((e+1)/3)-(e%3==(e&lt;0?-1:2)),(n=new l(r=a==1/0?&quot;5e&quot;+e:(r=a.toExponential()).slice(0,r.indexOf(&quot;e&quot;)+1)+e)).s=f.s),o=(e=l.precision)+3;;)if(c=(s=(u=n).times(u).times(u)).plus(f),n=St(c.plus(f).times(u),c.plus(s),o+2,1),Nt(u.d).slice(0,o)===(r=Nt(n.d)).slice(0,o)){if(&quot;9999&quot;!=(r=r.slice(o-3,o+1))&amp;&amp;(i||&quot;4999&quot;!=r)){+r&amp;&amp;(+r.slice(1)||&quot;5&quot;!=r.charAt(0))||(Ct(n,e+1,1),t=!n.times(n).times(n).eq(f));break}if(!i&amp;&amp;(Ct(u,e+1,0),u.times(u).times(u).eq(f))){n=u;break}o+=4,i=1}return at=!0,Ct(n,e,l.rounding,t)},wt.decimalPlaces=wt.dp=function(){var e,t=this.d,r=NaN;if(t){if(r=((e=t.length-1)-lt(this.e/gt))*gt,e=t[e])for(;e%10==0;e/=10)r--;r&lt;0&amp;&amp;(r=0)}return r},wt.dividedBy=wt.div=function(e){return St(this,new this.constructor(e))},wt.dividedToIntegerBy=wt.divToInt=function(e){var t=this.constructor;return Ct(St(this,new t(e),0,1,1),t.precision,t.rounding)},wt.equals=wt.eq=function(e){return 0===this.cmp(e)},wt.floor=function(){return Ct(new this.constructor(this),this.e+1,3)},wt.greaterThan=wt.gt=function(e){return this.cmp(e)&gt;0},wt.greaterThanOrEqualTo=wt.gte=function(e){var t=this.cmp(e);return 1==t||0===t},wt.hyperbolicCosine=wt.cosh=function(){var e,t,r,n,i,a=this,o=a.constructor,u=new o(1);if(!a.isFinite())return new o(a.s?1/0:NaN);if(a.isZero())return u;r=o.precision,n=o.rounding,o.precision=r+Math.max(a.e,a.sd())+4,o.rounding=1,(i=a.d.length)&lt;32?t=(1/$t(4,e=Math.ceil(i/3))).toString():(e=16,t=&quot;2.3283064365386962890625e-10&quot;),a=Ut(o,1,a.times(t),new o(1),!0);for(var s,c=e,f=new o(8);c--;)s=a.times(a),a=u.minus(s.times(f.minus(s.times(f))));return Ct(a,o.precision=r,o.rounding=n,!0)},wt.hyperbolicSine=wt.sinh=function(){var e,t,r,n,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(t=a.precision,r=a.rounding,a.precision=t+Math.max(i.e,i.sd())+4,a.rounding=1,(n=i.d.length)&lt;3)i=Ut(a,2,i,i,!0);else{e=(e=1.4*Math.sqrt(n))&gt;16?16:0|e,i=Ut(a,2,i=i.times(1/$t(5,e)),i,!0);for(var o,u=new a(5),s=new a(16),c=new a(20);e--;)o=i.times(i),i=i.times(u.plus(o.times(s.times(o).plus(c))))}return a.precision=t,a.rounding=r,Ct(i,t,r,!0)},wt.hyperbolicTangent=wt.tanh=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+7,n.rounding=1,St(r.sinh(),r.cosh(),n.precision=e,n.rounding=t)):new n(r.s)},wt.inverseCosine=wt.acos=function(){var e,t=this,r=t.constructor,n=t.abs().cmp(1),i=r.precision,a=r.rounding;return-1!==n?0===n?t.isNeg()?Tt(r,i,a):new r(0):new r(NaN):t.isZero()?Tt(r,i+4,a).times(.5):(r.precision=i+6,r.rounding=1,t=t.asin(),e=Tt(r,i+4,a).times(.5),r.precision=i,r.rounding=a,e.minus(t))},wt.inverseHyperbolicCosine=wt.acosh=function(){var e,t,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(e=n.precision,t=n.rounding,n.precision=e+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,at=!1,r=r.times(r).minus(1).sqrt().plus(r),at=!0,n.precision=e,n.rounding=t,r.ln()):new n(r)},wt.inverseHyperbolicSine=wt.asinh=function(){var e,t,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,at=!1,r=r.times(r).plus(1).sqrt().plus(r),at=!0,n.precision=e,n.rounding=t,r.ln())},wt.inverseHyperbolicTangent=wt.atanh=function(){var e,t,r,n,i=this,a=i.constructor;return i.isFinite()?i.e&gt;=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=a.precision,t=a.rounding,n=i.sd(),Math.max(n,e)&lt;2*-i.e-1?Ct(new a(i),e,t,!0):(a.precision=r=n-i.e,i=St(i.plus(1),new a(1).minus(i),r+e,1),a.precision=e+4,a.rounding=1,i=i.ln(),a.precision=e,a.rounding=t,i.times(.5))):new a(NaN)},wt.inverseSine=wt.asin=function(){var e,t,r,n,i=this,a=i.constructor;return i.isZero()?new a(i):(t=i.abs().cmp(1),r=a.precision,n=a.rounding,-1!==t?0===t?((e=Tt(a,r+4,n).times(.5)).s=i.s,e):new a(NaN):(a.precision=r+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=r,a.rounding=n,i.times(2)))},wt.inverseTangent=wt.atan=function(){var e,t,r,n,i,a,o,u,s,c=this,f=c.constructor,l=f.precision,p=f.rounding;if(c.isFinite()){if(c.isZero())return new f(c);if(c.abs().eq(1)&amp;&amp;l+4&lt;=bt)return(o=Tt(f,l+4,p).times(.25)).s=c.s,o}else{if(!c.s)return new f(NaN);if(l+4&lt;=bt)return(o=Tt(f,l+4,p).times(.5)).s=c.s,o}for(f.precision=u=l+10,f.rounding=1,e=r=Math.min(28,u/gt+2|0);e;--e)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(at=!1,t=Math.ceil(u/gt),n=1,s=c.times(c),o=new f(c),i=c;-1!==e;)if(i=i.times(s),a=o.minus(i.div(n+=2)),i=i.times(s),void 0!==(o=a.plus(i.div(n+=2))).d[t])for(e=t;o.d[e]===a.d[e]&amp;&amp;e--;);return r&amp;&amp;(o=o.times(2&lt;&lt;r-1)),at=!0,Ct(o,f.precision=l,f.rounding=p,!0)},wt.isFinite=function(){return!!this.d},wt.isInteger=wt.isInt=function(){return!!this.d&amp;&amp;lt(this.e/gt)&gt;this.d.length-2},wt.isNaN=function(){return!this.s},wt.isNegative=wt.isNeg=function(){return this.s&lt;0},wt.isPositive=wt.isPos=function(){return this.s&gt;0},wt.isZero=function(){return!!this.d&amp;&amp;0===this.d[0]},wt.lessThan=wt.lt=function(e){return this.cmp(e)&lt;0},wt.lessThanOrEqualTo=wt.lte=function(e){return this.cmp(e)&lt;1},wt.logarithm=wt.log=function(e){var t,r,n,i,a,o,u,s,c=this,f=c.constructor,l=f.precision,p=f.rounding;if(null==e)e=new f(10),t=!0;else{if(r=(e=new f(e)).d,e.s&lt;0||!r||!r[0]||e.eq(1))return new f(NaN);t=e.eq(10)}if(r=c.d,c.s&lt;0||!r||!r[0]||c.eq(1))return new f(r&amp;&amp;!r[0]?-1/0:1!=c.s?NaN:r?0:1/0);if(t)if(r.length&gt;1)a=!0;else{for(i=r[0];i%10==0;)i/=10;a=1!==i}if(at=!1,o=qt(c,u=l+5),n=t?Ot(f,u+10):qt(e,u),Et((s=St(o,n,u,1)).d,i=l,p))do{if(o=qt(c,u+=10),n=t?Ot(f,u+10):qt(e,u),s=St(o,n,u,1),!a){+Nt(s.d).slice(i+1,i+15)+1==1e14&amp;&amp;(s=Ct(s,l+1,0));break}}while(Et(s.d,i+=10,p));return at=!0,Ct(s,l,p)},wt.minus=wt.sub=function(e){var t,r,n,i,a,o,u,s,c,f,l,p,m=this,h=m.constructor;if(e=new h(e),!m.d||!e.d)return m.s&amp;&amp;e.s?m.d?e.s=-e.s:e=new h(e.d||m.s!==e.s?m:NaN):e=new h(NaN),e;if(m.s!=e.s)return e.s=-e.s,m.plus(e);if(c=m.d,p=e.d,u=h.precision,s=h.rounding,!c[0]||!p[0]){if(p[0])e.s=-e.s;else{if(!c[0])return new h(3===s?-0:0);e=new h(m)}return at?Ct(e,u,s):e}if(r=lt(e.e/gt),f=lt(m.e/gt),c=c.slice(),a=f-r){for((l=a&lt;0)?(t=c,a=-a,o=p.length):(t=p,r=f,o=c.length),a&gt;(n=Math.max(Math.ceil(u/gt),o)+2)&amp;&amp;(a=n,t.length=1),t.reverse(),n=a;n--;)t.push(0);t.reverse()}else{for((l=(n=c.length)&lt;(o=p.length))&amp;&amp;(o=n),n=0;n&lt;o;n++)if(c[n]!=p[n]){l=c[n]&lt;p[n];break}a=0}for(l&amp;&amp;(t=c,c=p,p=t,e.s=-e.s),o=c.length,n=p.length-o;n&gt;0;--n)c[o++]=0;for(n=p.length;n&gt;a;){if(c[--n]&lt;p[n]){for(i=n;i&amp;&amp;0===c[--i];)c[i]=yt-1;--c[i],c[n]+=yt}c[n]-=p[n]}for(;0===c[--o];)c.pop();for(;0===c[0];c.shift())--r;return c[0]?(e.d=c,e.e=Ft(c,r),at?Ct(e,u,s):e):new h(3===s?-0:0)},wt.modulo=wt.mod=function(e){var t,r=this,n=r.constructor;return e=new n(e),!r.d||!e.s||e.d&amp;&amp;!e.d[0]?new n(NaN):!e.d||r.d&amp;&amp;!r.d[0]?Ct(new n(r),n.precision,n.rounding):(at=!1,9==n.modulo?(t=St(r,e.abs(),0,3,1)).s*=e.s:t=St(r,e,0,n.modulo,1),t=t.times(e),at=!0,r.minus(t))},wt.naturalExponential=wt.exp=function(){return zt(this)},wt.naturalLogarithm=wt.ln=function(){return qt(this)},wt.negated=wt.neg=function(){var e=new this.constructor(this);return e.s=-e.s,Ct(e)},wt.plus=wt.add=function(e){var t,r,n,i,a,o,u,s,c,f,l=this,p=l.constructor;if(e=new p(e),!l.d||!e.d)return l.s&amp;&amp;e.s?l.d||(e=new p(e.d||l.s===e.s?l:NaN)):e=new p(NaN),e;if(l.s!=e.s)return e.s=-e.s,l.minus(e);if(c=l.d,f=e.d,u=p.precision,s=p.rounding,!c[0]||!f[0])return f[0]||(e=new p(l)),at?Ct(e,u,s):e;if(a=lt(l.e/gt),n=lt(e.e/gt),c=c.slice(),i=a-n){for(i&lt;0?(r=c,i=-i,o=f.length):(r=f,n=a,o=c.length),i&gt;(o=(a=Math.ceil(u/gt))&gt;o?a+1:o+1)&amp;&amp;(i=o,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for((o=c.length)-(i=f.length)&lt;0&amp;&amp;(i=o,r=f,f=c,c=r),t=0;i;)t=(c[--i]=c[i]+f[i]+t)/yt|0,c[i]%=yt;for(t&amp;&amp;(c.unshift(t),++n),o=c.length;0==c[--o];)c.pop();return e.d=c,e.e=Ft(c,n),at?Ct(e,u,s):e},wt.precision=wt.sd=function(e){var t,r=this;if(void 0!==e&amp;&amp;e!==!!e&amp;&amp;1!==e&amp;&amp;0!==e)throw Error(ut+e);return r.d?(t=Bt(r.d),e&amp;&amp;r.e+1&gt;t&amp;&amp;(t=r.e+1)):t=NaN,t},wt.round=function(){var e=this,t=e.constructor;return Ct(new t(e),e.e+1,t.rounding)},wt.sine=wt.sin=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+Math.max(r.e,r.sd())+gt,n.rounding=1,r=function(e,t){var r,n=t.d.length;if(n&lt;3)return t.isZero()?t:Ut(e,2,t,t);r=(r=1.4*Math.sqrt(n))&gt;16?16:0|r,t=Ut(e,2,t=t.times(1/$t(5,r)),t);for(var i,a=new e(5),o=new e(16),u=new e(20);r--;)i=t.times(t),t=t.times(a.plus(i.times(o.times(i).minus(u))));return t}(n,Ht(n,r)),n.precision=e,n.rounding=t,Ct(Xe&gt;2?r.neg():r,e,t,!0)):new n(NaN)},wt.squareRoot=wt.sqrt=function(){var e,t,r,n,i,a,o=this,u=o.d,s=o.e,c=o.s,f=o.constructor;if(1!==c||!u||!u[0])return new f(!c||c&lt;0&amp;&amp;(!u||u[0])?NaN:u?o:1/0);for(at=!1,0==(c=Math.sqrt(+o))||c==1/0?(((t=Nt(u)).length+s)%2==0&amp;&amp;(t+=&quot;0&quot;),c=Math.sqrt(t),s=lt((s+1)/2)-(s&lt;0||s%2),n=new f(t=c==1/0?&quot;5e&quot;+s:(t=c.toExponential()).slice(0,t.indexOf(&quot;e&quot;)+1)+s)):n=new f(c.toString()),r=(s=f.precision)+3;;)if(n=(a=n).plus(St(o,a,r+2,1)).times(.5),Nt(a.d).slice(0,r)===(t=Nt(n.d)).slice(0,r)){if(&quot;9999&quot;!=(t=t.slice(r-3,r+1))&amp;&amp;(i||&quot;4999&quot;!=t)){+t&amp;&amp;(+t.slice(1)||&quot;5&quot;!=t.charAt(0))||(Ct(n,s+1,1),e=!n.times(n).eq(o));break}if(!i&amp;&amp;(Ct(a,s+1,0),a.times(a).eq(o))){n=a;break}r+=4,i=1}return at=!0,Ct(n,s,f.rounding,e)},wt.tangent=wt.tan=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+10,n.rounding=1,(r=r.sin()).s=1,r=St(r,new n(1).minus(r.times(r)).sqrt(),e+10,0),n.precision=e,n.rounding=t,Ct(2==Xe||4==Xe?r.neg():r,e,t,!0)):new n(NaN)},wt.times=wt.mul=function(e){var t,r,n,i,a,o,u,s,c,f=this,l=f.constructor,p=f.d,m=(e=new l(e)).d;if(e.s*=f.s,!(p&amp;&amp;p[0]&amp;&amp;m&amp;&amp;m[0]))return new l(!e.s||p&amp;&amp;!p[0]&amp;&amp;!m||m&amp;&amp;!m[0]&amp;&amp;!p?NaN:p&amp;&amp;m?0*e.s:e.s/0);for(r=lt(f.e/gt)+lt(e.e/gt),(s=p.length)&lt;(c=m.length)&amp;&amp;(a=p,p=m,m=a,o=s,s=c,c=o),a=[],n=o=s+c;n--;)a.push(0);for(n=c;--n&gt;=0;){for(t=0,i=s+n;i&gt;n;)u=a[i]+m[n]*p[i-n-1]+t,a[i--]=u%yt|0,t=u/yt|0;a[i]=(a[i]+t)%yt|0}for(;!a[--o];)a.pop();return t?++r:a.shift(),e.d=a,e.e=Ft(a,r),at?Ct(e,l.precision,l.rounding):e},wt.toBinary=function(e,t){return Gt(this,2,e,t)},wt.toDecimalPlaces=wt.toDP=function(e,t){var r=this,n=r.constructor;return r=new n(r),void 0===e?r:(Dt(e,0,et),void 0===t?t=n.rounding:Dt(t,0,8),Ct(r,e+r.e+1,t))},wt.toExponential=function(e,t){var r,n=this,i=n.constructor;return void 0===e?r=Mt(n,!0):(Dt(e,0,et),void 0===t?t=i.rounding:Dt(t,0,8),r=Mt(n=Ct(new i(n),e+1,t),!0,e+1)),n.isNeg()&amp;&amp;!n.isZero()?&quot;-&quot;+r:r},wt.toFixed=function(e,t){var r,n,i=this,a=i.constructor;return void 0===e?r=Mt(i):(Dt(e,0,et),void 0===t?t=a.rounding:Dt(t,0,8),r=Mt(n=Ct(new a(i),e+i.e+1,t),!1,e+n.e+1)),i.isNeg()&amp;&amp;!i.isZero()?&quot;-&quot;+r:r},wt.toFraction=function(e){var t,r,n,i,a,o,u,s,c,f,l,p,m=this,h=m.d,d=m.constructor;if(!h)return new d(m);if(c=r=new d(1),n=s=new d(0),o=(a=(t=new d(n)).e=Bt(h)-m.e-1)%gt,t.d[0]=pt(10,o&lt;0?gt+o:o),null==e)e=a&gt;0?t:c;else{if(!(u=new d(e)).isInt()||u.lt(c))throw Error(ut+u);e=u.gt(t)?a&gt;0?t:c:u}for(at=!1,u=new d(Nt(h)),f=d.precision,d.precision=a=h.length*gt*2;l=St(u,t,0,1,1),1!=(i=r.plus(l.times(n))).cmp(e);)r=n,n=i,i=c,c=s.plus(l.times(i)),s=i,i=t,t=u.minus(l.times(i)),u=i;return i=St(e.minus(r),n,0,1,1),s=s.plus(i.times(c)),r=r.plus(i.times(n)),s.s=c.s=m.s,p=St(c,n,a,1).minus(m).abs().cmp(St(s,r,a,1).minus(m).abs())&lt;1?[c,n]:[s,r],d.precision=f,at=!0,p},wt.toHexadecimal=wt.toHex=function(e,t){return Gt(this,16,e,t)},wt.toNearest=function(e,t){var r=this,n=r.constructor;if(r=new n(r),null==e){if(!r.d)return r;e=new n(1),t=n.rounding}else{if(e=new n(e),void 0===t?t=n.rounding:Dt(t,0,8),!r.d)return e.s?r:e;if(!e.d)return e.s&amp;&amp;(e.s=r.s),e}return e.d[0]?(at=!1,r=St(r,e,0,t,1).times(e),at=!0,Ct(r)):(e.s=r.s,r=e),r},wt.toNumber=function(){return+this},wt.toOctal=function(e,t){return Gt(this,8,e,t)},wt.toPower=wt.pow=function(e){var t,r,n,i,a,o,u=this,s=u.constructor,c=+(e=new s(e));if(!(u.d&amp;&amp;e.d&amp;&amp;u.d[0]&amp;&amp;e.d[0]))return new s(pt(+u,c));if((u=new s(u)).eq(1))return u;if(n=s.precision,a=s.rounding,e.eq(1))return Ct(u,n,a);if((t=lt(e.e/gt))&gt;=e.d.length-1&amp;&amp;(r=c&lt;0?-c:c)&lt;=9007199254740991)return i=kt(s,u,r,n),e.s&lt;0?new s(1).div(i):Ct(i,n,a);if((o=u.s)&lt;0){if(t&lt;e.d.length-1)return new s(NaN);if(0==(1&amp;e.d[t])&amp;&amp;(o=1),0==u.e&amp;&amp;1==u.d[0]&amp;&amp;1==u.d.length)return u.s=o,u}return(t=0!=(r=pt(+u,c))&amp;&amp;isFinite(r)?new s(r+&quot;&quot;).e:lt(c*(Math.log(&quot;0.&quot;+Nt(u.d))/Math.LN10+u.e+1)))&gt;s.maxE+1||t&lt;s.minE-1?new s(t&gt;0?o/0:0):(at=!1,s.rounding=u.s=1,r=Math.min(12,(t+&quot;&quot;).length),(i=zt(e.times(qt(u,n+r)),n)).d&amp;&amp;Et((i=Ct(i,n+5,1)).d,n,a)&amp;&amp;(t=n+10,+Nt((i=Ct(zt(e.times(qt(u,t+r)),t),t+5,1)).d).slice(n+1,n+15)+1==1e14&amp;&amp;(i=Ct(i,n+1,0))),i.s=o,at=!0,s.rounding=a,Ct(i,n,a))},wt.toPrecision=function(e,t){var r,n=this,i=n.constructor;return void 0===e?r=Mt(n,n.e&lt;=i.toExpNeg||n.e&gt;=i.toExpPos):(Dt(e,1,et),void 0===t?t=i.rounding:Dt(t,0,8),r=Mt(n=Ct(new i(n),e,t),e&lt;=n.e||n.e&lt;=i.toExpNeg,e)),n.isNeg()&amp;&amp;!n.isZero()?&quot;-&quot;+r:r},wt.toSignificantDigits=wt.toSD=function(e,t){var r=this.constructor;return void 0===e?(e=r.precision,t=r.rounding):(Dt(e,1,et),void 0===t?t=r.rounding:Dt(t,0,8)),Ct(new r(this),e,t)},wt.toString=function(){var e=this,t=e.constructor,r=Mt(e,e.e&lt;=t.toExpNeg||e.e&gt;=t.toExpPos);return e.isNeg()&amp;&amp;!e.isZero()?&quot;-&quot;+r:r},wt.truncated=wt.trunc=function(){return Ct(new this.constructor(this),this.e+1,1)},wt.valueOf=wt.toJSON=function(){var e=this,t=e.constructor,r=Mt(e,e.e&lt;=t.toExpNeg||e.e&gt;=t.toExpPos);return e.isNeg()?&quot;-&quot;+r:r};var St=function(){function e(e,t,r){var n,i=0,a=e.length;for(e=e.slice();a--;)n=e[a]*t+i,e[a]=n%r|0,i=n/r|0;return i&amp;&amp;e.unshift(i),e}function t(e,t,r,n){var i,a;if(r!=n)a=r&gt;n?1:-1;else for(i=a=0;i&lt;r;i++)if(e[i]!=t[i]){a=e[i]&gt;t[i]?1:-1;break}return a}function r(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]&lt;t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&amp;&amp;e.length&gt;1;)e.shift()}return function(n,i,a,o,u,s){var c,f,l,p,m,h,d,v,y,g,x,b,w,N,D,E,A,S,C,M,F=n.constructor,O=n.s==i.s?1:-1,T=n.d,B=i.d;if(!(T&amp;&amp;T[0]&amp;&amp;B&amp;&amp;B[0]))return new F(n.s&amp;&amp;i.s&amp;&amp;(T?!B||T[0]!=B[0]:B)?T&amp;&amp;0==T[0]||!B?0*O:O/0:NaN);for(s?(m=1,f=n.e-i.e):(s=yt,m=gt,f=lt(n.e/m)-lt(i.e/m)),C=B.length,A=T.length,g=(y=new F(O)).d=[],l=0;B[l]==(T[l]||0);l++);if(B[l]&gt;(T[l]||0)&amp;&amp;f--,null==a?(N=a=F.precision,o=F.rounding):N=u?a+(n.e-i.e)+1:a,N&lt;0)g.push(1),h=!0;else{if(N=N/m+2|0,l=0,1==C){for(p=0,B=B[0],N++;(l&lt;A||p)&amp;&amp;N--;l++)D=p*s+(T[l]||0),g[l]=D/B|0,p=D%B|0;h=p||l&lt;A}else{for((p=s/(B[0]+1)|0)&gt;1&amp;&amp;(B=e(B,p,s),T=e(T,p,s),C=B.length,A=T.length),E=C,b=(x=T.slice(0,C)).length;b&lt;C;)x[b++]=0;(M=B.slice()).unshift(0),S=B[0],B[1]&gt;=s/2&amp;&amp;++S;do{p=0,(c=t(B,x,C,b))&lt;0?(w=x[0],C!=b&amp;&amp;(w=w*s+(x[1]||0)),(p=w/S|0)&gt;1?(p&gt;=s&amp;&amp;(p=s-1),1==(c=t(d=e(B,p,s),x,v=d.length,b=x.length))&amp;&amp;(p--,r(d,C&lt;v?M:B,v,s))):(0==p&amp;&amp;(c=p=1),d=B.slice()),(v=d.length)&lt;b&amp;&amp;d.unshift(0),r(x,d,b,s),-1==c&amp;&amp;(c=t(B,x,C,b=x.length))&lt;1&amp;&amp;(p++,r(x,C&lt;b?M:B,b,s)),b=x.length):0===c&amp;&amp;(p++,x=[0]),g[l++]=p,c&amp;&amp;x[0]?x[b++]=T[E]||0:(x=[T[E]],b=1)}while((E++&lt;A||void 0!==x[0])&amp;&amp;N--);h=void 0!==x[0]}g[0]||g.shift()}if(1==m)y.e=f,Je=h;else{for(l=1,p=g[0];p&gt;=10;p/=10)l++;y.e=l+f*m-1,Ct(y,u?a+y.e+1:a,o,h)}return y}}();function Ct(e,t,r,n){var i,a,o,u,s,c,f,l,p,m=e.constructor;e:if(null!=t){if(!(l=e.d))return e;for(i=1,u=l[0];u&gt;=10;u/=10)i++;if((a=t-i)&lt;0)a+=gt,o=t,s=(f=l[p=0])/pt(10,i-o-1)%10|0;else if((p=Math.ceil((a+1)/gt))&gt;=(u=l.length)){if(!n)break e;for(;u++&lt;=p;)l.push(0);f=s=0,i=1,o=(a%=gt)-gt+1}else{for(f=u=l[p],i=1;u&gt;=10;u/=10)i++;s=(o=(a%=gt)-gt+i)&lt;0?0:f/pt(10,i-o-1)%10|0}if(n=n||t&lt;0||void 0!==l[p+1]||(o&lt;0?f:f%pt(10,i-o-1)),c=r&lt;4?(s||n)&amp;&amp;(0==r||r==(e.s&lt;0?3:2)):s&gt;5||5==s&amp;&amp;(4==r||n||6==r&amp;&amp;(a&gt;0?o&gt;0?f/pt(10,i-o):0:l[p-1])%10&amp;1||r==(e.s&lt;0?8:7)),t&lt;1||!l[0])return l.length=0,c?(t-=e.e+1,l[0]=pt(10,(gt-t%gt)%gt),e.e=-t||0):l[0]=e.e=0,e;if(0==a?(l.length=p,u=1,p--):(l.length=p+1,u=pt(10,gt-a),l[p]=o&gt;0?(f/pt(10,i-o)%pt(10,o)|0)*u:0),c)for(;;){if(0==p){for(a=1,o=l[0];o&gt;=10;o/=10)a++;for(o=l[0]+=u,u=1;o&gt;=10;o/=10)u++;a!=u&amp;&amp;(e.e++,l[0]==yt&amp;&amp;(l[0]=1));break}if(l[p]+=u,l[p]!=yt)break;l[p--]=0,u=1}for(a=l.length;0===l[--a];)l.pop()}return at&amp;&amp;(e.e&gt;m.maxE?(e.d=null,e.e=NaN):e.e&lt;m.minE&amp;&amp;(e.e=0,e.d=[0])),e}function Mt(e,t,r){if(!e.isFinite())return jt(e);var n,i=e.e,a=Nt(e.d),o=a.length;return t?(r&amp;&amp;(n=r-o)&gt;0?a=a.charAt(0)+&quot;.&quot;+a.slice(1)+_t(n):o&gt;1&amp;&amp;(a=a.charAt(0)+&quot;.&quot;+a.slice(1)),a=a+(e.e&lt;0?&quot;e&quot;:&quot;e+&quot;)+e.e):i&lt;0?(a=&quot;0.&quot;+_t(-i-1)+a,r&amp;&amp;(n=r-o)&gt;0&amp;&amp;(a+=_t(n))):i&gt;=o?(a+=_t(i+1-o),r&amp;&amp;(n=r-i-1)&gt;0&amp;&amp;(a=a+&quot;.&quot;+_t(n))):((n=i+1)&lt;o&amp;&amp;(a=a.slice(0,n)+&quot;.&quot;+a.slice(n)),r&amp;&amp;(n=r-o)&gt;0&amp;&amp;(i+1===o&amp;&amp;(a+=&quot;.&quot;),a+=_t(n))),a}function Ft(e,t){var r=e[0];for(t*=gt;r&gt;=10;r/=10)t++;return t}function Ot(e,t,r){if(t&gt;xt)throw at=!0,r&amp;&amp;(e.precision=r),Error(st);return Ct(new e(rt),t,1,!0)}function Tt(e,t,r){if(t&gt;bt)throw Error(st);return Ct(new e(nt),t,r,!0)}function Bt(e){var t=e.length-1,r=t*gt+1;if(t=e[t]){for(;t%10==0;t/=10)r--;for(t=e[0];t&gt;=10;t/=10)r++}return r}function _t(e){for(var t=&quot;&quot;;e--;)t+=&quot;0&quot;;return t}function kt(e,t,r,n){var i,a=new e(1),o=Math.ceil(n/gt+4);for(at=!1;;){if(r%2&amp;&amp;Vt((a=a.times(t)).d,o)&amp;&amp;(i=!0),0===(r=lt(r/2))){r=a.d.length-1,i&amp;&amp;0===a.d[r]&amp;&amp;++a.d[r];break}Vt((t=t.times(t)).d,o)}return at=!0,a}function It(e){return 1&amp;e.d[e.d.length-1]}function Rt(e,t,r){for(var n,i=new e(t[0]),a=0;++a&lt;t.length;){if(!(n=new e(t[a])).s){i=n;break}i[r](n)&amp;&amp;(i=n)}return i}function zt(e,t){var r,n,i,a,o,u,s,c=0,f=0,l=0,p=e.constructor,m=p.rounding,h=p.precision;if(!e.d||!e.d[0]||e.e&gt;17)return new p(e.d?e.d[0]?e.s&lt;0?0:1/0:1:e.s?e.s&lt;0?0:e:NaN);for(null==t?(at=!1,s=h):s=t,u=new p(.03125);e.e&gt;-2;)e=e.times(u),l+=5;for(s+=n=Math.log(pt(2,l))/Math.LN10*2+5|0,r=a=o=new p(1),p.precision=s;;){if(a=Ct(a.times(e),s,1),r=r.times(++f),Nt((u=o.plus(St(a,r,s,1))).d).slice(0,s)===Nt(o.d).slice(0,s)){for(i=l;i--;)o=Ct(o.times(o),s,1);if(null!=t)return p.precision=h,o;if(!(c&lt;3&amp;&amp;Et(o.d,s-n,m,c)))return Ct(o,p.precision=h,m,at=!0);p.precision=s+=10,r=a=u=new p(1),f=0,c++}o=u}}function qt(e,t){var r,n,i,a,o,u,s,c,f,l,p,m=1,h=e,d=h.d,v=h.constructor,y=v.rounding,g=v.precision;if(h.s&lt;0||!d||!d[0]||!h.e&amp;&amp;1==d[0]&amp;&amp;1==d.length)return new v(d&amp;&amp;!d[0]?-1/0:1!=h.s?NaN:d?0:h);if(null==t?(at=!1,f=g):f=t,v.precision=f+=10,n=(r=Nt(d)).charAt(0),!(Math.abs(a=h.e)&lt;15e14))return c=Ot(v,f+2,g).times(a+&quot;&quot;),h=qt(new v(n+&quot;.&quot;+r.slice(1)),f-10).plus(c),v.precision=g,null==t?Ct(h,g,y,at=!0):h;for(;n&lt;7&amp;&amp;1!=n||1==n&amp;&amp;r.charAt(1)&gt;3;)n=(r=Nt((h=h.times(e)).d)).charAt(0),m++;for(a=h.e,n&gt;1?(h=new v(&quot;0.&quot;+r),a++):h=new v(n+&quot;.&quot;+r.slice(1)),l=h,s=o=h=St(h.minus(1),h.plus(1),f,1),p=Ct(h.times(h),f,1),i=3;;){if(o=Ct(o.times(p),f,1),Nt((c=s.plus(St(o,new v(i),f,1))).d).slice(0,f)===Nt(s.d).slice(0,f)){if(s=s.times(2),0!==a&amp;&amp;(s=s.plus(Ot(v,f+2,g).times(a+&quot;&quot;))),s=St(s,new v(m),f,1),null!=t)return v.precision=g,s;if(!Et(s.d,f-10,y,u))return Ct(s,v.precision=g,y,at=!0);v.precision=f+=10,c=o=h=St(l.minus(1),l.plus(1),f,1),p=Ct(h.times(h),f,1),i=u=1}s=c,i+=2}}function jt(e){return String(e.s*e.s/0)}function Pt(e,t){var r,n,i;for((r=t.indexOf(&quot;.&quot;))&gt;-1&amp;&amp;(t=t.replace(&quot;.&quot;,&quot;&quot;)),(n=t.search(/e/i))&gt;0?(r&lt;0&amp;&amp;(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r&lt;0&amp;&amp;(r=t.length),n=0;48===t.charCodeAt(n);n++);for(i=t.length;48===t.charCodeAt(i-1);--i);if(t=t.slice(n,i)){if(i-=n,e.e=r=r-n-1,e.d=[],n=(r+1)%gt,r&lt;0&amp;&amp;(n+=gt),n&lt;i){for(n&amp;&amp;e.d.push(+t.slice(0,n)),i-=gt;n&lt;i;)e.d.push(+t.slice(n,n+=gt));t=t.slice(n),n=gt-t.length}else n-=i;for(;n--;)t+=&quot;0&quot;;e.d.push(+t),at&amp;&amp;(e.e&gt;e.constructor.maxE?(e.d=null,e.e=NaN):e.e&lt;e.constructor.minE&amp;&amp;(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function Lt(e,t){var r,n,i,a,o,u,s,c,f;if(t.indexOf(&quot;_&quot;)&gt;-1){if(t=t.replace(/(\sd)_(?=\sd)/g,&quot;$1&quot;),vt.test(t))return Pt(e,t)}else if(&quot;Infinity&quot;===t||&quot;NaN&quot;===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(ht.test(t))r=16,t=t.toLowerCase();else if(mt.test(t))r=2;else{if(!dt.test(t))throw Error(ut+t);r=8}for((a=t.search(/p/i))&gt;0?(s=+t.slice(a+1),t=t.substring(2,a)):t=t.slice(2),o=(a=t.indexOf(&quot;.&quot;))&gt;=0,n=e.constructor,o&amp;&amp;(a=(u=(t=t.replace(&quot;.&quot;,&quot;&quot;)).length)-a,i=kt(n,new n(r),a,2*a)),a=f=(c=At(t,r,yt)).length-1;0===c[a];--a)c.pop();return a&lt;0?new n(0*e.s):(e.e=Ft(c,f),e.d=c,at=!1,o&amp;&amp;(e=St(e,i,4*u)),s&amp;&amp;(e=e.times(Math.abs(s)&lt;54?pt(2,s):_r.pow(2,s))),at=!0,e)}function Ut(e,t,r,n,i){var a,o,u,s,c=e.precision,f=Math.ceil(c/gt);for(at=!1,s=r.times(r),u=new e(n);;){if(o=St(u.times(s),new e(t++*t++),c,1),u=i?n.plus(o):n.minus(o),n=St(o.times(s),new e(t++*t++),c,1),void 0!==(o=u.plus(n)).d[f]){for(a=f;o.d[a]===u.d[a]&amp;&amp;a--;);if(-1==a)break}a=u,u=n,n=o,o=a}return at=!0,o.d.length=f+1,o}function $t(e,t){for(var r=e;--t;)r*=e;return r}function Ht(e,t){var r,n=t.s&lt;0,i=Tt(e,e.precision,1),a=i.times(.5);if((t=t.abs()).lte(a))return Xe=n?4:1,t;if((r=t.divToInt(i)).isZero())Xe=n?3:2;else{if((t=t.minus(r.times(i))).lte(a))return Xe=It(r)?n?2:3:n?4:1,t;Xe=It(r)?n?1:4:n?3:2}return t.minus(i).abs()}function Gt(e,t,r,n){var i,a,o,u,s,c,f,l,p,m=e.constructor,h=void 0!==r;if(h?(Dt(r,1,et),void 0===n?n=m.rounding:Dt(n,0,8)):(r=m.precision,n=m.rounding),e.isFinite()){for(h?(i=2,16==t?r=4*r-3:8==t&amp;&amp;(r=3*r-2)):i=t,(o=(f=Mt(e)).indexOf(&quot;.&quot;))&gt;=0&amp;&amp;(f=f.replace(&quot;.&quot;,&quot;&quot;),(p=new m(1)).e=f.length-o,p.d=At(Mt(p),10,i),p.e=p.d.length),a=s=(l=At(f,10,i)).length;0==l[--s];)l.pop();if(l[0]){if(o&lt;0?a--:((e=new m(e)).d=l,e.e=a,l=(e=St(e,p,r,n,0,i)).d,a=e.e,c=Je),o=l[r],u=i/2,c=c||void 0!==l[r+1],c=n&lt;4?(void 0!==o||c)&amp;&amp;(0===n||n===(e.s&lt;0?3:2)):o&gt;u||o===u&amp;&amp;(4===n||c||6===n&amp;&amp;1&amp;l[r-1]||n===(e.s&lt;0?8:7)),l.length=r,c)for(;++l[--r]&gt;i-1;)l[r]=0,r||(++a,l.unshift(1));for(s=l.length;!l[s-1];--s);for(o=0,f=&quot;&quot;;o&lt;s;o++)f+=tt.charAt(l[o]);if(h){if(s&gt;1)if(16==t||8==t){for(o=16==t?4:3,--s;s%o;s++)f+=&quot;0&quot;;for(s=(l=At(f,i,t)).length;!l[s-1];--s);for(o=1,f=&quot;1.&quot;;o&lt;s;o++)f+=tt.charAt(l[o])}else f=f.charAt(0)+&quot;.&quot;+f.slice(1);f=f+(a&lt;0?&quot;p&quot;:&quot;p+&quot;)+a}else if(a&lt;0){for(;++a;)f=&quot;0&quot;+f;f=&quot;0.&quot;+f}else if(++a&gt;s)for(a-=s;a--;)f+=&quot;0&quot;;else a&lt;s&amp;&amp;(f=f.slice(0,a)+&quot;.&quot;+f.slice(a))}else f=h?&quot;0p+0&quot;:&quot;0&quot;;f=(16==t?&quot;0x&quot;:2==t?&quot;0b&quot;:8==t?&quot;0o&quot;:&quot;&quot;)+f}else f=jt(e);return e.s&lt;0?&quot;-&quot;+f:f}function Vt(e,t){if(e.length&gt;t)return e.length=t,!0}function Zt(e){return new this(e).abs()}function Wt(e){return new this(e).acos()}function Yt(e){return new this(e).acosh()}function Jt(e,t){return new this(e).plus(t)}function Xt(e){return new this(e).asin()}function Qt(e){return new this(e).asinh()}function Kt(e){return new this(e).atan()}function er(e){return new this(e).atanh()}function tr(e,t){e=new this(e),t=new this(t);var r,n=this.precision,i=this.rounding,a=n+4;return e.s&amp;&amp;t.s?e.d||t.d?!t.d||e.isZero()?(r=t.s&lt;0?Tt(this,n,i):new this(0)).s=e.s:!e.d||t.isZero()?(r=Tt(this,a,1).times(.5)).s=e.s:t.s&lt;0?(this.precision=a,this.rounding=1,r=this.atan(St(e,t,a,1)),t=Tt(this,a,1),this.precision=n,this.rounding=i,r=e.s&lt;0?r.minus(t):r.plus(t)):r=this.atan(St(e,t,a,1)):(r=Tt(this,a,1).times(t.s&gt;0?.25:.75)).s=e.s:r=new this(NaN),r}function rr(e){return new this(e).cbrt()}function nr(e){return Ct(e=new this(e),e.e+1,2)}function ir(e,t,r){return new this(e).clamp(t,r)}function ar(e){if(!e||&quot;object&quot;!=typeof e)throw Error(ot+&quot;Object expected&quot;);var t,r,n,i=!0===e.defaults,a=[&quot;precision&quot;,1,et,&quot;rounding&quot;,0,8,&quot;toExpNeg&quot;,-Ke,0,&quot;toExpPos&quot;,0,Ke,&quot;maxE&quot;,0,Ke,&quot;minE&quot;,-Ke,0,&quot;modulo&quot;,0,9];for(t=0;t&lt;a.length;t+=3)if(r=a[t],i&amp;&amp;(this[r]=it[r]),void 0!==(n=e[r])){if(!(lt(n)===n&amp;&amp;n&gt;=a[t+1]&amp;&amp;n&lt;=a[t+2]))throw Error(ut+r+&quot;: &quot;+n);this[r]=n}if(r=&quot;crypto&quot;,i&amp;&amp;(this[r]=it[r]),void 0!==(n=e[r])){if(!0!==n&amp;&amp;!1!==n&amp;&amp;0!==n&amp;&amp;1!==n)throw Error(ut+r+&quot;: &quot;+n);if(n){if(&quot;undefined&quot;==typeof crypto||!crypto||!crypto.getRandomValues&amp;&amp;!crypto.randomBytes)throw Error(ct);this[r]=!0}else this[r]=!1}return this}function or(e){return new this(e).cos()}function ur(e){return new this(e).cosh()}function sr(e,t){return new this(e).div(t)}function cr(e){return new this(e).exp()}function fr(e){return Ct(e=new this(e),e.e+1,3)}function lr(){var e,t,r=new this(0);for(at=!1,e=0;e&lt;arguments.length;)if((t=new this(arguments[e++])).d)r.d&amp;&amp;(r=r.plus(t.times(t)));else{if(t.s)return at=!0,new this(1/0);r=t}return at=!0,r.sqrt()}function pr(e){return e instanceof _r||e&amp;&amp;e.toStringTag===ft||!1}function mr(e){return new this(e).ln()}function hr(e,t){return new this(e).log(t)}function dr(e){return new this(e).log(2)}function vr(e){return new this(e).log(10)}function yr(){return Rt(this,arguments,&quot;lt&quot;)}function gr(){return Rt(this,arguments,&quot;gt&quot;)}function xr(e,t){return new this(e).mod(t)}function br(e,t){return new this(e).mul(t)}function wr(e,t){return new this(e).pow(t)}function Nr(e){var t,r,n,i,a=0,o=new this(1),u=[];if(void 0===e?e=this.precision:Dt(e,1,et),n=Math.ceil(e/gt),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(n));a&lt;n;)(i=t[a])&gt;=429e7?t[a]=crypto.getRandomValues(new Uint32Array(1))[0]:u[a++]=i%1e7;else{if(!crypto.randomBytes)throw Error(ct);for(t=crypto.randomBytes(n*=4);a&lt;n;)(i=t[a]+(t[a+1]&lt;&lt;8)+(t[a+2]&lt;&lt;16)+((127&amp;t[a+3])&lt;&lt;24))&gt;=214e7?crypto.randomBytes(4).copy(t,a):(u.push(i%1e7),a+=4);a=n/4}else for(;a&lt;n;)u[a++]=1e7*Math.random()|0;for(n=u[--a],e%=gt,n&amp;&amp;e&amp;&amp;(i=pt(10,gt-e),u[a]=(n/i|0)*i);0===u[a];a--)u.pop();if(a&lt;0)r=0,u=[0];else{for(r=-1;0===u[0];r-=gt)u.shift();for(n=1,i=u[0];i&gt;=10;i/=10)n++;n&lt;gt&amp;&amp;(r-=gt-n)}return o.e=r,o.d=u,o}function Dr(e){return Ct(e=new this(e),e.e+1,this.rounding)}function Er(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function Ar(e){return new this(e).sin()}function Sr(e){return new this(e).sinh()}function Cr(e){return new this(e).sqrt()}function Mr(e,t){return new this(e).sub(t)}function Fr(){var e=0,t=arguments,r=new this(t[e]);for(at=!1;r.s&amp;&amp;++e&lt;t.length;)r=r.plus(t[e]);return at=!0,Ct(r,this.precision,this.rounding)}function Or(e){return new this(e).tan()}function Tr(e){return new this(e).tanh()}function Br(e){return Ct(e=new this(e),e.e+1,1)}wt[Symbol.for(&quot;nodejs.util.inspect.custom&quot;)]=wt.toString,wt[Symbol.toStringTag]=&quot;Decimal&quot;;var _r=wt.constructor=function e(t){var r,n,i;function a(e){var t,r,n,i=this;if(!(i instanceof a))return new a(e);if(i.constructor=a,pr(e))return i.s=e.s,void(at?!e.d||e.e&gt;a.maxE?(i.e=NaN,i.d=null):e.e&lt;a.minE?(i.e=0,i.d=[0]):(i.e=e.e,i.d=e.d.slice()):(i.e=e.e,i.d=e.d?e.d.slice():e.d));if(&quot;number&quot;==(n=typeof e)){if(0===e)return i.s=1/e&lt;0?-1:1,i.e=0,void(i.d=[0]);if(e&lt;0?(e=-e,i.s=-1):i.s=1,e===~~e&amp;&amp;e&lt;1e7){for(t=0,r=e;r&gt;=10;r/=10)t++;return void(at?t&gt;a.maxE?(i.e=NaN,i.d=null):t&lt;a.minE?(i.e=0,i.d=[0]):(i.e=t,i.d=[e]):(i.e=t,i.d=[e]))}return 0*e!=0?(e||(i.s=NaN),i.e=NaN,void(i.d=null)):Pt(i,e.toString())}if(&quot;string&quot;!==n)throw Error(ut+e);return 45===(r=e.charCodeAt(0))?(e=e.slice(1),i.s=-1):(43===r&amp;&amp;(e=e.slice(1)),i.s=1),vt.test(e)?Pt(i,e):Lt(i,e)}if(a.prototype=wt,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.EUCLID=9,a.config=a.set=ar,a.clone=e,a.isDecimal=pr,a.abs=Zt,a.acos=Wt,a.acosh=Yt,a.add=Jt,a.asin=Xt,a.asinh=Qt,a.atan=Kt,a.atanh=er,a.atan2=tr,a.cbrt=rr,a.ceil=nr,a.clamp=ir,a.cos=or,a.cosh=ur,a.div=sr,a.exp=cr,a.floor=fr,a.hypot=lr,a.ln=mr,a.log=hr,a.log10=vr,a.log2=dr,a.max=yr,a.min=gr,a.mod=xr,a.mul=br,a.pow=wr,a.random=Nr,a.round=Dr,a.sign=Er,a.sin=Ar,a.sinh=Sr,a.sqrt=Cr,a.sub=Mr,a.sum=Fr,a.tan=Or,a.tanh=Tr,a.trunc=Br,void 0===t&amp;&amp;(t={}),t&amp;&amp;!0!==t.defaults)for(i=[&quot;precision&quot;,&quot;rounding&quot;,&quot;toExpNeg&quot;,&quot;toExpPos&quot;,&quot;maxE&quot;,&quot;minE&quot;,&quot;modulo&quot;,&quot;crypto&quot;],r=0;r&lt;i.length;)t.hasOwnProperty(n=i[r++])||(t[n]=this[n]);return a.config(t),a}(it);rt=new _r(rt),nt=new _r(nt);const kr=_r;var Ir=Ee(&quot;BigNumber&quot;,[&quot;?on&quot;,&quot;config&quot;],(function(e){var t=e.on,r=e.config,n=kr.clone({precision:r.precision,modulo:kr.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type=&quot;BigNumber&quot;,n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:&quot;BigNumber&quot;,value:this.toString()}},n.fromJSON=function(e){return new n(e.value)},t&amp;&amp;t(&quot;config&quot;,(function(e,t){e.precision!==t.precision&amp;&amp;n.config({precision:e.precision})})),n}),{isClass:!0}),Rr=r(1977),zr=Ee(&quot;Complex&quot;,[],(function(){return Object.defineProperty(Rr,&quot;name&quot;,{value:&quot;Complex&quot;}),Rr.prototype.constructor=Rr,Rr.prototype.type=&quot;Complex&quot;,Rr.prototype.isComplex=!0,Rr.prototype.toJSON=function(){return{mathjs:&quot;Complex&quot;,re:this.re,im:this.im}},Rr.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Rr.prototype.format=function(e){var t=this.im,r=this.re,n=ee(this.re,e),a=ee(this.im,e),o=i(e)?e:e?e.precision:null;if(null!==o){var u=Math.pow(10,-o);Math.abs(r/t)&lt;u&amp;&amp;(r=0),Math.abs(t/r)&lt;u&amp;&amp;(t=0)}return 0===t?n:0===r?1===t?&quot;i&quot;:-1===t?&quot;-i&quot;:a+&quot;i&quot;:t&lt;0?-1===t?n+&quot; - i&quot;:n+&quot; - &quot;+a.substring(1)+&quot;i&quot;:1===t?n+&quot; + i&quot;:n+&quot; + &quot;+a+&quot;i&quot;},Rr.fromPolar=function(e){switch(arguments.length){case 1:var r=arguments[0];if(&quot;object&quot;===t(r))return Rr(r);throw new TypeError(&quot;Input has to be an object with r and phi keys.&quot;);case 2:var n=arguments[0],a=arguments[1];if(i(n)){if(s(a)&amp;&amp;a.hasBase(&quot;ANGLE&quot;)&amp;&amp;(a=a.toNumber(&quot;rad&quot;)),i(a))return new Rr({r:n,phi:a});throw new TypeError(&quot;Phi is not a number nor an angle unit.&quot;)}throw new TypeError(&quot;Radius r is not a number.&quot;);default:throw new SyntaxError(&quot;Wrong number of arguments in function fromPolar&quot;)}},Rr.prototype.valueOf=Rr.prototype.toString,Rr.fromJSON=function(e){return new Rr(e)},Rr.compare=function(e,t){return e.re&gt;t.re?1:e.re&lt;t.re?-1:e.im&gt;t.im?1:e.im&lt;t.im?-1:0},Rr}),{isClass:!0}),qr=r(5628),jr=Ee(&quot;Fraction&quot;,[],(function(){return Object.defineProperty(qr,&quot;name&quot;,{value:&quot;Fraction&quot;}),qr.prototype.constructor=qr,qr.prototype.type=&quot;Fraction&quot;,qr.prototype.isFraction=!0,qr.prototype.toJSON=function(){return{mathjs:&quot;Fraction&quot;,n:this.s*this.n,d:this.d}},qr.fromJSON=function(e){return new qr(e)},qr}),{isClass:!0}),Pr=(r(8674),Ee(&quot;Range&quot;,[],(function(){function e(t,r,n){if(!(this instanceof e))throw new SyntaxError(&quot;Constructor must be called with the new operator&quot;);var i=null!=t,o=null!=r,u=null!=n;if(i)if(a(t))t=t.toNumber();else if(&quot;number&quot;!=typeof t)throw new TypeError(&quot;Parameter start must be a number&quot;);if(o)if(a(r))r=r.toNumber();else if(&quot;number&quot;!=typeof r)throw new TypeError(&quot;Parameter end must be a number&quot;);if(u)if(a(n))n=n.toNumber();else if(&quot;number&quot;!=typeof n)throw new TypeError(&quot;Parameter step must be a number&quot;);this.start=i?parseFloat(t):0,this.end=o?parseFloat(r):0,this.step=u?parseFloat(n):1}return e.prototype.type=&quot;Range&quot;,e.prototype.isRange=!0,e.parse=function(t){if(&quot;string&quot;!=typeof t)return null;var r=t.split(&quot;:&quot;).map((function(e){return parseFloat(e)}));if(r.some((function(e){return isNaN(e)})))return null;switch(r.length){case 2:return new e(r[0],r[1]);case 3:return new e(r[0],r[2],r[1]);default:return null}},e.prototype.clone=function(){return new e(this.start,this.end,this.step)},e.prototype.size=function(){var e=0,t=this.start,r=this.step,n=this.end-t;return Z(r)===Z(n)?e=Math.ceil(n/r):0===n&amp;&amp;(e=0),isNaN(e)&amp;&amp;(e=0),[e]},e.prototype.min=function(){var e=this.size()[0];return e&gt;0?this.step&gt;0?this.start:this.start+(e-1)*this.step:void 0},e.prototype.max=function(){var e=this.size()[0];return e&gt;0?this.step&gt;0?this.start+(e-1)*this.step:this.start:void 0},e.prototype.forEach=function(e){var t=this.start,r=this.step,n=this.end,i=0;if(r&gt;0)for(;t&lt;n;)e(t,[i],this),t+=r,i++;else if(r&lt;0)for(;t&gt;n;)e(t,[i],this),t+=r,i++},e.prototype.map=function(e){var t=[];return this.forEach((function(r,n,i){t[n[0]]=e(r,n,i)})),t},e.prototype.toArray=function(){var e=[];return this.forEach((function(t,r){e[r[0]]=t})),e},e.prototype.valueOf=function(){return this.toArray()},e.prototype.format=function(e){var t=ee(this.start,e);return 1!==this.step&amp;&amp;(t+=&quot;:&quot;+ee(this.step,e)),t+&quot;:&quot;+ee(this.end,e)},e.prototype.toString=function(){return this.format()},e.prototype.toJSON=function(){return{mathjs:&quot;Range&quot;,start:this.start,end:this.end,step:this.step}},e.fromJSON=function(t){return new e(t.start,t.end,t.step)},e}),{isClass:!0})),Lr=Ee(&quot;Matrix&quot;,[],(function(){function e(){if(!(this instanceof e))throw new SyntaxError(&quot;Constructor must be called with the new operator&quot;)}return e.prototype.type=&quot;Matrix&quot;,e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error(&quot;Cannot invoke storage on a Matrix interface&quot;)},e.prototype.datatype=function(){throw new Error(&quot;Cannot invoke datatype on a Matrix interface&quot;)},e.prototype.create=function(e,t){throw new Error(&quot;Cannot invoke create on a Matrix interface&quot;)},e.prototype.subset=function(e,t,r){throw new Error(&quot;Cannot invoke subset on a Matrix interface&quot;)},e.prototype.get=function(e){throw new Error(&quot;Cannot invoke get on a Matrix interface&quot;)},e.prototype.set=function(e,t,r){throw new Error(&quot;Cannot invoke set on a Matrix interface&quot;)},e.prototype.resize=function(e,t){throw new Error(&quot;Cannot invoke resize on a Matrix interface&quot;)},e.prototype.reshape=function(e,t){throw new Error(&quot;Cannot invoke reshape on a Matrix interface&quot;)},e.prototype.clone=function(){throw new Error(&quot;Cannot invoke clone on a Matrix interface&quot;)},e.prototype.size=function(){throw new Error(&quot;Cannot invoke size on a Matrix interface&quot;)},e.prototype.map=function(e,t){throw new Error(&quot;Cannot invoke map on a Matrix interface&quot;)},e.prototype.forEach=function(e){throw new Error(&quot;Cannot invoke forEach on a Matrix interface&quot;)},e.prototype[Symbol.iterator]=function(){throw new Error(&quot;Cannot iterate a Matrix interface&quot;)},e.prototype.toArray=function(){throw new Error(&quot;Cannot invoke toArray on a Matrix interface&quot;)},e.prototype.valueOf=function(){throw new Error(&quot;Cannot invoke valueOf on a Matrix interface&quot;)},e.prototype.format=function(e){throw new Error(&quot;Cannot invoke format on a Matrix interface&quot;)},e.prototype.toString=function(){throw new Error(&quot;Cannot invoke toString on a Matrix interface&quot;)},e}),{isClass:!0}),Ur=r(4687);function $r(e,t,r){var n=new(0,e.constructor)(2),i=&quot;&quot;;if(r){if(r&lt;1)throw new Error(&quot;size must be in greater than 0&quot;);if(!V(r))throw new Error(&quot;size must be an integer&quot;);if(e.greaterThan(n.pow(r-1).sub(1))||e.lessThan(n.pow(r-1).mul(-1)))throw new Error(&quot;Value must be in range [-2^&quot;.concat(r-1,&quot;, 2^&quot;).concat(r-1,&quot;-1]&quot;));if(!e.isInteger())throw new Error(&quot;Value must be an integer&quot;);e.lessThan(0)&amp;&amp;(e=e.add(n.pow(r))),i=&quot;i&quot;.concat(r)}switch(t){case 2:return&quot;&quot;.concat(e.toBinary()).concat(i);case 8:return&quot;&quot;.concat(e.toOctal()).concat(i);case 16:return&quot;&quot;.concat(e.toHexadecimal()).concat(i);default:throw new Error(&quot;Base &quot;.concat(t,&quot; not supported &quot;))}}function Hr(e,t){return void 0!==t?e.toExponential(t-1):e.toExponential()}function Gr(e,t){var r=e.length-t.length,n=e.length;return e.substring(r,n)===t}function Vr(e,r){var n=function(e,r){return&quot;number&quot;==typeof e?ee(e,r):a(e)?function(e,t){if(&quot;function&quot;==typeof t)return t(e);if(!e.isFinite())return e.isNaN()?&quot;NaN&quot;:e.gt(0)?&quot;Infinity&quot;:&quot;-Infinity&quot;;var r,n,i=&quot;auto&quot;;if(void 0!==t&amp;&amp;(t.notation&amp;&amp;(i=t.notation),&quot;number&quot;==typeof t?r=t:void 0!==t.precision&amp;&amp;(r=t.precision),t.wordSize&amp;&amp;&quot;number&quot;!=typeof(n=t.wordSize)))throw new Error('Option &quot;wordSize&quot; must be a number');switch(i){case&quot;fixed&quot;:return function(e,t){return e.toFixed(t)}(e,r);case&quot;exponential&quot;:return Hr(e,r);case&quot;engineering&quot;:return function(e,t){var r=e.e,n=r%3==0?r:r&lt;0?r-3-r%3:r-r%3,i=e.mul(Math.pow(10,-n)).toPrecision(t);return-1!==i.indexOf(&quot;e&quot;)&amp;&amp;(i=new(0,e.constructor)(i).toFixed()),i+&quot;e&quot;+(r&gt;=0?&quot;+&quot;:&quot;&quot;)+n.toString()}(e,r);case&quot;bin&quot;:return $r(e,2,n);case&quot;oct&quot;:return $r(e,8,n);case&quot;hex&quot;:return $r(e,16,n);case&quot;auto&quot;:var a=t&amp;&amp;void 0!==t.lowerExp?t.lowerExp:-3,o=t&amp;&amp;void 0!==t.upperExp?t.upperExp:5;if(e.isZero())return&quot;0&quot;;var u=e.toSignificantDigits(r),s=u.e;return(s&gt;=a&amp;&amp;s&lt;o?u.toFixed():Hr(e,r)).replace(/((\s.\sd*?)(0+))($|e)/,(function(){var e=arguments[2],t=arguments[4];return&quot;.&quot;!==e?e+t:t}));default:throw new Error('Unknown notation &quot;'+i+'&quot;. Choose &quot;auto&quot;, &quot;exponential&quot;, &quot;fixed&quot;, &quot;bin&quot;, &quot;oct&quot;, or &quot;hex.')}}(e,r):function(e){return e&amp;&amp;&quot;object&quot;===t(e)&amp;&amp;&quot;number&quot;==typeof e.s&amp;&amp;&quot;number&quot;==typeof e.n&amp;&amp;&quot;number&quot;==typeof e.d||!1}(e)?r&amp;&amp;&quot;decimal&quot;===r.fraction?e.toString():e.s*e.n+&quot;/&quot;+e.d:Array.isArray(e)?Yr(e,r):c(e)?'&quot;'+e+'&quot;':&quot;function&quot;==typeof e?e.syntax?String(e.syntax):&quot;function&quot;:e&amp;&amp;&quot;object&quot;===t(e)?&quot;function&quot;==typeof e.format?e.format(r):e&amp;&amp;e.toString(r)!=={}.toString()?e.toString(r):&quot;{&quot;+Object.keys(e).map((function(t){return'&quot;'+t+'&quot;: '+Vr(e[t],r)})).join(&quot;, &quot;)+&quot;}&quot;:String(e)}(e,r);return r&amp;&amp;&quot;object&quot;===t(r)&amp;&amp;&quot;truncate&quot;in r&amp;&amp;n.length&gt;r.truncate?n.substring(0,r.truncate-3)+&quot;...&quot;:n}function Zr(e){for(var t=String(e),r=&quot;&quot;,n=0;n&lt;t.length;){var i=t.charAt(n);&quot;\s\s&quot;===i?(r+=i,n++,&quot;&quot;!==(i=t.charAt(n))&amp;&amp;-1!=='&quot;\s\s/bfnrtu'.indexOf(i)||(r+=&quot;\s\s&quot;),r+=i):r+='&quot;'===i?'\s\s&quot;':i,n++}return'&quot;'+r+'&quot;'}function Wr(e){var t=String(e);return t.replace(/&amp;/g,&quot;&amp;amp;&quot;).replace(/&quot;/g,&quot;&amp;quot;&quot;).replace(/'/g,&quot;&amp;#39;&quot;).replace(/&lt;/g,&quot;&amp;lt;&quot;).replace(/&gt;/g,&quot;&amp;gt;&quot;)}function Yr(e,t){if(Array.isArray(e)){for(var r=&quot;[&quot;,n=e.length,i=0;i&lt;n;i++)0!==i&amp;&amp;(r+=&quot;, &quot;),r+=Yr(e[i],t);return r+&quot;]&quot;}return Vr(e,t)}function Jr(e,t){if(!c(e))throw new TypeError(&quot;Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: &quot;+H(e)+&quot;, index: 0)&quot;);if(!c(t))throw new TypeError(&quot;Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: &quot;+H(t)+&quot;, index: 1)&quot;);return e===t?0:e&gt;t?1:-1}function Xr(e,t,r){if(!(this instanceof Xr))throw new SyntaxError(&quot;Constructor must be called with the new operator&quot;);this.actual=e,this.expected=t,this.relation=r,this.message=&quot;Dimension mismatch (&quot;+(Array.isArray(e)?&quot;[&quot;+e.join(&quot;, &quot;)+&quot;]&quot;:e)+&quot; &quot;+(this.relation||&quot;!=&quot;)+&quot; &quot;+(Array.isArray(t)?&quot;[&quot;+t.join(&quot;, &quot;)+&quot;]&quot;:t)+&quot;)&quot;,this.stack=(new Error).stack}function Qr(e,t,r){if(!(this instanceof Qr))throw new SyntaxError(&quot;Constructor must be called with the new operator&quot;);this.index=e,arguments.length&lt;3?(this.min=0,this.max=t):(this.min=t,this.max=r),void 0!==this.min&amp;&amp;this.index&lt;this.min?this.message=&quot;Index out of range (&quot;+this.index+&quot; &lt; &quot;+this.min+&quot;)&quot;:void 0!==this.max&amp;&amp;this.index&gt;=this.max?this.message=&quot;Index out of range (&quot;+this.index+&quot; &gt; &quot;+(this.max-1)+&quot;)&quot;:this.message=&quot;Index out of range (&quot;+this.index+&quot;)&quot;,this.stack=(new Error).stack}function Kr(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function en(e,t,r){var n,i=e.length;if(i!==t[r])throw new Xr(i,t[r]);if(r&lt;t.length-1){var a=r+1;for(n=0;n&lt;i;n++){var o=e[n];if(!Array.isArray(o))throw new Xr(t.length-1,t.length,&quot;&lt;&quot;);en(e[n],t,a)}}else for(n=0;n&lt;i;n++)if(Array.isArray(e[n]))throw new Xr(t.length+1,t.length,&quot;&gt;&quot;)}function tn(e,t){if(0===t.length){if(Array.isArray(e))throw new Xr(e.length,0)}else en(e,t,0)}function rn(e,t){if(!i(e)||!V(e))throw new TypeError(&quot;Index must be an integer (value: &quot;+e+&quot;)&quot;);if(e&lt;0||&quot;number&quot;==typeof t&amp;&amp;e&gt;=t)throw new Qr(e,t)}function nn(e,t,r){if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError(&quot;Array expected&quot;);if(0===t.length)throw new Error(&quot;Resizing to scalar is not supported&quot;);return t.forEach((function(e){if(!i(e)||!V(e)||e&lt;0)throw new TypeError(&quot;Invalid size, must contain positive integers (size: &quot;+Vr(t)+&quot;)&quot;)})),an(e,t,0,void 0!==r?r:0),e}function an(e,t,r,n){var i,a,o=e.length,u=t[r],s=Math.min(o,u);if(e.length=u,r&lt;t.length-1){var c=r+1;for(i=0;i&lt;s;i++)a=e[i],Array.isArray(a)||(a=[a],e[i]=a),an(a,t,c,n);for(i=s;i&lt;u;i++)a=[],e[i]=a,an(a,t,c,n)}else{for(i=0;i&lt;s;i++)for(;Array.isArray(e[i]);)e[i]=e[i][0];for(i=s;i&lt;u;i++)e[i]=n}}function on(e,t){var r=mn(e),n=r.length;if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError(&quot;Array expected&quot;);if(0===t.length)throw new Xr(0,n,&quot;!=&quot;);var i=sn(t=un(t,n));if(n!==i)throw new Xr(i,n,&quot;!=&quot;);try{return function(e,t){for(var r,n=e,i=t.length-1;i&gt;0;i--){var a=t[i];r=[];for(var o=n.length/a,u=0;u&lt;o;u++)r.push(n.slice(u*a,(u+1)*a));n=r}return n}(r,t)}catch(e){if(e instanceof Xr)throw new Xr(i,n,&quot;!=&quot;);throw e}}function un(e,t){var r=sn(e),n=e.slice(),i=e.indexOf(-1);if(e.indexOf(-1,i+1)&gt;=0)throw new Error(&quot;More than one wildcard in sizes&quot;);if(i&gt;=0){if(t%r!=0)throw new Error(&quot;Could not replace wildcard, since &quot;+t+&quot; is no multiple of &quot;+-r);n[i]=-t/r}return n}function sn(e){return e.reduce((function(e,t){return e*t}),1)}function cn(e,t){for(var r=t||Kr(e);Array.isArray(e)&amp;&amp;1===e.length;)e=e[0],r.shift();for(var n=r.length;1===r[n-1];)n--;return n&lt;r.length&amp;&amp;(e=fn(e,n,0),r.length=n),e}function fn(e,t,r){var n,i;if(r&lt;t){var a=r+1;for(n=0,i=e.length;n&lt;i;n++)e[n]=fn(e[n],t,a)}else for(;Array.isArray(e);)e=e[0];return e}function ln(e,t,r,n){var i=n||Kr(e);if(r)for(var a=0;a&lt;r;a++)e=[e],i.unshift(1);for(e=pn(e,t,0);i.length&lt;t;)i.push(1);return e}function pn(e,t,r){var n,i;if(Array.isArray(e)){var a=r+1;for(n=0,i=e.length;n&lt;i;n++)e[n]=pn(e[n],t,a)}else for(var o=r;o&lt;t;o++)e=[e];return e}function mn(e){if(!Array.isArray(e))return e;var t=[];return e.forEach((function e(r){Array.isArray(r)?r.forEach(e):t.push(r)})),t}function hn(e,t){return Array.prototype.map.call(e,t)}function dn(e,t){Array.prototype.forEach.call(e,t)}function vn(e,t){if(1!==Kr(e).length)throw new Error(&quot;Only one dimensional matrices supported&quot;);return Array.prototype.filter.call(e,t)}function yn(e,t){if(1!==Kr(e).length)throw new Error(&quot;Only one dimensional matrices supported&quot;);return Array.prototype.filter.call(e,(function(e){return t.test(e)}))}function gn(e,t){return Array.prototype.join.call(e,t)}function xn(e){if(!Array.isArray(e))throw new TypeError(&quot;Array input expected&quot;);if(0===e.length)return e;var t=[],r=0;t[0]={value:e[0],identifier:0};for(var n=1;n&lt;e.length;n++)e[n]===e[n-1]?r++:r=0,t.push({value:e[n],identifier:r});return t}function bn(e){if(!Array.isArray(e))throw new TypeError(&quot;Array input expected&quot;);if(0===e.length)return e;for(var t=[],r=0;r&lt;e.length;r++)t.push(e[r].value);return t}function wn(e,t){for(var r,n=0,i=0;i&lt;e.length;i++){var a=e[i],o=Array.isArray(a);if(0===i&amp;&amp;o&amp;&amp;(n=a.length),o&amp;&amp;a.length!==n)return;var u=o?wn(a,t):t(a);if(void 0===r)r=u;else if(r!==u)return&quot;mixed&quot;}return r}function Nn(e,t){return-1!==e.indexOf(t)}function Dn(e){var t=0,r=1,n=Object.create(null),i=Object.create(null),a=0,o=function(e){var o=i[e];if(o&amp;&amp;(delete n[o],delete i[e],--t,r===o)){if(!t)return a=0,void(r=1);for(;!hasOwnProperty.call(n,++r);)continue}};return e=Math.abs(e),{hit:function(u){var s=i[u],c=++a;if(n[c]=u,i[u]=c,!s){if(++t&lt;=e)return;return u=n[r],o(u),u}if(delete n[s],r===s)for(;!hasOwnProperty.call(n,++r);)continue},delete:o,clear:function(){t=a=0,r=1,n=Object.create(null),i=Object.create(null)}}}function En(e){var r=arguments.length&gt;1&amp;&amp;void 0!==arguments[1]?arguments[1]:{},n=r.hasher,i=r.limit;return i=null==i?Number.POSITIVE_INFINITY:i,n=null==n?JSON.stringify:n,function r(){&quot;object&quot;!==t(r.cache)&amp;&amp;(r.cache={values:new Map,lru:Dn(i||Number.POSITIVE_INFINITY)});for(var a=[],o=0;o&lt;arguments.length;o++)a[o]=arguments[o];var u=n(a);if(r.cache.values.has(u))return r.cache.lru.hit(u),r.cache.values.get(u);var s=e.apply(e,a);return r.cache.values.set(u,s),r.cache.values.delete(r.cache.lru.hit(u)),s}}function An(e){return Object.keys(e.signatures||{}).reduce((function(e,t){var r=(t.match(/,/g)||[]).length+1;return Math.max(e,r)}),-1)}function Sn(e,t){(null==t||t&gt;e.length)&amp;&amp;(t=e.length);for(var r=0,n=new Array(t);r&lt;t;r++)n[r]=e[r];return n}r(5827),r(86),r(6977),r(5147),Xr.prototype=new RangeError,Xr.prototype.constructor=RangeError,Xr.prototype.name=&quot;DimensionError&quot;,Xr.prototype.isDimensionError=!0,Qr.prototype=new RangeError,Qr.prototype.constructor=RangeError,Qr.prototype.name=&quot;IndexError&quot;,Qr.prototype.isIndexError=!0,r(8862);var Cn=Ee(&quot;DenseMatrix&quot;,[&quot;Matrix&quot;],(function(e){var t=e.Matrix;function r(e,t){if(!(this instanceof r))throw new SyntaxError(&quot;Constructor must be called with the new operator&quot;);if(t&amp;&amp;!c(t))throw new Error(&quot;Invalid datatype: &quot;+t);if(l(e))&quot;DenseMatrix&quot;===e.type?(this._data=he(e._data),this._size=he(e._size),this._datatype=t||e._datatype):(this._data=e.toArray(),this._size=e.size(),this._datatype=t||e._datatype);else if(e&amp;&amp;f(e.data)&amp;&amp;f(e.size))this._data=e.data,this._size=e.size,tn(this._data,this._size),this._datatype=t||e.datatype;else if(f(e))this._data=m(e),this._size=Kr(this._data),tn(this._data,this._size),this._datatype=t;else{if(e)throw new TypeError(&quot;Unsupported type of data (&quot;+H(e)+&quot;)&quot;);this._data=[],this._size=[0],this._datatype=t}}function n(e,t,r,i){var a=i===r-1,o=t.dimension(i);return a?o.map((function(t){return rn(t,e.length),e[t]})).valueOf():o.map((function(a){return rn(a,e.length),n(e[a],t,r,i+1)})).valueOf()}function o(e,t,r,n,i){var a=i===n-1,u=t.dimension(i);a?u.forEach((function(t,n){rn(t),e[t]=r[n[0]]})):u.forEach((function(a,u){rn(a),o(e[a],t,r[u[0]],n,i+1)}))}function u(e,t,r){if(0===t.length){for(var n=e._data;f(n);)n=n[0];return n}return e._size=t.slice(0),e._data=nn(e._data,e._size,r),e}function s(e,t,r){for(var n=e._size.slice(0),i=!1;n.length&lt;t.length;)n.push(0),i=!0;for(var a=0,o=t.length;a&lt;o;a++)t[a]&gt;n[a]&amp;&amp;(n[a]=t[a],i=!0);i&amp;&amp;u(e,n,r)}function m(e){for(var t=0,r=e.length;t&lt;r;t++){var n=e[t];f(n)?e[t]=m(n):n&amp;&amp;!0===n.isMatrix&amp;&amp;(e[t]=m(n.valueOf()))}return e}return r.prototype=new t,r.prototype.createDenseMatrix=function(e,t){return new r(e,t)},Object.defineProperty(r,&quot;name&quot;,{value:&quot;DenseMatrix&quot;}),r.prototype.constructor=r,r.prototype.type=&quot;DenseMatrix&quot;,r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return wn(this._data,H)},r.prototype.storage=function(){return&quot;dense&quot;},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(e,t){return new r(e,t)},r.prototype.subset=function(e,t,i){switch(arguments.length){case 1:return function(e,t){if(!v(t))throw new TypeError(&quot;Invalid index&quot;);if(t.isScalar())return e.get(t.min());var i=t.size();if(i.length!==e._size.length)throw new Xr(i.length,e._size.length);for(var a=t.min(),o=t.max(),u=0,s=e._size.length;u&lt;s;u++)rn(a[u],e._size[u]),rn(o[u],e._size[u]);return new r(n(e._data,t,i.length,0),e._datatype)}(this,e);case 2:case 3:return function(e,t,r,n){if(!t||!0!==t.isIndex)throw new TypeError(&quot;Invalid index&quot;);var i,a=t.size(),u=t.isScalar();if(l(r)?(i=r.size(),r=r.valueOf()):i=Kr(r),u){if(0!==i.length)throw new TypeError(&quot;Scalar expected&quot;);e.set(t.min(),r,n)}else{if(a.length&lt;e._size.length)throw new Xr(a.length,e._size.length,&quot;&lt;&quot;);if(i.length&lt;a.length){for(var c=0,f=0;1===a[c]&amp;&amp;1===i[c];)c++;for(;1===a[c];)f++,c++;r=ln(r,a.length,f,i)}if(!ge(a,i))throw new Xr(a,i,&quot;&gt;&quot;);var p=t.max().map((function(e){return e+1}));s(e,p,n);var m=a.length;o(e._data,t,r,m,0)}return e}(this,e,t,i);default:throw new SyntaxError(&quot;Wrong number of arguments&quot;)}},r.prototype.get=function(e){if(!f(e))throw new TypeError(&quot;Array expected&quot;);if(e.length!==this._size.length)throw new Xr(e.length,this._size.length);for(var t=0;t&lt;e.length;t++)rn(e[t],this._size[t]);for(var r=this._data,n=0,i=e.length;n&lt;i;n++){var a=e[n];rn(a,r.length),r=r[a]}return r},r.prototype.set=function(e,t,r){if(!f(e))throw new TypeError(&quot;Array expected&quot;);if(e.length&lt;this._size.length)throw new Xr(e.length,this._size.length,&quot;&lt;&quot;);var n,i,a,o=e.map((function(e){return e+1}));s(this,o,r);var u=this._data;for(n=0,i=e.length-1;n&lt;i;n++)rn(a=e[n],u.length),u=u[a];return rn(a=e[e.length-1],u.length),u[a]=t,this},r.prototype.resize=function(e,t,r){if(!p(e))throw new TypeError(&quot;Array or Matrix expected&quot;);var n=e.valueOf().map((function(e){return Array.isArray(e)&amp;&amp;1===e.length?e[0]:e}));return u(r?this.clone():this,n,t)},r.prototype.reshape=function(e,t){var r=t?this.clone():this;r._data=on(r._data,e);var n=r._size.reduce((function(e,t){return e*t}));return r._size=un(e,n),r},r.prototype.clone=function(){return new r({data:he(this._data),size:he(this._size),datatype:this._datatype})},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(e){var t=this,n=An(e),i=function r(i,a){return f(i)?i.map((function(e,t){return r(e,a.concat(t))})):1===n?e(i):2===n?e(i,a):e(i,a,t)}(this._data,[]);return new r(i,void 0!==this._datatype?wn(i,H):void 0)},r.prototype.forEach=function(e){var t=this;!function r(n,i){f(n)?n.forEach((function(e,t){r(e,i.concat(t))})):e(n,i,t)}(this._data,[])},r.prototype[Symbol.iterator]=Ur.mark((function e(){var t;return Ur.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ur.mark((function e(t,r){var n;return Ur.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!f(t)){i.next=9;break}n=0;case 2:if(!(n&lt;t.length)){i.next=7;break}return i.delegateYield(e(t[n],r.concat(n)),&quot;t0&quot;,4);case 4:n++,i.next=2;break;case 7:i.next=11;break;case 9:return i.next=11,{value:t,index:r};case 11:case&quot;end&quot;:return i.stop()}}),e)})),e.delegateYield(t(this._data,[]),&quot;t0&quot;,2);case 2:case&quot;end&quot;:return e.stop()}}),e,this)})),r.prototype.rows=function(){var e=[];if(2!==this.size().length)throw new TypeError(&quot;Rows can only be returned for a 2D matrix.&quot;);var t,n=function(e,t){var r=&quot;undefined&quot;!=typeof Symbol&amp;&amp;e[Symbol.iterator]||e[&quot;@@iterator&quot;];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if(&quot;string&quot;==typeof e)return Sn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return&quot;Object&quot;===r&amp;&amp;e.constructor&amp;&amp;(r=e.constructor.name),&quot;Map&quot;===r||&quot;Set&quot;===r?Array.from(e):&quot;Arguments&quot;===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Sn(e,t):void 0}}(e))||t&amp;&amp;e&amp;&amp;&quot;number&quot;==typeof e.length){r&amp;&amp;(e=r);var n=0,i=function(){};return{s:i,n:function(){return n&gt;=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError(&quot;Invalid attempt to iterate non-iterable instance.\snIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.&quot;)}var a,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw a}}}}(this._data);try{for(n.s();!(t=n.n()).done;){var i=t.value;e.push(new r([i],this._datatype))}}catch(e){n.e(e)}finally{n.f()}return e},r.prototype.columns=function(){var e=this,t=[],n=this.size();if(2!==n.length)throw new TypeError(&quot;Rows can only be returned for a 2D matrix.&quot;);for(var i=this._data,a=function(n){var a=i.map((function(e){return[e[n]]}));t.push(new r(a,e._datatype))},o=0;o&lt;n[1];o++)a(o);return t},r.prototype.toArray=function(){return he(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(e){return Vr(this._data,e)},r.prototype.toString=function(){return Vr(this._data)},r.prototype.toJSON=function(){return{mathjs:&quot;DenseMatrix&quot;,data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(e){if(e){if(a(e)&amp;&amp;(e=e.toNumber()),!i(e)||!V(e))throw new TypeError(&quot;The parameter k must be an integer number&quot;)}else e=0;for(var t=e&gt;0?e:0,n=e&lt;0?-e:0,o=this._size[0],u=this._size[1],s=Math.min(o-n,u-t),c=[],f=0;f&lt;s;f++)c[f]=this._data[f+n][f+t];return new r({data:c,size:[s],datatype:this._datatype})},r.diagonal=function(e,t,n,o){if(!f(e))throw new TypeError(&quot;Array expected, size parameter&quot;);if(2!==e.length)throw new Error(&quot;Only two dimensions matrix are supported&quot;);if(e=e.map((function(e){if(a(e)&amp;&amp;(e=e.toNumber()),!i(e)||!V(e)||e&lt;1)throw new Error(&quot;Size values must be positive integers&quot;);return e})),n){if(a(n)&amp;&amp;(n=n.toNumber()),!i(n)||!V(n))throw new TypeError(&quot;The parameter k must be an integer number&quot;)}else n=0;var u,s=n&gt;0?n:0,c=n&lt;0?-n:0,p=e[0],m=e[1],h=Math.min(p-c,m-s);if(f(t)){if(t.length!==h)throw new Error(&quot;Invalid value array length&quot;);u=function(e){return t[e]}}else if(l(t)){var d=t.size();if(1!==d.length||d[0]!==h)throw new Error(&quot;Invalid matrix length&quot;);u=function(e){return t.get([e])}}else u=function(){return t};o||(o=a(u(0))?u(0).mul(0):0);var v=[];if(e.length&gt;0){v=nn(v,e,o);for(var y=0;y&lt;h;y++)v[y+c][y+s]=u(y)}return new r({data:v,size:[p,m]})},r.fromJSON=function(e){return new r(e)},r.prototype.swapRows=function(e,t){if(!(i(e)&amp;&amp;V(e)&amp;&amp;i(t)&amp;&amp;V(t)))throw new Error(&quot;Row index must be positive integers&quot;);if(2!==this._size.length)throw new Error(&quot;Only two dimensional matrix is supported&quot;);return rn(e,this._size[0]),rn(t,this._size[0]),r._swapRows(e,t,this._data),this},r._swapRows=function(e,t,r){var n=r[e];r[e]=r[t],r[t]=n},r}),{isClass:!0}),Mn=&quot;clone&quot;,Fn=Ee(Mn,[&quot;typed&quot;],(function(e){return(0,e.typed)(Mn,{any:he})}));function On(e){var t,r,n=e.length,i=e[0].length,a=[];for(r=0;r&lt;i;r++){var o=[];for(t=0;t&lt;n;t++)o.push(e[t][r]);a.push(o)}return a}function Tn(e){for(var t=0;t&lt;e.length;t++)if(p(e[t]))return!0;return!1}function Bn(e,t){l(e)&amp;&amp;(e=e.valueOf());for(var r=0,n=e.length;r&lt;n;r++){var i=e[r];Array.isArray(i)?Bn(i,t):t(i)}}function _n(e,t,r){return e&amp;&amp;&quot;function&quot;==typeof e.map?e.map((function(e){return _n(e,t,r)})):t(e)}function kn(e,t,r){var n=Array.isArray(e)?Kr(e):e.size();if(t&lt;0||t&gt;=n.length)throw new Qr(t,n.length);return l(e)?e.create(In(e.valueOf(),t,r)):In(e,t,r)}function In(e,t,r){var n,i,a,o;if(t&lt;=0){if(Array.isArray(e[0])){for(o=On(e),i=[],n=0;n&lt;o.length;n++)i[n]=In(o[n],t-1,r);return i}for(a=e[0],n=1;n&lt;e.length;n++)a=r(a,e[n]);return a}for(i=[],n=0;n&lt;e.length;n++)i[n]=In(e[n],t-1,r);return i}function Rn(e,t,r,n,i,a,o,u,s,c,f){var l,p,m,h,d=e._values,v=e._index,y=e._ptr;if(n)for(p=y[t],m=y[t+1],l=p;l&lt;m;l++)r[h=v[l]]!==a?(r[h]=a,o.push(h),c?(n[h]=s?u(d[l],f):u(f,d[l]),i[h]=a):n[h]=d[l]):(n[h]=s?u(d[l],n[h]):u(n[h],d[l]),i[h]=a);else for(p=y[t],m=y[t+1],l=p;l&lt;m;l++)r[h=v[l]]!==a?(r[h]=a,o.push(h)):i[h]=a}var zn=&quot;isInteger&quot;,qn=Ee(zn,[&quot;typed&quot;],(function(e){var t=e.typed;return t(zn,{number:V,BigNumber:function(e){return e.isInt()},Fraction:function(e){return 1===e.d&amp;&amp;isFinite(e.n)},&quot;Array | Matrix&quot;:t.referToSelf((function(e){return function(t){return _n(t,e)}}))})})),jn=(r(9826),r(4048),&quot;number&quot;);function Pn(e){return e&lt;0}function Ln(e){return e&gt;0}function Un(e){return 0===e}function $n(e){return Number.isNaN(e)}Pn.signature=jn,Ln.signature=jn,Un.signature=jn,$n.signature=jn;var Hn=&quot;isNegative&quot;,Gn=Ee(Hn,[&quot;typed&quot;],(function(e){var t=e.typed;return t(Hn,{number:Pn,BigNumber:function(e){return e.isNeg()&amp;&amp;!e.isZero()&amp;&amp;!e.isNaN()},Fraction:function(e){return e.s&lt;0},Unit:t.referToSelf((function(e){return function(r){return t.find(e,r.valueType())(r.value)}})),&quot;Array | Matrix&quot;:t.referToSelf((function(e){return function(t){return _n(t,e)}}))})})),Vn=&quot;isNumeric&quot;,Zn=Ee(Vn,[&quot;typed&quot;],(function(e){var t=e.typed;return t(Vn,{&quot;number | BigNumber | Fraction | boolean&quot;:function(){return!0},&quot;Complex | Unit | string | null | undefined | Node&quot;:function(){return!1},&quot;Array | Matrix&quot;:t.referToSelf((function(e){return function(t){return _n(t,e)}}))})})),Wn=(r(3210),&quot;hasNumericValue&quot;),Yn=Ee(Wn,[&quot;typed&quot;,&quot;isNumeric&quot;],(function(e){var t=e.typed,r=e.isNumeric;return t(Wn,{boolean:function(){return!0},string:function(e){return e.trim().length&gt;0&amp;&amp;!isNaN(Number(e))},any:function(e){return r(e)}})})),Jn=&quot;isPositive&quot;,Xn=Ee(Jn,[&quot;typed&quot;],(function(e){var t=e.typed;return t(Jn,{number:Ln,BigNumber:function(e){return!e.isNeg()&amp;&amp;!e.isZero()&amp;&amp;!e.isNaN()},Fraction:function(e){return e.s&gt;0&amp;&amp;e.n&gt;0},Unit:t.referToSelf((function(e){return function(r){return t.find(e,r.valueType())(r.value)}})),&quot;Array | Matrix&quot;:t.referToSelf((function(e){return function(t){return _n(t,e)}}))})})),Qn=&quot;isZero&quot;,Kn=Ee(Qn,[&quot;typed&quot;],(function(e){var t=e.typed;return t(Qn,{number:Un,BigNumber:function(e){return e.isZero()},Complex:function(e){return 0===e.re&amp;&amp;0===e.im},Fraction:function(e){return 1===e.d&amp;&amp;0===e.n},Unit:t.referToSelf((function(e){return function(r){return t.find(e,r.valueType())(r.value)}})),&quot;Array | Matrix&quot;:t.referToSelf((function(e){return function(t){return _n(t,e)}}))})})),ei=&quot;isNaN&quot;,ti=Ee(ei,[&quot;typed&quot;],(function(e){return(0,e.typed)(ei,{number:$n,BigNumber:function(e){return e.isNaN()},Fraction:function(e){return!1},Complex:function(e){return e.isNaN()},Unit:function(e){return Number.isNaN(e.value)},&quot;Array | Matrix&quot;:function(e){return _n(e,Number.isNaN)}})})),ri=&quot;typeOf&quot;,ni=Ee(ri,[&quot;typed&quot;],(function(e){return(0,e.typed)(ri,{any:H})}));function ii(e,t,r){if(null==r)return e.eq(t);if(e.eq(t))return!0;if(e.isNaN()||t.isNaN())return!1;if(e.isFinite()&amp;&amp;t.isFinite()){var n=e.minus(t).abs();if(n.isZero())return!0;var i=e.constructor.max(e.abs(),t.abs());return n.lte(i.times(r))}return!1}var ai=Ee(&quot;compareUnits&quot;,[&quot;typed&quot;],(function(e){var t=e.typed;return{&quot;Unit, Unit&quot;:t.referToSelf((function(e){return function(r,n){if(!r.equalBase(n))throw new Error(&quot;Cannot compare units with different base&quot;);return t.find(e,[r.valueType(),n.valueType()])(r.value,n.value)}}))}})),oi=&quot;equalScalar&quot;,ui=Ee(oi,[&quot;typed&quot;,&quot;config&quot;],(function(e){var t=e.typed,r=e.config,n=ai({typed:t});return t(oi,{&quot;boolean, boolean&quot;:function(e,t){return e===t},&quot;number, number&quot;:function(e,t){return ue(e,t,r.epsilon)},&quot;BigNumber, BigNumber&quot;:function(e,t){return e.eq(t)||ii(e,t,r.epsilon)},&quot;Fraction, Fraction&quot;:function(e,t){return e.equals(t)},&quot;Complex, Complex&quot;:function(e,t){return function(e,t,r){return ue(e.re,t.re,r)&amp;&amp;ue(e.im,t.im,r)}(e,t,r.epsilon)}},n)})),si=(Ee(oi,[&quot;typed&quot;,&quot;config&quot;],(function(e){var t=e.typed,r=e.config;return t(oi,{&quot;number, number&quot;:function(e,t){return ue(e,t,r.epsilon)}})})),Ee(&quot;SparseMatrix&quot;,[&quot;typed&quot;,&quot;equalScalar&quot;,&quot;Matrix&quot;],(function(e){var t=e.typed,r=e.equalScalar,n=e.Matrix;function o(e,t){if(!(this instanceof o))throw new SyntaxError(&quot;Constructor must be called with the new operator&quot;);if(t&amp;&amp;!c(t))throw new Error(&quot;Invalid datatype: &quot;+t);if(l(e))!function(e,t,r){&quot;SparseMatrix&quot;===t.type?(e._values=t._values?he(t._values):void 0,e._index=he(t._index),e._ptr=he(t._ptr),e._size=he(t._size),e._datatype=r||t._datatype):u(e,t.valueOf(),r||t._datatype)}(this,e,t);else if(e&amp;&amp;f(e.index)&amp;&amp;f(e.ptr)&amp;&amp;f(e.size))this._values=e.values,this._index=e.index,this._ptr=e.ptr,this._size=e.size,this._datatype=t||e.datatype;else if(f(e))u(this,e,t);else{if(e)throw new TypeError(&quot;Unsupported type of data (&quot;+H(e)+&quot;)&quot;);this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=t}}function u(e,n,i){e._values=[],e._index=[],e._ptr=[],e._datatype=i;var a=n.length,o=0,u=r,s=0;if(c(i)&amp;&amp;(u=t.find(r,[i,i])||r,s=t.convert(0,i)),a&gt;0){var l=0;do{e._ptr.push(e._index.length);for(var p=0;p&lt;a;p++){var m=n[p];if(f(m)){if(0===l&amp;&amp;o&lt;m.length&amp;&amp;(o=m.length),l&lt;m.length){var h=m[l];u(h,s)||(e._values.push(h),e._index.push(p))}}else 0===l&amp;&amp;o&lt;1&amp;&amp;(o=1),u(m,s)||(e._values.push(m),e._index.push(p))}l++}while(l&lt;o)}e._ptr.push(e._index.length),e._size=[a,o]}function s(e,t,r,n){if(r-t==0)return r;for(var i=t;i&lt;r;i++)if(n[i]===e)return i;return t}function m(e,t,r,n,i,a,o){i.splice(e,0,n),a.splice(e,0,t);for(var u=r+1;u&lt;o.length;u++)o[u]++}function h(e,n,i,a){var o=a||0,u=r,s=0;c(e._datatype)&amp;&amp;(u=t.find(r,[e._datatype,e._datatype])||r,s=t.convert(0,e._datatype),o=t.convert(o,e._datatype));var f,l,p,m=!u(o,s),h=e._size[0],d=e._size[1];if(i&gt;d){for(l=d;l&lt;i;l++)if(e._ptr[l]=e._values.length,m)for(f=0;f&lt;h;f++)e._values.push(o),e._index.push(f);e._ptr[i]=e._values.length}else i&lt;d&amp;&amp;(e._ptr.splice(i+1,d-i),e._values.splice(e._ptr[i],e._values.length),e._index.splice(e._ptr[i],e._index.length));if(d=i,n&gt;h){if(m){var v=0;for(l=0;l&lt;d;l++){e._ptr[l]=e._ptr[l]+v,p=e._ptr[l+1]+v;var y=0;for(f=h;f&lt;n;f++,y++)e._values.splice(p+y,0,o),e._index.splice(p+y,0,f),v++}e._ptr[d]=e._values.length}}else if(n&lt;h){var g=0;for(l=0;l&lt;d;l++){e._ptr[l]=e._ptr[l]-g;var x=e._ptr[l],b=e._ptr[l+1]-g;for(p=x;p&lt;b;p++)(f=e._index[p])&gt;n-1&amp;&amp;(e._values.splice(p,1),e._index.splice(p,1),g++)}e._ptr[l]=e._values.length}return e._size[0]=n,e._size[1]=i,e}function d(e,t,r,n,i){var a,o,u=n[0],s=n[1],c=[];for(a=0;a&lt;u;a++)for(c[a]=[],o=0;o&lt;s;o++)c[a][o]=0;for(o=0;o&lt;s;o++)for(var f=r[o],l=r[o+1],p=f;p&lt;l;p++)c[a=t[p]][o]=e?i?he(e[p]):e[p]:1;return c}return o.prototype=new n,o.prototype.createSparseMatrix=function(e,t){return new o(e,t)},Object.defineProperty(o,&quot;name&quot;,{value:&quot;SparseMatrix&quot;}),o.prototype.constructor=o,o.prototype.type=&quot;SparseMatrix&quot;,o.prototype.isSparseMatrix=!0,o.prototype.getDataType=function(){return wn(this._values,H)},o.prototype.storage=function(){return&quot;sparse&quot;},o.prototype.datatype=function(){return this._datatype},o.prototype.create=function(e,t){return new o(e,t)},o.prototype.density=function(){var e=this._size[0],t=this._size[1];return 0!==e&amp;&amp;0!==t?this._index.length/(e*t):0},o.prototype.subset=function(e,t,r){if(!this._values)throw new Error(&quot;Cannot invoke subset on a Pattern only matrix&quot;);switch(arguments.length){case 1:return function(e,t){if(!v(t))throw new TypeError(&quot;Invalid index&quot;);if(t.isScalar())return e.get(t.min());var r,n,i,a,u=t.size();if(u.length!==e._size.length)throw new Xr(u.length,e._size.length);var s=t.min(),c=t.max();for(r=0,n=e._size.length;r&lt;n;r++)rn(s[r],e._size[r]),rn(c[r],e._size[r]);var f=e._values,l=e._index,p=e._ptr,m=t.dimension(0),h=t.dimension(1),d=[],y=[];m.forEach((function(e,t){y[e]=t[0],d[e]=!0}));var g=f?[]:void 0,x=[],b=[];return h.forEach((function(e){for(b.push(x.length),i=p[e],a=p[e+1];i&lt;a;i++)r=l[i],!0===d[r]&amp;&amp;(x.push(y[r]),g&amp;&amp;g.push(f[i]))})),b.push(x.length),new o({values:g,index:x,ptr:b,size:u,datatype:e._datatype})}(this,e);case 2:case 3:return function(e,t,r,n){if(!t||!0!==t.isIndex)throw new TypeError(&quot;Invalid index&quot;);var i,a=t.size(),o=t.isScalar();if(l(r)?(i=r.size(),r=r.toArray()):i=Kr(r),o){if(0!==i.length)throw new TypeError(&quot;Scalar expected&quot;);e.set(t.min(),r,n)}else{if(1!==a.length&amp;&amp;2!==a.length)throw new Xr(a.length,e._size.length,&quot;&lt;&quot;);if(i.length&lt;a.length){for(var u=0,s=0;1===a[u]&amp;&amp;1===i[u];)u++;for(;1===a[u];)s++,u++;r=ln(r,a.length,s,i)}if(!ge(a,i))throw new Xr(a,i,&quot;&gt;&quot;);if(1===a.length)t.dimension(0).forEach((function(t,i){rn(t),e.set([t,0],r[i[0]],n)}));else{var c=t.dimension(0),f=t.dimension(1);c.forEach((function(t,i){rn(t),f.forEach((function(a,o){rn(a),e.set([t,a],r[i[0]][o[0]],n)}))}))}}return e}(this,e,t,r);default:throw new SyntaxError(&quot;Wrong number of arguments&quot;)}},o.prototype.get=function(e){if(!f(e))throw new TypeError(&quot;Array expected&quot;);if(e.length!==this._size.length)throw new Xr(e.length,this._size.length);if(!this._values)throw new Error(&quot;Cannot invoke get on a Pattern only matrix&quot;);var t=e[0],r=e[1];rn(t,this._size[0]),rn(r,this._size[1]);var n=s(t,this._ptr[r],this._ptr[r+1],this._index);return n&lt;this._ptr[r+1]&amp;&amp;this._index[n]===t?this._values[n]:0},o.prototype.set=function(e,n,i){if(!f(e))throw new TypeError(&quot;Array expected&quot;);if(e.length!==this._size.length)throw new Xr(e.length,this._size.length);if(!this._values)throw new Error(&quot;Cannot invoke set on a Pattern only matrix&quot;);var a=e[0],o=e[1],u=this._size[0],l=this._size[1],p=r,d=0;c(this._datatype)&amp;&amp;(p=t.find(r,[this._datatype,this._datatype])||r,d=t.convert(0,this._datatype)),(a&gt;u-1||o&gt;l-1)&amp;&amp;(h(this,Math.max(a+1,u),Math.max(o+1,l),i),u=this._size[0],l=this._size[1]),rn(a,u),rn(o,l);var v=s(a,this._ptr[o],this._ptr[o+1],this._index);return v&lt;this._ptr[o+1]&amp;&amp;this._index[v]===a?p(n,d)?function(e,t,r,n,i){r.splice(e,1),n.splice(e,1);for(var a=t+1;a&lt;i.length;a++)i[a]--}(v,o,this._values,this._index,this._ptr):this._values[v]=n:p(n,d)||m(v,a,o,n,this._values,this._index,this._ptr),this},o.prototype.resize=function(e,t,r){if(!p(e))throw new TypeError(&quot;Array or Matrix expected&quot;);var n=e.valueOf().map((function(e){return Array.isArray(e)&amp;&amp;1===e.length?e[0]:e}));if(2!==n.length)throw new Error(&quot;Only two dimensions matrix are supported&quot;);return n.forEach((function(e){if(!i(e)||!V(e)||e&lt;0)throw new TypeError(&quot;Invalid size, must contain positive integers (size: &quot;+Vr(n)+&quot;)&quot;)})),h(r?this.clone():this,n[0],n[1],t)},o.prototype.reshape=function(e,t){if(!f(e))throw new TypeError(&quot;Array expected&quot;);if(2!==e.length)throw new Error(&quot;Sparse matrices can only be reshaped in two dimensions&quot;);e.forEach((function(t){if(!i(t)||!V(t)||t&lt;=-2||0===t)throw new TypeError(&quot;Invalid size, must contain positive integers or -1 (size: &quot;+Vr(e)+&quot;)&quot;)}));var r=this._size[0]*this._size[1];if(r!==(e=un(e,r))[0]*e[1])throw new Error(&quot;Reshaping sparse matrix will result in the wrong number of elements&quot;);var n=t?this.clone():this;if(this._size[0]===e[0]&amp;&amp;this._size[1]===e[1])return n;for(var a=[],o=0;o&lt;n._ptr.length;o++)for(var u=0;u&lt;n._ptr[o+1]-n._ptr[o];u++)a.push(o);for(var c=n._values.slice(),l=n._index.slice(),p=0;p&lt;n._index.length;p++){var h=l[p],d=a[p],v=h*n._size[1]+d;a[p]=v%e[1],l[p]=Math.floor(v/e[1])}n._values.length=0,n._index.length=0,n._ptr.length=e[1]+1,n._size=e.slice();for(var y=0;y&lt;n._ptr.length;y++)n._ptr[y]=0;for(var g=0;g&lt;c.length;g++){var x=l[g],b=a[g],w=c[g];m(s(x,n._ptr[b],n._ptr[b+1],n._index),x,b,w,n._values,n._index,n._ptr)}return n},o.prototype.clone=function(){return new o({values:this._values?he(this._values):void 0,index:he(this._index),ptr:he(this._ptr),size:he(this._size),datatype:this._datatype})},o.prototype.size=function(){return this._size.slice(0)},o.prototype.map=function(e,n){if(!this._values)throw new Error(&quot;Cannot invoke map on a Pattern only matrix&quot;);var i=this,a=this._size[0],u=this._size[1],s=An(e);return function(e,n,i,a,u,s,f){var l=[],p=[],m=[],h=r,d=0;c(e._datatype)&amp;&amp;(h=t.find(r,[e._datatype,e._datatype])||r,d=t.convert(0,e._datatype));for(var v=function(e,t,r){e=s(e,t,r),h(e,d)||(l.push(e),p.push(t))},y=0;y&lt;=u;y++){m.push(l.length);var g=e._ptr[y],x=e._ptr[y+1];if(f)for(var b=g;b&lt;x;b++){var w=e._index[b];w&gt;=0&amp;&amp;w&lt;=i&amp;&amp;v(e._values[b],w-0,y-0)}else{for(var N={},D=g;D&lt;x;D++)N[e._index[D]]=e._values[D];for(var E=0;E&lt;=i;E++)v(E in N?N[E]:0,E-0,y-0)}}return m.push(l.length),new o({values:l,index:p,ptr:m,size:[i-0+1,u-0+1]})}(this,0,a-1,0,u-1,(function(t,r,n){return 1===s?e(t):2===s?e(t,[r,n]):e(t,[r,n],i)}),n)},o.prototype.forEach=function(e,t){if(!this._values)throw new Error(&quot;Cannot invoke forEach on a Pattern only matrix&quot;);for(var r=this._size[0],n=this._size[1],i=0;i&lt;n;i++){var a=this._ptr[i],o=this._ptr[i+1];if(t)for(var u=a;u&lt;o;u++){var s=this._index[u];e(this._values[u],[s,i],this)}else{for(var c={},f=a;f&lt;o;f++)c[this._index[f]]=this._values[f];for(var l=0;l&lt;r;l++)e(l in c?c[l]:0,[l,i],this)}}},o.prototype[Symbol.iterator]=Ur.mark((function e(){var t,r,n,i,a,o;return Ur.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._values){e.next=2;break}throw new Error(&quot;Cannot iterate a Pattern only matrix&quot;);case 2:t=this._size[1],r=0;case 4:if(!(r&lt;t)){e.next=18;break}n=this._ptr[r],i=this._ptr[r+1],a=n;case 8:if(!(a&lt;i)){e.next=15;break}return o=this._index[a],e.next=12,{value:this._values[a],index:[o,r]};case 12:a++,e.next=8;break;case 15:r++,e.next=4;break;case 18:case&quot;end&quot;:return e.stop()}}),e,this)})),o.prototype.toArray=function(){return d(this._values,this._index,this._ptr,this._size,!0)},o.prototype.valueOf=function(){return d(this._values,this._index,this._ptr,this._size,!1)},o.prototype.format=function(e){for(var t=this._size[0],r=this._size[1],n=this.density(),i=&quot;Sparse Matrix [&quot;+Vr(t,e)+&quot; x &quot;+Vr(r,e)+&quot;] density: &quot;+Vr(n,e)+&quot;\sn&quot;,a=0;a&lt;r;a++)for(var o=this._ptr[a],u=this._ptr[a+1],s=o;s&lt;u;s++)i+=&quot;\sn    (&quot;+Vr(this._index[s],e)+&quot;, &quot;+Vr(a,e)+&quot;) ==&gt; &quot;+(this._values?Vr(this._values[s],e):&quot;X&quot;);return i},o.prototype.toString=function(){return Vr(this.toArray())},o.prototype.toJSON=function(){return{mathjs:&quot;SparseMatrix&quot;,values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},o.prototype.diagonal=function(e){if(e){if(a(e)&amp;&amp;(e=e.toNumber()),!i(e)||!V(e))throw new TypeError(&quot;The parameter k must be an integer number&quot;)}else e=0;var t=e&gt;0?e:0,r=e&lt;0?-e:0,n=this._size[0],u=this._size[1],s=Math.min(n-r,u-t),c=[],f=[],l=[];l[0]=0;for(var p=t;p&lt;u&amp;&amp;c.length&lt;s;p++)for(var m=this._ptr[p],h=this._ptr[p+1],d=m;d&lt;h;d++){var v=this._index[d];if(v===p-t+r){c.push(this._values[d]),f[c.length-1]=v-r;break}}return l.push(c.length),new o({values:c,index:f,ptr:l,size:[s,1]})},o.fromJSON=function(e){return new o(e)},o.diagonal=function(e,n,u,s,p){if(!f(e))throw new TypeError(&quot;Array expected, size parameter&quot;);if(2!==e.length)throw new Error(&quot;Only two dimensions matrix are supported&quot;);if(e=e.map((function(e){if(a(e)&amp;&amp;(e=e.toNumber()),!i(e)||!V(e)||e&lt;1)throw new Error(&quot;Size values must be positive integers&quot;);return e})),u){if(a(u)&amp;&amp;(u=u.toNumber()),!i(u)||!V(u))throw new TypeError(&quot;The parameter k must be an integer number&quot;)}else u=0;var m=r,h=0;c(p)&amp;&amp;(m=t.find(r,[p,p])||r,h=t.convert(0,p));var d,v=u&gt;0?u:0,y=u&lt;0?-u:0,g=e[0],x=e[1],b=Math.min(g-y,x-v);if(f(n)){if(n.length!==b)throw new Error(&quot;Invalid value array length&quot;);d=function(e){return n[e]}}else if(l(n)){var w=n.size();if(1!==w.length||w[0]!==b)throw new Error(&quot;Invalid matrix length&quot;);d=function(e){return n.get([e])}}else d=function(){return n};for(var N=[],D=[],E=[],A=0;A&lt;x;A++){E.push(N.length);var S=A-v;if(S&gt;=0&amp;&amp;S&lt;b){var C=d(S);m(C,h)||(D.push(S+y),N.push(C))}}return E.push(N.length),new o({values:N,index:D,ptr:E,size:[g,x]})},o.prototype.swapRows=function(e,t){if(!(i(e)&amp;&amp;V(e)&amp;&amp;i(t)&amp;&amp;V(t)))throw new Error(&quot;Row index must be positive integers&quot;);if(2!==this._size.length)throw new Error(&quot;Only two dimensional matrix is supported&quot;);return rn(e,this._size[0]),rn(t,this._size[0]),o._swapRows(e,t,this._size[1],this._values,this._index,this._ptr),this},o._forEachRow=function(e,t,r,n,i){for(var a=n[e],o=n[e+1],u=a;u&lt;o;u++)i(r[u],t[u])},o._swapRows=function(e,t,r,n,i,a){for(var o=0;o&lt;r;o++){var u=a[o],c=a[o+1],f=s(e,u,c,i),l=s(t,u,c,i);if(f&lt;c&amp;&amp;l&lt;c&amp;&amp;i[f]===e&amp;&amp;i[l]===t){if(n){var p=n[f];n[f]=n[l],n[l]=p}}else if(f&lt;c&amp;&amp;i[f]===e&amp;&amp;(l&gt;=c||i[l]!==t)){var m=n?n[f]:void 0;i.splice(l,0,t),n&amp;&amp;n.splice(l,0,m),i.splice(l&lt;=f?f+1:f,1),n&amp;&amp;n.splice(l&lt;=f?f+1:f,1)}else if(l&lt;c&amp;&amp;i[l]===t&amp;&amp;(f&gt;=c||i[f]!==e)){var h=n?n[l]:void 0;i.splice(f,0,e),n&amp;&amp;n.splice(f,0,h),i.splice(f&lt;=l?l+1:l,1),n&amp;&amp;n.splice(f&lt;=l?l+1:l,1)}}},o}),{isClass:!0})),ci=Ee(&quot;number&quot;,[&quot;typed&quot;],(function(e){var t=e.typed,r=t(&quot;number&quot;,{&quot;&quot;:function(){return 0},number:function(e){return e},string:function(e){if(&quot;NaN&quot;===e)return NaN;var t,r,n=(r=(t=e).match(/(0[box])([0-9a-fA-F]*)\s.([0-9a-fA-F]*)/))?{input:t,radix:{&quot;0b&quot;:2,&quot;0o&quot;:8,&quot;0x&quot;:16}[r[1]],integerPart:r[2],fractionalPart:r[3]}:null;if(n)return function(e){for(var t=parseInt(e.integerPart,e.radix),r=0,n=0;n&lt;e.fractionalPart.length;n++)r+=parseInt(e.fractionalPart[n],e.radix)/Math.pow(e.radix,n+1);var i=t+r;if(isNaN(i))throw new SyntaxError('String &quot;'+e.input+'&quot; is no valid number');return i}(n);var i=0,a=e.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);a&amp;&amp;(i=Number(a[2]),e=a[1]);var o=Number(e);if(isNaN(o))throw new SyntaxError('String &quot;'+e+'&quot; is no valid number');if(a){if(o&gt;Math.pow(2,i)-1)throw new SyntaxError('String &quot;'.concat(e,'&quot; is out of range'));o&gt;=Math.pow(2,i-1)&amp;&amp;(o-=Math.pow(2,i))}return o},BigNumber:function(e){return e.toNumber()},Fraction:function(e){return e.valueOf()},Unit:t.referToSelf((function(e){return function(t){var r=t.clone();return r.value=e(t.value),r}})),null:function(e){return 0},&quot;Unit, string | Unit&quot;:function(e,t){return e.toNumber(t)},&quot;Array | Matrix&quot;:t.referToSelf((function(e){return function(t){return _n(t,e)}}))});return r.fromJSON=function(e){return parseFloat(e.value)},r})),fi=&quot;string&quot;,li=Ee(fi,[&quot;typed&quot;],(function(e){var t=e.typed;return t(fi,{&quot;&quot;:function(){return&quot;&quot;},number:ee,null:function(e){return&quot;null&quot;},boolean:function(e){return e+&quot;&quot;},string:function(e){return e},&quot;Array | Matrix&quot;:t.referToSelf((function(e){return function(t){return _n(t,e)}})),any:function(e){return String(e)}})})),pi=&quot;boolean&quot;,mi=Ee(pi,[&quot;typed&quot;],(function(e){var t=e.typed;return t(pi,{&quot;&quot;:function(){return!1},boolean:function(e){return e},number:function(e){return!!e},null:function(e){return!1},BigNumber:function(e){return!e.isZero()},string:function(e){var t=e.toLowerCase();if(&quot;true&quot;===t)return!0;if(&quot;false&quot;===t)return!1;var r=Number(e);if(&quot;&quot;!==e&amp;&amp;!isNaN(r))return!!r;throw new Error('Cannot convert &quot;'+e+'&quot; to a boolean')},&quot;Array | Matrix&quot;:t.referToSelf((function(e){return function(t){return _n(t,e)}}))})})),hi=Ee(&quot;bignumber&quot;,[&quot;typed&quot;,&quot;BigNumber&quot;],(function(e){var t=e.typed,r=e.BigNumber;return t(&quot;bignumber&quot;,{&quot;&quot;:function(){return new r(0)},number:function(e){return new r(e+&quot;&quot;)},string:function(e){var t=e.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(t){var n=t[2],i=r(t[1]),a=new r(2).pow(Number(n));if(i.gt(a.sub(1)))throw new SyntaxError('String &quot;'.concat(e,'&quot; is out of range'));var o=new r(2).pow(Number(n)-1);return i.gte(o)?i.sub(a):i}return new r(e)},BigNumber:function(e){return e},Unit:t.referToSelf((function(e){return function(t){var r=t.clone();return r.value=e(t.value),r}})),Fraction:function(e){return new r(e.n).div(e.d).times(e.s)},null:function(e){return new r(0)},&quot;Array | Matrix&quot;:t.referToSelf((function(e){return function(t){return _n(t,e)}}))})})),di=Ee(&quot;complex&quot;,[&quot;typed&quot;,&quot;Complex&quot;],(function(e){var t=e.typed,r=e.Complex;return t(&quot;complex&quot;,{&quot;&quot;:function(){return r.ZERO},number:function(e){return new r(e,0)},&quot;number, number&quot;:function(e,t){return new r(e,t)},&quot;BigNumber, BigNumber&quot;:function(e,t){return new r(e.toNumber(),t.toNumber())},Fraction:function(e){return new r(e.valueOf(),0)},Complex:function(e){return e.clone()},string:function(e){return r(e)},null:function(e){return r(0)},Object:function(e){if(&quot;re&quot;in e&amp;&amp;&quot;im&quot;in e)return new r(e.re,e.im);if(&quot;r&quot;in e&amp;&amp;&quot;phi&quot;in e||&quot;abs&quot;in e&amp;&amp;&quot;arg&quot;in e)return new r(e);throw new Error(&quot;Expected object with properties (re and im) or (r and phi) or (abs and arg)&quot;)},&quot;Array | Matrix&quot;:t.referToSelf((function(e){return function(t){return _n(t,e)}}))})})),vi=Ee(&quot;fraction&quot;,[&quot;typed&quot;,&quot;Fraction&quot;],(function(e){var t=e.typed,r=e.Fraction;return t(&quot;fraction&quot;,{number:function(e){if(!isFinite(e)||isNaN(e))throw new Error(e+&quot; cannot be represented as a fraction&quot;);return new r(e)},string:function(e){return new r(e)},&quot;number, number&quot;:function(e,t){return new r(e,t)},null:function(e){return new r(0)},BigNumber:function(e){return new r(e.toString())},Fraction:function(e){return e},Unit:t.referToSelf((function(e){return function(t){var r=t.clone();return r.value=e(t.value),r}})),Object:function(e){return new r(e)},&quot;Array | Matrix&quot;:t.referToSelf((function(e){return function(t){return _n(t,e)}}))})})),yi=&quot;matrix&quot;,gi=Ee(yi,[&quot;typed&quot;,&quot;Matrix&quot;,&quot;DenseMatrix&quot;,&quot;SparseMatrix&quot;],(function(e){var t=e.typed,r=(e.Matrix,e.DenseMatrix),n=e.SparseMatrix;return t(yi,{&quot;&quot;:function(){return i([])},string:function(e){return i([],e)},&quot;string, string&quot;:function(e,t){return i([],e,t)},Array:function(e){return i(e)},Matrix:function(e){return i(e,e.storage())},&quot;Array | Matrix, string&quot;:i,&quot;Array | Matrix, string, string&quot;:i});function i(e,t,i){if(&quot;dense&quot;===t||&quot;default&quot;===t||void 0===t)return new r(e,i);if(&quot;sparse&quot;===t)return new n(e,i);throw new TypeError(&quot;Unknown matrix type &quot;+JSON.stringify(t)+&quot;.&quot;)}})),xi=&quot;matrixFromFunction&quot;,bi=Ee(xi,[&quot;typed&quot;,&quot;matrix&quot;,&quot;isZero&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.isZero;return t(xi,{&quot;Array | Matrix, function, string, string&quot;:function(e,t,r,n){return i(e,t,r,n)},&quot;Array | Matrix, function, string&quot;:function(e,t,r){return i(e,t,r)},&quot;Matrix, function&quot;:function(e,t){return i(e,t,&quot;dense&quot;)},&quot;Array, function&quot;:function(e,t){return i(e,t,&quot;dense&quot;).toArray()},&quot;Array | Matrix, string, function&quot;:function(e,t,r){return i(e,r,t)},&quot;Array | Matrix, string, string, function&quot;:function(e,t,r,n){return i(e,n,t,r)}});function i(e,t,i,a){var o;return(o=void 0!==a?r(i,a):r(i)).resize(e),o.forEach((function(e,r){var i=t(r);n(i)||o.set(r,i)})),o}}));function wi(e,t){(null==t||t&gt;e.length)&amp;&amp;(t=e.length);for(var r=0,n=new Array(t);r&lt;t;r++)n[r]=e[r];return n}var Ni=&quot;matrixFromRows&quot;,Di=Ee(Ni,[&quot;typed&quot;,&quot;matrix&quot;,&quot;flatten&quot;,&quot;size&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.flatten,i=e.size;return t(Ni,{&quot;...Array&quot;:function(e){return a(e)},&quot;...Matrix&quot;:function(e){return r(a(e.map((function(e){return e.toArray()}))))}});function a(e){if(0===e.length)throw new TypeError(&quot;At least one row is needed to construct a matrix.&quot;);var t,r=o(e[0]),i=[],a=function(e,t){var r=&quot;undefined&quot;!=typeof Symbol&amp;&amp;e[Symbol.iterator]||e[&quot;@@iterator&quot;];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if(&quot;string&quot;==typeof e)return wi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return&quot;Object&quot;===r&amp;&amp;e.constructor&amp;&amp;(r=e.constructor.name),&quot;Map&quot;===r||&quot;Set&quot;===r?Array.from(e):&quot;Arguments&quot;===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wi(e,t):void 0}}(e))||t&amp;&amp;e&amp;&amp;&quot;number&quot;==typeof e.length){r&amp;&amp;(e=r);var n=0,i=function(){};return{s:i,n:function(){return n&gt;=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError(&quot;Invalid attempt to iterate non-iterable instance.\snIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.&quot;)}var a,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw a}}}}(e);try{for(a.s();!(t=a.n()).done;){var u=t.value,s=o(u);if(s!==r)throw new TypeError(&quot;The vectors had different length: &quot;+(0|r)+&quot; ≠ &quot;+(0|s));i.push(n(u))}}catch(e){a.e(e)}finally{a.f()}return i}function o(e){var t=i(e);if(1===t.length)return t[0];if(2===t.length){if(1===t[0])return t[1];if(1===t[1])return t[0];throw new TypeError(&quot;At least one of the arguments is not a vector.&quot;)}throw new TypeError(&quot;Only one- or two-dimensional vectors are supported.&quot;)}}));function Ei(e,t){(null==t||t&gt;e.length)&amp;&amp;(t=e.length);for(var r=0,n=new Array(t);r&lt;t;r++)n[r]=e[r];return n}var Ai=&quot;matrixFromColumns&quot;,Si=Ee(Ai,[&quot;typed&quot;,&quot;matrix&quot;,&quot;flatten&quot;,&quot;size&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.flatten,i=e.size;return t(Ai,{&quot;...Array&quot;:function(e){return a(e)},&quot;...Matrix&quot;:function(e){return r(a(e.map((function(e){return e.toArray()}))))}});function a(e){if(0===e.length)throw new TypeError(&quot;At least one column is needed to construct a matrix.&quot;);for(var t=o(e[0]),r=[],i=0;i&lt;t;i++)r[i]=[];var a,u=function(e,t){var r=&quot;undefined&quot;!=typeof Symbol&amp;&amp;e[Symbol.iterator]||e[&quot;@@iterator&quot;];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if(&quot;string&quot;==typeof e)return Ei(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return&quot;Object&quot;===r&amp;&amp;e.constructor&amp;&amp;(r=e.constructor.name),&quot;Map&quot;===r||&quot;Set&quot;===r?Array.from(e):&quot;Arguments&quot;===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ei(e,t):void 0}}(e))||t&amp;&amp;e&amp;&amp;&quot;number&quot;==typeof e.length){r&amp;&amp;(e=r);var n=0,i=function(){};return{s:i,n:function(){return n&gt;=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError(&quot;Invalid attempt to iterate non-iterable instance.\snIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.&quot;)}var a,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw a}}}}(e);try{for(u.s();!(a=u.n()).done;){var s=a.value,c=o(s);if(c!==t)throw new TypeError(&quot;The vectors had different length: &quot;+(0|t)+&quot; ≠ &quot;+(0|c));for(var f=n(s),l=0;l&lt;t;l++)r[l].push(f[l])}}catch(e){u.e(e)}finally{u.f()}return r}function o(e){var t=i(e);if(1===t.length)return t[0];if(2===t.length){if(1===t[0])return t[1];if(1===t[1])return t[0];throw new TypeError(&quot;At least one of the arguments is not a vector.&quot;)}throw new TypeError(&quot;Only one- or two-dimensional vectors are supported.&quot;)}})),Ci=&quot;splitUnit&quot;,Mi=Ee(Ci,[&quot;typed&quot;],(function(e){return(0,e.typed)(Ci,{&quot;Unit, Array&quot;:function(e,t){return e.splitUnit(t)}})})),Fi=&quot;number&quot;,Oi=&quot;number, number&quot;;function Ti(e){return Math.abs(e)}function Bi(e,t){return e+t}function _i(e,t){return e*t}function ki(e){return-e}function Ii(e){return e}function Ri(e){return X(e)}function zi(e){return e*e*e}function qi(e){return Math.exp(e)}function ji(e){return Q(e)}function Pi(e,t){if(!V(e)||!V(t))throw new Error(&quot;Parameters in function gcd must be integer numbers&quot;);for(var r;0!==t;)r=e%t,e=t,t=r;return e&lt;0?-e:e}function Li(e,t){if(!V(e)||!V(t))throw new Error(&quot;Parameters in function lcm must be integer numbers&quot;);if(0===e||0===t)return 0;for(var r,n=e*t;0!==t;)t=e%(r=t),e=r;return Math.abs(n/e)}function Ui(e){return Y(e)}function $i(e){return W(e)}function Hi(e,t){if(t&gt;0)return e-t*Math.floor(e/t);if(0===t)return e;throw new Error(&quot;Cannot calculate mod for a negative divisor&quot;)}function Gi(e){var t=arguments.length&gt;1&amp;&amp;void 0!==arguments[1]?arguments[1]:2,r=t&lt;0;if(r&amp;&amp;(t=-t),0===t)throw new Error(&quot;Root must be non-zero&quot;);if(e&lt;0&amp;&amp;Math.abs(t)%2!=1)throw new Error(&quot;Root must be odd when a is negative.&quot;);if(0===e)return r?1/0:0;if(!isFinite(e))return r?0:e;var n=Math.pow(Math.abs(e),1/t);return n=e&lt;0?-n:n,r?1/n:n}function Vi(e){return Z(e)}function Zi(e){return e*e}function Wi(e,t){var r,n,i,a=0,o=1,u=1,s=0;if(!V(e)||!V(t))throw new Error(&quot;Parameters in function xgcd must be integer numbers&quot;);for(;t;)i=e-(n=Math.floor(e/t))*t,r=a,a=o-n*a,o=r,r=u,u=s-n*u,s=r,e=t,t=i;return e&lt;0?[-e,-o,-s]:[e,e?o:0,s]}function Yi(e,t){return e*e&lt;1&amp;&amp;t===1/0||e*e&gt;1&amp;&amp;t===-1/0?0:Math.pow(e,t)}function Ji(e){var t=arguments.length&gt;1&amp;&amp;void 0!==arguments[1]?arguments[1]:0;if(!V(t)||t&lt;0||t&gt;15)throw new Error(&quot;Number of decimals in function round must be an integer from 0 to 15 inclusive&quot;);return parseFloat(re(e,t))}Ti.signature=Fi,Bi.signature=Oi,_i.signature=Oi,ki.signature=Fi,Ii.signature=Fi,Ri.signature=Fi,zi.signature=Fi,qi.signature=Fi,ji.signature=Fi,Pi.signature=Oi,Li.signature=Oi,Ui.signature=Fi,$i.signature=Fi,Hi.signature=Oi,Vi.signature=Fi,Zi.signature=Fi,Wi.signature=Oi,Yi.signature=Oi;var Xi=&quot;unaryMinus&quot;,Qi=Ee(Xi,[&quot;typed&quot;],(function(e){var t=e.typed;return t(Xi,{number:ki,&quot;Complex | BigNumber | Fraction&quot;:function(e){return e.neg()},Unit:t.referToSelf((function(e){return function(r){var n=r.clone();return n.value=t.find(e,n.valueType())(r.value),n}})),&quot;Array | Matrix&quot;:t.referToSelf((function(e){return function(t){return _n(t,e,!0)}}))})})),Ki=&quot;unaryPlus&quot;,ea=Ee(Ki,[&quot;typed&quot;,&quot;config&quot;,&quot;BigNumber&quot;],(function(e){var t=e.typed,r=e.config,n=e.BigNumber;return t(Ki,{number:Ii,Complex:function(e){return e},BigNumber:function(e){return e},Fraction:function(e){return e},Unit:function(e){return e.clone()},&quot;Array | Matrix&quot;:t.referToSelf((function(e){return function(t){return _n(t,e,!0)}})),&quot;boolean | string&quot;:function(e){return&quot;BigNumber&quot;===r.number?new n(+e):+e}})})),ta=Ee(&quot;abs&quot;,[&quot;typed&quot;],(function(e){var t=e.typed;return t(&quot;abs&quot;,{number:Ti,&quot;Complex | BigNumber | Fraction | Unit&quot;:function(e){return e.abs()},&quot;Array | Matrix&quot;:t.referToSelf((function(e){return function(t){return _n(t,e,!0)}}))})})),ra=&quot;apply&quot;,na=Ee(ra,[&quot;typed&quot;,&quot;isInteger&quot;],(function(e){var t=e.typed,r=e.isInteger;return t(ra,{&quot;Array | Matrix, number | BigNumber, function&quot;:function(e,t,n){if(!r(t))throw new TypeError(&quot;Integer number expected for dimension&quot;);var i=Array.isArray(e)?Kr(e):e.size();if(t&lt;0||t&gt;=i.length)throw new Qr(t,i.length);return l(e)?e.create(ia(e.valueOf(),t,n)):ia(e,t,n)}})}));function ia(e,t,r){var n,i,a;if(t&lt;=0){if(Array.isArray(e[0])){for(a=function(e){var t,r,n=e.length,i=e[0].length,a=[];for(r=0;r&lt;i;r++){var o=[];for(t=0;t&lt;n;t++)o.push(e[t][r]);a.push(o)}return a}(e),i=[],n=0;n&lt;a.length;n++)i[n]=ia(a[n],t-1,r);return i}return r(e)}for(i=[],n=0;n&lt;e.length;n++)i[n]=ia(e[n],t-1,r);return i}var aa=&quot;addScalar&quot;,oa=Ee(aa,[&quot;typed&quot;],(function(e){var t=e.typed;return t(aa,{&quot;number, number&quot;:Bi,&quot;Complex, Complex&quot;:function(e,t){return e.add(t)},&quot;BigNumber, BigNumber&quot;:function(e,t){return e.plus(t)},&quot;Fraction, Fraction&quot;:function(e,t){return e.add(t)},&quot;Unit, Unit&quot;:t.referToSelf((function(e){return function(r,n){if(null===r.value||void 0===r.value)throw new Error(&quot;Parameter x contains a unit with undefined value&quot;);if(null===n.value||void 0===n.value)throw new Error(&quot;Parameter y contains a unit with undefined value&quot;);if(!r.equalBase(n))throw new Error(&quot;Units do not match&quot;);var i=r.clone();return i.value=t.find(e,[i.valueType(),n.valueType()])(i.value,n.value),i.fixPrefix=!1,i}}))})})),ua=&quot;cbrt&quot;,sa=Ee(ua,[&quot;config&quot;,&quot;typed&quot;,&quot;isNegative&quot;,&quot;unaryMinus&quot;,&quot;matrix&quot;,&quot;Complex&quot;,&quot;BigNumber&quot;,&quot;Fraction&quot;],(function(e){var t=e.config,r=e.typed,n=e.isNegative,i=e.unaryMinus,s=e.matrix,c=e.Complex,f=e.BigNumber,l=e.Fraction;return r(ua,{number:Ri,Complex:p,&quot;Complex, boolean&quot;:p,BigNumber:function(e){return e.cbrt()},Unit:function(e){if(e.value&amp;&amp;o(e.value)){var t=e.clone();return t.value=1,(t=t.pow(1/3)).value=p(e.value),t}var r,s=n(e.value);s&amp;&amp;(e.value=i(e.value)),r=a(e.value)?new f(1).div(3):u(e.value)?new l(1,3):1/3;var c=e.pow(r);return s&amp;&amp;(c.value=i(c.value)),c}});function p(e,r){var n=e.arg()/3,i=e.abs(),a=new c(Ri(i),0).mul(new c(0,n).exp());if(r){var o=[a,new c(Ri(i),0).mul(new c(0,n+2*Math.PI/3).exp()),new c(Ri(i),0).mul(new c(0,n-2*Math.PI/3).exp())];return&quot;Array&quot;===t.matrix?o:s(o)}return a}}));function ca(e,t){(null==t||t&gt;e.length)&amp;&amp;(t=e.length);for(var r=0,n=new Array(t);r&lt;t;r++)n[r]=e[r];return n}function fa(e,t){if(e){if(&quot;string&quot;==typeof e)return ca(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return&quot;Object&quot;===r&amp;&amp;e.constructor&amp;&amp;(r=e.constructor.name),&quot;Map&quot;===r||&quot;Set&quot;===r?Array.from(e):&quot;Arguments&quot;===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ca(e,t):void 0}}function la(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:&quot;undefined&quot;!=typeof Symbol&amp;&amp;e[Symbol.iterator]||e[&quot;@@iterator&quot;];if(null!=r){var n,i,a,o,u=[],s=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&amp;&amp;(u.push(n.value),u.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&amp;&amp;null!=r.return&amp;&amp;(o=r.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||fa(e,t)||function(){throw new TypeError(&quot;Invalid attempt to destructure non-iterable instance.\snIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.&quot;)}()}var pa=Ee(&quot;matAlgo11xS0s&quot;,[&quot;typed&quot;,&quot;equalScalar&quot;],(function(e){var t=e.typed,r=e.equalScalar;return function(e,n,i,a){var o=e._values,u=e._index,s=e._ptr,c=e._size,f=e._datatype;if(!o)throw new Error(&quot;Cannot perform operation on Pattern Sparse Matrix and Scalar value&quot;);var l,p=c[0],m=c[1],h=r,d=0,v=i;&quot;string&quot;==typeof f&amp;&amp;(l=f,h=t.find(r,[l,l]),d=t.convert(0,l),n=t.convert(n,l),v=t.find(i,[l,l]));for(var y=[],g=[],x=[],b=0;b&lt;m;b++){x[b]=g.length;for(var w=s[b],N=s[b+1],D=w;D&lt;N;D++){var E=u[D],A=a?v(n,o[D]):v(o[D],n);h(A,d)||(g.push(E),y.push(A))}}return x[m]=g.length,e.createSparseMatrix({values:y,index:g,ptr:x,size:[p,m],datatype:l})}})),ma=Ee(&quot;matAlgo12xSfs&quot;,[&quot;typed&quot;,&quot;DenseMatrix&quot;],(function(e){var t=e.typed,r=e.DenseMatrix;return function(e,n,i,a){var o=e._values,u=e._index,s=e._ptr,c=e._size,f=e._datatype;if(!o)throw new Error(&quot;Cannot perform operation on Pattern Sparse Matrix and Scalar value&quot;);var l,p=c[0],m=c[1],h=i;&quot;string&quot;==typeof f&amp;&amp;(l=f,n=t.convert(n,l),h=t.find(i,[l,l]));for(var d=[],v=[],y=[],g=0;g&lt;m;g++){for(var x=g+1,b=s[g],w=s[g+1],N=b;N&lt;w;N++){var D=u[N];v[D]=o[N],y[D]=x}for(var E=0;E&lt;p;E++)0===g&amp;&amp;(d[E]=[]),y[E]===x?d[E][g]=a?h(n,v[E]):h(v[E],n):d[E][g]=a?h(n,0):h(0,n)}return new r({data:d,size:[p,m],datatype:l})}})),ha=Ee(&quot;matAlgo14xDs&quot;,[&quot;typed&quot;],(function(e){var t=e.typed;return function(e,n,i,a){var o,u=e._data,s=e._size,c=e._datatype,f=i;&quot;string&quot;==typeof c&amp;&amp;(o=c,n=t.convert(n,o),f=t.find(i,[o,o]));var l=s.length&gt;0?r(f,0,s,s[0],u,n,a):[];return e.createDenseMatrix({data:l,size:he(s),datatype:o})};function r(e,t,n,i,a,o,u){var s=[];if(t===n.length-1)for(var c=0;c&lt;i;c++)s[c]=u?e(o,a[c]):e(a[c],o);else for(var f=0;f&lt;i;f++)s[f]=r(e,t+1,n,n[t+1],a[f],o,u);return s}})),da=&quot;ceil&quot;,va=[&quot;typed&quot;,&quot;config&quot;,&quot;round&quot;,&quot;matrix&quot;,&quot;equalScalar&quot;,&quot;zeros&quot;,&quot;DenseMatrix&quot;],ya=Ee(da,[&quot;typed&quot;,&quot;config&quot;,&quot;round&quot;],(function(e){var t=e.typed,r=e.config,n=e.round;return t(da,{number:function(e){return ue(e,n(e),r.epsilon)?n(e):Math.ceil(e)},&quot;number, number&quot;:function(e,t){if(ue(e,n(e,t),r.epsilon))return n(e,t);var i=la(&quot;&quot;.concat(e,&quot;e&quot;).split(&quot;e&quot;),2),a=i[0],o=i[1],u=Math.ceil(Number(&quot;&quot;.concat(a,&quot;e&quot;).concat(Number(o)+t))),s=la(&quot;&quot;.concat(u,&quot;e&quot;).split(&quot;e&quot;),2);return a=s[0],o=s[1],Number(&quot;&quot;.concat(a,&quot;e&quot;).concat(Number(o)-t))}})})),ga=Ee(da,va,(function(e){var t=e.typed,r=e.config,n=e.round,i=e.matrix,a=e.equalScalar,o=e.zeros,u=e.DenseMatrix,s=pa({typed:t,equalScalar:a}),c=ma({typed:t,DenseMatrix:u}),f=ha({typed:t}),l=ya({typed:t,config:r,round:n});return t(&quot;ceil&quot;,{number:l.signatures.number,&quot;number,number&quot;:l.signatures[&quot;number,number&quot;],Complex:function(e){return e.ceil()},&quot;Complex, number&quot;:function(e,t){return e.ceil(t)},&quot;Complex, BigNumber&quot;:function(e,t){return e.ceil(t.toNumber())},BigNumber:function(e){return ii(e,n(e),r.epsilon)?n(e):e.ceil()},&quot;BigNumber, BigNumber&quot;:function(e,t){return ii(e,n(e,t),r.epsilon)?n(e,t):e.toDecimalPlaces(t.toNumber(),kr.ROUND_CEIL)},Fraction:function(e){return e.ceil()},&quot;Fraction, number&quot;:function(e,t){return e.ceil(t)},&quot;Fraction, BigNumber&quot;:function(e,t){return e.ceil(t.toNumber())},&quot;Array | Matrix&quot;:t.referToSelf((function(e){return function(t){return _n(t,e,!0)}})),&quot;Array, number | BigNumber&quot;:t.referToSelf((function(e){return function(t,r){return _n(t,(function(t){return e(t,r)}),!0)}})),&quot;SparseMatrix, number | BigNumber&quot;:t.referToSelf((function(e){return function(t,r){return s(t,r,e,!1)}})),&quot;DenseMatrix, number | BigNumber&quot;:t.referToSelf((function(e){return function(t,r){return f(t,r,e,!1)}})),&quot;number | Complex | Fraction | BigNumber, Array&quot;:t.referToSelf((function(e){return function(t,r){return f(i(r),t,e,!0).valueOf()}})),&quot;number | Complex | Fraction | BigNumber, Matrix&quot;:t.referToSelf((function(e){return function(t,r){return a(t,0)?o(r.size(),r.storage()):&quot;dense&quot;===r.storage()?f(r,t,e,!0):c(r,t,e,!0)}}))})})),xa=&quot;cube&quot;,ba=Ee(xa,[&quot;typed&quot;],(function(e){return(0,e.typed)(xa,{number:zi,Complex:function(e){return e.mul(e).mul(e)},BigNumber:function(e){return e.times(e).times(e)},Fraction:function(e){return e.pow(3)},Unit:function(e){return e.pow(3)}})})),wa=Ee(&quot;exp&quot;,[&quot;typed&quot;],(function(e){return(0,e.typed)(&quot;exp&quot;,{number:qi,Complex:function(e){return e.exp()},BigNumber:function(e){return e.exp()}})})),Na=&quot;expm1&quot;,Da=Ee(Na,[&quot;typed&quot;,&quot;Complex&quot;],(function(e){var t=e.typed,r=e.Complex;return t(Na,{number:ji,Complex:function(e){var t=Math.exp(e.re);return new r(t*Math.cos(e.im)-1,t*Math.sin(e.im))},BigNumber:function(e){return e.exp().minus(1)}})})),Ea=&quot;fix&quot;,Aa=[&quot;typed&quot;,&quot;Complex&quot;,&quot;matrix&quot;,&quot;ceil&quot;,&quot;floor&quot;,&quot;equalScalar&quot;,&quot;zeros&quot;,&quot;DenseMatrix&quot;],Sa=Ee(Ea,[&quot;typed&quot;,&quot;ceil&quot;,&quot;floor&quot;],(function(e){var t=e.typed,r=e.ceil,n=e.floor;return t(Ea,{number:function(e){return e&gt;0?n(e):r(e)},&quot;number, number&quot;:function(e,t){return e&gt;0?n(e,t):r(e,t)}})})),Ca=Ee(Ea,Aa,(function(e){var t=e.typed,r=e.Complex,n=e.matrix,i=e.ceil,a=e.floor,o=e.equalScalar,u=e.zeros,s=e.DenseMatrix,c=ma({typed:t,DenseMatrix:s}),f=ha({typed:t}),l=Sa({typed:t,ceil:i,floor:a});return t(&quot;fix&quot;,{number:l.signatures.number,&quot;number, number | BigNumber&quot;:l.signatures[&quot;number,number&quot;],Complex:function(e){return new r(e.re&gt;0?Math.floor(e.re):Math.ceil(e.re),e.im&gt;0?Math.floor(e.im):Math.ceil(e.im))},&quot;Complex, number&quot;:function(e,t){return new r(e.re&gt;0?a(e.re,t):i(e.re,t),e.im&gt;0?a(e.im,t):i(e.im,t))},&quot;Complex, BigNumber&quot;:function(e,t){var n=t.toNumber();return new r(e.re&gt;0?a(e.re,n):i(e.re,n),e.im&gt;0?a(e.im,n):i(e.im,n))},BigNumber:function(e){return e.isNegative()?i(e):a(e)},&quot;BigNumber, number | BigNumber&quot;:function(e,t){return e.isNegative()?i(e,t):a(e,t)},Fraction:function(e){return e.s&lt;0?e.ceil():e.floor()},&quot;Fraction, number | BigNumber&quot;:function(e,t){return e.s&lt;0?i(e,t):a(e,t)},&quot;Array | Matrix&quot;:t.referToSelf((function(e){return function(t){return _n(t,e,!0)}})),&quot;Array | Matrix, number | BigNumber&quot;:t.referToSelf((function(e){return function(t,r){return _n(t,(function(t){return e(t,r)}),!0)}})),&quot;number | Complex | Fraction | BigNumber, Array&quot;:t.referToSelf((function(e){return function(t,r){return f(n(r),t,e,!0).valueOf()}})),&quot;number | Complex | Fraction | BigNumber, Matrix&quot;:t.referToSelf((function(e){return function(t,r){return o(t,0)?u(r.size(),r.storage()):&quot;dense&quot;===r.storage()?f(r,t,e,!0):c(r,t,e,!0)}}))})})),Ma=&quot;floor&quot;,Fa=[&quot;typed&quot;,&quot;config&quot;,&quot;round&quot;,&quot;matrix&quot;,&quot;equalScalar&quot;,&quot;zeros&quot;,&quot;DenseMatrix&quot;],Oa=Ee(Ma,[&quot;typed&quot;,&quot;config&quot;,&quot;round&quot;],(function(e){var t=e.typed,r=e.config,n=e.round;return t(Ma,{number:function(e){return ue(e,n(e),r.epsilon)?n(e):Math.floor(e)},&quot;number, number&quot;:function(e,t){if(ue(e,n(e,t),r.epsilon))return n(e,t);var i=la(&quot;&quot;.concat(e,&quot;e&quot;).split(&quot;e&quot;),2),a=i[0],o=i[1],u=Math.floor(Number(&quot;&quot;.concat(a,&quot;e&quot;).concat(Number(o)+t))),s=la(&quot;&quot;.concat(u,&quot;e&quot;).split(&quot;e&quot;),2);return a=s[0],o=s[1],Number(&quot;&quot;.concat(a,&quot;e&quot;).concat(Number(o)-t))}})})),Ta=Ee(Ma,Fa,(function(e){var t=e.typed,r=e.config,n=e.round,i=e.matrix,a=e.equalScalar,o=e.zeros,u=e.DenseMatrix,s=pa({typed:t,equalScalar:a}),c=ma({typed:t,DenseMatrix:u}),f=ha({typed:t}),l=Oa({typed:t,config:r,round:n});return t(&quot;floor&quot;,{number:l.signatures.number,&quot;number,number&quot;:l.signatures[&quot;number,number&quot;],Complex:function(e){return e.floor()},&quot;Complex, number&quot;:function(e,t){return e.floor(t)},&quot;Complex, BigNumber&quot;:function(e,t){return e.floor(t.toNumber())},BigNumber:function(e){return ii(e,n(e),r.epsilon)?n(e):e.floor()},&quot;BigNumber, BigNumber&quot;:function(e,t){return ii(e,n(e,t),r.epsilon)?n(e,t):e.toDecimalPlaces(t.toNumber(),kr.ROUND_FLOOR)},Fraction:function(e){return e.floor()},&quot;Fraction, number&quot;:function(e,t){return e.floor(t)},&quot;Fraction, BigNumber&quot;:function(e,t){return e.floor(t.toNumber())},&quot;Array | Matrix&quot;:t.referToSelf((function(e){return function(t){return _n(t,e,!0)}})),&quot;Array, number | BigNumber&quot;:t.referToSelf((function(e){return function(t,r){return _n(t,(function(t){return e(t,r)}),!0)}})),&quot;SparseMatrix, number | BigNumber&quot;:t.referToSelf((function(e){return function(t,r){return s(t,r,e,!1)}})),&quot;DenseMatrix, number | BigNumber&quot;:t.referToSelf((function(e){return function(t,r){return f(t,r,e,!1)}})),&quot;number | Complex | Fraction | BigNumber, Array&quot;:t.referToSelf((function(e){return function(t,r){return f(i(r),t,e,!0).valueOf()}})),&quot;number | Complex | Fraction | BigNumber, Matrix&quot;:t.referToSelf((function(e){return function(t,r){return a(t,0)?o(r.size(),r.storage()):&quot;dense&quot;===r.storage()?f(r,t,e,!0):c(r,t,e,!0)}}))})}));function Ba(e,t,r){return(t=Me(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _a(e){return function(e){if(Array.isArray(e))return ca(e)}(e)||function(e){if(&quot;undefined&quot;!=typeof Symbol&amp;&amp;null!=e[Symbol.iterator]||null!=e[&quot;@@iterator&quot;])return Array.from(e)}(e)||fa(e)||function(){throw new TypeError(&quot;Invalid attempt to spread non-iterable instance.\snIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.&quot;)}()}var ka=Ee(&quot;matAlgo01xDSid&quot;,[&quot;typed&quot;],(function(e){var t=e.typed;return function(e,r,n,i){var a=e._data,o=e._size,u=e._datatype,s=r._values,c=r._index,f=r._ptr,l=r._size,p=r._datatype;if(o.length!==l.length)throw new Xr(o.length,l.length);if(o[0]!==l[0]||o[1]!==l[1])throw new RangeError(&quot;Dimension mismatch. Matrix A (&quot;+o+&quot;) must match Matrix B (&quot;+l+&quot;)&quot;);if(!s)throw new Error(&quot;Cannot perform operation on Dense Matrix and Pattern Sparse Matrix&quot;);var m,h,d=o[0],v=o[1],y=&quot;string&quot;==typeof u&amp;&amp;u===p?u:void 0,g=y?t.find(n,[y,y]):n,x=[];for(m=0;m&lt;d;m++)x[m]=[];var b=[],w=[];for(h=0;h&lt;v;h++){for(var N=h+1,D=f[h],E=f[h+1],A=D;A&lt;E;A++)b[m=c[A]]=i?g(s[A],a[m][h]):g(a[m][h],s[A]),w[m]=N;for(m=0;m&lt;d;m++)w[m]===N?x[m][h]=b[m]:x[m][h]=a[m][h]}return e.createDenseMatrix({data:x,size:[d,v],datatype:y})}})),Ia=Ee(&quot;matAlgo04xSidSid&quot;,[&quot;typed&quot;,&quot;equalScalar&quot;],(function(e){var t=e.typed,r=e.equalScalar;return function(e,n,i){var a=e._values,o=e._index,u=e._ptr,s=e._size,c=e._datatype,f=n._values,l=n._index,p=n._ptr,m=n._size,h=n._datatype;if(s.length!==m.length)throw new Xr(s.length,m.length);if(s[0]!==m[0]||s[1]!==m[1])throw new RangeError(&quot;Dimension mismatch. Matrix A (&quot;+s+&quot;) must match Matrix B (&quot;+m+&quot;)&quot;);var d,v=s[0],y=s[1],g=r,x=0,b=i;&quot;string&quot;==typeof c&amp;&amp;c===h&amp;&amp;(d=c,g=t.find(r,[d,d]),x=t.convert(0,d),b=t.find(i,[d,d]));var w,N,D,E,A,S=a&amp;&amp;f?[]:void 0,C=[],M=[],F=a&amp;&amp;f?[]:void 0,O=a&amp;&amp;f?[]:void 0,T=[],B=[];for(N=0;N&lt;y;N++){M[N]=C.length;var _=N+1;for(E=u[N],A=u[N+1],D=E;D&lt;A;D++)w=o[D],C.push(w),T[w]=_,F&amp;&amp;(F[w]=a[D]);for(E=p[N],A=p[N+1],D=E;D&lt;A;D++)if(T[w=l[D]]===_){if(F){var k=b(F[w],f[D]);g(k,x)?T[w]=null:F[w]=k}}else C.push(w),B[w]=_,O&amp;&amp;(O[w]=f[D]);if(F&amp;&amp;O)for(D=M[N];D&lt;C.length;)T[w=C[D]]===_?(S[D]=F[w],D++):B[w]===_?(S[D]=O[w],D++):C.splice(D,1)}return M[y]=C.length,e.createSparseMatrix({values:S,index:C,ptr:M,size:[v,y],datatype:d})}})),Ra=Ee(&quot;matAlgo10xSids&quot;,[&quot;typed&quot;,&quot;DenseMatrix&quot;],(function(e){var t=e.typed,r=e.DenseMatrix;return function(e,n,i,a){var o=e._values,u=e._index,s=e._ptr,c=e._size,f=e._datatype;if(!o)throw new Error(&quot;Cannot perform operation on Pattern Sparse Matrix and Scalar value&quot;);var l,p=c[0],m=c[1],h=i;&quot;string&quot;==typeof f&amp;&amp;(l=f,n=t.convert(n,l),h=t.find(i,[l,l]));for(var d=[],v=[],y=[],g=0;g&lt;m;g++){for(var x=g+1,b=s[g],w=s[g+1],N=b;N&lt;w;N++){var D=u[N];v[D]=o[N],y[D]=x}for(var E=0;E&lt;p;E++)0===g&amp;&amp;(d[E]=[]),y[E]===x?d[E][g]=a?h(n,v[E]):h(v[E],n):d[E][g]=n}return new r({data:d,size:[p,m],datatype:l})}})),za=Ee(&quot;matAlgo13xDD&quot;,[&quot;typed&quot;],(function(e){var t=e.typed;return function(e,n,i){var a,o=e._data,u=e._size,s=e._datatype,c=n._data,f=n._size,l=n._datatype,p=[];if(u.length!==f.length)throw new Xr(u.length,f.length);for(var m=0;m&lt;u.length;m++){if(u[m]!==f[m])throw new RangeError(&quot;Dimension mismatch. Matrix A (&quot;+u+&quot;) must match Matrix B (&quot;+f+&quot;)&quot;);p[m]=u[m]}var h=i;&quot;string&quot;==typeof s&amp;&amp;s===l&amp;&amp;(a=s,h=t.find(i,[a,a]));var d=p.length&gt;0?r(h,0,p,p[0],o,c):[];return e.createDenseMatrix({data:d,size:p,datatype:a})};function r(e,t,n,i,a,o){var u=[];if(t===n.length-1)for(var s=0;s&lt;i;s++)u[s]=e(a[s],o[s]);else for(var c=0;c&lt;i;c++)u[c]=r(e,t+1,n,n[t+1],a[c],o[c]);return u}})),qa=(r(3290),Ee(&quot;broadcast&quot;,[&quot;concat&quot;],(function(e){var t=e.concat;return function(e,t){var a=Math.max(e._size.length,t._size.length);if(e._size.length===t._size.length&amp;&amp;e._size.every((function(e,r){return e===t._size[r]})))return[e,t];for(var o=r(e._size,a,0),u=r(t._size,a,0),s=[],c=0;c&lt;a;c++)s[c]=Math.max(o[c],u[c]);for(var f=0;f&lt;a;f++)i(o,s,f),i(u,s,f);var l=e.clone(),p=t.clone();l._size.length&lt;a?l.reshape(r(l._size,a,1)):p._size.length&lt;a&amp;&amp;p.reshape(r(p._size,a,1));for(var m=0;m&lt;a;m++)l._size[m]&lt;s[m]&amp;&amp;(l=n(l,s[m],m)),p._size[m]&lt;s[m]&amp;&amp;(p=n(p,s[m],m));return[l,p]};function r(e,t,r){return[].concat(_a(Array(t-e.length).fill(r)),_a(e))}function n(e,r,n){return t.apply(void 0,_a(Array(r).fill(e)).concat([n]))}function i(e,t,r){if(e[r]&lt;t[r]&amp;e[r]&gt;1)throw new Error(&quot;shape missmatch: missmatch is found in arg with shape (&quot;.concat(e,&quot;) not possible to broadcast dimension &quot;).concat(r,&quot; with size &quot;).concat(e[r],&quot; to size &quot;).concat(t[r]))}}))),ja=Ee(&quot;matrixAlgorithmSuite&quot;,[&quot;typed&quot;,&quot;matrix&quot;,&quot;concat&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.concat,i=za({typed:t}),a=ha({typed:t}),o=qa({concat:n});return function(e){var n,u=e.elop,s=e.SD||e.DS;u?(n={&quot;DenseMatrix, DenseMatrix&quot;:function(e,t){return i.apply(void 0,_a(o(e,t)).concat([u]))},&quot;Array, Array&quot;:function(e,t){return i.apply(void 0,_a(o(r(e),r(t))).concat([u])).valueOf()},&quot;Array, DenseMatrix&quot;:function(e,t){return i.apply(void 0,_a(o(r(e),t)).concat([u]))},&quot;DenseMatrix, Array&quot;:function(e,t){return i.apply(void 0,_a(o(e,r(t))).concat([u]))}},e.SS&amp;&amp;(n[&quot;SparseMatrix, SparseMatrix&quot;]=function(t,r){return e.SS.apply(e,_a(o(t,r)).concat([u,!1]))}),e.DS&amp;&amp;(n[&quot;DenseMatrix, SparseMatrix&quot;]=function(t,r){return e.DS.apply(e,_a(o(t,r)).concat([u,!1]))},n[&quot;Array, SparseMatrix&quot;]=function(t,n){return e.DS.apply(e,_a(o(r(t),n)).concat([u,!1]))}),s&amp;&amp;(n[&quot;SparseMatrix, DenseMatrix&quot;]=function(e,t){return s.apply(void 0,_a(o(t,e)).concat([u,!0]))},n[&quot;SparseMatrix, Array&quot;]=function(e,t){return s.apply(void 0,_a(o(r(t),e)).concat([u,!0]))})):(n={&quot;DenseMatrix, DenseMatrix&quot;:t.referToSelf((function(e){return function(t,r){return i.apply(void 0,_a(o(t,r)).concat([e]))}})),&quot;Array, Array&quot;:t.referToSelf((function(e){return function(t,n){return i.apply(void 0,_a(o(r(t),r(n))).concat([e])).valueOf()}})),&quot;Array, DenseMatrix&quot;:t.referToSelf((function(e){return function(t,n){return i.apply(void 0,_a(o(r(t),n)).concat([e]))}})),&quot;DenseMatrix, Array&quot;:t.referToSelf((function(e){return function(t,n){return i.apply(void 0,_a(o(t,r(n))).concat([e]))}}))},e.SS&amp;&amp;(n[&quot;SparseMatrix, SparseMatrix&quot;]=t.referToSelf((function(t){return function(r,n){return e.SS.apply(e,_a(o(r,n)).concat([t,!1]))}}))),e.DS&amp;&amp;(n[&quot;DenseMatrix, SparseMatrix&quot;]=t.referToSelf((function(t){return function(r,n){return e.DS.apply(e,_a(o(r,n)).concat([t,!1]))}})),n[&quot;Array, SparseMatrix&quot;]=t.referToSelf((function(t){return function(n,i){return e.DS.apply(e,_a(o(r(n),i)).concat([t,!1]))}}))),s&amp;&amp;(n[&quot;SparseMatrix, DenseMatrix&quot;]=t.referToSelf((function(e){return function(t,r){return s.apply(void 0,_a(o(r,t)).concat([e,!0]))}})),n[&quot;SparseMatrix, Array&quot;]=t.referToSelf((function(e){return function(t,n){return s.apply(void 0,_a(o(r(n),t)).concat([e,!0]))}}))));var c=e.scalar||&quot;any&quot;;(e.Ds||e.Ss)&amp;&amp;(u?(n[&quot;DenseMatrix,&quot;+c]=function(e,t){return a(e,t,u,!1)},n[c+&quot;, DenseMatrix&quot;]=function(e,t){return a(t,e,u,!0)},n[&quot;Array,&quot;+c]=function(e,t){return a(r(e),t,u,!1).valueOf()},n[c+&quot;, Array&quot;]=function(e,t){return a(r(t),e,u,!0).valueOf()}):(n[&quot;DenseMatrix,&quot;+c]=t.referToSelf((function(e){return function(t,r){return a(t,r,e,!1)}})),n[c+&quot;, DenseMatrix&quot;]=t.referToSelf((function(e){return function(t,r){return a(r,t,e,!0)}})),n[&quot;Array,&quot;+c]=t.referToSelf((function(e){return function(t,n){return a(r(t),n,e,!1).valueOf()}})),n[c+&quot;, Array&quot;]=t.referToSelf((function(e){return function(t,n){return a(r(n),t,e,!0).valueOf()}}))));var f=void 0!==e.sS?e.sS:e.Ss;return u?(e.Ss&amp;&amp;(n[&quot;SparseMatrix,&quot;+c]=function(t,r){return e.Ss(t,r,u,!1)}),f&amp;&amp;(n[c+&quot;, SparseMatrix&quot;]=function(e,t){return f(t,e,u,!0)})):(e.Ss&amp;&amp;(n[&quot;SparseMatrix,&quot;+c]=t.referToSelf((function(t){return function(r,n){return e.Ss(r,n,t,!1)}}))),f&amp;&amp;(n[c+&quot;, SparseMatrix&quot;]=t.referToSelf((function(e){return function(t,r){return f(r,t,e,!0)}})))),u&amp;&amp;u.signatures&amp;&amp;ve(n,u.signatures),n}}));function Pa(e,t,r,n){if(!(this instanceof Pa))throw new SyntaxError(&quot;Constructor must be called with the new operator&quot;);this.fn=e,this.count=t,this.min=r,this.max=n,this.message=&quot;Wrong number of arguments in function &quot;+e+&quot; (&quot;+t+&quot; provided, &quot;+r+(null!=n?&quot;-&quot;+n:&quot;&quot;)+&quot; expected)&quot;,this.stack=(new Error).stack}Pa.prototype=new Error,Pa.prototype.constructor=Error,Pa.prototype.name=&quot;ArgumentsError&quot;,Pa.prototype.isArgumentsError=!0;var La=[&quot;typed&quot;,&quot;matrix&quot;,&quot;equalScalar&quot;,&quot;BigNumber&quot;,&quot;DenseMatrix&quot;,&quot;concat&quot;],Ua=&quot;number | BigNumber | Fraction | Matrix | Array&quot;,$a=&quot;&quot;.concat(Ua,&quot;, &quot;).concat(Ua,&quot;, ...&quot;).concat(Ua);function Ha(e){return!e.some((function(e){return Array.isArray(e)}))}var Ga=Ee(&quot;gcd&quot;,La,(function(e){var t,r=e.typed,n=e.matrix,i=e.equalScalar,a=e.BigNumber,o=e.DenseMatrix,u=e.concat,s=ka({typed:r}),c=Ia({typed:r,equalScalar:i}),f=Ra({typed:r,DenseMatrix:o});return r(&quot;gcd&quot;,{&quot;number, number&quot;:Pi,&quot;BigNumber, BigNumber&quot;:function(e,t){if(!e.isInt()||!t.isInt())throw new Error(&quot;Parameters in function gcd must be integer numbers&quot;);for(var r=new a(0);!t.isZero();){var n=e.mod(t);e=t,t=n}return e.lt(r)?e.neg():e},&quot;Fraction, Fraction&quot;:function(e,t){return e.gcd(t)}},ja({typed:r,matrix:n,concat:u})({SS:c,DS:s,Ss:f}),(Ba(t={},$a,r.referToSelf((function(e){return function(t,r,n){for(var i=e(t,r),a=0;a&lt;n.length;a++)i=e(i,n[a]);return i}}))),Ba(t,&quot;Array&quot;,r.referToSelf((function(e){return function(t){if(1===t.length&amp;&amp;Array.isArray(t[0])&amp;&amp;Ha(t[0]))return e.apply(void 0,_a(t[0]));if(Ha(t))return e.apply(void 0,_a(t));throw new Pa(&quot;gcd() supports only 1d matrices!&quot;)}}))),Ba(t,&quot;Matrix&quot;,r.referToSelf((function(e){return function(t){return e(t.toArray())}}))),t))})),Va=Ee(&quot;matAlgo02xDS0&quot;,[&quot;typed&quot;,&quot;equalScalar&quot;],(function(e){var t=e.typed,r=e.equalScalar;return function(e,n,i,a){var o=e._data,u=e._size,s=e._datatype,c=n._values,f=n._index,l=n._ptr,p=n._size,m=n._datatype;if(u.length!==p.length)throw new Xr(u.length,p.length);if(u[0]!==p[0]||u[1]!==p[1])throw new RangeError(&quot;Dimension mismatch. Matrix A (&quot;+u+&quot;) must match Matrix B (&quot;+p+&quot;)&quot;);if(!c)throw new Error(&quot;Cannot perform operation on Dense Matrix and Pattern Sparse Matrix&quot;);var h,d=u[0],v=u[1],y=r,g=0,x=i;&quot;string&quot;==typeof s&amp;&amp;s===m&amp;&amp;(h=s,y=t.find(r,[h,h]),g=t.convert(0,h),x=t.find(i,[h,h]));for(var b=[],w=[],N=[],D=0;D&lt;v;D++){N[D]=w.length;for(var E=l[D],A=l[D+1],S=E;S&lt;A;S++){var C=f[S],M=a?x(c[S],o[C][D]):x(o[C][D],c[S]);y(M,g)||(w.push(C),b.push(M))}}return N[v]=w.length,n.createSparseMatrix({values:b,index:w,ptr:N,size:[d,v],datatype:h})}})),Za=Ee(&quot;matAlgo06xS0S0&quot;,[&quot;typed&quot;,&quot;equalScalar&quot;],(function(e){var t=e.typed,r=e.equalScalar;return function(e,n,i){var a=e._values,o=e._size,u=e._datatype,s=n._values,c=n._size,f=n._datatype;if(o.length!==c.length)throw new Xr(o.length,c.length);if(o[0]!==c[0]||o[1]!==c[1])throw new RangeError(&quot;Dimension mismatch. Matrix A (&quot;+o+&quot;) must match Matrix B (&quot;+c+&quot;)&quot;);var l,p=o[0],m=o[1],h=r,d=0,v=i;&quot;string&quot;==typeof u&amp;&amp;u===f&amp;&amp;(l=u,h=t.find(r,[l,l]),d=t.convert(0,l),v=t.find(i,[l,l]));for(var y=a&amp;&amp;s?[]:void 0,g=[],x=[],b=y?[]:void 0,w=[],N=[],D=0;D&lt;m;D++){x[D]=g.length;var E=D+1;if(Rn(e,D,w,b,N,E,g,v),Rn(n,D,w,b,N,E,g,v),b)for(var A=x[D];A&lt;g.length;){var S=g[A];if(N[S]===E){var C=b[S];h(C,d)?g.splice(A,1):(y.push(C),A++)}else g.splice(A,1)}else for(var M=x[D];M&lt;g.length;)N[g[M]]!==E?g.splice(M,1):M++}return x[m]=g.length,e.createSparseMatrix({values:y,index:g,ptr:x,size:[p,m],datatype:l})}})),Wa=Ee(&quot;lcm&quot;,[&quot;typed&quot;,&quot;matrix&quot;,&quot;equalScalar&quot;,&quot;concat&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.equalScalar,i=e.concat,a=Va({typed:t,equalScalar:n}),o=Za({typed:t,equalScalar:n}),u=pa({typed:t,equalScalar:n}),s=ja({typed:t,matrix:r,concat:i}),c=&quot;number | BigNumber | Fraction | Matrix | Array&quot;,f={};return f[&quot;&quot;.concat(c,&quot;, &quot;).concat(c,&quot;, ...&quot;).concat(c)]=t.referToSelf((function(e){return function(t,r,n){for(var i=e(t,r),a=0;a&lt;n.length;a++)i=e(i,n[a]);return i}})),t(&quot;lcm&quot;,{&quot;number, number&quot;:Li,&quot;BigNumber, BigNumber&quot;:function(e,t){if(!e.isInt()||!t.isInt())throw new Error(&quot;Parameters in function lcm must be integer numbers&quot;);if(e.isZero())return e;if(t.isZero())return t;for(var r=e.times(t);!t.isZero();){var n=t;t=e.mod(n),e=n}return r.div(e).abs()},&quot;Fraction, Fraction&quot;:function(e,t){return e.lcm(t)}},s({SS:o,DS:a,Ss:u}),f)})),Ya=&quot;log10&quot;,Ja=Ee(Ya,[&quot;typed&quot;,&quot;config&quot;,&quot;Complex&quot;],(function(e){var t=e.typed,r=e.config,n=e.Complex;return t(Ya,{number:function(e){return e&gt;=0||r.predictable?Ui(e):new n(e,0).log().div(Math.LN10)},Complex:function(e){return new n(e).log().div(Math.LN10)},BigNumber:function(e){return!e.isNegative()||r.predictable?e.log():new n(e.toNumber(),0).log().div(Math.LN10)},&quot;Array | Matrix&quot;:t.referToSelf((function(e){return function(t){return _n(t,e)}}))})})),Xa=&quot;log2&quot;,Qa=Ee(Xa,[&quot;typed&quot;,&quot;config&quot;,&quot;Complex&quot;],(function(e){var t=e.typed,r=e.config,n=e.Complex;return t(Xa,{number:function(e){return e&gt;=0||r.predictable?$i(e):i(new n(e,0))},Complex:i,BigNumber:function(e){return!e.isNegative()||r.predictable?e.log(2):i(new n(e.toNumber(),0))},&quot;Array | Matrix&quot;:t.referToSelf((function(e){return function(t){return _n(t,e)}}))});function i(e){var t=Math.sqrt(e.re*e.re+e.im*e.im);return new n(Math.log2?Math.log2(t):Math.log(t)/Math.LN2,Math.atan2(e.im,e.re)/Math.LN2)}})),Ka=Ee(&quot;matAlgo03xDSf&quot;,[&quot;typed&quot;],(function(e){var t=e.typed;return function(e,r,n,i){var a=e._data,o=e._size,u=e._datatype,s=r._values,c=r._index,f=r._ptr,l=r._size,p=r._datatype;if(o.length!==l.length)throw new Xr(o.length,l.length);if(o[0]!==l[0]||o[1]!==l[1])throw new RangeError(&quot;Dimension mismatch. Matrix A (&quot;+o+&quot;) must match Matrix B (&quot;+l+&quot;)&quot;);if(!s)throw new Error(&quot;Cannot perform operation on Dense Matrix and Pattern Sparse Matrix&quot;);var m,h=o[0],d=o[1],v=0,y=n;&quot;string&quot;==typeof u&amp;&amp;u===p&amp;&amp;(m=u,v=t.convert(0,m),y=t.find(n,[m,m]));for(var g=[],x=0;x&lt;h;x++)g[x]=[];for(var b=[],w=[],N=0;N&lt;d;N++){for(var D=N+1,E=f[N],A=f[N+1],S=E;S&lt;A;S++){var C=c[S];b[C]=i?y(s[S],a[C][N]):y(a[C][N],s[S]),w[C]=D}for(var M=0;M&lt;h;M++)w[M]===D?g[M][N]=b[M]:g[M][N]=i?y(v,a[M][N]):y(a[M][N],v)}return e.createDenseMatrix({data:g,size:[h,d],datatype:m})}})),eo=Ee(&quot;matAlgo05xSfSf&quot;,[&quot;typed&quot;,&quot;equalScalar&quot;],(function(e){var t=e.typed,r=e.equalScalar;return function(e,n,i){var a=e._values,o=e._index,u=e._ptr,s=e._size,c=e._datatype,f=n._values,l=n._index,p=n._ptr,m=n._size,h=n._datatype;if(s.length!==m.length)throw new Xr(s.length,m.length);if(s[0]!==m[0]||s[1]!==m[1])throw new RangeError(&quot;Dimension mismatch. Matrix A (&quot;+s+&quot;) must match Matrix B (&quot;+m+&quot;)&quot;);var d,v=s[0],y=s[1],g=r,x=0,b=i;&quot;string&quot;==typeof c&amp;&amp;c===h&amp;&amp;(d=c,g=t.find(r,[d,d]),x=t.convert(0,d),b=t.find(i,[d,d]));var w,N,D,E,A=a&amp;&amp;f?[]:void 0,S=[],C=[],M=A?[]:void 0,F=A?[]:void 0,O=[],T=[];for(N=0;N&lt;y;N++){C[N]=S.length;var B=N+1;for(D=u[N],E=u[N+1];D&lt;E;D++)w=o[D],S.push(w),O[w]=B,M&amp;&amp;(M[w]=a[D]);for(D=p[N],E=p[N+1];D&lt;E;D++)O[w=l[D]]!==B&amp;&amp;S.push(w),T[w]=B,F&amp;&amp;(F[w]=f[D]);if(A)for(D=C[N];D&lt;S.length;){var _=O[w=S[D]],k=T[w];if(_===B||k===B){var I=b(_===B?M[w]:x,k===B?F[w]:x);g(I,x)?S.splice(D,1):(A.push(I),D++)}}}return C[y]=S.length,e.createSparseMatrix({values:A,index:S,ptr:C,size:[v,y],datatype:d})}})),to=Ee(&quot;mod&quot;,[&quot;typed&quot;,&quot;matrix&quot;,&quot;equalScalar&quot;,&quot;DenseMatrix&quot;,&quot;concat&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.equalScalar,i=e.DenseMatrix,a=e.concat,o=Va({typed:t,equalScalar:n}),u=Ka({typed:t}),s=eo({typed:t,equalScalar:n}),c=pa({typed:t,equalScalar:n}),f=ma({typed:t,DenseMatrix:i});return t(&quot;mod&quot;,{&quot;number, number&quot;:Hi,&quot;BigNumber, BigNumber&quot;:function(e,t){if(t.isNeg())throw new Error(&quot;Cannot calculate mod for a negative divisor&quot;);return t.isZero()?e:e.mod(t)},&quot;Fraction, Fraction&quot;:function(e,t){if(t.compare(0)&lt;0)throw new Error(&quot;Cannot calculate mod for a negative divisor&quot;);return e.compare(0)&gt;=0?e.mod(t):e.mod(t).add(t).mod(t)}},ja({typed:t,matrix:r,concat:a})({SS:s,DS:u,SD:o,Ss:c,sS:f}))})),ro=Ee(&quot;multiplyScalar&quot;,[&quot;typed&quot;],(function(e){return(0,e.typed)(&quot;multiplyScalar&quot;,{&quot;number, number&quot;:_i,&quot;Complex, Complex&quot;:function(e,t){return e.mul(t)},&quot;BigNumber, BigNumber&quot;:function(e,t){return e.times(t)},&quot;Fraction, Fraction&quot;:function(e,t){return e.mul(t)},&quot;number | Fraction | BigNumber | Complex, Unit&quot;:function(e,t){return t.multiply(e)},&quot;Unit, number | Fraction | BigNumber | Complex | Unit&quot;:function(e,t){return e.multiply(t)}})})),no=&quot;multiply&quot;,io=Ee(no,[&quot;typed&quot;,&quot;matrix&quot;,&quot;addScalar&quot;,&quot;multiplyScalar&quot;,&quot;equalScalar&quot;,&quot;dot&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.addScalar,i=e.multiplyScalar,a=e.equalScalar,o=e.dot,u=pa({typed:t,equalScalar:a}),s=ha({typed:t});function c(e,t){switch(e.length){case 1:switch(t.length){case 1:if(e[0]!==t[0])throw new RangeError(&quot;Dimension mismatch in multiplication. Vectors must have the same length&quot;);break;case 2:if(e[0]!==t[0])throw new RangeError(&quot;Dimension mismatch in multiplication. Vector length (&quot;+e[0]+&quot;) must match Matrix rows (&quot;+t[0]+&quot;)&quot;);break;default:throw new Error(&quot;Can only multiply a 1 or 2 dimensional matrix (Matrix B has &quot;+t.length+&quot; dimensions)&quot;)}break;case 2:switch(t.length){case 1:if(e[1]!==t[0])throw new RangeError(&quot;Dimension mismatch in multiplication. Matrix columns (&quot;+e[1]+&quot;) must match Vector length (&quot;+t[0]+&quot;)&quot;);break;case 2:if(e[1]!==t[0])throw new RangeError(&quot;Dimension mismatch in multiplication. Matrix A columns (&quot;+e[1]+&quot;) must match Matrix B rows (&quot;+t[0]+&quot;)&quot;);break;default:throw new Error(&quot;Can only multiply a 1 or 2 dimensional matrix (Matrix B has &quot;+t.length+&quot; dimensions)&quot;)}break;default:throw new Error(&quot;Can only multiply a 1 or 2 dimensional matrix (Matrix A has &quot;+e.length+&quot; dimensions)&quot;)}}var f=t(&quot;_multiplyMatrixVector&quot;,{&quot;DenseMatrix, any&quot;:function(e,r){var a,o=e._data,u=e._size,s=e._datatype,c=r._data,f=r._datatype,l=u[0],p=u[1],m=n,h=i;s&amp;&amp;f&amp;&amp;s===f&amp;&amp;&quot;string&quot;==typeof s&amp;&amp;(a=s,m=t.find(n,[a,a]),h=t.find(i,[a,a]));for(var d=[],v=0;v&lt;l;v++){for(var y=o[v],g=h(y[0],c[0]),x=1;x&lt;p;x++)g=m(g,h(y[x],c[x]));d[v]=g}return e.createDenseMatrix({data:d,size:[l],datatype:a})},&quot;SparseMatrix, any&quot;:function(e,r){var o=e._values,u=e._index,s=e._ptr,c=e._datatype;if(!o)throw new Error(&quot;Cannot multiply Pattern only Matrix times Dense Matrix&quot;);var f,l=r._data,p=r._datatype,m=e._size[0],h=r._size[0],d=[],v=[],y=[],g=n,x=i,b=a,w=0;c&amp;&amp;p&amp;&amp;c===p&amp;&amp;&quot;string&quot;==typeof c&amp;&amp;(f=c,g=t.find(n,[f,f]),x=t.find(i,[f,f]),b=t.find(a,[f,f]),w=t.convert(0,f));var N=[],D=[];y[0]=0;for(var E=0;E&lt;h;E++){var A=l[E];if(!b(A,w))for(var S=s[E],C=s[E+1],M=S;M&lt;C;M++){var F=u[M];D[F]?N[F]=g(N[F],x(A,o[M])):(D[F]=!0,v.push(F),N[F]=x(A,o[M]))}}for(var O=v.length,T=0;T&lt;O;T++){var B=v[T];d[T]=N[B]}return y[1]=v.length,e.createSparseMatrix({values:d,index:v,ptr:y,size:[m,1],datatype:f})}}),p=t(&quot;_multiplyMatrixMatrix&quot;,{&quot;DenseMatrix, DenseMatrix&quot;:function(e,r){var a,o=e._data,u=e._size,s=e._datatype,c=r._data,f=r._size,l=r._datatype,p=u[0],m=u[1],h=f[1],d=n,v=i;s&amp;&amp;l&amp;&amp;s===l&amp;&amp;&quot;string&quot;==typeof s&amp;&amp;(a=s,d=t.find(n,[a,a]),v=t.find(i,[a,a]));for(var y=[],g=0;g&lt;p;g++){var x=o[g];y[g]=[];for(var b=0;b&lt;h;b++){for(var w=v(x[0],c[0][b]),N=1;N&lt;m;N++)w=d(w,v(x[N],c[N][b]));y[g][b]=w}}return e.createDenseMatrix({data:y,size:[p,h],datatype:a})},&quot;DenseMatrix, SparseMatrix&quot;:function(e,r){var o=e._data,u=e._size,s=e._datatype,c=r._values,f=r._index,l=r._ptr,p=r._size,m=r._datatype;if(!c)throw new Error(&quot;Cannot multiply Dense Matrix times Pattern only Matrix&quot;);var h,d=u[0],v=p[1],y=n,g=i,x=a,b=0;s&amp;&amp;m&amp;&amp;s===m&amp;&amp;&quot;string&quot;==typeof s&amp;&amp;(h=s,y=t.find(n,[h,h]),g=t.find(i,[h,h]),x=t.find(a,[h,h]),b=t.convert(0,h));for(var w=[],N=[],D=[],E=r.createSparseMatrix({values:w,index:N,ptr:D,size:[d,v],datatype:h}),A=0;A&lt;v;A++){D[A]=N.length;var S=l[A],C=l[A+1];if(C&gt;S)for(var M=0,F=0;F&lt;d;F++){for(var O=F+1,T=void 0,B=S;B&lt;C;B++){var _=f[B];M!==O?(T=g(o[F][_],c[B]),M=O):T=y(T,g(o[F][_],c[B]))}M!==O||x(T,b)||(N.push(F),w.push(T))}}return D[v]=N.length,E},&quot;SparseMatrix, DenseMatrix&quot;:function(e,r){var o=e._values,u=e._index,s=e._ptr,c=e._datatype;if(!o)throw new Error(&quot;Cannot multiply Pattern only Matrix times Dense Matrix&quot;);var f,l=r._data,p=r._datatype,m=e._size[0],h=r._size[0],d=r._size[1],v=n,y=i,g=a,x=0;c&amp;&amp;p&amp;&amp;c===p&amp;&amp;&quot;string&quot;==typeof c&amp;&amp;(f=c,v=t.find(n,[f,f]),y=t.find(i,[f,f]),g=t.find(a,[f,f]),x=t.convert(0,f));for(var b=[],w=[],N=[],D=e.createSparseMatrix({values:b,index:w,ptr:N,size:[m,d],datatype:f}),E=[],A=[],S=0;S&lt;d;S++){N[S]=w.length;for(var C=S+1,M=0;M&lt;h;M++){var F=l[M][S];if(!g(F,x))for(var O=s[M],T=s[M+1],B=O;B&lt;T;B++){var _=u[B];A[_]!==C?(A[_]=C,w.push(_),E[_]=y(F,o[B])):E[_]=v(E[_],y(F,o[B]))}}for(var k=N[S],I=w.length,R=k;R&lt;I;R++){var z=w[R];b[R]=E[z]}}return N[d]=w.length,D},&quot;SparseMatrix, SparseMatrix&quot;:function(e,r){var a,o=e._values,u=e._index,s=e._ptr,c=e._datatype,f=r._values,l=r._index,p=r._ptr,m=r._datatype,h=e._size[0],d=r._size[1],v=o&amp;&amp;f,y=n,g=i;c&amp;&amp;m&amp;&amp;c===m&amp;&amp;&quot;string&quot;==typeof c&amp;&amp;(a=c,y=t.find(n,[a,a]),g=t.find(i,[a,a]));for(var x,b,w,N,D,E,A,S,C=v?[]:void 0,M=[],F=[],O=e.createSparseMatrix({values:C,index:M,ptr:F,size:[h,d],datatype:a}),T=v?[]:void 0,B=[],_=0;_&lt;d;_++){F[_]=M.length;var k=_+1;for(D=p[_],E=p[_+1],N=D;N&lt;E;N++)if(S=l[N],v)for(b=s[S],w=s[S+1],x=b;x&lt;w;x++)B[A=u[x]]!==k?(B[A]=k,M.push(A),T[A]=g(f[N],o[x])):T[A]=y(T[A],g(f[N],o[x]));else for(b=s[S],w=s[S+1],x=b;x&lt;w;x++)B[A=u[x]]!==k&amp;&amp;(B[A]=k,M.push(A));if(v)for(var I=F[_],R=M.length,z=I;z&lt;R;z++){var q=M[z];C[z]=T[q]}}return F[d]=M.length,O}});return t(no,i,{&quot;Array, Array&quot;:t.referTo(&quot;Matrix, Matrix&quot;,(function(e){return function(t,n){c(Kr(t),Kr(n));var i=e(r(t),r(n));return l(i)?i.valueOf():i}})),&quot;Matrix, Matrix&quot;:function(e,r){var a=e.size(),u=r.size();return c(a,u),1===a.length?1===u.length?function(e,t,r){if(0===r)throw new Error(&quot;Cannot multiply two empty vectors&quot;);return o(e,t)}(e,r,a[0]):function(e,r){if(&quot;dense&quot;!==r.storage())throw new Error(&quot;Support for SparseMatrix not implemented&quot;);return function(e,r){var a,o=e._data,u=e._size,s=e._datatype,c=r._data,f=r._size,l=r._datatype,p=u[0],m=f[1],h=n,d=i;s&amp;&amp;l&amp;&amp;s===l&amp;&amp;&quot;string&quot;==typeof s&amp;&amp;(a=s,h=t.find(n,[a,a]),d=t.find(i,[a,a]));for(var v=[],y=0;y&lt;m;y++){for(var g=d(o[0],c[0][y]),x=1;x&lt;p;x++)g=h(g,d(o[x],c[x][y]));v[y]=g}return e.createDenseMatrix({data:v,size:[m],datatype:a})}(e,r)}(e,r):1===u.length?f(e,r):p(e,r)},&quot;Matrix, Array&quot;:t.referTo(&quot;Matrix,Matrix&quot;,(function(e){return function(t,n){return e(t,r(n))}})),&quot;Array, Matrix&quot;:t.referToSelf((function(e){return function(t,n){return e(r(t,n.storage()),n)}})),&quot;SparseMatrix, any&quot;:function(e,t){return u(e,t,i,!1)},&quot;DenseMatrix, any&quot;:function(e,t){return s(e,t,i,!1)},&quot;any, SparseMatrix&quot;:function(e,t){return u(t,e,i,!0)},&quot;any, DenseMatrix&quot;:function(e,t){return s(t,e,i,!0)},&quot;Array, any&quot;:function(e,t){return s(r(e),t,i,!1).valueOf()},&quot;any, Array&quot;:function(e,t){return s(r(t),e,i,!0).valueOf()},&quot;any, any&quot;:i,&quot;any, any, ...any&quot;:t.referToSelf((function(e){return function(t,r,n){for(var i=e(t,r),a=0;a&lt;n.length;a++)i=e(i,n[a]);return i}}))})})),ao=&quot;nthRoot&quot;,oo=Ee(ao,[&quot;typed&quot;,&quot;matrix&quot;,&quot;equalScalar&quot;,&quot;BigNumber&quot;,&quot;concat&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.equalScalar,i=e.BigNumber,a=e.concat,o=ka({typed:t}),u=Va({typed:t,equalScalar:n}),s=Za({typed:t,equalScalar:n}),c=pa({typed:t,equalScalar:n}),f=ja({typed:t,matrix:r,concat:a});function l(){throw new Error(&quot;Complex number not supported in function nthRoot. Use nthRoots instead.&quot;)}return t(ao,{number:Gi,&quot;number, number&quot;:Gi,BigNumber:function(e){return p(e,new i(2))},&quot;BigNumber, BigNumber&quot;:p,Complex:l,&quot;Complex, number&quot;:l,Array:t.referTo(&quot;DenseMatrix,number&quot;,(function(e){return function(t){return e(r(t),2).valueOf()}})),DenseMatrix:t.referTo(&quot;DenseMatrix,number&quot;,(function(e){return function(t){return e(t,2)}})),SparseMatrix:t.referTo(&quot;SparseMatrix,number&quot;,(function(e){return function(t){return e(t,2)}})),&quot;SparseMatrix, SparseMatrix&quot;:t.referToSelf((function(e){return function(t,r){if(1===r.density())return s(t,r,e);throw new Error(&quot;Root must be non-zero&quot;)}})),&quot;DenseMatrix, SparseMatrix&quot;:t.referToSelf((function(e){return function(t,r){if(1===r.density())return o(t,r,e,!1);throw new Error(&quot;Root must be non-zero&quot;)}})),&quot;Array, SparseMatrix&quot;:t.referTo(&quot;DenseMatrix,SparseMatrix&quot;,(function(e){return function(t,n){return e(r(t),n)}})),&quot;number | BigNumber, SparseMatrix&quot;:t.referToSelf((function(e){return function(t,r){if(1===r.density())return c(r,t,e,!0);throw new Error(&quot;Root must be non-zero&quot;)}}))},f({scalar:&quot;number | BigNumber&quot;,SD:u,Ss:c,sS:!1}));function p(e,t){var r=i.precision,n=i.clone({precision:r+2}),a=new i(0),o=new n(1),u=t.isNegative();if(u&amp;&amp;(t=t.neg()),t.isZero())throw new Error(&quot;Root must be non-zero&quot;);if(e.isNegative()&amp;&amp;!t.abs().mod(2).equals(1))throw new Error(&quot;Root must be odd when a is negative.&quot;);if(e.isZero())return u?new n(1/0):0;if(!e.isFinite())return u?a:e;var s=e.abs().pow(o.div(t));return s=e.isNeg()?s.neg():s,new i((u?o.div(s):s).toPrecision(r))}})),uo=&quot;sign&quot;,so=Ee(uo,[&quot;typed&quot;,&quot;BigNumber&quot;,&quot;Fraction&quot;,&quot;complex&quot;],(function(e){var t=e.typed,r=e.BigNumber,n=e.complex,i=e.Fraction;return t(uo,{number:Vi,Complex:function(e){return 0===e.im?n(Vi(e.re)):e.sign()},BigNumber:function(e){return new r(e.cmp(0))},Fraction:function(e){return new i(e.s,1)},&quot;Array | Matrix&quot;:t.referToSelf((function(e){return function(t){return _n(t,e,!0)}})),Unit:t.referToSelf((function(e){return function(r){if(!r._isDerived()&amp;&amp;0!==r.units[0].unit.offset)throw new TypeError(&quot;sign is ambiguous for units with offset&quot;);return t.find(e,r.valueType())(r.value)}}))})})),co=Ee(&quot;sqrt&quot;,[&quot;config&quot;,&quot;typed&quot;,&quot;Complex&quot;],(function(e){var t=e.config,r=e.typed,n=e.Complex;return r(&quot;sqrt&quot;,{number:i,Complex:function(e){return e.sqrt()},BigNumber:function(e){return!e.isNegative()||t.predictable?e.sqrt():i(e.toNumber())},Unit:function(e){return e.pow(.5)}});function i(e){return isNaN(e)?NaN:e&gt;=0||t.predictable?Math.sqrt(e):new n(e,0).sqrt()}})),fo=&quot;square&quot;,lo=Ee(fo,[&quot;typed&quot;],(function(e){return(0,e.typed)(fo,{number:Zi,Complex:function(e){return e.mul(e)},BigNumber:function(e){return e.times(e)},Fraction:function(e){return e.mul(e)},Unit:function(e){return e.pow(2)}})})),po=&quot;subtract&quot;,mo=Ee(po,[&quot;typed&quot;,&quot;matrix&quot;,&quot;equalScalar&quot;,&quot;addScalar&quot;,&quot;unaryMinus&quot;,&quot;DenseMatrix&quot;,&quot;concat&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.equalScalar,i=(e.addScalar,e.unaryMinus,e.DenseMatrix),a=e.concat,o=ka({typed:t}),u=Ka({typed:t}),s=eo({typed:t,equalScalar:n}),c=Ra({typed:t,DenseMatrix:i}),f=ma({typed:t,DenseMatrix:i}),l=ja({typed:t,matrix:r,concat:a});return t(po,{&quot;number, number&quot;:function(e,t){return e-t},&quot;Complex, Complex&quot;:function(e,t){return e.sub(t)},&quot;BigNumber, BigNumber&quot;:function(e,t){return e.minus(t)},&quot;Fraction, Fraction&quot;:function(e,t){return e.sub(t)},&quot;Unit, Unit&quot;:t.referToSelf((function(e){return function(r,n){if(null===r.value)throw new Error(&quot;Parameter x contains a unit with undefined value&quot;);if(null===n.value)throw new Error(&quot;Parameter y contains a unit with undefined value&quot;);if(!r.equalBase(n))throw new Error(&quot;Units do not match&quot;);var i=r.clone();return i.value=t.find(e,[i.valueType(),n.valueType()])(i.value,n.value),i.fixPrefix=!1,i}}))},l({SS:s,DS:o,SD:u,Ss:f,sS:c}))})),ho=&quot;xgcd&quot;,vo=Ee(ho,[&quot;typed&quot;,&quot;config&quot;,&quot;matrix&quot;,&quot;BigNumber&quot;],(function(e){var t=e.typed,r=e.config,n=e.matrix,i=e.BigNumber;return t(ho,{&quot;number, number&quot;:function(e,t){var i=Wi(e,t);return&quot;Array&quot;===r.matrix?i:n(i)},&quot;BigNumber, BigNumber&quot;:function(e,t){var a,o,u,s,c=new i(0),f=new i(1),l=c,p=f,m=f,h=c;if(!e.isInt()||!t.isInt())throw new Error(&quot;Parameters in function xgcd must be integer numbers&quot;);for(;!t.isZero();)o=e.div(t).floor(),u=e.mod(t),a=l,l=p.minus(o.times(l)),p=a,a=m,m=h.minus(o.times(m)),h=a,e=t,t=u;return s=e.lt(c)?[e.neg(),p.neg(),h.neg()]:[e,e.isZero()?0:p,h],&quot;Array&quot;===r.matrix?s:n(s)}})})),yo=&quot;invmod&quot;,go=Ee(yo,[&quot;typed&quot;,&quot;config&quot;,&quot;BigNumber&quot;,&quot;xgcd&quot;,&quot;equal&quot;,&quot;smaller&quot;,&quot;mod&quot;,&quot;add&quot;,&quot;isInteger&quot;],(function(e){var t=e.typed,r=(e.config,e.BigNumber),n=e.xgcd,i=e.equal,a=e.smaller,o=e.mod,u=e.add,s=e.isInteger;return t(yo,{&quot;number, number&quot;:c,&quot;BigNumber, BigNumber&quot;:c});function c(e,t){if(!s(e)||!s(t))throw new Error(&quot;Parameters in function invmod must be integer numbers&quot;);if(e=o(e,t),i(t,0))throw new Error(&quot;Divisor must be non zero&quot;);var c=n(e,t),f=la(c=c.valueOf(),2),l=f[0],p=f[1];return i(l,r(1))?(p=o(p,t),a(p,r(0))&amp;&amp;(p=u(p,t)),p):NaN}})),xo=Ee(&quot;matAlgo09xS0Sf&quot;,[&quot;typed&quot;,&quot;equalScalar&quot;],(function(e){var t=e.typed,r=e.equalScalar;return function(e,n,i){var a=e._values,o=e._index,u=e._ptr,s=e._size,c=e._datatype,f=n._values,l=n._index,p=n._ptr,m=n._size,h=n._datatype;if(s.length!==m.length)throw new Xr(s.length,m.length);if(s[0]!==m[0]||s[1]!==m[1])throw new RangeError(&quot;Dimension mismatch. Matrix A (&quot;+s+&quot;) must match Matrix B (&quot;+m+&quot;)&quot;);var d,v=s[0],y=s[1],g=r,x=0,b=i;&quot;string&quot;==typeof c&amp;&amp;c===h&amp;&amp;(d=c,g=t.find(r,[d,d]),x=t.convert(0,d),b=t.find(i,[d,d]));var w,N,D,E,A,S=a&amp;&amp;f?[]:void 0,C=[],M=[],F=S?[]:void 0,O=[];for(N=0;N&lt;y;N++){M[N]=C.length;var T=N+1;if(F)for(E=p[N],A=p[N+1],D=E;D&lt;A;D++)O[w=l[D]]=T,F[w]=f[D];for(E=u[N],A=u[N+1],D=E;D&lt;A;D++)if(w=o[D],F){var B=O[w]===T?F[w]:x,_=b(a[D],B);g(_,x)||(C.push(w),S.push(_))}else C.push(w)}return M[y]=C.length,e.createSparseMatrix({values:S,index:C,ptr:M,size:[v,y],datatype:d})}})),bo=&quot;dotMultiply&quot;,wo=Ee(bo,[&quot;typed&quot;,&quot;matrix&quot;,&quot;equalScalar&quot;,&quot;multiplyScalar&quot;,&quot;concat&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.equalScalar,i=e.multiplyScalar,a=e.concat,o=Va({typed:t,equalScalar:n}),u=xo({typed:t,equalScalar:n}),s=pa({typed:t,equalScalar:n}),c=ja({typed:t,matrix:r,concat:a});return t(bo,c({elop:i,SS:u,DS:o,Ss:s}))}));function No(e,t){if(e.isFinite()&amp;&amp;!e.isInteger()||t.isFinite()&amp;&amp;!t.isInteger())throw new Error(&quot;Integers expected in function bitAnd&quot;);var r=e.constructor;if(e.isNaN()||t.isNaN())return new r(NaN);if(e.isZero()||t.eq(-1)||e.eq(t))return e;if(t.isZero()||e.eq(-1))return t;if(!e.isFinite()||!t.isFinite()){if(!e.isFinite()&amp;&amp;!t.isFinite())return e.isNegative()===t.isNegative()?e:new r(0);if(!e.isFinite())return t.isNegative()?e:e.isNegative()?new r(0):t;if(!t.isFinite())return e.isNegative()?t:t.isNegative()?new r(0):e}return Ao(e,t,(function(e,t){return e&amp;t}))}function Do(e){if(e.isFinite()&amp;&amp;!e.isInteger())throw new Error(&quot;Integer expected in function bitNot&quot;);var t=e.constructor,r=t.precision;t.config({precision:1e9});var n=e.plus(new t(1));return n.s=-n.s||null,t.config({precision:r}),n}function Eo(e,t){if(e.isFinite()&amp;&amp;!e.isInteger()||t.isFinite()&amp;&amp;!t.isInteger())throw new Error(&quot;Integers expected in function bitOr&quot;);var r=e.constructor;if(e.isNaN()||t.isNaN())return new r(NaN);var n=new r(-1);return e.isZero()||t.eq(n)||e.eq(t)?t:t.isZero()||e.eq(n)?e:e.isFinite()&amp;&amp;t.isFinite()?Ao(e,t,(function(e,t){return e|t})):!e.isFinite()&amp;&amp;!e.isNegative()&amp;&amp;t.isNegative()||e.isNegative()&amp;&amp;!t.isNegative()&amp;&amp;!t.isFinite()?n:e.isNegative()&amp;&amp;t.isNegative()?e.isFinite()?e:t:e.isFinite()?t:e}function Ao(e,t,r){var n,i,a,o,u,s=e.constructor,c=+(e.s&lt;0),f=+(t.s&lt;0);if(c){n=So(Do(e));for(var l=0;l&lt;n.length;++l)n[l]^=1}else n=So(e);if(f){i=So(Do(t));for(var p=0;p&lt;i.length;++p)i[p]^=1}else i=So(t);n.length&lt;=i.length?(a=n,o=i,u=c):(a=i,o=n,u=f);var m=a.length,h=o.length,d=1^r(c,f),v=new s(1^d),y=new s(1),g=new s(2),x=s.precision;for(s.config({precision:1e9});m&gt;0;)r(a[--m],o[--h])===d&amp;&amp;(v=v.plus(y)),y=y.times(g);for(;h&gt;0;)r(u,o[--h])===d&amp;&amp;(v=v.plus(y)),y=y.times(g);return s.config({precision:x}),0===d&amp;&amp;(v.s=-v.s),v}function So(e){for(var t=e.d,r=t[0]+&quot;&quot;,n=1;n&lt;t.length;++n){for(var i=t[n]+&quot;&quot;,a=7-i.length;a--;)i=&quot;0&quot;+i;r+=i}for(var o=r.length;&quot;0&quot;===r.charAt(o);)o--;var u=e.e,s=r.slice(0,o+1||1),c=s.length;if(u&gt;0)if(++u&gt;c)for(u-=c;u--;)s+=&quot;0&quot;;else u&lt;c&amp;&amp;(s=s.slice(0,u)+&quot;.&quot;+s.slice(u));for(var f=[0],l=0;l&lt;s.length;){for(var p=f.length;p--;)f[p]*=10;f[0]+=parseInt(s.charAt(l++));for(var m=0;m&lt;f.length;++m)f[m]&gt;1&amp;&amp;(null!==f[m+1]&amp;&amp;void 0!==f[m+1]||(f[m+1]=0),f[m+1]+=f[m]&gt;&gt;1,f[m]&amp;=1)}return f.reverse()}function Co(e,t){if(e.isFinite()&amp;&amp;!e.isInteger()||t.isFinite()&amp;&amp;!t.isInteger())throw new Error(&quot;Integers expected in function bitXor&quot;);var r=e.constructor;if(e.isNaN()||t.isNaN())return new r(NaN);if(e.isZero())return t;if(t.isZero())return e;if(e.eq(t))return new r(0);var n=new r(-1);return e.eq(n)?Do(t):t.eq(n)?Do(e):e.isFinite()&amp;&amp;t.isFinite()?Ao(e,t,(function(e,t){return e^t})):e.isFinite()||t.isFinite()?new r(e.isNegative()===t.isNegative()?1/0:-1/0):n}function Mo(e,t){if(e.isFinite()&amp;&amp;!e.isInteger()||t.isFinite()&amp;&amp;!t.isInteger())throw new Error(&quot;Integers expected in function leftShift&quot;);var r=e.constructor;return e.isNaN()||t.isNaN()||t.isNegative()&amp;&amp;!t.isZero()?new r(NaN):e.isZero()||t.isZero()?e:e.isFinite()||t.isFinite()?t.lt(55)?e.times(Math.pow(2,t.toNumber())+&quot;&quot;):e.times(new r(2).pow(t)):new r(NaN)}function Fo(e,t){if(e.isFinite()&amp;&amp;!e.isInteger()||t.isFinite()&amp;&amp;!t.isInteger())throw new Error(&quot;Integers expected in function rightArithShift&quot;);var r=e.constructor;return e.isNaN()||t.isNaN()||t.isNegative()&amp;&amp;!t.isZero()?new r(NaN):e.isZero()||t.isZero()?e:t.isFinite()?t.lt(55)?e.div(Math.pow(2,t.toNumber())+&quot;&quot;).floor():e.div(new r(2).pow(t)).floor():e.isNegative()?new r(-1):e.isFinite()?new r(0):new r(NaN)}r(5069);var Oo=&quot;number, number&quot;;function To(e,t){if(!V(e)||!V(t))throw new Error(&quot;Integers expected in function bitAnd&quot;);return e&amp;t}function Bo(e){if(!V(e))throw new Error(&quot;Integer expected in function bitNot&quot;);return~e}function _o(e,t){if(!V(e)||!V(t))throw new Error(&quot;Integers expected in function bitOr&quot;);return e|t}function ko(e,t){if(!V(e)||!V(t))throw new Error(&quot;Integers expected in function bitXor&quot;);return e^t}function Io(e,t){if(!V(e)||!V(t))throw new Error(&quot;Integers expected in function leftShift&quot;);return e&lt;&lt;t}function Ro(e,t){if(!V(e)||!V(t))throw new Error(&quot;Integers expected in function rightArithShift&quot;);return e&gt;&gt;t}function zo(e,t){if(!V(e)||!V(t))throw new Error(&quot;Integers expected in function rightLogShift&quot;);return e&gt;&gt;&gt;t}To.signature=Oo,Bo.signature=&quot;number&quot;,_o.signature=Oo,ko.signature=Oo,Io.signature=Oo,Ro.signature=Oo,zo.signature=Oo;var qo=&quot;bitAnd&quot;,jo=Ee(qo,[&quot;typed&quot;,&quot;matrix&quot;,&quot;equalScalar&quot;,&quot;concat&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.equalScalar,i=e.concat,a=Va({typed:t,equalScalar:n}),o=Za({typed:t,equalScalar:n}),u=pa({typed:t,equalScalar:n}),s=ja({typed:t,matrix:r,concat:i});return t(qo,{&quot;number, number&quot;:To,&quot;BigNumber, BigNumber&quot;:No},s({SS:o,DS:a,Ss:u}))})),Po=&quot;bitNot&quot;,Lo=Ee(Po,[&quot;typed&quot;],(function(e){var t=e.typed;return t(Po,{number:Bo,BigNumber:Do,&quot;Array | Matrix&quot;:t.referToSelf((function(e){return function(t){return _n(t,e)}}))})})),Uo=&quot;bitOr&quot;,$o=Ee(Uo,[&quot;typed&quot;,&quot;matrix&quot;,&quot;equalScalar&quot;,&quot;DenseMatrix&quot;,&quot;concat&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.equalScalar,i=e.DenseMatrix,a=e.concat,o=ka({typed:t}),u=Ia({typed:t,equalScalar:n}),s=Ra({typed:t,DenseMatrix:i}),c=ja({typed:t,matrix:r,concat:a});return t(Uo,{&quot;number, number&quot;:_o,&quot;BigNumber, BigNumber&quot;:Eo},c({SS:u,DS:o,Ss:s}))})),Ho=Ee(&quot;matAlgo07xSSf&quot;,[&quot;typed&quot;,&quot;DenseMatrix&quot;],(function(e){var t=e.typed,r=e.DenseMatrix;return function(e,i,a){var o=e._size,u=e._datatype,s=i._size,c=i._datatype;if(o.length!==s.length)throw new Xr(o.length,s.length);if(o[0]!==s[0]||o[1]!==s[1])throw new RangeError(&quot;Dimension mismatch. Matrix A (&quot;+o+&quot;) must match Matrix B (&quot;+s+&quot;)&quot;);var f,l,p,m=o[0],h=o[1],d=0,v=a;&quot;string&quot;==typeof u&amp;&amp;u===c&amp;&amp;(f=u,d=t.convert(0,f),v=t.find(a,[f,f]));var y=[];for(l=0;l&lt;m;l++)y[l]=[];var g=[],x=[],b=[],w=[];for(p=0;p&lt;h;p++){var N=p+1;for(n(e,p,b,g,N),n(i,p,w,x,N),l=0;l&lt;m;l++){var D=b[l]===N?g[l]:d,E=w[l]===N?x[l]:d;y[l][p]=v(D,E)}}return new r({data:y,size:[m,h],datatype:f})};function n(e,t,r,n,i){for(var a=e._values,o=e._index,u=e._ptr,s=u[t],c=u[t+1];s&lt;c;s++){var f=o[s];r[f]=i,n[f]=a[s]}}})),Go=&quot;bitXor&quot;,Vo=Ee(Go,[&quot;typed&quot;,&quot;matrix&quot;,&quot;DenseMatrix&quot;,&quot;concat&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.DenseMatrix,i=e.concat,a=Ka({typed:t}),o=Ho({typed:t,DenseMatrix:n}),u=ma({typed:t,DenseMatrix:n}),s=ja({typed:t,matrix:r,concat:i});return t(Go,{&quot;number, number&quot;:ko,&quot;BigNumber, BigNumber&quot;:Co},s({SS:o,DS:a,Ss:u}))})),Zo=Ee(&quot;arg&quot;,[&quot;typed&quot;],(function(e){var t=e.typed;return t(&quot;arg&quot;,{number:function(e){return Math.atan2(0,e)},BigNumber:function(e){return e.constructor.atan2(0,e)},Complex:function(e){return e.arg()},&quot;Array | Matrix&quot;:t.referToSelf((function(e){return function(t){return _n(t,e)}}))})})),Wo=&quot;conj&quot;,Yo=Ee(Wo,[&quot;typed&quot;],(function(e){var t=e.typed;return t(Wo,{&quot;number | BigNumber | Fraction&quot;:function(e){return e},Complex:function(e){return e.conjugate()},&quot;Array | Matrix&quot;:t.referToSelf((function(e){return function(t){return _n(t,e)}}))})})),Jo=Ee(&quot;im&quot;,[&quot;typed&quot;],(function(e){var t=e.typed;return t(&quot;im&quot;,{number:function(){return 0},&quot;BigNumber | Fraction&quot;:function(e){return e.mul(0)},Complex:function(e){return e.im},&quot;Array | Matrix&quot;:t.referToSelf((function(e){return function(t){return _n(t,e)}}))})})),Xo=Ee(&quot;re&quot;,[&quot;typed&quot;],(function(e){var t=e.typed;return t(&quot;re&quot;,{&quot;number | BigNumber | Fraction&quot;:function(e){return e},Complex:function(e){return e.re},&quot;Array | Matrix&quot;:t.referToSelf((function(e){return function(t){return _n(t,e)}}))})})),Qo=&quot;number, number&quot;;function Ko(e){return!e}function eu(e,t){return!(!e&amp;&amp;!t)}function tu(e,t){return!!e!=!!t}function ru(e,t){return!(!e||!t)}Ko.signature=&quot;number&quot;,eu.signature=Qo,tu.signature=Qo,ru.signature=Qo;var nu=Ee(&quot;not&quot;,[&quot;typed&quot;],(function(e){var t=e.typed;return t(&quot;not&quot;,{&quot;null | undefined&quot;:function(){return!0},number:Ko,Complex:function(e){return 0===e.re&amp;&amp;0===e.im},BigNumber:function(e){return e.isZero()||e.isNaN()},Unit:t.referToSelf((function(e){return function(r){return t.find(e,r.valueType())(r.value)}})),&quot;Array | Matrix&quot;:t.referToSelf((function(e){return function(t){return _n(t,e)}}))})})),iu=Ee(&quot;or&quot;,[&quot;typed&quot;,&quot;matrix&quot;,&quot;equalScalar&quot;,&quot;DenseMatrix&quot;,&quot;concat&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.equalScalar,i=e.DenseMatrix,a=e.concat,o=Ka({typed:t}),u=eo({typed:t,equalScalar:n}),s=ma({typed:t,DenseMatrix:i}),c=ja({typed:t,matrix:r,concat:a});return t(&quot;or&quot;,{&quot;number, number&quot;:eu,&quot;Complex, Complex&quot;:function(e,t){return 0!==e.re||0!==e.im||0!==t.re||0!==t.im},&quot;BigNumber, BigNumber&quot;:function(e,t){return!e.isZero()&amp;&amp;!e.isNaN()||!t.isZero()&amp;&amp;!t.isNaN()},&quot;Unit, Unit&quot;:t.referToSelf((function(e){return function(t,r){return e(t.value||0,r.value||0)}}))},c({SS:u,DS:o,Ss:s}))})),au=Ee(&quot;xor&quot;,[&quot;typed&quot;,&quot;matrix&quot;,&quot;DenseMatrix&quot;,&quot;concat&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.DenseMatrix,i=e.concat,a=Ka({typed:t}),o=Ho({typed:t,DenseMatrix:n}),u=ma({typed:t,DenseMatrix:n}),s=ja({typed:t,matrix:r,concat:i});return t(&quot;xor&quot;,{&quot;number, number&quot;:tu,&quot;Complex, Complex&quot;:function(e,t){return(0!==e.re||0!==e.im)!=(0!==t.re||0!==t.im)},&quot;BigNumber, BigNumber&quot;:function(e,t){return(!e.isZero()&amp;&amp;!e.isNaN())!=(!t.isZero()&amp;&amp;!t.isNaN())},&quot;Unit, Unit&quot;:t.referToSelf((function(e){return function(t,r){return e(t.value||0,r.value||0)}}))},s({SS:o,DS:a,Ss:u}))})),ou=&quot;concat&quot;,uu=Ee(ou,[&quot;typed&quot;,&quot;matrix&quot;,&quot;isInteger&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.isInteger;return t(ou,{&quot;...Array | Matrix | number | BigNumber&quot;:function(e){var t,o,u=e.length,s=-1,c=!1,f=[];for(t=0;t&lt;u;t++){var p=e[t];if(l(p)&amp;&amp;(c=!0),i(p)||a(p)){if(t!==u-1)throw new Error(&quot;Dimension must be specified as last argument&quot;);if(o=s,s=p.valueOf(),!n(s))throw new TypeError(&quot;Integer number expected for dimension&quot;);if(s&lt;0||t&gt;0&amp;&amp;s&gt;o)throw new Qr(s,o+1)}else{var m=he(p).valueOf(),h=Kr(m);if(f[t]=m,o=s,s=h.length-1,t&gt;0&amp;&amp;s!==o)throw new Xr(o+1,s+1)}}if(0===f.length)throw new SyntaxError(&quot;At least one matrix expected&quot;);for(var d=f.shift();f.length;)d=su(d,f.shift(),s,0);return c?r(d):d},&quot;...string&quot;:function(e){return e.join(&quot;&quot;)}})}));function su(e,t,r,n){if(n&lt;r){if(e.length!==t.length)throw new Xr(e.length,t.length);for(var i=[],a=0;a&lt;e.length;a++)i[a]=su(e[a],t[a],r,n+1);return i}return e.concat(t)}var cu=&quot;column&quot;,fu=Ee(cu,[&quot;typed&quot;,&quot;Index&quot;,&quot;matrix&quot;,&quot;range&quot;],(function(e){var t=e.typed,r=e.Index,n=e.matrix,i=e.range;return t(cu,{&quot;Matrix, number&quot;:a,&quot;Array, number&quot;:function(e,t){return a(n(he(e)),t).valueOf()}});function a(e,t){if(2!==e.size().length)throw new Error(&quot;Only two dimensional matrix is supported&quot;);rn(t,e.size()[1]);var a=i(0,e.size()[0]),o=new r(a,t),u=e.subset(o);return l(u)?u:n([[u]])}})),lu=&quot;count&quot;,pu=Ee(lu,[&quot;typed&quot;,&quot;size&quot;,&quot;prod&quot;],(function(e){var t=e.typed,r=e.size,n=e.prod;return t(lu,{string:function(e){return e.length},&quot;Matrix | Array&quot;:function(e){return n(r(e))}})})),mu=&quot;cross&quot;,hu=Ee(mu,[&quot;typed&quot;,&quot;matrix&quot;,&quot;subtract&quot;,&quot;multiply&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.subtract,i=e.multiply;return t(mu,{&quot;Matrix, Matrix&quot;:function(e,t){return r(a(e.toArray(),t.toArray()))},&quot;Matrix, Array&quot;:function(e,t){return r(a(e.toArray(),t))},&quot;Array, Matrix&quot;:function(e,t){return r(a(e,t.toArray()))},&quot;Array, Array&quot;:a});function a(e,t){var r=Math.max(Kr(e).length,Kr(t).length);e=cn(e),t=cn(t);var a=Kr(e),o=Kr(t);if(1!==a.length||1!==o.length||3!==a[0]||3!==o[0])throw new RangeError(&quot;Vectors with length 3 expected (Size A = [&quot;+a.join(&quot;, &quot;)+&quot;], B = [&quot;+o.join(&quot;, &quot;)+&quot;])&quot;);var u=[n(i(e[1],t[2]),i(e[2],t[1])),n(i(e[2],t[0]),i(e[0],t[2])),n(i(e[0],t[1]),i(e[1],t[0]))];return r&gt;1?[u]:u}})),du=&quot;diag&quot;,vu=Ee(du,[&quot;typed&quot;,&quot;matrix&quot;,&quot;DenseMatrix&quot;,&quot;SparseMatrix&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.DenseMatrix,i=e.SparseMatrix;return t(du,{Array:function(e){return a(e,0,Kr(e),null)},&quot;Array, number&quot;:function(e,t){return a(e,t,Kr(e),null)},&quot;Array, BigNumber&quot;:function(e,t){return a(e,t.toNumber(),Kr(e),null)},&quot;Array, string&quot;:function(e,t){return a(e,0,Kr(e),t)},&quot;Array, number, string&quot;:function(e,t,r){return a(e,t,Kr(e),r)},&quot;Array, BigNumber, string&quot;:function(e,t,r){return a(e,t.toNumber(),Kr(e),r)},Matrix:function(e){return a(e,0,e.size(),e.storage())},&quot;Matrix, number&quot;:function(e,t){return a(e,t,e.size(),e.storage())},&quot;Matrix, BigNumber&quot;:function(e,t){return a(e,t.toNumber(),e.size(),e.storage())},&quot;Matrix, string&quot;:function(e,t){return a(e,0,e.size(),t)},&quot;Matrix, number, string&quot;:function(e,t,r){return a(e,t,e.size(),r)},&quot;Matrix, BigNumber, string&quot;:function(e,t,r){return a(e,t.toNumber(),e.size(),r)}});function a(e,t,a,o){if(!V(t))throw new TypeError(&quot;Second parameter in function diag must be an integer&quot;);var u=t&gt;0?t:0,s=t&lt;0?-t:0;switch(a.length){case 1:return function(e,t,r,a,o,u){var s=[a+o,a+u];if(r&amp;&amp;&quot;sparse&quot;!==r&amp;&amp;&quot;dense&quot;!==r)throw new TypeError(&quot;Unknown matrix type &quot;.concat(r,'&quot;'));var c=&quot;sparse&quot;===r?i.diagonal(s,e,t):n.diagonal(s,e,t);return null!==r?c:c.valueOf()}(e,t,o,a[0],s,u);case 2:return function(e,t,n,i,a,o){if(l(e)){var u=e.diagonal(t);return null!==n?n!==u.storage()?r(u,n):u:u.valueOf()}for(var s=Math.min(i[0]-a,i[1]-o),c=[],f=0;f&lt;s;f++)c[f]=e[f+a][f+o];return null!==n?r(c):c}(e,t,o,a,s,u)}throw new RangeError(&quot;Matrix for function diag must be 2 dimensional&quot;)}}));function yu(e,t,r,n,i){if(G.isTypedFunction(e)){var a=[t,r,n],o=G.resolve(e,a);if(o)return l(o.implementation,a);var u=[t,r],s=G.resolve(e,u);if(s)return l(s.implementation,u);var c=[t],f=G.resolve(e,c);return f?l(f.implementation,c):l(e,a)}return e(t,r,n);function l(a,o){try{return a.apply(a,o)}catch(a){var u;if(a instanceof TypeError&amp;&amp;&quot;wrongType&quot;===(null===(u=a.data)||void 0===u?void 0:u.category)){var s=[];throw s.push(&quot;value: &quot;.concat(H(t))),o.length&gt;=2&amp;&amp;s.push(&quot;index: &quot;.concat(H(r))),o.length&gt;=3&amp;&amp;s.push(&quot;array: &quot;.concat(H(n))),new TypeError(&quot;Function &quot;.concat(i,&quot; cannot apply callback arguments &quot;)+&quot;&quot;.concat(e.name,&quot;(&quot;).concat(s.join(&quot;, &quot;),&quot;) at index &quot;).concat(JSON.stringify(r)))}throw new TypeError(&quot;Function &quot;.concat(i,&quot; cannot apply callback arguments &quot;)+&quot;to function &quot;.concat(e.name,&quot;: &quot;).concat(a.message))}}}var gu=Ee(&quot;filter&quot;,[&quot;typed&quot;],(function(e){return(0,e.typed)(&quot;filter&quot;,{&quot;Array, function&quot;:xu,&quot;Matrix, function&quot;:function(e,t){return e.create(xu(e.toArray(),t))},&quot;Array, RegExp&quot;:yn,&quot;Matrix, RegExp&quot;:function(e,t){return e.create(yn(e.toArray(),t))}})}));function xu(e,t){return vn(e,(function(e,r,n){return yu(t,e,[r],n,&quot;filter&quot;)}))}var bu=&quot;flatten&quot;,wu=Ee(bu,[&quot;typed&quot;,&quot;matrix&quot;],(function(e){var t=e.typed,r=e.matrix;return t(bu,{Array:function(e){return mn(e)},Matrix:function(e){var t=mn(e.toArray());return r(t)}})})),Nu=&quot;forEach&quot;,Du=Ee(Nu,[&quot;typed&quot;],(function(e){return(0,e.typed)(Nu,{&quot;Array, function&quot;:Eu,&quot;Matrix, function&quot;:function(e,t){e.forEach(t)}})}));function Eu(e,t){!function r(n,i){if(!Array.isArray(n))return yu(t,n,i,e,&quot;forEach&quot;);dn(n,(function(e,t){r(e,i.concat(t))}))}(e,[])}var Au=&quot;getMatrixDataType&quot;,Su=Ee(Au,[&quot;typed&quot;],(function(e){return(0,e.typed)(Au,{Array:function(e){return wn(e,H)},Matrix:function(e){return e.getDataType()}})})),Cu=&quot;identity&quot;,Mu=Ee(Cu,[&quot;typed&quot;,&quot;config&quot;,&quot;matrix&quot;,&quot;BigNumber&quot;,&quot;DenseMatrix&quot;,&quot;SparseMatrix&quot;],(function(e){var t=e.typed,r=e.config,n=e.matrix,i=e.BigNumber,o=e.DenseMatrix,u=e.SparseMatrix;return t(Cu,{&quot;&quot;:function(){return&quot;Matrix&quot;===r.matrix?n([]):[]},string:function(e){return n(e)},&quot;number | BigNumber&quot;:function(e){return c(e,e,&quot;Matrix&quot;===r.matrix?&quot;dense&quot;:void 0)},&quot;number | BigNumber, string&quot;:function(e,t){return c(e,e,t)},&quot;number | BigNumber, number | BigNumber&quot;:function(e,t){return c(e,t,&quot;Matrix&quot;===r.matrix?&quot;dense&quot;:void 0)},&quot;number | BigNumber, number | BigNumber, string&quot;:function(e,t,r){return c(e,t,r)},Array:function(e){return s(e)},&quot;Array, string&quot;:function(e,t){return s(e,t)},Matrix:function(e){return s(e.valueOf(),e.storage())},&quot;Matrix, string&quot;:function(e,t){return s(e.valueOf(),t)}});function s(e,t){switch(e.length){case 0:return t?n(t):[];case 1:return c(e[0],e[0],t);case 2:return c(e[0],e[1],t);default:throw new Error(&quot;Vector containing two values expected&quot;)}}function c(e,t,r){var n=a(e)||a(t)?i:null;if(a(e)&amp;&amp;(e=e.toNumber()),a(t)&amp;&amp;(t=t.toNumber()),!V(e)||e&lt;1)throw new Error(&quot;Parameters in function identity must be positive integers&quot;);if(!V(t)||t&lt;1)throw new Error(&quot;Parameters in function identity must be positive integers&quot;);var s=n?new i(1):1,c=n?new n(0):0,f=[e,t];if(r){if(&quot;sparse&quot;===r)return u.diagonal(f,s,0,c);if(&quot;dense&quot;===r)return o.diagonal(f,s,0,c);throw new TypeError('Unknown matrix type &quot;'.concat(r,'&quot;'))}for(var l=nn([],f,c),p=e&lt;t?e:t,m=0;m&lt;p;m++)l[m][m]=s;return l}})),Fu=&quot;kron&quot;,Ou=Ee(Fu,[&quot;typed&quot;,&quot;matrix&quot;,&quot;multiplyScalar&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.multiplyScalar;return t(Fu,{&quot;Matrix, Matrix&quot;:function(e,t){return r(i(e.toArray(),t.toArray()))},&quot;Matrix, Array&quot;:function(e,t){return r(i(e.toArray(),t))},&quot;Array, Matrix&quot;:function(e,t){return r(i(e,t.toArray()))},&quot;Array, Array&quot;:i});function i(e,t){if(1===Kr(e).length&amp;&amp;(e=[e]),1===Kr(t).length&amp;&amp;(t=[t]),Kr(e).length&gt;2||Kr(t).length&gt;2)throw new RangeError(&quot;Vectors with dimensions greater then 2 are not supported expected (Size x = &quot;+JSON.stringify(e.length)+&quot;, y = &quot;+JSON.stringify(t.length)+&quot;)&quot;);var r=[],i=[];return e.map((function(e){return t.map((function(t){return i=[],r.push(i),e.map((function(e){return t.map((function(t){return i.push(n(e,t))}))}))}))}))&amp;&amp;r}})),Tu=Ee(&quot;map&quot;,[&quot;typed&quot;],(function(e){return(0,e.typed)(&quot;map&quot;,{&quot;Array, function&quot;:Bu,&quot;Matrix, function&quot;:function(e,t){return e.map(t)}})}));function Bu(e,t){return function r(n,i){return Array.isArray(n)?n.map((function(e,t){return r(e,i.concat(t))})):yu(t,n,i,e,&quot;map&quot;)}(e,[])}var _u=&quot;diff&quot;,ku=Ee(_u,[&quot;typed&quot;,&quot;matrix&quot;,&quot;subtract&quot;,&quot;number&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.subtract,i=e.number;return t(_u,{&quot;Array | Matrix&quot;:function(e){return l(e)?r(o(e.toArray())):o(e)},&quot;Array | Matrix, number&quot;:function(e,t){if(!V(t))throw new RangeError(&quot;Dimension must be a whole number&quot;);return l(e)?r(a(e.toArray(),t)):a(e,t)},&quot;Array, BigNumber&quot;:t.referTo(&quot;Array,number&quot;,(function(e){return function(t,r){return e(t,i(r))}})),&quot;Matrix, BigNumber&quot;:t.referTo(&quot;Matrix,number&quot;,(function(e){return function(t,r){return e(t,i(r))}}))});function a(e,t){if(l(e)&amp;&amp;(e=e.toArray()),!Array.isArray(e))throw RangeError(&quot;Array/Matrix does not have that many dimensions&quot;);if(t&gt;0){var r=[];return e.forEach((function(e){r.push(a(e,t-1))})),r}if(0===t)return o(e);throw RangeError(&quot;Cannot have negative dimension&quot;)}function o(e){for(var t=[],r=e.length,n=1;n&lt;r;n++)t.push(u(e[n-1],e[n]));return t}function u(e,t){l(e)&amp;&amp;(e=e.toArray()),l(t)&amp;&amp;(t=t.toArray());var r=Array.isArray(e),i=Array.isArray(t);if(r&amp;&amp;i)return function(e,t){if(e.length!==t.length)throw RangeError(&quot;Not all sub-arrays have the same length&quot;);for(var r=[],n=e.length,i=0;i&lt;n;i++)r.push(u(e[i],t[i]));return r}(e,t);if(!r&amp;&amp;!i)return n(t,e);throw TypeError(&quot;Cannot calculate difference between 1 array and 1 non-array&quot;)}})),Iu=Ee(&quot;ones&quot;,[&quot;typed&quot;,&quot;config&quot;,&quot;matrix&quot;,&quot;BigNumber&quot;],(function(e){var t=e.typed,r=e.config,n=e.matrix,i=e.BigNumber;return t(&quot;ones&quot;,{&quot;&quot;:function(){return&quot;Array&quot;===r.matrix?o([]):o([],&quot;default&quot;)},&quot;...number | BigNumber | string&quot;:function(e){if(&quot;string&quot;==typeof e[e.length-1]){var t=e.pop();return o(e,t)}return&quot;Array&quot;===r.matrix?o(e):o(e,&quot;default&quot;)},Array:o,Matrix:function(e){var t=e.storage();return o(e.valueOf(),t)},&quot;Array | Matrix, string&quot;:function(e,t){return o(e.valueOf(),t)}});function o(e,t){var r=function(e){var t=!1;return e.forEach((function(e,r,n){a(e)&amp;&amp;(t=!0,n[r]=e.toNumber())})),t}(e),o=r?new i(1):1;if(function(e){e.forEach((function(e){if(&quot;number&quot;!=typeof e||!V(e)||e&lt;0)throw new Error(&quot;Parameters in function ones must be positive integers&quot;)}))}(e),t){var u=n(t);return e.length&gt;0?u.resize(e,o):u}var s=[];return e.length&gt;0?nn(s,e,o):s}}));function Ru(){throw new Error('No &quot;bignumber&quot; implementation available')}function zu(){throw new Error('No &quot;fraction&quot; implementation available')}function qu(){throw new Error('No &quot;matrix&quot; implementation available')}var ju=&quot;range&quot;,Pu=Ee(ju,[&quot;typed&quot;,&quot;config&quot;,&quot;?matrix&quot;,&quot;?bignumber&quot;,&quot;smaller&quot;,&quot;smallerEq&quot;,&quot;larger&quot;,&quot;largerEq&quot;,&quot;add&quot;,&quot;isPositive&quot;],(function(e){var t=e.typed,r=e.config,n=e.matrix,i=e.bignumber,a=e.smaller,o=e.smallerEq,u=e.larger,s=e.largerEq,c=e.add,f=e.isPositive;return t(ju,{string:p,&quot;string, boolean&quot;:p,&quot;number, number&quot;:function(e,t){return l(m(e,t,1,!1))},&quot;number, number, number&quot;:function(e,t,r){return l(m(e,t,r,!1))},&quot;number, number, boolean&quot;:function(e,t,r){return l(m(e,t,1,r))},&quot;number, number, number, boolean&quot;:function(e,t,r,n){return l(m(e,t,r,n))},&quot;BigNumber, BigNumber&quot;:function(e,t){return l(m(e,t,new(0,e.constructor)(1),!1))},&quot;BigNumber, BigNumber, BigNumber&quot;:function(e,t,r){return l(m(e,t,r,!1))},&quot;BigNumber, BigNumber, boolean&quot;:function(e,t,r){return l(m(e,t,new(0,e.constructor)(1),r))},&quot;BigNumber, BigNumber, BigNumber, boolean&quot;:function(e,t,r,n){return l(m(e,t,r,n))},&quot;Unit, Unit, Unit&quot;:function(e,t,r){return l(m(e,t,r,!1))},&quot;Unit, Unit, Unit, boolean&quot;:function(e,t,r,n){return l(m(e,t,r,n))}});function l(e){return&quot;Matrix&quot;===r.matrix?n?n(e):qu():e}function p(e,t){var n=function(e){var t=e.split(&quot;:&quot;).map((function(e){return Number(e)}));if(t.some((function(e){return isNaN(e)})))return null;switch(t.length){case 2:return{start:t[0],end:t[1],step:1};case 3:return{start:t[0],end:t[2],step:t[1]};default:return null}}(e);if(!n)throw new SyntaxError('String &quot;'+e+'&quot; is no valid range');return&quot;BigNumber&quot;===r.number?(void 0===i&amp;&amp;Ru(),l(m(i(n.start),i(n.end),i(n.step)))):l(m(n.start,n.end,n.step,t))}function m(e,t,r,n){for(var i=[],l=f(r)?n?o:a:n?s:u,p=e;l(p,t);)i.push(p),p=c(p,r);return i}})),Lu=&quot;reshape&quot;,Uu=Ee(Lu,[&quot;typed&quot;,&quot;isInteger&quot;,&quot;matrix&quot;],(function(e){var t=e.typed,r=e.isInteger;return t(Lu,{&quot;Matrix, Array&quot;:function(e,t){return e.reshape(t,!0)},&quot;Array, Array&quot;:function(e,t){return t.forEach((function(e){if(!r(e))throw new TypeError(&quot;Invalid size for dimension: &quot;+e)})),on(e,t)}})})),$u=Ee(&quot;resize&quot;,[&quot;config&quot;,&quot;matrix&quot;],(function(e){var t=e.config,r=e.matrix;return function(e,n,i){if(2!==arguments.length&amp;&amp;3!==arguments.length)throw new Pa(&quot;resize&quot;,arguments.length,2,3);if(l(n)&amp;&amp;(n=n.valueOf()),a(n[0])&amp;&amp;(n=n.map((function(e){return a(e)?e.toNumber():e}))),l(e))return e.resize(n,i,!0);if(&quot;string&quot;==typeof e)return function(e,t,r){if(void 0!==r){if(&quot;string&quot;!=typeof r||1!==r.length)throw new TypeError(&quot;Single character expected as defaultValue&quot;)}else r=&quot; &quot;;if(1!==t.length)throw new Xr(t.length,1);var n=t[0];if(&quot;number&quot;!=typeof n||!V(n))throw new TypeError(&quot;Invalid size, must contain positive integers (size: &quot;+Vr(t)+&quot;)&quot;);if(e.length&gt;n)return e.substring(0,n);if(e.length&lt;n){for(var i=e,a=0,o=n-e.length;a&lt;o;a++)i+=r;return i}return e}(e,n,i);var o=!Array.isArray(e)&amp;&amp;&quot;Array&quot;!==t.matrix;if(0===n.length){for(;Array.isArray(e);)e=e[0];return he(e)}Array.isArray(e)||(e=[e]);var u=nn(e=he(e),n,i);return o?r(u):u}})),Hu=&quot;rotate&quot;,Gu=Ee(Hu,[&quot;typed&quot;,&quot;multiply&quot;,&quot;rotationMatrix&quot;],(function(e){var t=e.typed,r=e.multiply,n=e.rotationMatrix;return t(Hu,{&quot;Array , number | BigNumber | Complex | Unit&quot;:function(e,t){return i(e,2),r(n(t),e).toArray()},&quot;Matrix , number | BigNumber | Complex | Unit&quot;:function(e,t){return i(e,2),r(n(t),e)},&quot;Array, number | BigNumber | Complex | Unit, Array | Matrix&quot;:function(e,t,a){return i(e,3),r(n(t,a),e)},&quot;Matrix, number | BigNumber | Complex | Unit, Array | Matrix&quot;:function(e,t,a){return i(e,3),r(n(t,a),e)}});function i(e,t){var r=Array.isArray(e)?Kr(e):e.size();if(r.length&gt;2)throw new RangeError(&quot;Vector must be of dimensions 1x&quot;.concat(t));if(2===r.length&amp;&amp;1!==r[1])throw new RangeError(&quot;Vector must be of dimensions 1x&quot;.concat(t));if(r[0]!==t)throw new RangeError(&quot;Vector must be of dimensions 1x&quot;.concat(t))}})),Vu=&quot;rotationMatrix&quot;,Zu=Ee(Vu,[&quot;typed&quot;,&quot;config&quot;,&quot;multiplyScalar&quot;,&quot;addScalar&quot;,&quot;unaryMinus&quot;,&quot;norm&quot;,&quot;matrix&quot;,&quot;BigNumber&quot;,&quot;DenseMatrix&quot;,&quot;SparseMatrix&quot;,&quot;cos&quot;,&quot;sin&quot;],(function(e){var t=e.typed,r=e.config,n=e.multiplyScalar,i=e.addScalar,o=e.unaryMinus,u=e.norm,s=e.BigNumber,c=e.matrix,f=e.DenseMatrix,l=e.SparseMatrix,p=e.cos,m=e.sin;return t(Vu,{&quot;&quot;:function(){return&quot;Matrix&quot;===r.matrix?c([]):[]},string:function(e){return c(e)},&quot;number | BigNumber | Complex | Unit&quot;:function(e){return h(e,&quot;Matrix&quot;===r.matrix?&quot;dense&quot;:void 0)},&quot;number | BigNumber | Complex | Unit, string&quot;:function(e,t){return h(e,t)},&quot;number | BigNumber | Complex | Unit, Array&quot;:function(e,t){var r=c(t);return d(r),g(e,r,void 0)},&quot;number | BigNumber | Complex | Unit, Matrix&quot;:function(e,t){d(t);var n=t.storage()||(&quot;Matrix&quot;===r.matrix?&quot;dense&quot;:void 0);return g(e,t,n)},&quot;number | BigNumber | Complex | Unit, Array, string&quot;:function(e,t,r){var n=c(t);return d(n),g(e,n,r)},&quot;number | BigNumber | Complex | Unit, Matrix, string&quot;:function(e,t,r){return d(t),g(e,t,r)}});function h(e,t){var r=a(e)?new s(-1):-1,i=p(e),o=m(e);return y([[i,n(r,o)],[o,i]],t)}function d(e){var t=e.size();if(t.length&lt;1||3!==t[0])throw new RangeError(&quot;Vector must be of dimensions 1x3&quot;)}function v(e){return e.reduce((function(e,t){return n(e,t)}))}function y(e,t){if(t){if(&quot;sparse&quot;===t)return new l(e);if(&quot;dense&quot;===t)return new f(e);throw new TypeError('Unknown matrix type &quot;'.concat(t,'&quot;'))}return e}function g(e,t,r){var n=u(t);if(0===n)throw new RangeError(&quot;Rotation around zero vector&quot;);var c=a(e)?s:null,f=c?new c(1):1,l=c?new c(-1):-1,h=c?new c(t.get([0])/n):t.get([0])/n,d=c?new c(t.get([1])/n):t.get([1])/n,g=c?new c(t.get([2])/n):t.get([2])/n,x=p(e),b=i(f,o(x)),w=m(e);return y([[i(x,v([h,h,b])),i(v([h,d,b]),v([l,g,w])),i(v([h,g,b]),v([d,w]))],[i(v([h,d,b]),v([g,w])),i(x,v([d,d,b])),i(v([d,g,b]),v([l,h,w]))],[i(v([h,g,b]),v([l,d,w])),i(v([d,g,b]),v([h,w])),i(x,v([g,g,b]))]],r)}})),Wu=Ee(&quot;row&quot;,[&quot;typed&quot;,&quot;Index&quot;,&quot;matrix&quot;,&quot;range&quot;],(function(e){var t=e.typed,r=e.Index,n=e.matrix,i=e.range;return t(&quot;row&quot;,{&quot;Matrix, number&quot;:a,&quot;Array, number&quot;:function(e,t){return a(n(he(e)),t).valueOf()}});function a(e,t){if(2!==e.size().length)throw new Error(&quot;Only two dimensional matrix is supported&quot;);rn(t,e.size()[0]);var a=i(0,e.size()[1]),o=new r(t,a),u=e.subset(o);return l(u)?u:n([[u]])}})),Yu=&quot;size&quot;,Ju=Ee(Yu,[&quot;typed&quot;,&quot;config&quot;,&quot;?matrix&quot;],(function(e){var t=e.typed,r=e.config,n=e.matrix;return t(Yu,{Matrix:function(e){return e.create(e.size())},Array:Kr,string:function(e){return&quot;Array&quot;===r.matrix?[e.length]:n([e.length])},&quot;number | Complex | BigNumber | Unit | boolean | null&quot;:function(e){return&quot;Array&quot;===r.matrix?[]:n?n([]):qu()}})})),Xu=&quot;squeeze&quot;,Qu=Ee(Xu,[&quot;typed&quot;,&quot;matrix&quot;],(function(e){var t=e.typed,r=e.matrix;return t(Xu,{Array:function(e){return cn(he(e))},Matrix:function(e){var t=cn(e.toArray());return Array.isArray(t)?r(t):t},any:function(e){return he(e)}})})),Ku=&quot;subset&quot;,es=Ee(Ku,[&quot;typed&quot;,&quot;matrix&quot;],(function(e){var t=e.typed,r=e.matrix;return t(Ku,{&quot;Array, Index&quot;:function(e,t){var n=r(e).subset(t);return t.isScalar()?n:n.valueOf()},&quot;Matrix, Index&quot;:function(e,t){return e.subset(t)},&quot;Object, Index&quot;:ns,&quot;string, Index&quot;:ts,&quot;Array, Index, any&quot;:function(e,t,n){return r(he(e)).subset(t,n,void 0).valueOf()},&quot;Array, Index, any, any&quot;:function(e,t,n,i){return r(he(e)).subset(t,n,i).valueOf()},&quot;Matrix, Index, any&quot;:function(e,t,r){return e.clone().subset(t,r)},&quot;Matrix, Index, any, any&quot;:function(e,t,r,n){return e.clone().subset(t,r,n)},&quot;string, Index, string&quot;:rs,&quot;string, Index, string, string&quot;:rs,&quot;Object, Index, any&quot;:is})}));function ts(e,t){if(!v(t))throw new TypeError(&quot;Index expected&quot;);if(1!==t.size().length)throw new Xr(t.size().length,1);var r=e.length;rn(t.min()[0],r),rn(t.max()[0],r);var n=t.dimension(0),i=&quot;&quot;;return n.forEach((function(t){i+=e.charAt(t)})),i}function rs(e,t,r,n){if(!t||!0!==t.isIndex)throw new TypeError(&quot;Index expected&quot;);if(1!==t.size().length)throw new Xr(t.size().length,1);if(void 0!==n){if(&quot;string&quot;!=typeof n||1!==n.length)throw new TypeError(&quot;Single character expected as defaultValue&quot;)}else n=&quot; &quot;;var i=t.dimension(0);if(i.size()[0]!==r.length)throw new Xr(i.size()[0],r.length);var a=e.length;rn(t.min()[0]),rn(t.max()[0]);for(var o=[],u=0;u&lt;a;u++)o[u]=e.charAt(u);if(i.forEach((function(e,t){o[e]=r.charAt(t[0])})),o.length&gt;a)for(var s=a-1,c=o.length;s&lt;c;s++)o[s]||(o[s]=n);return o.join(&quot;&quot;)}function ns(e,t){if(1!==t.size().length)throw new Xr(t.size(),1);var r=t.dimension(0);if(&quot;string&quot;!=typeof r)throw new TypeError(&quot;String expected as index to retrieve an object property&quot;);return Te(e,r)}function is(e,t,r){if(1!==t.size().length)throw new Xr(t.size(),1);var n=t.dimension(0);if(&quot;string&quot;!=typeof n)throw new TypeError(&quot;String expected as index to retrieve an object property&quot;);var i=he(e);return Be(i,n,r),i}var as=&quot;transpose&quot;,os=Ee(as,[&quot;typed&quot;,&quot;matrix&quot;],(function(e){var t=e.typed,r=e.matrix;return t(as,{Array:function(e){return n(r(e)).valueOf()},Matrix:n,any:he});function n(e){var t,r=e.size();switch(r.length){case 1:t=e.clone();break;case 2:var n=r[0],i=r[1];if(0===i)throw new RangeError(&quot;Cannot transpose a 2D matrix with no columns (size: &quot;+Vr(r)+&quot;)&quot;);switch(e.storage()){case&quot;dense&quot;:t=function(e,t,r){for(var n,i=e._data,a=[],o=0;o&lt;r;o++){n=a[o]=[];for(var u=0;u&lt;t;u++)n[u]=he(i[u][o])}return e.createDenseMatrix({data:a,size:[r,t],datatype:e._datatype})}(e,n,i);break;case&quot;sparse&quot;:t=function(e,t,r){for(var n,i,a,o=e._values,u=e._index,s=e._ptr,c=o?[]:void 0,f=[],l=[],p=[],m=0;m&lt;t;m++)p[m]=0;for(n=0,i=u.length;n&lt;i;n++)p[u[n]]++;for(var h=0,d=0;d&lt;t;d++)l.push(h),h+=p[d],p[d]=l[d];for(l.push(h),a=0;a&lt;r;a++)for(var v=s[a],y=s[a+1],g=v;g&lt;y;g++){var x=p[u[g]]++;f[x]=a,o&amp;&amp;(c[x]=he(o[g]))}return e.createSparseMatrix({values:c,index:f,ptr:l,size:[r,t],datatype:e._datatype})}(e,n,i)}break;default:throw new RangeError(&quot;Matrix must be a vector or two dimensional (size: &quot;+Vr(r)+&quot;)&quot;)}return t}})),us=&quot;ctranspose&quot;,ss=Ee(us,[&quot;typed&quot;,&quot;transpose&quot;,&quot;conj&quot;],(function(e){var t=e.typed,r=e.transpose,n=e.conj;return t(us,{any:function(e){return n(r(e))}})})),cs=&quot;zeros&quot;,fs=Ee(cs,[&quot;typed&quot;,&quot;config&quot;,&quot;matrix&quot;,&quot;BigNumber&quot;],(function(e){var t=e.typed,r=e.config,n=e.matrix,i=e.BigNumber;return t(cs,{&quot;&quot;:function(){return&quot;Array&quot;===r.matrix?o([]):o([],&quot;default&quot;)},&quot;...number | BigNumber | string&quot;:function(e){if(&quot;string&quot;==typeof e[e.length-1]){var t=e.pop();return o(e,t)}return&quot;Array&quot;===r.matrix?o(e):o(e,&quot;default&quot;)},Array:o,Matrix:function(e){var t=e.storage();return o(e.valueOf(),t)},&quot;Array | Matrix, string&quot;:function(e,t){return o(e.valueOf(),t)}});function o(e,t){var r=function(e){var t=!1;return e.forEach((function(e,r,n){a(e)&amp;&amp;(t=!0,n[r]=e.toNumber())})),t}(e),o=r?new i(0):0;if(function(e){e.forEach((function(e){if(&quot;number&quot;!=typeof e||!V(e)||e&lt;0)throw new Error(&quot;Parameters in function zeros must be positive integers&quot;)}))}(e),t){var u=n(t);return e.length&gt;0?u.resize(e,o):u}var s=[];return e.length&gt;0?nn(s,e,o):s}})),ls=Ee(&quot;fft&quot;,[&quot;typed&quot;,&quot;matrix&quot;,&quot;addScalar&quot;,&quot;multiplyScalar&quot;,&quot;divideScalar&quot;,&quot;exp&quot;,&quot;tau&quot;,&quot;i&quot;,&quot;dotDivide&quot;,&quot;conj&quot;,&quot;pow&quot;,&quot;ceil&quot;,&quot;log2&quot;],(function(e){var t=e.typed,r=(e.matrix,e.addScalar),n=e.multiplyScalar,i=e.divideScalar,a=e.exp,o=e.tau,u=e.i,s=e.dotDivide,c=e.conj,f=e.pow,l=e.ceil,p=e.log2;return t(&quot;fft&quot;,{Array:m,Matrix:function(e){return e.create(m(e.toArray()))}});function m(e){var t=Kr(e);return 1===t.length?d(e,t[0]):h(e.map((function(e){return m(e,t.slice(1))})),0)}function h(e,t){var r=Kr(e);if(0!==t)return new Array(r[0]).fill(0).map((function(r,n){return h(e[n],t-1)}));if(1===r.length)return d(e);function n(e){var t=Kr(e);return new Array(t[1]).fill(0).map((function(r,n){return new Array(t[0]).fill(0).map((function(t,r){return e[r][n]}))}))}return n(h(n(e),1))}function d(e){var t=e.length;if(1===t)return[e[0]];if(t%2==0){for(var h=[].concat(_a(d(e.filter((function(e,t){return t%2==0})))),_a(d(e.filter((function(e,t){return t%2==1}))))),v=0;v&lt;t/2;v++){var y=h[v],g=n(h[v+t/2],a(n(n(o,u),i(-v,t))));h[v]=r(y,g),h[v+t/2]=r(y,n(-1,g))}return h}return function(e){for(var t=e.length,r=a(i(n(-1,n(u,o)),t)),h=[],v=1-t;v&lt;t;v++)h.push(f(r,i(f(v,2),2)));for(var y=f(2,l(p(t+t-1))),g=[].concat(_a(new Array(t).fill(0).map((function(r,i){return n(e[i],h[t-1+i])}))),_a(new Array(y-t).fill(0))),x=[].concat(_a(new Array(t+t-1).fill(0).map((function(e,t){return i(1,h[t])}))),_a(new Array(y-(t+t-1)).fill(0))),b=d(g),w=d(x),N=new Array(y).fill(0).map((function(e,t){return n(b[t],w[t])})),D=s(c(m(c(N))),y),E=[],A=t-1;A&lt;t+t-1;A++)E.push(n(D[A],h[A]));return E}(e)}})),ps=&quot;ifft&quot;,ms=Ee(ps,[&quot;typed&quot;,&quot;fft&quot;,&quot;dotDivide&quot;,&quot;conj&quot;],(function(e){var t=e.typed,r=e.fft,n=e.dotDivide,i=e.conj;return t(ps,{&quot;Array | Matrix&quot;:function(e){var t=l(e)?e.size():Kr(e);return n(i(r(i(e))),t.reduce((function(e,t){return e*t}),1))}})}));function hs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&amp;&amp;(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}r(5003),r(9337),r(3321);var ds=Ee(&quot;solveODE&quot;,[&quot;typed&quot;,&quot;add&quot;,&quot;subtract&quot;,&quot;multiply&quot;,&quot;divide&quot;,&quot;max&quot;,&quot;map&quot;,&quot;abs&quot;,&quot;isPositive&quot;,&quot;isNegative&quot;,&quot;larger&quot;,&quot;smaller&quot;,&quot;matrix&quot;,&quot;bignumber&quot;,&quot;unaryMinus&quot;],(function(e){var t=e.typed,r=e.add,n=e.subtract,o=e.multiply,u=e.divide,c=e.max,f=e.map,l=e.abs,p=e.isPositive,m=e.isNegative,h=e.larger,d=e.smaller,v=e.matrix,y=e.bignumber,g=e.unaryMinus;function x(e){return function(t,i,v,x){if(2!==i.length||!i.every(D)&amp;&amp;!i.every(s))throw new Error('&quot;tspan&quot; must be an Array of two numeric values or two units [tStart, tEnd]');var b=i[0],w=i[1],N=h(w,b),E=x.firstStep;if(void 0!==E&amp;&amp;!p(E))throw new Error('&quot;firstStep&quot; must be positive');var A=x.maxStep;if(void 0!==A&amp;&amp;!p(A))throw new Error('&quot;maxStep&quot; must be positive');var S=x.minStep;if(S&amp;&amp;m(S))throw new Error('&quot;minStep&quot; must be positive or zero');var C=[b,w,E,S,A].filter((function(e){return void 0!==e}));if(!C.every(D)&amp;&amp;!C.every(s))throw new Error('Inconsistent type of &quot;t&quot; dependant variables');for(var M=x.tol?x.tol:1e-4,F=x.minDelta?x.minDelta:.2,O=x.maxDelta?x.maxDelta:5,T=x.maxIter?x.maxIter:1e4,B=[b,w].concat(_a(v),[A,S]).some(a),_=la(B?[y(e.a),y(e.c),y(e.b),y(e.bp)]:[e.a,e.c,e.b,e.bp],4),k=_[0],I=_[1],R=_[2],z=_[3],q=E?N?E:g(E):u(n(w,b),1),j=[b],P=[v],L=n(R,z),U=0,$=0,H=function(e){return e?d:h}(N),G=function(e){var t=e?h:d;return function(e,i,a){var o=r(e,a);return t(o,i)?n(i,e):a}}(N);H(j[U],w);){var V=[];q=G(j[U],w,q),V.push(t(j[U],P[U]));for(var Z=1;Z&lt;I.length;++Z)V.push(t(r(j[U],o(I[Z],q)),r(P[U],o(q,k[Z],V))));var W=c(l(f(o(L,V),(function(e){return s(e)?e.value:e}))));W&lt;M&amp;&amp;M/W&gt;1/4&amp;&amp;(j.push(r(j[U],q)),P.push(r(P[U],o(q,R,V))),U++);var Y=.84*Math.pow(M/W,.2);if(d(Y,F)?Y=F:h(Y,O)&amp;&amp;(Y=O),Y=B?y(Y):Y,q=o(q,Y),A&amp;&amp;h(l(q),A)?q=N?A:g(A):S&amp;&amp;d(l(q),S)&amp;&amp;(q=N?S:g(S)),++$&gt;T)throw new Error(&quot;Maximum number of iterations reached, try changing options&quot;)}return{t:j,y:P}}}function b(e,t,r,n){return x({a:[[],[.5],[0,3/4],[2/9,1/3,4/9]],c:[null,.5,3/4,1],b:[2/9,1/3,4/9,0],bp:[7/24,1/4,1/3,1/8]})(e,t,r,n)}function w(e,t,r,n){return x({a:[[],[.2],[3/40,9/40],[44/45,-56/15,32/9],[19372/6561,-25360/2187,64448/6561,-212/729],[9017/3168,-355/33,46732/5247,49/176,-5103/18656],[35/384,0,500/1113,125/192,-2187/6784,11/84]],c:[null,.2,.3,.8,8/9,1,1],b:[35/384,0,500/1113,125/192,-2187/6784,11/84,0],bp:[5179/57600,0,7571/16695,393/640,-92097/339200,187/2100,1/40]})(e,t,r,n)}function N(e,t,r,n){var i=n.method?n.method:&quot;RK45&quot;,a={RK23:b,RK45:w};if(i.toUpperCase()in a){var o=function(e){for(var t=1;t&lt;arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hs(Object(r),!0).forEach((function(t){Ba(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},n);return delete o.method,a[i.toUpperCase()](e,t,r,o)}var u=Object.keys(a).map((function(e){return'&quot;'.concat(e,'&quot;')})),s=&quot;&quot;.concat(u.slice(0,-1).join(&quot;, &quot;),&quot; and &quot;).concat(u.slice(-1));throw new Error('Unavailable method &quot;'.concat(i,'&quot;. Available methods are ').concat(s))}function D(e){return a(e)||i(e)}function E(e,t,r,n){var i=N(e,t.toArray(),r.toArray(),n);return{t:v(i.t),y:v(i.y)}}return t(&quot;solveODE&quot;,{&quot;function, Array, Array, Object&quot;:N,&quot;function, Matrix, Matrix, Object&quot;:E,&quot;function, Array, Array&quot;:function(e,t,r){return N(e,t,r,{})},&quot;function, Matrix, Matrix&quot;:function(e,t,r){return E(e,t,r,{})},&quot;function, Array, number | BigNumber | Unit&quot;:function(e,t,r){var n=N(e,t,[r],{});return{t:n.t,y:n.y.map((function(e){return e[0]}))}},&quot;function, Matrix, number | BigNumber | Unit&quot;:function(e,t,r){var n=N(e,t.toArray(),[r],{});return{t:v(n.t),y:v(n.y.map((function(e){return e[0]})))}},&quot;function, Array, number | BigNumber | Unit, Object&quot;:function(e,t,r,n){var i=N(e,t,[r],n);return{t:i.t,y:i.y.map((function(e){return e[0]}))}},&quot;function, Matrix, number | BigNumber | Unit, Object&quot;:function(e,t,r,n){var i=N(e,t.toArray(),[r],n);return{t:v(i.t),y:v(i.y.map((function(e){return e[0]})))}}})})),vs=Ee(&quot;erf&quot;,[&quot;typed&quot;],(function(e){var t=e.typed;return t(&quot;name&quot;,{number:function(e){var t=Math.abs(e);return t&gt;=ws?Z(e):t&lt;=ys?Z(e)*function(e){var t,r=e*e,n=xs[0][4]*r,i=r;for(t=0;t&lt;3;t+=1)n=(n+xs[0][t])*r,i=(i+bs[0][t])*r;return e*(n+xs[0][3])/(i+bs[0][3])}(t):t&lt;=4?Z(e)*(1-function(e){var t,r=xs[1][8]*e,n=e;for(t=0;t&lt;7;t+=1)r=(r+xs[1][t])*e,n=(n+bs[1][t])*e;var i=(r+xs[1][7])/(n+bs[1][7]),a=parseInt(16*e)/16,o=(e-a)*(e+a);return Math.exp(-a*a)*Math.exp(-o)*i}(t)):Z(e)*(1-function(e){var t,r=1/(e*e),n=xs[2][5]*r,i=r;for(t=0;t&lt;4;t+=1)n=(n+xs[2][t])*r,i=(i+bs[2][t])*r;var a=r*(n+xs[2][4])/(i+bs[2][4]);a=(gs-a)/e;var o=(e-(r=parseInt(16*e)/16))*(e+r);return Math.exp(-r*r)*Math.exp(-o)*a}(t))},&quot;Array | Matrix&quot;:t.referToSelf((function(e){return function(t){return _n(t,e)}}))})})),ys=.46875,gs=.5641895835477563,xs=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,2.1531153547440383e-8],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],bs=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],ws=Math.pow(2,53),Ns=&quot;mode&quot;,Ds=Ee(Ns,[&quot;typed&quot;,&quot;isNaN&quot;,&quot;isNumeric&quot;],(function(e){var t=e.typed,r=e.isNaN,n=e.isNumeric;return t(Ns,{&quot;Array | Matrix&quot;:i,&quot;...&quot;:function(e){return i(e)}});function i(e){if(0===(e=mn(e.valueOf())).length)throw new Error(&quot;Cannot calculate mode of an empty array&quot;);for(var t={},i=[],a=0,o=0;o&lt;e.length;o++){var u=e[o];if(n(u)&amp;&amp;r(u))throw new Error(&quot;Cannot calculate mode of an array containing NaN values&quot;);u in t||(t[u]=0),t[u]++,t[u]===a?i.push(u):t[u]&gt;a&amp;&amp;(a=t[u],i=[u])}return i}}));function Es(e,t,r){var n;return-1!==String(e).indexOf(&quot;Unexpected type&quot;)?(n=arguments.length&gt;2?&quot; (type: &quot;+H(r)+&quot;, value: &quot;+JSON.stringify(r)+&quot;)&quot;:&quot; (type: &quot;+e.data.actual+&quot;)&quot;,new TypeError(&quot;Cannot calculate &quot;+t+&quot;, unexpected type of argument&quot;+n)):-1!==String(e).indexOf(&quot;complex numbers&quot;)?(n=arguments.length&gt;2?&quot; (type: &quot;+H(r)+&quot;, value: &quot;+JSON.stringify(r)+&quot;)&quot;:&quot;&quot;,new TypeError(&quot;Cannot calculate &quot;+t+&quot;, no ordering relation is defined for complex numbers&quot;+n)):e}var As=&quot;prod&quot;,Ss=Ee(As,[&quot;typed&quot;,&quot;config&quot;,&quot;multiplyScalar&quot;,&quot;numeric&quot;],(function(e){var t=e.typed,r=e.config,n=e.multiplyScalar,i=e.numeric;return t(As,{&quot;Array | Matrix&quot;:a,&quot;Array | Matrix, number | BigNumber&quot;:function(e,t){throw new Error(&quot;prod(A, dim) is not yet supported&quot;)},&quot;...&quot;:function(e){return a(e)}});function a(e){var t;if(Bn(e,(function(e){try{t=void 0===t?e:n(t,e)}catch(t){throw Es(t,&quot;prod&quot;,e)}})),&quot;string&quot;==typeof t&amp;&amp;(t=i(t,r.number)),void 0===t)throw new Error(&quot;Cannot calculate prod of an empty array&quot;);return t}})),Cs=&quot;format&quot;,Ms=Ee(Cs,[&quot;typed&quot;],(function(e){return(0,e.typed)(Cs,{any:Vr,&quot;any, Object | function | number&quot;:Vr})})),Fs=Ee(&quot;bin&quot;,[&quot;typed&quot;,&quot;format&quot;],(function(e){var t=e.typed,r=e.format;return t(&quot;bin&quot;,{&quot;number | BigNumber&quot;:function(e){return r(e,{notation:&quot;bin&quot;})},&quot;number | BigNumber, number&quot;:function(e,t){return r(e,{notation:&quot;bin&quot;,wordSize:t})}})})),Os=Ee(&quot;oct&quot;,[&quot;typed&quot;,&quot;format&quot;],(function(e){var t=e.typed,r=e.format;return t(&quot;oct&quot;,{&quot;number | BigNumber&quot;:function(e){return r(e,{notation:&quot;oct&quot;})},&quot;number | BigNumber, number&quot;:function(e,t){return r(e,{notation:&quot;oct&quot;,wordSize:t})}})})),Ts=Ee(&quot;hex&quot;,[&quot;typed&quot;,&quot;format&quot;],(function(e){var t=e.typed,r=e.format;return t(&quot;hex&quot;,{&quot;number | BigNumber&quot;:function(e){return r(e,{notation:&quot;hex&quot;})},&quot;number | BigNumber, number&quot;:function(e,t){return r(e,{notation:&quot;hex&quot;,wordSize:t})}})})),Bs=&quot;print&quot;,_s=Ee(Bs,[&quot;typed&quot;],(function(e){return(0,e.typed)(Bs,{&quot;string, Object | Array&quot;:ks,&quot;string, Object | Array, number | Object&quot;:ks})}));function ks(e,t,r){return e.replace(/\s$([\sw.]+)/g,(function(e,n){for(var i=n.split(&quot;.&quot;),a=t[i.shift()];i.length&amp;&amp;void 0!==a;){var o=i.shift();a=o?a[o]:a+&quot;.&quot;}return void 0!==a?c(a)?a:Vr(a,r):e}))}var Is=Ee(&quot;to&quot;,[&quot;typed&quot;,&quot;matrix&quot;,&quot;concat&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.concat;return t(&quot;to&quot;,{&quot;Unit, Unit | string&quot;:function(e,t){return e.to(t)}},ja({typed:t,matrix:r,concat:n})({Ds:!0}))})),Rs=&quot;isPrime&quot;,zs=Ee(Rs,[&quot;typed&quot;],(function(e){var t=e.typed;return t(Rs,{number:function(e){if(0*e!=0)return!1;if(e&lt;=3)return e&gt;1;if(e%2==0||e%3==0)return!1;for(var t=5;t*t&lt;=e;t+=6)if(e%t==0||e%(t+2)==0)return!1;return!0},BigNumber:function(e){if(0*e.toNumber()!=0)return!1;if(e.lte(3))return e.gt(1);if(e.mod(2).eq(0)||e.mod(3).eq(0))return!1;if(e.lt(Math.pow(2,32))){for(var t=e.toNumber(),r=5;r*r&lt;=t;r+=6)if(t%r==0||t%(r+2)==0)return!1;return!0}function n(e,t,r){for(var n=1;!t.eq(0);)t.mod(2).eq(0)?(t=t.div(2),e=e.mul(e).mod(r)):(t=t.sub(1),n=e.mul(n).mod(r));return n}for(var i=e.constructor.clone({precision:2*e.toFixed(0).length}),a=0,o=(e=new i(e)).sub(1);o.mod(2).eq(0);)o=o.div(2),a+=1;var u=null;if(e.lt(&quot;3317044064679887385961981&quot;))u=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter((function(t){return t&lt;e}));else{var s=Math.min(e.toNumber()-2,Math.floor(2*Math.pow(e.toFixed(0).length*Math.log(10),2)));u=[];for(var c=2;c&lt;=s;c+=1)u.push(s)}for(var f=0;f&lt;u.length;f+=1){var l=u[f],p=n(e.sub(e).add(l),o,e);if(!p.eq(1))for(var m=0,h=p;!h.eq(e.sub(1));m+=1,h=h.mul(h).mod(e))if(m===a-1)return!1}return!0},&quot;Array | Matrix&quot;:t.referToSelf((function(e){return function(t){return _n(t,e)}}))})})),qs=Ee(&quot;numeric&quot;,[&quot;number&quot;,&quot;?bignumber&quot;,&quot;?fraction&quot;],(function(e){var t=e.number,r=e.bignumber,n=e.fraction,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},a={number:function(e){return t(e)},BigNumber:r?function(e){return r(e)}:Ru,Fraction:n?function(e){return n(e)}:zu};return function(e){var t=arguments.length&gt;1&amp;&amp;void 0!==arguments[1]?arguments[1]:&quot;number&quot;;if(void 0!==(arguments.length&gt;2?arguments[2]:void 0))throw new SyntaxError(&quot;numeric() takes one or two arguments&quot;);var r=H(e);if(!(r in i))throw new TypeError(&quot;Cannot convert &quot;+e+' of type &quot;'+r+'&quot;; valid input types are '+Object.keys(i).join(&quot;, &quot;));if(!(t in a))throw new TypeError(&quot;Cannot convert &quot;+e+' to type &quot;'+t+'&quot;; valid output types are '+Object.keys(a).join(&quot;, &quot;));return t===r?e:a[t](e)}})),js=&quot;divideScalar&quot;,Ps=Ee(js,[&quot;typed&quot;,&quot;numeric&quot;],(function(e){var t=e.typed;return e.numeric,t(js,{&quot;number, number&quot;:function(e,t){return e/t},&quot;Complex, Complex&quot;:function(e,t){return e.div(t)},&quot;BigNumber, BigNumber&quot;:function(e,t){return e.div(t)},&quot;Fraction, Fraction&quot;:function(e,t){return e.div(t)},&quot;Unit, number | Complex | Fraction | BigNumber | Unit&quot;:function(e,t){return e.divide(t)},&quot;number | Fraction | Complex | BigNumber, Unit&quot;:function(e,t){return t.divideInto(e)}})})),Ls=Ee(&quot;pow&quot;,[&quot;typed&quot;,&quot;config&quot;,&quot;identity&quot;,&quot;multiply&quot;,&quot;matrix&quot;,&quot;inv&quot;,&quot;fraction&quot;,&quot;number&quot;,&quot;Complex&quot;],(function(e){var t=e.typed,r=e.config,n=e.identity,i=e.multiply,a=e.matrix,o=e.inv,u=e.number,s=e.fraction,c=e.Complex;return t(&quot;pow&quot;,{&quot;number, number&quot;:f,&quot;Complex, Complex&quot;:function(e,t){return e.pow(t)},&quot;BigNumber, BigNumber&quot;:function(e,t){return t.isInteger()||e&gt;=0||r.predictable?e.pow(t):new c(e.toNumber(),0).pow(t.toNumber(),0)},&quot;Fraction, Fraction&quot;:function(e,t){var n=e.pow(t);if(null!=n)return n;if(r.predictable)throw new Error(&quot;Result of pow is non-rational and cannot be expressed as a fraction&quot;);return f(e.valueOf(),t.valueOf())},&quot;Array, number&quot;:l,&quot;Array, BigNumber&quot;:function(e,t){return l(e,t.toNumber())},&quot;Matrix, number&quot;:p,&quot;Matrix, BigNumber&quot;:function(e,t){return p(e,t.toNumber())},&quot;Unit, number | BigNumber&quot;:function(e,t){return e.pow(t)}});function f(e,t){if(r.predictable&amp;&amp;!V(t)&amp;&amp;e&lt;0)try{var n=s(t),i=u(n);if((t===i||Math.abs((t-i)/t)&lt;1e-14)&amp;&amp;n.d%2==1)return(n.n%2==0?1:-1)*Math.pow(-e,t)}catch(e){}return r.predictable&amp;&amp;(e&lt;-1&amp;&amp;t===1/0||e&gt;-1&amp;&amp;e&lt;0&amp;&amp;t===-1/0)?NaN:V(t)||e&gt;=0||r.predictable?Yi(e,t):e*e&lt;1&amp;&amp;t===1/0||e*e&gt;1&amp;&amp;t===-1/0?0:new c(e,0).pow(t,0)}function l(e,t){if(!V(t))throw new TypeError(&quot;For A^b, b must be an integer (value is &quot;+t+&quot;)&quot;);var r=Kr(e);if(2!==r.length)throw new Error(&quot;For A^b, A must be 2 dimensional (A has &quot;+r.length+&quot; dimensions)&quot;);if(r[0]!==r[1])throw new Error(&quot;For A^b, A must be square (size is &quot;+r[0]+&quot;x&quot;+r[1]+&quot;)&quot;);if(t&lt;0)try{return l(o(e),-t)}catch(e){if(&quot;Cannot calculate inverse, determinant is zero&quot;===e.message)throw new TypeError(&quot;For A^b, when A is not invertible, b must be a positive integer (value is &quot;+t+&quot;)&quot;);throw e}for(var a=n(r[0]).valueOf(),u=e;t&gt;=1;)1==(1&amp;t)&amp;&amp;(a=i(u,a)),t&gt;&gt;=1,u=i(u,u);return a}function p(e,t){return a(l(e.valueOf(),t))}})),Us=&quot;Number of decimals in function round must be an integer&quot;,$s=&quot;round&quot;,Hs=Ee($s,[&quot;typed&quot;,&quot;matrix&quot;,&quot;equalScalar&quot;,&quot;zeros&quot;,&quot;BigNumber&quot;,&quot;DenseMatrix&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.equalScalar,i=e.zeros,a=e.BigNumber,o=e.DenseMatrix,u=pa({typed:t,equalScalar:n}),s=ma({typed:t,DenseMatrix:o}),c=ha({typed:t});return t($s,{number:Ji,&quot;number, number&quot;:Ji,&quot;number, BigNumber&quot;:function(e,t){if(!t.isInteger())throw new TypeError(Us);return new a(e).toDecimalPlaces(t.toNumber())},Complex:function(e){return e.round()},&quot;Complex, number&quot;:function(e,t){if(t%1)throw new TypeError(Us);return e.round(t)},&quot;Complex, BigNumber&quot;:function(e,t){if(!t.isInteger())throw new TypeError(Us);var r=t.toNumber();return e.round(r)},BigNumber:function(e){return e.toDecimalPlaces(0)},&quot;BigNumber, BigNumber&quot;:function(e,t){if(!t.isInteger())throw new TypeError(Us);return e.toDecimalPlaces(t.toNumber())},Fraction:function(e){return e.round()},&quot;Fraction, number&quot;:function(e,t){if(t%1)throw new TypeError(Us);return e.round(t)},&quot;Fraction, BigNumber&quot;:function(e,t){if(!t.isInteger())throw new TypeError(Us);return e.round(t.toNumber())},&quot;Array | Matrix&quot;:t.referToSelf((function(e){return function(t){return _n(t,e,!0)}})),&quot;SparseMatrix, number | BigNumber&quot;:t.referToSelf((function(e){return function(t,r){return u(t,r,e,!1)}})),&quot;DenseMatrix, number | BigNumber&quot;:t.referToSelf((function(e){return function(t,r){return c(t,r,e,!1)}})),&quot;Array, number | BigNumber&quot;:t.referToSelf((function(e){return function(t,n){return c(r(t),n,e,!1).valueOf()}})),&quot;number | Complex | BigNumber | Fraction, SparseMatrix&quot;:t.referToSelf((function(e){return function(t,r){return n(t,0)?i(r.size(),r.storage()):s(r,t,e,!0)}})),&quot;number | Complex | BigNumber | Fraction, DenseMatrix&quot;:t.referToSelf((function(e){return function(t,r){return n(t,0)?i(r.size(),r.storage()):c(r,t,e,!0)}})),&quot;number | Complex | BigNumber | Fraction, Array&quot;:t.referToSelf((function(e){return function(t,n){return c(r(n),t,e,!0).valueOf()}}))})})),Gs=Ee(&quot;log&quot;,[&quot;config&quot;,&quot;typed&quot;,&quot;divideScalar&quot;,&quot;Complex&quot;],(function(e){var t=e.typed,r=e.config,n=e.divideScalar,i=e.Complex;return t(&quot;log&quot;,{number:function(e){return e&gt;=0||r.predictable?function(e,t){return Math.log(e)}(e):new i(e,0).log()},Complex:function(e){return e.log()},BigNumber:function(e){return!e.isNegative()||r.predictable?e.ln():new i(e.toNumber(),0).log()},&quot;any, any&quot;:t.referToSelf((function(e){return function(t,r){return n(e(t),e(r))}}))})})),Vs=&quot;log1p&quot;,Zs=Ee(Vs,[&quot;typed&quot;,&quot;config&quot;,&quot;divideScalar&quot;,&quot;log&quot;,&quot;Complex&quot;],(function(e){var t=e.typed,r=e.config,n=e.divideScalar,i=e.log,a=e.Complex;return t(Vs,{number:function(e){return e&gt;=-1||r.predictable?J(e):o(new a(e,0))},Complex:o,BigNumber:function(e){var t=e.plus(1);return!t.isNegative()||r.predictable?t.ln():o(new a(e.toNumber(),0))},&quot;Array | Matrix&quot;:t.referToSelf((function(e){return function(t){return _n(t,e)}})),&quot;any, any&quot;:t.referToSelf((function(e){return function(t,r){return n(e(t),i(r))}}))});function o(e){var t=e.re+1;return new a(Math.log(Math.sqrt(t*t+e.im*e.im)),Math.atan2(e.im,t))}})),Ws=&quot;nthRoots&quot;,Ys=Ee(Ws,[&quot;config&quot;,&quot;typed&quot;,&quot;divideScalar&quot;,&quot;Complex&quot;],(function(e){var t=e.typed,r=(e.config,e.divideScalar,e.Complex),n=[function(e){return new r(e,0)},function(e){return new r(0,e)},function(e){return new r(-e,0)},function(e){return new r(0,-e)}];function i(e,t){if(t&lt;0)throw new Error(&quot;Root must be greater than zero&quot;);if(0===t)throw new Error(&quot;Root must be non-zero&quot;);if(t%1!=0)throw new Error(&quot;Root must be an integer&quot;);if(0===e||0===e.abs())return[new r(0,0)];var i,a=&quot;number&quot;==typeof e;(a||0===e.re||0===e.im)&amp;&amp;(i=a?2*+(e&lt;0):0===e.im?2*+(e.re&lt;0):2*+(e.im&lt;0)+1);for(var o=e.arg(),u=e.abs(),s=[],c=Math.pow(u,1/t),f=0;f&lt;t;f++){var l=(i+4*f)/t;l!==Math.round(l)?s.push(new r({r:c,phi:(o+2*Math.PI*f)/t})):s.push(n[l%4](c))}return s}return t(Ws,{Complex:function(e){return i(e,2)},&quot;Complex, number&quot;:i})})),Js=&quot;dotPow&quot;,Xs=Ee(Js,[&quot;typed&quot;,&quot;equalScalar&quot;,&quot;matrix&quot;,&quot;pow&quot;,&quot;DenseMatrix&quot;,&quot;concat&quot;],(function(e){var t=e.typed,r=e.equalScalar,n=e.matrix,i=e.pow,a=e.DenseMatrix,o=e.concat,u=Ka({typed:t}),s=Ho({typed:t,DenseMatrix:a}),c=pa({typed:t,equalScalar:r}),f=ma({typed:t,DenseMatrix:a}),l=ja({typed:t,matrix:n,concat:o}),p={};for(var m in i.signatures)Object.prototype.hasOwnProperty.call(i.signatures,m)&amp;&amp;(m.includes(&quot;Matrix&quot;)||m.includes(&quot;Array&quot;)||(p[m]=i.signatures[m]));var h=t(p);return t(Js,l({elop:h,SS:s,DS:u,Ss:c,sS:f}))})),Qs=&quot;dotDivide&quot;,Ks=Ee(Qs,[&quot;typed&quot;,&quot;matrix&quot;,&quot;equalScalar&quot;,&quot;divideScalar&quot;,&quot;DenseMatrix&quot;,&quot;concat&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.equalScalar,i=e.divideScalar,a=e.DenseMatrix,o=e.concat,u=Va({typed:t,equalScalar:n}),s=Ka({typed:t}),c=Ho({typed:t,DenseMatrix:a}),f=pa({typed:t,equalScalar:n}),l=ma({typed:t,DenseMatrix:a}),p=ja({typed:t,matrix:r,concat:o});return t(Qs,p({elop:i,SS:c,DS:s,SD:u,Ss:f,sS:l}))}));function ec(e){var t=e.DenseMatrix;return function(e,r,n){var i=e.size();if(2!==i.length)throw new RangeError(&quot;Matrix must be two dimensional (size: &quot;+Vr(i)+&quot;)&quot;);var a=i[0];if(a!==i[1])throw new RangeError(&quot;Matrix must be square (size: &quot;+Vr(i)+&quot;)&quot;);var o=[];if(l(r)){var u=r.size(),s=r._data;if(1===u.length){if(u[0]!==a)throw new RangeError(&quot;Dimension mismatch. Matrix columns must match vector length.&quot;);for(var c=0;c&lt;a;c++)o[c]=[s[c]];return new t({data:o,size:[a,1],datatype:r._datatype})}if(2===u.length){if(u[0]!==a||1!==u[1])throw new RangeError(&quot;Dimension mismatch. Matrix columns must match vector length.&quot;);if(m(r)){if(n){o=[];for(var p=0;p&lt;a;p++)o[p]=[s[p][0]];return new t({data:o,size:[a,1],datatype:r._datatype})}return r}if(h(r)){for(var d=0;d&lt;a;d++)o[d]=[0];for(var v=r._values,y=r._index,g=r._ptr,x=g[1],b=g[0];b&lt;x;b++)o[y[b]][0]=v[b];return new t({data:o,size:[a,1],datatype:r._datatype})}}throw new RangeError(&quot;Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.&quot;)}if(f(r)){var w=Kr(r);if(1===w.length){if(w[0]!==a)throw new RangeError(&quot;Dimension mismatch. Matrix columns must match vector length.&quot;);for(var N=0;N&lt;a;N++)o[N]=[r[N]];return new t({data:o,size:[a,1]})}if(2===w.length){if(w[0]!==a||1!==w[1])throw new RangeError(&quot;Dimension mismatch. Matrix columns must match vector length.&quot;);for(var D=0;D&lt;a;D++)o[D]=[r[D][0]];return new t({data:o,size:[a,1]})}throw new RangeError(&quot;Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.&quot;)}}}var tc=&quot;lsolve&quot;,rc=Ee(tc,[&quot;typed&quot;,&quot;matrix&quot;,&quot;divideScalar&quot;,&quot;multiplyScalar&quot;,&quot;subtract&quot;,&quot;equalScalar&quot;,&quot;DenseMatrix&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.divideScalar,i=e.multiplyScalar,a=e.subtract,o=e.equalScalar,u=e.DenseMatrix,s=ec({DenseMatrix:u});return t(tc,{&quot;SparseMatrix, Array | Matrix&quot;:function(e,t){return function(e,t){for(var r=(t=s(e,t,!0))._data,c=e._size[0],f=e._size[1],l=e._values,p=e._index,m=e._ptr,h=[],d=0;d&lt;f;d++){var v=r[d][0]||0;if(o(v,0))h[d]=[0];else{for(var y=0,g=[],x=[],b=m[d],w=m[d+1],N=b;N&lt;w;N++){var D=p[N];D===d?y=l[N]:D&gt;d&amp;&amp;(g.push(l[N]),x.push(D))}if(o(y,0))throw new Error(&quot;Linear system cannot be solved since matrix is singular&quot;);for(var E=n(v,y),A=0,S=x.length;A&lt;S;A++){var C=x[A];r[C]=[a(r[C][0]||0,i(E,g[A]))]}h[d]=[E]}}return new u({data:h,size:[c,1]})}(e,t)},&quot;DenseMatrix, Array | Matrix&quot;:function(e,t){return c(e,t)},&quot;Array, Array | Matrix&quot;:function(e,t){return c(r(e),t).valueOf()}});function c(e,t){for(var r=(t=s(e,t,!0))._data,c=e._size[0],f=e._size[1],l=[],p=e._data,m=0;m&lt;f;m++){var h=r[m][0]||0,d=void 0;if(o(h,0))d=0;else{var v=p[m][m];if(o(v,0))throw new Error(&quot;Linear system cannot be solved since matrix is singular&quot;);d=n(h,v);for(var y=m+1;y&lt;c;y++)r[y]=[a(r[y][0]||0,i(d,p[y][m]))]}l[m]=[d]}return new u({data:l,size:[c,1]})}})),nc=&quot;usolve&quot;,ic=Ee(nc,[&quot;typed&quot;,&quot;matrix&quot;,&quot;divideScalar&quot;,&quot;multiplyScalar&quot;,&quot;subtract&quot;,&quot;equalScalar&quot;,&quot;DenseMatrix&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.divideScalar,i=e.multiplyScalar,a=e.subtract,o=e.equalScalar,u=e.DenseMatrix,s=ec({DenseMatrix:u});return t(nc,{&quot;SparseMatrix, Array | Matrix&quot;:function(e,t){return function(e,t){for(var r=(t=s(e,t,!0))._data,c=e._size[0],f=e._size[1],l=e._values,p=e._index,m=e._ptr,h=[],d=f-1;d&gt;=0;d--){var v=r[d][0]||0;if(o(v,0))h[d]=[0];else{for(var y=0,g=[],x=[],b=m[d],w=m[d+1]-1;w&gt;=b;w--){var N=p[w];N===d?y=l[w]:N&lt;d&amp;&amp;(g.push(l[w]),x.push(N))}if(o(y,0))throw new Error(&quot;Linear system cannot be solved since matrix is singular&quot;);for(var D=n(v,y),E=0,A=x.length;E&lt;A;E++){var S=x[E];r[S]=[a(r[S][0],i(D,g[E]))]}h[d]=[D]}}return new u({data:h,size:[c,1]})}(e,t)},&quot;DenseMatrix, Array | Matrix&quot;:function(e,t){return c(e,t)},&quot;Array, Array | Matrix&quot;:function(e,t){return c(r(e),t).valueOf()}});function c(e,t){for(var r=(t=s(e,t,!0))._data,c=e._size[0],f=e._size[1],l=[],p=e._data,m=f-1;m&gt;=0;m--){var h=r[m][0]||0,d=void 0;if(o(h,0))d=0;else{var v=p[m][m];if(o(v,0))throw new Error(&quot;Linear system cannot be solved since matrix is singular&quot;);d=n(h,v);for(var y=m-1;y&gt;=0;y--)r[y]=[a(r[y][0]||0,i(d,p[y][m]))]}l[m]=[d]}return new u({data:l,size:[c,1]})}})),ac=&quot;lsolveAll&quot;,oc=Ee(ac,[&quot;typed&quot;,&quot;matrix&quot;,&quot;divideScalar&quot;,&quot;multiplyScalar&quot;,&quot;subtract&quot;,&quot;equalScalar&quot;,&quot;DenseMatrix&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.divideScalar,i=e.multiplyScalar,a=e.subtract,o=e.equalScalar,u=e.DenseMatrix,s=ec({DenseMatrix:u});return t(ac,{&quot;SparseMatrix, Array | Matrix&quot;:function(e,t){return function(e,t){for(var r=[s(e,t,!0)._data.map((function(e){return e[0]}))],c=e._size[0],f=e._size[1],l=e._values,p=e._index,m=e._ptr,h=0;h&lt;f;h++)for(var d=r.length,v=0;v&lt;d;v++){for(var y=r[v],g=[],x=[],b=m[h],w=m[h+1],N=0,D=b;D&lt;w;D++){var E=p[D];E===h?N=l[D]:E&gt;h&amp;&amp;(g.push(l[D]),x.push(E))}if(o(N,0))if(o(y[h],0)){if(0===v){var A=_a(y);A[h]=1;for(var S=0,C=x.length;S&lt;C;S++){var M=x[S];A[M]=a(A[M],g[S])}r.push(A)}}else{if(0===v)return[];r.splice(v,1),v-=1,d-=1}else{y[h]=n(y[h],N);for(var F=0,O=x.length;F&lt;O;F++){var T=x[F];y[T]=a(y[T],i(y[h],g[F]))}}}return r.map((function(e){return new u({data:e.map((function(e){return[e]})),size:[c,1]})}))}(e,t)},&quot;DenseMatrix, Array | Matrix&quot;:function(e,t){return c(e,t)},&quot;Array, Array | Matrix&quot;:function(e,t){return c(r(e),t).map((function(e){return e.valueOf()}))}});function c(e,t){for(var r=[s(e,t,!0)._data.map((function(e){return e[0]}))],c=e._data,f=e._size[0],l=e._size[1],p=0;p&lt;l;p++)for(var m=r.length,h=0;h&lt;m;h++){var d=r[h];if(o(c[p][p],0))if(o(d[p],0)){if(0===h){var v=_a(d);v[p]=1;for(var y=p+1;y&lt;l;y++)v[y]=a(v[y],c[y][p]);r.push(v)}}else{if(0===h)return[];r.splice(h,1),h-=1,m-=1}else{d[p]=n(d[p],c[p][p]);for(var g=p+1;g&lt;l;g++)d[g]=a(d[g],i(d[p],c[g][p]))}}return r.map((function(e){return new u({data:e.map((function(e){return[e]})),size:[f,1]})}))}})),uc=&quot;usolveAll&quot;,sc=Ee(uc,[&quot;typed&quot;,&quot;matrix&quot;,&quot;divideScalar&quot;,&quot;multiplyScalar&quot;,&quot;subtract&quot;,&quot;equalScalar&quot;,&quot;DenseMatrix&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.divideScalar,i=e.multiplyScalar,a=e.subtract,o=e.equalScalar,u=e.DenseMatrix,s=ec({DenseMatrix:u});return t(uc,{&quot;SparseMatrix, Array | Matrix&quot;:function(e,t){return function(e,t){for(var r=[s(e,t,!0)._data.map((function(e){return e[0]}))],c=e._size[0],f=e._size[1],l=e._values,p=e._index,m=e._ptr,h=f-1;h&gt;=0;h--)for(var d=r.length,v=0;v&lt;d;v++){for(var y=r[v],g=[],x=[],b=m[h],w=0,N=m[h+1]-1;N&gt;=b;N--){var D=p[N];D===h?w=l[N]:D&lt;h&amp;&amp;(g.push(l[N]),x.push(D))}if(o(w,0))if(o(y[h],0)){if(0===v){var E=_a(y);E[h]=1;for(var A=0,S=x.length;A&lt;S;A++){var C=x[A];E[C]=a(E[C],g[A])}r.push(E)}}else{if(0===v)return[];r.splice(v,1),v-=1,d-=1}else{y[h]=n(y[h],w);for(var M=0,F=x.length;M&lt;F;M++){var O=x[M];y[O]=a(y[O],i(y[h],g[M]))}}}return r.map((function(e){return new u({data:e.map((function(e){return[e]})),size:[c,1]})}))}(e,t)},&quot;DenseMatrix, Array | Matrix&quot;:function(e,t){return c(e,t)},&quot;Array, Array | Matrix&quot;:function(e,t){return c(r(e),t).map((function(e){return e.valueOf()}))}});function c(e,t){for(var r=[s(e,t,!0)._data.map((function(e){return e[0]}))],c=e._data,f=e._size[0],l=e._size[1]-1;l&gt;=0;l--)for(var p=r.length,m=0;m&lt;p;m++){var h=r[m];if(o(c[l][l],0))if(o(h[l],0)){if(0===m){var d=_a(h);d[l]=1;for(var v=l-1;v&gt;=0;v--)d[v]=a(d[v],c[v][l]);r.push(d)}}else{if(0===m)return[];r.splice(m,1),m-=1,p-=1}else{h[l]=n(h[l],c[l][l]);for(var y=l-1;y&gt;=0;y--)h[y]=a(h[y],i(h[l],c[y][l]))}}return r.map((function(e){return new u({data:e.map((function(e){return[e]})),size:[f,1]})}))}})),cc=Ee(&quot;matAlgo08xS0Sid&quot;,[&quot;typed&quot;,&quot;equalScalar&quot;],(function(e){var t=e.typed,r=e.equalScalar;return function(e,n,i){var a=e._values,o=e._index,u=e._ptr,s=e._size,c=e._datatype,f=n._values,l=n._index,p=n._ptr,m=n._size,h=n._datatype;if(s.length!==m.length)throw new Xr(s.length,m.length);if(s[0]!==m[0]||s[1]!==m[1])throw new RangeError(&quot;Dimension mismatch. Matrix A (&quot;+s+&quot;) must match Matrix B (&quot;+m+&quot;)&quot;);if(!a||!f)throw new Error(&quot;Cannot perform operation on Pattern Sparse Matrices&quot;);var d,v=s[0],y=s[1],g=r,x=0,b=i;&quot;string&quot;==typeof c&amp;&amp;c===h&amp;&amp;(d=c,g=t.find(r,[d,d]),x=t.convert(0,d),b=t.find(i,[d,d]));for(var w,N,D,E,A=[],S=[],C=[],M=[],F=[],O=0;O&lt;y;O++){C[O]=S.length;var T=O+1;for(N=u[O],D=u[O+1],w=N;w&lt;D;w++)F[E=o[w]]=T,M[E]=a[w],S.push(E);for(N=p[O],D=p[O+1],w=N;w&lt;D;w++)F[E=l[w]]===T&amp;&amp;(M[E]=b(M[E],f[w]));for(w=C[O];w&lt;S.length;){var B=M[E=S[w]];g(B,x)?S.splice(w,1):(A.push(B),w++)}}return C[y]=S.length,e.createSparseMatrix({values:A,index:S,ptr:C,size:[v,y],datatype:d})}})),fc=Ee(&quot;useMatrixForArrayScalar&quot;,[&quot;typed&quot;,&quot;matrix&quot;],(function(e){var t=e.typed,r=e.matrix;return{&quot;Array, number&quot;:t.referTo(&quot;DenseMatrix, number&quot;,(function(e){return function(t,n){return e(r(t),n).valueOf()}})),&quot;Array, BigNumber&quot;:t.referTo(&quot;DenseMatrix, BigNumber&quot;,(function(e){return function(t,n){return e(r(t),n).valueOf()}})),&quot;number, Array&quot;:t.referTo(&quot;number, DenseMatrix&quot;,(function(e){return function(t,n){return e(t,r(n)).valueOf()}})),&quot;BigNumber, Array&quot;:t.referTo(&quot;BigNumber, DenseMatrix&quot;,(function(e){return function(t,n){return e(t,r(n)).valueOf()}}))}})),lc=&quot;leftShift&quot;,pc=Ee(lc,[&quot;typed&quot;,&quot;matrix&quot;,&quot;equalScalar&quot;,&quot;zeros&quot;,&quot;DenseMatrix&quot;,&quot;concat&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.equalScalar,i=e.zeros,a=e.DenseMatrix,o=e.concat,u=ka({typed:t}),s=Va({typed:t,equalScalar:n}),c=cc({typed:t,equalScalar:n}),f=Ra({typed:t,DenseMatrix:a}),l=pa({typed:t,equalScalar:n}),p=ha({typed:t}),m=ja({typed:t,matrix:r,concat:o}),h=fc({typed:t,matrix:r});return t(lc,{&quot;number, number&quot;:Io,&quot;BigNumber, BigNumber&quot;:Mo,&quot;SparseMatrix, number | BigNumber&quot;:t.referToSelf((function(e){return function(t,r){return n(r,0)?t.clone():l(t,r,e,!1)}})),&quot;DenseMatrix, number | BigNumber&quot;:t.referToSelf((function(e){return function(t,r){return n(r,0)?t.clone():p(t,r,e,!1)}})),&quot;number | BigNumber, SparseMatrix&quot;:t.referToSelf((function(e){return function(t,r){return n(t,0)?i(r.size(),r.storage()):f(r,t,e,!0)}})),&quot;number | BigNumber, DenseMatrix&quot;:t.referToSelf((function(e){return function(t,r){return n(t,0)?i(r.size(),r.storage()):p(r,t,e,!0)}}))},h,m({SS:c,DS:u,SD:s}))})),mc=&quot;rightArithShift&quot;,hc=Ee(mc,[&quot;typed&quot;,&quot;matrix&quot;,&quot;equalScalar&quot;,&quot;zeros&quot;,&quot;DenseMatrix&quot;,&quot;concat&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.equalScalar,i=e.zeros,a=e.DenseMatrix,o=e.concat,u=ka({typed:t}),s=Va({typed:t,equalScalar:n}),c=cc({typed:t,equalScalar:n}),f=Ra({typed:t,DenseMatrix:a}),l=pa({typed:t,equalScalar:n}),p=ha({typed:t}),m=ja({typed:t,matrix:r,concat:o}),h=fc({typed:t,matrix:r});return t(mc,{&quot;number, number&quot;:Ro,&quot;BigNumber, BigNumber&quot;:Fo,&quot;SparseMatrix, number | BigNumber&quot;:t.referToSelf((function(e){return function(t,r){return n(r,0)?t.clone():l(t,r,e,!1)}})),&quot;DenseMatrix, number | BigNumber&quot;:t.referToSelf((function(e){return function(t,r){return n(r,0)?t.clone():p(t,r,e,!1)}})),&quot;number | BigNumber, SparseMatrix&quot;:t.referToSelf((function(e){return function(t,r){return n(t,0)?i(r.size(),r.storage()):f(r,t,e,!0)}})),&quot;number | BigNumber, DenseMatrix&quot;:t.referToSelf((function(e){return function(t,r){return n(t,0)?i(r.size(),r.storage()):p(r,t,e,!0)}}))},h,m({SS:c,DS:u,SD:s}))})),dc=&quot;rightLogShift&quot;,vc=Ee(dc,[&quot;typed&quot;,&quot;matrix&quot;,&quot;equalScalar&quot;,&quot;zeros&quot;,&quot;DenseMatrix&quot;,&quot;concat&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.equalScalar,i=e.zeros,a=e.DenseMatrix,o=e.concat,u=ka({typed:t}),s=Va({typed:t,equalScalar:n}),c=cc({typed:t,equalScalar:n}),f=Ra({typed:t,DenseMatrix:a}),l=pa({typed:t,equalScalar:n}),p=ha({typed:t}),m=ja({typed:t,matrix:r,concat:o}),h=fc({typed:t,matrix:r});return t(dc,{&quot;number, number&quot;:zo,&quot;SparseMatrix, number | BigNumber&quot;:t.referToSelf((function(e){return function(t,r){return n(r,0)?t.clone():l(t,r,e,!1)}})),&quot;DenseMatrix, number | BigNumber&quot;:t.referToSelf((function(e){return function(t,r){return n(r,0)?t.clone():p(t,r,e,!1)}})),&quot;number | BigNumber, SparseMatrix&quot;:t.referToSelf((function(e){return function(t,r){return n(t,0)?i(r.size(),r.storage()):f(r,t,e,!0)}})),&quot;number | BigNumber, DenseMatrix&quot;:t.referToSelf((function(e){return function(t,r){return n(t,0)?i(r.size(),r.storage()):p(r,t,e,!0)}}))},h,m({SS:c,DS:u,SD:s}))})),yc=Ee(&quot;and&quot;,[&quot;typed&quot;,&quot;matrix&quot;,&quot;equalScalar&quot;,&quot;zeros&quot;,&quot;not&quot;,&quot;concat&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.equalScalar,i=e.zeros,a=e.not,o=e.concat,u=Va({typed:t,equalScalar:n}),s=Za({typed:t,equalScalar:n}),c=pa({typed:t,equalScalar:n}),f=ha({typed:t}),l=ja({typed:t,matrix:r,concat:o});return t(&quot;and&quot;,{&quot;number, number&quot;:ru,&quot;Complex, Complex&quot;:function(e,t){return!(0===e.re&amp;&amp;0===e.im||0===t.re&amp;&amp;0===t.im)},&quot;BigNumber, BigNumber&quot;:function(e,t){return!(e.isZero()||t.isZero()||e.isNaN()||t.isNaN())},&quot;Unit, Unit&quot;:t.referToSelf((function(e){return function(t,r){return e(t.value||0,r.value||0)}})),&quot;SparseMatrix, any&quot;:t.referToSelf((function(e){return function(t,r){return a(r)?i(t.size(),t.storage()):c(t,r,e,!1)}})),&quot;DenseMatrix, any&quot;:t.referToSelf((function(e){return function(t,r){return a(r)?i(t.size(),t.storage()):f(t,r,e,!1)}})),&quot;any, SparseMatrix&quot;:t.referToSelf((function(e){return function(t,r){return a(t)?i(t.size(),t.storage()):c(r,t,e,!0)}})),&quot;any, DenseMatrix&quot;:t.referToSelf((function(e){return function(t,r){return a(t)?i(t.size(),t.storage()):f(r,t,e,!0)}})),&quot;Array, any&quot;:t.referToSelf((function(e){return function(t,n){return e(r(t),n).valueOf()}})),&quot;any, Array&quot;:t.referToSelf((function(e){return function(t,n){return e(t,r(n)).valueOf()}}))},l({SS:s,DS:u}))})),gc=&quot;compare&quot;,xc=Ee(gc,[&quot;typed&quot;,&quot;config&quot;,&quot;matrix&quot;,&quot;equalScalar&quot;,&quot;BigNumber&quot;,&quot;Fraction&quot;,&quot;DenseMatrix&quot;,&quot;concat&quot;],(function(e){var t=e.typed,r=e.config,n=e.equalScalar,i=e.matrix,a=e.BigNumber,o=e.Fraction,u=e.DenseMatrix,s=e.concat,c=Ka({typed:t}),f=eo({typed:t,equalScalar:n}),l=ma({typed:t,DenseMatrix:u}),p=ja({typed:t,matrix:i,concat:s}),m=ai({typed:t});return t(gc,bc({typed:t,config:r}),{&quot;boolean, boolean&quot;:function(e,t){return e===t?0:e&gt;t?1:-1},&quot;BigNumber, BigNumber&quot;:function(e,t){return ii(e,t,r.epsilon)?new a(0):new a(e.cmp(t))},&quot;Fraction, Fraction&quot;:function(e,t){return new o(e.compare(t))},&quot;Complex, Complex&quot;:function(){throw new TypeError(&quot;No ordering relation is defined for complex numbers&quot;)}},m,p({SS:f,DS:c,Ss:l}))})),bc=Ee(gc,[&quot;typed&quot;,&quot;config&quot;],(function(e){var t=e.typed,r=e.config;return t(gc,{&quot;number, number&quot;:function(e,t){return ue(e,t,r.epsilon)?0:e&gt;t?1:-1}})})),wc=r(3228),Nc=&quot;compareNatural&quot;,Dc=Ee(Nc,[&quot;typed&quot;,&quot;compare&quot;],(function(e){var t=e.typed,r=e.compare,n=r.signatures[&quot;boolean,boolean&quot;];return t(Nc,{&quot;any, any&quot;:function e(t,o){var u,s=H(t),c=H(o);if(!(&quot;number&quot;!==s&amp;&amp;&quot;BigNumber&quot;!==s&amp;&amp;&quot;Fraction&quot;!==s||&quot;number&quot;!==c&amp;&amp;&quot;BigNumber&quot;!==c&amp;&amp;&quot;Fraction&quot;!==c))return&quot;0&quot;!==(u=r(t,o)).toString()?u&gt;0?1:-1:wc(s,c);var f=[&quot;Array&quot;,&quot;DenseMatrix&quot;,&quot;SparseMatrix&quot;];if(f.includes(s)||f.includes(c))return 0!==(u=i(e,t,o))?u:wc(s,c);if(s!==c)return wc(s,c);if(&quot;Complex&quot;===s)return function(e,t){return e.re&gt;t.re?1:e.re&lt;t.re?-1:e.im&gt;t.im?1:e.im&lt;t.im?-1:0}(t,o);if(&quot;Unit&quot;===s)return t.equalBase(o)?e(t.value,o.value):a(e,t.formatUnits(),o.formatUnits());if(&quot;boolean&quot;===s)return n(t,o);if(&quot;string&quot;===s)return wc(t,o);if(&quot;Object&quot;===s)return function(e,t,r){var n=Object.keys(t),i=Object.keys(r);n.sort(wc),i.sort(wc);var o=a(e,n,i);if(0!==o)return o;for(var u=0;u&lt;n.length;u++){var s=e(t[n[u]],r[i[u]]);if(0!==s)return s}return 0}(e,t,o);if(&quot;null&quot;===s)return 0;if(&quot;undefined&quot;===s)return 0;throw new TypeError('Unsupported type of value &quot;'+s+'&quot;')}});function i(e,t,r){return h(t)&amp;&amp;h(r)?a(e,t.toJSON().values,r.toJSON().values):h(t)?i(e,t.toArray(),r):h(r)?i(e,t,r.toArray()):m(t)?i(e,t.toJSON().data,r):m(r)?i(e,t,r.toJSON().data):Array.isArray(t)?Array.isArray(r)?a(e,t,r):i(e,t,[r]):i(e,[t],r)}function a(e,t,r){for(var n=0,i=Math.min(t.length,r.length);n&lt;i;n++){var a=e(t[n],r[n]);if(0!==a)return a}return t.length&gt;r.length?1:t.length&lt;r.length?-1:0}})),Ec=&quot;compareText&quot;,Ac=[&quot;typed&quot;,&quot;matrix&quot;,&quot;concat&quot;];Jr.signature=&quot;any, any&quot;;var Sc=Ee(Ec,Ac,(function(e){var t=e.typed,r=e.matrix,n=e.concat,i=ja({typed:t,matrix:r,concat:n});return t(Ec,Jr,i({elop:Jr,Ds:!0}))})),Cc=&quot;equal&quot;,Mc=Ee(Cc,[&quot;typed&quot;,&quot;matrix&quot;,&quot;equalScalar&quot;,&quot;DenseMatrix&quot;,&quot;concat&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.equalScalar,i=e.DenseMatrix,a=e.concat,o=Ka({typed:t}),u=Ho({typed:t,DenseMatrix:i}),s=ma({typed:t,DenseMatrix:i}),c=ja({typed:t,matrix:r,concat:a});return t(Cc,Fc({typed:t,equalScalar:n}),c({elop:n,SS:u,DS:o,Ss:s}))})),Fc=Ee(Cc,[&quot;typed&quot;,&quot;equalScalar&quot;],(function(e){var t=e.typed,r=e.equalScalar;return t(Cc,{&quot;any, any&quot;:function(e,t){return null===e?null===t:null===t?null===e:void 0===e?void 0===t:void 0===t?void 0===e:r(e,t)}})})),Oc=&quot;equalText&quot;,Tc=Ee(Oc,[&quot;typed&quot;,&quot;compareText&quot;,&quot;isZero&quot;],(function(e){var t=e.typed,r=e.compareText,n=e.isZero;return t(Oc,{&quot;any, any&quot;:function(e,t){return n(r(e,t))}})})),Bc=&quot;smaller&quot;,_c=Ee(Bc,[&quot;typed&quot;,&quot;config&quot;,&quot;matrix&quot;,&quot;DenseMatrix&quot;,&quot;concat&quot;],(function(e){var t=e.typed,r=e.config,n=e.matrix,i=e.DenseMatrix,a=e.concat,o=Ka({typed:t}),u=Ho({typed:t,DenseMatrix:i}),s=ma({typed:t,DenseMatrix:i}),c=ja({typed:t,matrix:n,concat:a}),f=ai({typed:t});return t(Bc,kc({typed:t,config:r}),{&quot;boolean, boolean&quot;:function(e,t){return e&lt;t},&quot;BigNumber, BigNumber&quot;:function(e,t){return e.lt(t)&amp;&amp;!ii(e,t,r.epsilon)},&quot;Fraction, Fraction&quot;:function(e,t){return-1===e.compare(t)},&quot;Complex, Complex&quot;:function(e,t){throw new TypeError(&quot;No ordering relation is defined for complex numbers&quot;)}},f,c({SS:u,DS:o,Ss:s}))})),kc=Ee(Bc,[&quot;typed&quot;,&quot;config&quot;],(function(e){var t=e.typed,r=e.config;return t(Bc,{&quot;number, number&quot;:function(e,t){return e&lt;t&amp;&amp;!ue(e,t,r.epsilon)}})})),Ic=&quot;smallerEq&quot;,Rc=Ee(Ic,[&quot;typed&quot;,&quot;config&quot;,&quot;matrix&quot;,&quot;DenseMatrix&quot;,&quot;concat&quot;],(function(e){var t=e.typed,r=e.config,n=e.matrix,i=e.DenseMatrix,a=e.concat,o=Ka({typed:t}),u=Ho({typed:t,DenseMatrix:i}),s=ma({typed:t,DenseMatrix:i}),c=ja({typed:t,matrix:n,concat:a}),f=ai({typed:t});return t(Ic,zc({typed:t,config:r}),{&quot;boolean, boolean&quot;:function(e,t){return e&lt;=t},&quot;BigNumber, BigNumber&quot;:function(e,t){return e.lte(t)||ii(e,t,r.epsilon)},&quot;Fraction, Fraction&quot;:function(e,t){return 1!==e.compare(t)},&quot;Complex, Complex&quot;:function(){throw new TypeError(&quot;No ordering relation is defined for complex numbers&quot;)}},f,c({SS:u,DS:o,Ss:s}))})),zc=Ee(Ic,[&quot;typed&quot;,&quot;config&quot;],(function(e){var t=e.typed,r=e.config;return t(Ic,{&quot;number, number&quot;:function(e,t){return e&lt;=t||ue(e,t,r.epsilon)}})})),qc=&quot;larger&quot;,jc=Ee(qc,[&quot;typed&quot;,&quot;config&quot;,&quot;matrix&quot;,&quot;DenseMatrix&quot;,&quot;concat&quot;],(function(e){var t=e.typed,r=e.config,n=e.matrix,i=e.DenseMatrix,a=e.concat,o=Ka({typed:t}),u=Ho({typed:t,DenseMatrix:i}),s=ma({typed:t,DenseMatrix:i}),c=ja({typed:t,matrix:n,concat:a}),f=ai({typed:t});return t(qc,Pc({typed:t,config:r}),{&quot;boolean, boolean&quot;:function(e,t){return e&gt;t},&quot;BigNumber, BigNumber&quot;:function(e,t){return e.gt(t)&amp;&amp;!ii(e,t,r.epsilon)},&quot;Fraction, Fraction&quot;:function(e,t){return 1===e.compare(t)},&quot;Complex, Complex&quot;:function(){throw new TypeError(&quot;No ordering relation is defined for complex numbers&quot;)}},f,c({SS:u,DS:o,Ss:s}))})),Pc=Ee(qc,[&quot;typed&quot;,&quot;config&quot;],(function(e){var t=e.typed,r=e.config;return t(qc,{&quot;number, number&quot;:function(e,t){return e&gt;t&amp;&amp;!ue(e,t,r.epsilon)}})})),Lc=&quot;largerEq&quot;,Uc=Ee(Lc,[&quot;typed&quot;,&quot;config&quot;,&quot;matrix&quot;,&quot;DenseMatrix&quot;,&quot;concat&quot;],(function(e){var t=e.typed,r=e.config,n=e.matrix,i=e.DenseMatrix,a=e.concat,o=Ka({typed:t}),u=Ho({typed:t,DenseMatrix:i}),s=ma({typed:t,DenseMatrix:i}),c=ja({typed:t,matrix:n,concat:a}),f=ai({typed:t});return t(Lc,$c({typed:t,config:r}),{&quot;boolean, boolean&quot;:function(e,t){return e&gt;=t},&quot;BigNumber, BigNumber&quot;:function(e,t){return e.gte(t)||ii(e,t,r.epsilon)},&quot;Fraction, Fraction&quot;:function(e,t){return-1!==e.compare(t)},&quot;Complex, Complex&quot;:function(){throw new TypeError(&quot;No ordering relation is defined for complex numbers&quot;)}},f,c({SS:u,DS:o,Ss:s}))})),$c=Ee(Lc,[&quot;typed&quot;,&quot;config&quot;],(function(e){var t=e.typed,r=e.config;return t(Lc,{&quot;number, number&quot;:function(e,t){return e&gt;=t||ue(e,t,r.epsilon)}})})),Hc=&quot;deepEqual&quot;,Gc=Ee(Hc,[&quot;typed&quot;,&quot;equal&quot;],(function(e){var t=e.typed,r=e.equal;return t(Hc,{&quot;any, any&quot;:function(e,t){return n(e.valueOf(),t.valueOf())}});function n(e,t){if(Array.isArray(e)){if(Array.isArray(t)){var i=e.length;if(i!==t.length)return!1;for(var a=0;a&lt;i;a++)if(!n(e[a],t[a]))return!1;return!0}return!1}return!Array.isArray(t)&amp;&amp;r(e,t)}})),Vc=&quot;unequal&quot;,Zc=Ee(Vc,[&quot;typed&quot;,&quot;config&quot;,&quot;equalScalar&quot;,&quot;matrix&quot;,&quot;DenseMatrix&quot;,&quot;concat&quot;],(function(e){var t=e.typed,r=(e.config,e.equalScalar),n=e.matrix,i=e.DenseMatrix,a=e.concat,o=Ka({typed:t}),u=Ho({typed:t,DenseMatrix:i}),s=ma({typed:t,DenseMatrix:i}),c=ja({typed:t,matrix:n,concat:a});return t(Vc,Wc({typed:t,equalScalar:r}),c({elop:function(e,t){return!r(e,t)},SS:u,DS:o,Ss:s}))})),Wc=Ee(Vc,[&quot;typed&quot;,&quot;equalScalar&quot;],(function(e){var t=e.typed,r=e.equalScalar;return t(Vc,{&quot;any, any&quot;:function(e,t){return null===e?null!==t:null===t?null!==e:void 0===e?void 0!==t:void 0===t?void 0!==e:!r(e,t)}})})),Yc=&quot;partitionSelect&quot;,Jc=Ee(Yc,[&quot;typed&quot;,&quot;isNumeric&quot;,&quot;isNaN&quot;,&quot;compare&quot;],(function(e){var t=e.typed,r=e.isNumeric,n=e.isNaN,i=e.compare,a=i,o=function(e,t){return-i(e,t)};return t(Yc,{&quot;Array | Matrix, number&quot;:function(e,t){return u(e,t,a)},&quot;Array | Matrix, number, string&quot;:function(e,t,r){if(&quot;asc&quot;===r)return u(e,t,a);if(&quot;desc&quot;===r)return u(e,t,o);throw new Error('Compare string must be &quot;asc&quot; or &quot;desc&quot;')},&quot;Array | Matrix, number, function&quot;:u});function u(e,t,r){if(!V(t)||t&lt;0)throw new Error(&quot;k must be a non-negative integer&quot;);if(l(e)){if(e.size().length&gt;1)throw new Error(&quot;Only one dimensional matrices supported&quot;);return s(e.valueOf(),t,r)}if(Array.isArray(e))return s(e,t,r)}function s(e,t,i){if(t&gt;=e.length)throw new Error(&quot;k out of bounds&quot;);for(var a=0;a&lt;e.length;a++)if(r(e[a])&amp;&amp;n(e[a]))return e[a];for(var o=0,u=e.length-1;o&lt;u;){for(var s=o,c=u,f=e[Math.floor(Math.random()*(u-o+1))+o];s&lt;c;)if(i(e[s],f)&gt;=0){var l=e[c];e[c]=e[s],e[s]=l,--c}else++s;i(e[s],f)&gt;0&amp;&amp;--s,t&lt;=s?u=s:o=s+1}return e[t]}})),Xc=&quot;sort&quot;,Qc=Ee(Xc,[&quot;typed&quot;,&quot;matrix&quot;,&quot;compare&quot;,&quot;compareNatural&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.compare,i=e.compareNatural,a=n,o=function(e,t){return-n(e,t)};return t(Xc,{Array:function(e){return s(e),e.sort(a)},Matrix:function(e){return c(e),r(e.toArray().sort(a),e.storage())},&quot;Array, function&quot;:function(e,t){return s(e),e.sort(t)},&quot;Matrix, function&quot;:function(e,t){return c(e),r(e.toArray().sort(t),e.storage())},&quot;Array, string&quot;:function(e,t){return s(e),e.sort(u(t))},&quot;Matrix, string&quot;:function(e,t){return c(e),r(e.toArray().sort(u(t)),e.storage())}});function u(e){if(&quot;asc&quot;===e)return a;if(&quot;desc&quot;===e)return o;if(&quot;natural&quot;===e)return i;throw new Error('String &quot;asc&quot;, &quot;desc&quot;, or &quot;natural&quot; expected')}function s(e){if(1!==Kr(e).length)throw new Error(&quot;One dimensional array expected&quot;)}function c(e){if(1!==e.size().length)throw new Error(&quot;One dimensional matrix expected&quot;)}})),Kc=Ee(&quot;max&quot;,[&quot;typed&quot;,&quot;config&quot;,&quot;numeric&quot;,&quot;larger&quot;],(function(e){var t=e.typed,r=e.config,n=e.numeric,i=e.larger;return t(&quot;max&quot;,{&quot;Array | Matrix&quot;:o,&quot;Array | Matrix, number | BigNumber&quot;:function(e,t){return kn(e,t.valueOf(),a)},&quot;...&quot;:function(e){if(Tn(e))throw new TypeError(&quot;Scalar values expected in function max&quot;);return o(e)}});function a(e,t){try{return i(e,t)?e:t}catch(e){throw Es(e,&quot;max&quot;,t)}}function o(e){var t;if(Bn(e,(function(e){try{isNaN(e)&amp;&amp;&quot;number&quot;==typeof e?t=NaN:(void 0===t||i(e,t))&amp;&amp;(t=e)}catch(t){throw Es(t,&quot;max&quot;,e)}})),void 0===t)throw new Error(&quot;Cannot calculate max of an empty array&quot;);return&quot;string&quot;==typeof t&amp;&amp;(t=n(t,r.number)),t}})),ef=Ee(&quot;min&quot;,[&quot;typed&quot;,&quot;config&quot;,&quot;numeric&quot;,&quot;smaller&quot;],(function(e){var t=e.typed,r=e.config,n=e.numeric,i=e.smaller;return t(&quot;min&quot;,{&quot;Array | Matrix&quot;:o,&quot;Array | Matrix, number | BigNumber&quot;:function(e,t){return kn(e,t.valueOf(),a)},&quot;...&quot;:function(e){if(Tn(e))throw new TypeError(&quot;Scalar values expected in function min&quot;);return o(e)}});function a(e,t){try{return i(e,t)?e:t}catch(e){throw Es(e,&quot;min&quot;,t)}}function o(e){var t;if(Bn(e,(function(e){try{isNaN(e)&amp;&amp;&quot;number&quot;==typeof e?t=NaN:(void 0===t||i(e,t))&amp;&amp;(t=e)}catch(t){throw Es(t,&quot;min&quot;,e)}})),void 0===t)throw new Error(&quot;Cannot calculate min of an empty array&quot;);return&quot;string&quot;==typeof t&amp;&amp;(t=n(t,r.number)),t}})),tf=Ee(&quot;ImmutableDenseMatrix&quot;,[&quot;smaller&quot;,&quot;DenseMatrix&quot;],(function(e){var t=e.smaller,r=e.DenseMatrix;function n(e,t){if(!(this instanceof n))throw new SyntaxError(&quot;Constructor must be called with the new operator&quot;);if(t&amp;&amp;!c(t))throw new Error(&quot;Invalid datatype: &quot;+t);if(l(e)||f(e)){var i=new r(e,t);this._data=i._data,this._size=i._size,this._datatype=i._datatype,this._min=null,this._max=null}else if(e&amp;&amp;f(e.data)&amp;&amp;f(e.size))this._data=e.data,this._size=e.size,this._datatype=e.datatype,this._min=void 0!==e.min?e.min:null,this._max=void 0!==e.max?e.max:null;else{if(e)throw new TypeError(&quot;Unsupported type of data (&quot;+H(e)+&quot;)&quot;);this._data=[],this._size=[0],this._datatype=t,this._min=null,this._max=null}}return n.prototype=new r,n.prototype.type=&quot;ImmutableDenseMatrix&quot;,n.prototype.isImmutableDenseMatrix=!0,n.prototype.subset=function(e){switch(arguments.length){case 1:var t=r.prototype.subset.call(this,e);return l(t)?new n({data:t._data,size:t._size,datatype:t._datatype}):t;case 2:case 3:throw new Error(&quot;Cannot invoke set subset on an Immutable Matrix instance&quot;);default:throw new SyntaxError(&quot;Wrong number of arguments&quot;)}},n.prototype.set=function(){throw new Error(&quot;Cannot invoke set on an Immutable Matrix instance&quot;)},n.prototype.resize=function(){throw new Error(&quot;Cannot invoke resize on an Immutable Matrix instance&quot;)},n.prototype.reshape=function(){throw new Error(&quot;Cannot invoke reshape on an Immutable Matrix instance&quot;)},n.prototype.clone=function(){return new n({data:he(this._data),size:he(this._size),datatype:this._datatype})},n.prototype.toJSON=function(){return{mathjs:&quot;ImmutableDenseMatrix&quot;,data:this._data,size:this._size,datatype:this._datatype}},n.fromJSON=function(e){return new n(e)},n.prototype.swapRows=function(){throw new Error(&quot;Cannot invoke swapRows on an Immutable Matrix instance&quot;)},n.prototype.min=function(){if(null===this._min){var e=null;this.forEach((function(r){(null===e||t(r,e))&amp;&amp;(e=r)})),this._min=null!==e?e:void 0}return this._min},n.prototype.max=function(){if(null===this._max){var e=null;this.forEach((function(r){(null===e||t(e,r))&amp;&amp;(e=r)})),this._max=null!==e?e:void 0}return this._max},n}),{isClass:!0}),rf=Ee(&quot;Index&quot;,[&quot;ImmutableDenseMatrix&quot;],(function(e){var t=e.ImmutableDenseMatrix;function r(e){if(!(this instanceof r))throw new SyntaxError(&quot;Constructor must be called with the new operator&quot;);this._dimensions=[],this._isScalar=!0;for(var t=0,i=arguments.length;t&lt;i;t++){var a=arguments[t];if(d(a))this._dimensions.push(a),this._isScalar=!1;else if(Array.isArray(a)||l(a)){var o=n(a.valueOf());this._dimensions.push(o);var u=o.size();1===u.length&amp;&amp;1===u[0]||(this._isScalar=!1)}else if(&quot;number&quot;==typeof a)this._dimensions.push(n([a]));else{if(&quot;string&quot;!=typeof a)throw new TypeError(&quot;Dimension must be an Array, Matrix, number, string, or Range&quot;);this._dimensions.push(a)}}}function n(e){for(var r=0,n=e.length;r&lt;n;r++)if(&quot;number&quot;!=typeof e[r]||!V(e[r]))throw new TypeError(&quot;Index parameters must be positive integer numbers&quot;);return new t(e)}return r.prototype.type=&quot;Index&quot;,r.prototype.isIndex=!0,r.prototype.clone=function(){var e=new r;return e._dimensions=he(this._dimensions),e._isScalar=this._isScalar,e},r.create=function(e){var t=new r;return r.apply(t,e),t},r.prototype.size=function(){for(var e=[],t=0,r=this._dimensions.length;t&lt;r;t++){var n=this._dimensions[t];e[t]=&quot;string&quot;==typeof n?1:n.size()[0]}return e},r.prototype.max=function(){for(var e=[],t=0,r=this._dimensions.length;t&lt;r;t++){var n=this._dimensions[t];e[t]=&quot;string&quot;==typeof n?n:n.max()}return e},r.prototype.min=function(){for(var e=[],t=0,r=this._dimensions.length;t&lt;r;t++){var n=this._dimensions[t];e[t]=&quot;string&quot;==typeof n?n:n.min()}return e},r.prototype.forEach=function(e){for(var t=0,r=this._dimensions.length;t&lt;r;t++)e(this._dimensions[t],t,this)},r.prototype.dimension=function(e){return this._dimensions[e]||null},r.prototype.isObjectProperty=function(){return 1===this._dimensions.length&amp;&amp;&quot;string&quot;==typeof this._dimensions[0]},r.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},r.prototype.isScalar=function(){return this._isScalar},r.prototype.toArray=function(){for(var e=[],t=0,r=this._dimensions.length;t&lt;r;t++){var n=this._dimensions[t];e.push(&quot;string&quot;==typeof n?n:n.toArray())}return e},r.prototype.valueOf=r.prototype.toArray,r.prototype.toString=function(){for(var e=[],t=0,r=this._dimensions.length;t&lt;r;t++){var n=this._dimensions[t];&quot;string&quot;==typeof n?e.push(JSON.stringify(n)):e.push(n.toString())}return&quot;[&quot;+e.join(&quot;, &quot;)+&quot;]&quot;},r.prototype.toJSON=function(){return{mathjs:&quot;Index&quot;,dimensions:this._dimensions}},r.fromJSON=function(e){return r.create(e.dimensions)},r}),{isClass:!0}),nf=Ee(&quot;FibonacciHeap&quot;,[&quot;smaller&quot;,&quot;larger&quot;],(function(e){var t=e.smaller,r=e.larger,n=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError(&quot;Constructor must be called with the new operator&quot;);this._minimum=null,this._size=0}function a(e,t,r){t.left.right=t.right,t.right.left=t.left,r.degree--,r.child===t&amp;&amp;(r.child=t.right),0===r.degree&amp;&amp;(r.child=null),t.left=e,t.right=e.right,e.right=t,t.right.left=t,t.parent=null,t.mark=!1}function o(e,t){var r=t.parent;r&amp;&amp;(t.mark?(a(e,t,r),o(r)):t.mark=!0)}i.prototype.type=&quot;FibonacciHeap&quot;,i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(e,r){var n={key:e,value:r,degree:0};if(this._minimum){var i=this._minimum;n.left=i,n.right=i.right,i.right=n,n.right.left=n,t(e,i.key)&amp;&amp;(this._minimum=n)}else n.left=n,n.right=n,this._minimum=n;return this._size++,n},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return 0===this._size},i.prototype.extractMinimum=function(){var e=this._minimum;if(null===e)return e;for(var i=this._minimum,a=e.degree,o=e.child;a&gt;0;){var s=o.right;o.left.right=o.right,o.right.left=o.left,o.left=i,o.right=i.right,i.right=o,o.right.left=o,o.parent=null,o=s,a--}return e.left.right=e.right,e.right.left=e.left,i=e===e.right?null:function(e,i){var a,o=Math.floor(Math.log(i)*n)+1,s=new Array(o),c=0,f=e;if(f)for(c++,f=f.right;f!==e;)c++,f=f.right;for(;c&gt;0;){for(var l=f.degree,p=f.right;a=s[l];){if(r(f.key,a.key)){var m=a;a=f,f=m}u(a,f),s[l]=null,l++}s[l]=f,f=p,c--}e=null;for(var h=0;h&lt;o;h++)(a=s[h])&amp;&amp;(e?(a.left.right=a.right,a.right.left=a.left,a.left=e,a.right=e.right,e.right=a,a.right.left=a,t(a.key,e.key)&amp;&amp;(e=a)):e=a);return e}(i=e.right,this._size),this._size--,this._minimum=i,e},i.prototype.remove=function(e){this._minimum=function(e,r,n){r.key=-1;var i=r.parent;return i&amp;&amp;t(r.key,i.key)&amp;&amp;(a(e,r,i),o(e,i)),t(r.key,e.key)&amp;&amp;(e=r),e}(this._minimum,e),this.extractMinimum()};var u=function(e,t){e.left.right=e.right,e.right.left=e.left,e.parent=t,t.child?(e.left=t.child,e.right=t.child.right,t.child.right=e,e.right.left=e):(t.child=e,e.right=e,e.left=e),t.degree++,e.mark=!1};return i}),{isClass:!0}),af=Ee(&quot;Spa&quot;,[&quot;addScalar&quot;,&quot;equalScalar&quot;,&quot;FibonacciHeap&quot;],(function(e){var t=e.addScalar,r=e.equalScalar,n=e.FibonacciHeap;function i(){if(!(this instanceof i))throw new SyntaxError(&quot;Constructor must be called with the new operator&quot;);this._values=[],this._heap=new n}return i.prototype.type=&quot;Spa&quot;,i.prototype.isSpa=!0,i.prototype.set=function(e,t){if(this._values[e])this._values[e].value=t;else{var r=this._heap.insert(e,t);this._values[e]=r}},i.prototype.get=function(e){var t=this._values[e];return t?t.value:0},i.prototype.accumulate=function(e,r){var n=this._values[e];n?n.value=t(n.value,r):(n=this._heap.insert(e,r),this._values[e]=n)},i.prototype.forEach=function(e,t,n){var i=this._heap,a=this._values,o=[],u=i.extractMinimum();for(u&amp;&amp;o.push(u);u&amp;&amp;u.key&lt;=t;)u.key&gt;=e&amp;&amp;(r(u.value,0)||n(u.key,u.value,this)),(u=i.extractMinimum())&amp;&amp;o.push(u);for(var s=0;s&lt;o.length;s++){var c=o[s];a[(u=i.insert(c.key,c.value)).key]=u}},i.prototype.swap=function(e,t){var r=this._values[e],n=this._values[t];if(!r&amp;&amp;n)r=this._heap.insert(e,n.value),this._heap.remove(n),this._values[e]=r,this._values[t]=void 0;else if(r&amp;&amp;!n)n=this._heap.insert(t,r.value),this._heap.remove(r),this._values[t]=n,this._values[e]=void 0;else if(r&amp;&amp;n){var i=r.value;r.value=n.value,n.value=i}},i}),{isClass:!0});function of(){return of=Object.assign?Object.assign.bind():function(e){for(var t=1;t&lt;arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&amp;&amp;(e[n]=r[n])}return e},of.apply(this,arguments)}r(3650);var uf=En((function(e){return new e(1).exp()}),{hasher:lf}),sf=En((function(e){return new e(1).plus(new e(5).sqrt()).div(2)}),{hasher:lf}),cf=En((function(e){return e.acos(-1)}),{hasher:lf}),ff=En((function(e){return cf(e).times(2)}),{hasher:lf});function lf(e){return e[0].precision}function pf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&amp;&amp;(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mf(e){for(var t=1;t&lt;arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pf(Object(r),!0).forEach((function(t){Ba(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var hf=Ee(&quot;Unit&quot;,[&quot;?on&quot;,&quot;config&quot;,&quot;addScalar&quot;,&quot;subtract&quot;,&quot;multiplyScalar&quot;,&quot;divideScalar&quot;,&quot;pow&quot;,&quot;abs&quot;,&quot;fix&quot;,&quot;round&quot;,&quot;equal&quot;,&quot;isNumeric&quot;,&quot;format&quot;,&quot;number&quot;,&quot;Complex&quot;,&quot;BigNumber&quot;,&quot;Fraction&quot;],(function(e){var r,n,i,a=e.on,u=e.config,c=e.addScalar,f=e.subtract,l=e.multiplyScalar,p=e.divideScalar,m=e.pow,h=e.abs,d=e.fix,v=e.round,y=e.equal,g=e.isNumeric,x=e.format,b=e.number,w=e.Complex,N=e.BigNumber,D=e.Fraction,E=b;function A(e,t){if(!(this instanceof A))throw new Error(&quot;Constructor must be called with the new operator&quot;);if(null!=e&amp;&amp;!g(e)&amp;&amp;!o(e))throw new TypeError(&quot;First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined&quot;);if(this.fixPrefix=!1,this.skipAutomaticSimplification=!0,void 0===t)this.units=[],this.dimensions=R.map((function(e){return 0}));else if(&quot;string&quot;==typeof t){var r=A.parse(t);this.units=r.units,this.dimensions=r.dimensions}else{if(!s(t)||null!==t.value)throw new TypeError(&quot;Second parameter in Unit constructor must be a string or valueless Unit&quot;);this.fixPrefix=t.fixPrefix,this.skipAutomaticSimplification=t.skipAutomaticSimplification,this.dimensions=t.dimensions.slice(0),this.units=t.units.map((function(e){return of({},e)}))}this.value=this._normalize(e)}function S(){for(;&quot; &quot;===i||&quot;\st&quot;===i;)M()}function C(e){return e&gt;=&quot;0&quot;&amp;&amp;e&lt;=&quot;9&quot;}function M(){n++,i=r.charAt(n)}function F(e){n=e,i=r.charAt(n)}function O(){var e=&quot;&quot;,t=n;if(&quot;+&quot;===i?M():&quot;-&quot;===i&amp;&amp;(e+=i,M()),!function(e){return e&gt;=&quot;0&quot;&amp;&amp;e&lt;=&quot;9&quot;||&quot;.&quot;===e}(i))return F(t),null;if(&quot;.&quot;===i){if(e+=i,M(),!C(i))return F(t),null}else{for(;C(i);)e+=i,M();&quot;.&quot;===i&amp;&amp;(e+=i,M())}for(;C(i);)e+=i,M();if(&quot;E&quot;===i||&quot;e&quot;===i){var r=&quot;&quot;,a=n;if(r+=i,M(),&quot;+&quot;!==i&amp;&amp;&quot;-&quot;!==i||(r+=i,M()),!C(i))return F(a),e;for(e+=r;C(i);)e+=i,M()}return e}function T(){for(var e=&quot;&quot;;C(i)||A.isValidAlpha(i);)e+=i,M();var t=e.charAt(0);return A.isValidAlpha(t)?e:null}function B(e){return i===e?(M(),e):null}Object.defineProperty(A,&quot;name&quot;,{value:&quot;Unit&quot;}),A.prototype.constructor=A,A.prototype.type=&quot;Unit&quot;,A.prototype.isUnit=!0,A.parse=function(e,t){if(t=t||{},n=-1,i=&quot;&quot;,&quot;string&quot;!=typeof(r=e))throw new TypeError(&quot;Invalid argument in Unit.parse, string expected&quot;);var a=new A;a.units=[];var o=1,s=!1;M(),S();var c=O(),f=null;if(c){if(&quot;BigNumber&quot;===u.number)f=new N(c);else if(&quot;Fraction&quot;===u.number)try{f=new D(c)}catch(e){f=parseFloat(c)}else f=parseFloat(c);S(),B(&quot;*&quot;)?(o=1,s=!0):B(&quot;/&quot;)&amp;&amp;(o=-1,s=!0)}for(var l=[],p=1;;){for(S();&quot;(&quot;===i;)l.push(o),p*=o,o=1,M(),S();var m;if(!i)break;var h=i;if(null===(m=T()))throw new SyntaxError('Unexpected &quot;'+h+'&quot; in &quot;'+r+'&quot; at index '+n.toString());var d=_(m);if(null===d)throw new SyntaxError('Unit &quot;'+m+'&quot; not found.');var v=o*p;if(S(),B(&quot;^&quot;)){S();var y=O();if(null===y)throw new SyntaxError('In &quot;'+e+'&quot;, &quot;^&quot; must be followed by a floating-point number');v*=y}a.units.push({unit:d.unit,prefix:d.prefix,power:v});for(var g=0;g&lt;R.length;g++)a.dimensions[g]+=(d.unit.dimensions[g]||0)*v;for(S();&quot;)&quot;===i;){if(0===l.length)throw new SyntaxError('Unmatched &quot;)&quot; in &quot;'+r+'&quot; at index '+n.toString());p/=l.pop(),M(),S()}if(s=!1,B(&quot;*&quot;)?(o=1,s=!0):B(&quot;/&quot;)?(o=-1,s=!0):o=1,d.unit.base){var x=d.unit.base.key;$.auto[x]={unit:d.unit,prefix:d.prefix}}}if(S(),i)throw new SyntaxError('Could not parse: &quot;'+e+'&quot;');if(s)throw new SyntaxError('Trailing characters: &quot;'+e+'&quot;');if(0!==l.length)throw new SyntaxError('Unmatched &quot;(&quot; in &quot;'+r+'&quot;');if(0===a.units.length&amp;&amp;!t.allowNoUnits)throw new SyntaxError('&quot;'+e+'&quot; contains no units');return a.value=void 0!==f?a._normalize(f):null,a},A.prototype.clone=function(){var e=new A;e.fixPrefix=this.fixPrefix,e.skipAutomaticSimplification=this.skipAutomaticSimplification,e.value=he(this.value),e.dimensions=this.dimensions.slice(0),e.units=[];for(var t=0;t&lt;this.units.length;t++)for(var r in e.units[t]={},this.units[t])Ne(this.units[t],r)&amp;&amp;(e.units[t][r]=this.units[t][r]);return e},A.prototype.valueType=function(){return H(this.value)},A.prototype._isDerived=function(){return 0!==this.units.length&amp;&amp;(this.units.length&gt;1||Math.abs(this.units[0].power-1)&gt;1e-15)},A.prototype._normalize=function(e){if(null==e||0===this.units.length)return e;for(var t=e,r=A._getNumberConverter(H(e)),n=0;n&lt;this.units.length;n++){var i=r(this.units[n].unit.value),a=r(this.units[n].prefix.value),o=r(this.units[n].power);t=l(t,m(l(i,a),o))}return t},A.prototype._denormalize=function(e,t){if(null==e||0===this.units.length)return e;for(var r=e,n=A._getNumberConverter(H(e)),i=0;i&lt;this.units.length;i++){var a=n(this.units[i].unit.value),o=n(this.units[i].prefix.value),u=n(this.units[i].power);r=p(r,m(l(a,o),u))}return r};var _=En((function(e){if(Ne(P,e)){var t=P[e];return{unit:t,prefix:t.prefixes[&quot;&quot;]}}for(var r in P)if(Ne(P,r)&amp;&amp;Gr(e,r)){var n=P[r],i=e.length-r.length,a=e.substring(0,i),o=Ne(n.prefixes,a)?n.prefixes[a]:void 0;if(void 0!==o)return{unit:n,prefix:o}}return null}),{hasher:function(e){return e[0]},limit:100});function k(e){return e.equalBase(z.NONE)&amp;&amp;null!==e.value&amp;&amp;!u.predictable?e.value:e}A.isValuelessUnit=function(e){return null!==_(e)},A.prototype.hasBase=function(e){if(&quot;string&quot;==typeof e&amp;&amp;(e=z[e]),!e)return!1;for(var t=0;t&lt;R.length;t++)if(Math.abs((this.dimensions[t]||0)-(e.dimensions[t]||0))&gt;1e-12)return!1;return!0},A.prototype.equalBase=function(e){for(var t=0;t&lt;R.length;t++)if(Math.abs((this.dimensions[t]||0)-(e.dimensions[t]||0))&gt;1e-12)return!1;return!0},A.prototype.equals=function(e){return this.equalBase(e)&amp;&amp;y(this.value,e.value)},A.prototype.multiply=function(e){for(var t=this.clone(),r=s(e)?e:new A(e),n=0;n&lt;R.length;n++)t.dimensions[n]=(this.dimensions[n]||0)+(r.dimensions[n]||0);for(var i=0;i&lt;r.units.length;i++){var a=mf({},r.units[i]);t.units.push(a)}if(null!==this.value||null!==r.value){var o=null===this.value?this._normalize(1):this.value,u=null===r.value?r._normalize(1):r.value;t.value=l(o,u)}else t.value=null;return s(e)&amp;&amp;(t.skipAutomaticSimplification=!1),k(t)},A.prototype.divideInto=function(e){return new A(e).divide(this)},A.prototype.divide=function(e){for(var t=this.clone(),r=s(e)?e:new A(e),n=0;n&lt;R.length;n++)t.dimensions[n]=(this.dimensions[n]||0)-(r.dimensions[n]||0);for(var i=0;i&lt;r.units.length;i++){var a=mf(mf({},r.units[i]),{},{power:-r.units[i].power});t.units.push(a)}if(null!==this.value||null!==r.value){var o=null===this.value?this._normalize(1):this.value,u=null===r.value?r._normalize(1):r.value;t.value=p(o,u)}else t.value=null;return s(e)&amp;&amp;(t.skipAutomaticSimplification=!1),k(t)},A.prototype.pow=function(e){for(var t=this.clone(),r=0;r&lt;R.length;r++)t.dimensions[r]=(this.dimensions[r]||0)*e;for(var n=0;n&lt;t.units.length;n++)t.units[n].power*=e;return null!==t.value?t.value=m(t.value,e):t.value=null,t.skipAutomaticSimplification=!1,k(t)},A.prototype.abs=function(){var e=this.clone();if(null!==e.value)if(e._isDerived()||0===e.units[0].unit.offset)e.value=h(e.value);else{var t=e._numberConverter(),r=t(e.units[0].unit.value),n=t(e.units[0].unit.offset),i=l(r,n);e.value=f(h(c(e.value,i)),i)}for(var a in e.units)&quot;VA&quot;!==e.units[a].unit.name&amp;&amp;&quot;VAR&quot;!==e.units[a].unit.name||(e.units[a].unit=P.W);return e},A.prototype.to=function(e){var t,r=null===this.value?this._normalize(1):this.value;if(&quot;string&quot;==typeof e)t=A.parse(e);else{if(!s(e))throw new Error(&quot;String or Unit expected as parameter&quot;);t=e.clone()}if(!this.equalBase(t))throw new Error(&quot;Units do not match ('&quot;.concat(t.toString(),&quot;' != '&quot;).concat(this.toString(),&quot;')&quot;));if(null!==t.value)throw new Error(&quot;Cannot convert to a unit with a value&quot;);if(null===this.value||this._isDerived()||this.units[0].unit.offset===t.units[0].unit.offset)t.value=he(r);else{var n=A._getNumberConverter(H(r)),i=this.units[0].unit.value,a=this.units[0].unit.offset,o=l(i,a),u=t.units[0].unit.value,p=t.units[0].unit.offset,m=l(u,p);t.value=c(r,n(f(o,m)))}return t.fixPrefix=!0,t.skipAutomaticSimplification=!0,t},A.prototype.toNumber=function(e){return E(this.toNumeric(e))},A.prototype.toNumeric=function(e){var t;return(t=e?this.to(e):this.clone())._isDerived()||0===t.units.length?t._denormalize(t.value):t._denormalize(t.value,t.units[0].prefix.value)},A.prototype.toString=function(){return this.format()},A.prototype.toJSON=function(){return{mathjs:&quot;Unit&quot;,value:this._denormalize(this.value),unit:this.formatUnits(),fixPrefix:this.fixPrefix}},A.fromJSON=function(e){var t=new A(e.value,e.unit);return t.fixPrefix=e.fixPrefix||!1,t},A.prototype.valueOf=A.prototype.toString,A.prototype.simplify=function(){var e,t,r=this.clone(),n=[];for(var i in G)if(Ne(G,i)&amp;&amp;r.hasBase(z[i])){e=i;break}if(&quot;NONE&quot;===e)r.units=[];else if(e&amp;&amp;Ne(G,e)&amp;&amp;(t=G[e]),t)r.units=[{unit:t.unit,prefix:t.prefix,power:1}];else{for(var a=!1,o=0;o&lt;R.length;o++){var u=R[o];Math.abs(r.dimensions[o]||0)&gt;1e-12&amp;&amp;(Ne(G,u)?n.push({unit:G[u].unit,prefix:G[u].prefix,power:r.dimensions[o]||0}):a=!0)}n.length&lt;r.units.length&amp;&amp;!a&amp;&amp;(r.units=n)}return r},A.prototype.toSI=function(){for(var e=this.clone(),t=[],r=0;r&lt;R.length;r++){var n=R[r];if(Math.abs(e.dimensions[r]||0)&gt;1e-12){if(!Ne($.si,n))throw new Error(&quot;Cannot express custom unit &quot;+n+&quot; in SI units&quot;);t.push({unit:$.si[n].unit,prefix:$.si[n].prefix,power:e.dimensions[r]||0})}}return e.units=t,e.fixPrefix=!0,e.skipAutomaticSimplification=!0,e},A.prototype.formatUnits=function(){for(var e=&quot;&quot;,t=&quot;&quot;,r=0,n=0,i=0;i&lt;this.units.length;i++)this.units[i].power&gt;0?(r++,e+=&quot; &quot;+this.units[i].prefix.name+this.units[i].unit.name,Math.abs(this.units[i].power-1)&gt;1e-15&amp;&amp;(e+=&quot;^&quot;+this.units[i].power)):this.units[i].power&lt;0&amp;&amp;n++;if(n&gt;0)for(var a=0;a&lt;this.units.length;a++)this.units[a].power&lt;0&amp;&amp;(r&gt;0?(t+=&quot; &quot;+this.units[a].prefix.name+this.units[a].unit.name,Math.abs(this.units[a].power+1)&gt;1e-15&amp;&amp;(t+=&quot;^&quot;+-this.units[a].power)):(t+=&quot; &quot;+this.units[a].prefix.name+this.units[a].unit.name,t+=&quot;^&quot;+this.units[a].power));e=e.substr(1),t=t.substr(1),r&gt;1&amp;&amp;n&gt;0&amp;&amp;(e=&quot;(&quot;+e+&quot;)&quot;),n&gt;1&amp;&amp;r&gt;0&amp;&amp;(t=&quot;(&quot;+t+&quot;)&quot;);var o=e;return r&gt;0&amp;&amp;n&gt;0&amp;&amp;(o+=&quot; / &quot;),o+t},A.prototype.format=function(e){var t=this.skipAutomaticSimplification||null===this.value?this.clone():this.simplify(),r=!1;for(var n in void 0!==t.value&amp;&amp;null!==t.value&amp;&amp;o(t.value)&amp;&amp;(r=Math.abs(t.value.re)&lt;1e-14),t.units)Ne(t.units,n)&amp;&amp;t.units[n].unit&amp;&amp;(&quot;VA&quot;===t.units[n].unit.name&amp;&amp;r?t.units[n].unit=P.VAR:&quot;VAR&quot;!==t.units[n].unit.name||r||(t.units[n].unit=P.VA));1!==t.units.length||t.fixPrefix||Math.abs(t.units[0].power-Math.round(t.units[0].power))&lt;1e-14&amp;&amp;(t.units[0].prefix=t._bestPrefix());var i=t._denormalize(t.value),a=null!==t.value?x(i,e||{}):&quot;&quot;,u=t.formatUnits();return t.value&amp;&amp;o(t.value)&amp;&amp;(a=&quot;(&quot;+a+&quot;)&quot;),u.length&gt;0&amp;&amp;a.length&gt;0&amp;&amp;(a+=&quot; &quot;),a+u},A.prototype._bestPrefix=function(){if(1!==this.units.length)throw new Error(&quot;Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!&quot;);if(Math.abs(this.units[0].power-Math.round(this.units[0].power))&gt;=1e-14)throw new Error(&quot;Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!&quot;);var e=null!==this.value?h(this.value):0,t=h(this.units[0].unit.value),r=this.units[0].prefix;if(0===e)return r;var n=this.units[0].power,i=Math.log(e/Math.pow(r.value*t,n))/Math.LN10-1.2;if(i&gt;-2.200001&amp;&amp;i&lt;1.800001)return r;i=Math.abs(i);var a=this.units[0].unit.prefixes;for(var o in a)if(Ne(a,o)){var u=a[o];if(u.scientific){var s=Math.abs(Math.log(e/Math.pow(u.value*t,n))/Math.LN10-1.2);(s&lt;i||s===i&amp;&amp;u.name.length&lt;r.name.length)&amp;&amp;(r=u,i=s)}}return r},A.prototype.splitUnit=function(e){for(var t=this.clone(),r=[],n=0;n&lt;e.length&amp;&amp;(t=t.to(e[n]),n!==e.length-1);n++){var i=t.toNumeric(),a=v(i),o=new A(y(a,i)?a:d(t.toNumeric()),e[n].toString());r.push(o),t=f(t,o)}for(var u=0,s=0;s&lt;r.length;s++)u=c(u,r[s].value);return y(u,this.value)&amp;&amp;(t.value=0),r.push(t),r};var I={NONE:{&quot;&quot;:{name:&quot;&quot;,value:1,scientific:!0}},SHORT:{&quot;&quot;:{name:&quot;&quot;,value:1,scientific:!0},da:{name:&quot;da&quot;,value:10,scientific:!1},h:{name:&quot;h&quot;,value:100,scientific:!1},k:{name:&quot;k&quot;,value:1e3,scientific:!0},M:{name:&quot;M&quot;,value:1e6,scientific:!0},G:{name:&quot;G&quot;,value:1e9,scientific:!0},T:{name:&quot;T&quot;,value:1e12,scientific:!0},P:{name:&quot;P&quot;,value:1e15,scientific:!0},E:{name:&quot;E&quot;,value:1e18,scientific:!0},Z:{name:&quot;Z&quot;,value:1e21,scientific:!0},Y:{name:&quot;Y&quot;,value:1e24,scientific:!0},d:{name:&quot;d&quot;,value:.1,scientific:!1},c:{name:&quot;c&quot;,value:.01,scientific:!1},m:{name:&quot;m&quot;,value:.001,scientific:!0},u:{name:&quot;u&quot;,value:1e-6,scientific:!0},n:{name:&quot;n&quot;,value:1e-9,scientific:!0},p:{name:&quot;p&quot;,value:1e-12,scientific:!0},f:{name:&quot;f&quot;,value:1e-15,scientific:!0},a:{name:&quot;a&quot;,value:1e-18,scientific:!0},z:{name:&quot;z&quot;,value:1e-21,scientific:!0},y:{name:&quot;y&quot;,value:1e-24,scientific:!0}},LONG:{&quot;&quot;:{name:&quot;&quot;,value:1,scientific:!0},deca:{name:&quot;deca&quot;,value:10,scientific:!1},hecto:{name:&quot;hecto&quot;,value:100,scientific:!1},kilo:{name:&quot;kilo&quot;,value:1e3,scientific:!0},mega:{name:&quot;mega&quot;,value:1e6,scientific:!0},giga:{name:&quot;giga&quot;,value:1e9,scientific:!0},tera:{name:&quot;tera&quot;,value:1e12,scientific:!0},peta:{name:&quot;peta&quot;,value:1e15,scientific:!0},exa:{name:&quot;exa&quot;,value:1e18,scientific:!0},zetta:{name:&quot;zetta&quot;,value:1e21,scientific:!0},yotta:{name:&quot;yotta&quot;,value:1e24,scientific:!0},deci:{name:&quot;deci&quot;,value:.1,scientific:!1},centi:{name:&quot;centi&quot;,value:.01,scientific:!1},milli:{name:&quot;milli&quot;,value:.001,scientific:!0},micro:{name:&quot;micro&quot;,value:1e-6,scientific:!0},nano:{name:&quot;nano&quot;,value:1e-9,scientific:!0},pico:{name:&quot;pico&quot;,value:1e-12,scientific:!0},femto:{name:&quot;femto&quot;,value:1e-15,scientific:!0},atto:{name:&quot;atto&quot;,value:1e-18,scientific:!0},zepto:{name:&quot;zepto&quot;,value:1e-21,scientific:!0},yocto:{name:&quot;yocto&quot;,value:1e-24,scientific:!0}},SQUARED:{&quot;&quot;:{name:&quot;&quot;,value:1,scientific:!0},da:{name:&quot;da&quot;,value:100,scientific:!1},h:{name:&quot;h&quot;,value:1e4,scientific:!1},k:{name:&quot;k&quot;,value:1e6,scientific:!0},M:{name:&quot;M&quot;,value:1e12,scientific:!0},G:{name:&quot;G&quot;,value:1e18,scientific:!0},T:{name:&quot;T&quot;,value:1e24,scientific:!0},P:{name:&quot;P&quot;,value:1e30,scientific:!0},E:{name:&quot;E&quot;,value:1e36,scientific:!0},Z:{name:&quot;Z&quot;,value:1e42,scientific:!0},Y:{name:&quot;Y&quot;,value:1e48,scientific:!0},d:{name:&quot;d&quot;,value:.01,scientific:!1},c:{name:&quot;c&quot;,value:1e-4,scientific:!1},m:{name:&quot;m&quot;,value:1e-6,scientific:!0},u:{name:&quot;u&quot;,value:1e-12,scientific:!0},n:{name:&quot;n&quot;,value:1e-18,scientific:!0},p:{name:&quot;p&quot;,value:1e-24,scientific:!0},f:{name:&quot;f&quot;,value:1e-30,scientific:!0},a:{name:&quot;a&quot;,value:1e-36,scientific:!0},z:{name:&quot;z&quot;,value:1e-42,scientific:!0},y:{name:&quot;y&quot;,value:1e-48,scientific:!0}},CUBIC:{&quot;&quot;:{name:&quot;&quot;,value:1,scientific:!0},da:{name:&quot;da&quot;,value:1e3,scientific:!1},h:{name:&quot;h&quot;,value:1e6,scientific:!1},k:{name:&quot;k&quot;,value:1e9,scientific:!0},M:{name:&quot;M&quot;,value:1e18,scientific:!0},G:{name:&quot;G&quot;,value:1e27,scientific:!0},T:{name:&quot;T&quot;,value:1e36,scientific:!0},P:{name:&quot;P&quot;,value:1e45,scientific:!0},E:{name:&quot;E&quot;,value:1e54,scientific:!0},Z:{name:&quot;Z&quot;,value:1e63,scientific:!0},Y:{name:&quot;Y&quot;,value:1e72,scientific:!0},d:{name:&quot;d&quot;,value:.001,scientific:!1},c:{name:&quot;c&quot;,value:1e-6,scientific:!1},m:{name:&quot;m&quot;,value:1e-9,scientific:!0},u:{name:&quot;u&quot;,value:1e-18,scientific:!0},n:{name:&quot;n&quot;,value:1e-27,scientific:!0},p:{name:&quot;p&quot;,value:1e-36,scientific:!0},f:{name:&quot;f&quot;,value:1e-45,scientific:!0},a:{name:&quot;a&quot;,value:1e-54,scientific:!0},z:{name:&quot;z&quot;,value:1e-63,scientific:!0},y:{name:&quot;y&quot;,value:1e-72,scientific:!0}},BINARY_SHORT_SI:{&quot;&quot;:{name:&quot;&quot;,value:1,scientific:!0},k:{name:&quot;k&quot;,value:1e3,scientific:!0},M:{name:&quot;M&quot;,value:1e6,scientific:!0},G:{name:&quot;G&quot;,value:1e9,scientific:!0},T:{name:&quot;T&quot;,value:1e12,scientific:!0},P:{name:&quot;P&quot;,value:1e15,scientific:!0},E:{name:&quot;E&quot;,value:1e18,scientific:!0},Z:{name:&quot;Z&quot;,value:1e21,scientific:!0},Y:{name:&quot;Y&quot;,value:1e24,scientific:!0}},BINARY_SHORT_IEC:{&quot;&quot;:{name:&quot;&quot;,value:1,scientific:!0},Ki:{name:&quot;Ki&quot;,value:1024,scientific:!0},Mi:{name:&quot;Mi&quot;,value:Math.pow(1024,2),scientific:!0},Gi:{name:&quot;Gi&quot;,value:Math.pow(1024,3),scientific:!0},Ti:{name:&quot;Ti&quot;,value:Math.pow(1024,4),scientific:!0},Pi:{name:&quot;Pi&quot;,value:Math.pow(1024,5),scientific:!0},Ei:{name:&quot;Ei&quot;,value:Math.pow(1024,6),scientific:!0},Zi:{name:&quot;Zi&quot;,value:Math.pow(1024,7),scientific:!0},Yi:{name:&quot;Yi&quot;,value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{&quot;&quot;:{name:&quot;&quot;,value:1,scientific:!0},kilo:{name:&quot;kilo&quot;,value:1e3,scientific:!0},mega:{name:&quot;mega&quot;,value:1e6,scientific:!0},giga:{name:&quot;giga&quot;,value:1e9,scientific:!0},tera:{name:&quot;tera&quot;,value:1e12,scientific:!0},peta:{name:&quot;peta&quot;,value:1e15,scientific:!0},exa:{name:&quot;exa&quot;,value:1e18,scientific:!0},zetta:{name:&quot;zetta&quot;,value:1e21,scientific:!0},yotta:{name:&quot;yotta&quot;,value:1e24,scientific:!0}},BINARY_LONG_IEC:{&quot;&quot;:{name:&quot;&quot;,value:1,scientific:!0},kibi:{name:&quot;kibi&quot;,value:1024,scientific:!0},mebi:{name:&quot;mebi&quot;,value:Math.pow(1024,2),scientific:!0},gibi:{name:&quot;gibi&quot;,value:Math.pow(1024,3),scientific:!0},tebi:{name:&quot;tebi&quot;,value:Math.pow(1024,4),scientific:!0},pebi:{name:&quot;pebi&quot;,value:Math.pow(1024,5),scientific:!0},exi:{name:&quot;exi&quot;,value:Math.pow(1024,6),scientific:!0},zebi:{name:&quot;zebi&quot;,value:Math.pow(1024,7),scientific:!0},yobi:{name:&quot;yobi&quot;,value:Math.pow(1024,8),scientific:!0}},BTU:{&quot;&quot;:{name:&quot;&quot;,value:1,scientific:!0},MM:{name:&quot;MM&quot;,value:1e6,scientific:!0}}};I.SHORTLONG=of({},I.SHORT,I.LONG),I.BINARY_SHORT=of({},I.BINARY_SHORT_SI,I.BINARY_SHORT_IEC),I.BINARY_LONG=of({},I.BINARY_LONG_SI,I.BINARY_LONG_IEC);var R=[&quot;MASS&quot;,&quot;LENGTH&quot;,&quot;TIME&quot;,&quot;CURRENT&quot;,&quot;TEMPERATURE&quot;,&quot;LUMINOUS_INTENSITY&quot;,&quot;AMOUNT_OF_SUBSTANCE&quot;,&quot;ANGLE&quot;,&quot;BIT&quot;],z={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var q in z)Ne(z,q)&amp;&amp;(z[q].key=q);var j={name:&quot;&quot;,base:{},value:1,offset:0,dimensions:R.map((function(e){return 0}))},P={meter:{name:&quot;meter&quot;,base:z.LENGTH,prefixes:I.LONG,value:1,offset:0},inch:{name:&quot;inch&quot;,base:z.LENGTH,prefixes:I.NONE,value:.0254,offset:0},foot:{name:&quot;foot&quot;,base:z.LENGTH,prefixes:I.NONE,value:.3048,offset:0},yard:{name:&quot;yard&quot;,base:z.LENGTH,prefixes:I.NONE,value:.9144,offset:0},mile:{name:&quot;mile&quot;,base:z.LENGTH,prefixes:I.NONE,value:1609.344,offset:0},link:{name:&quot;link&quot;,base:z.LENGTH,prefixes:I.NONE,value:.201168,offset:0},rod:{name:&quot;rod&quot;,base:z.LENGTH,prefixes:I.NONE,value:5.0292,offset:0},chain:{name:&quot;chain&quot;,base:z.LENGTH,prefixes:I.NONE,value:20.1168,offset:0},angstrom:{name:&quot;angstrom&quot;,base:z.LENGTH,prefixes:I.NONE,value:1e-10,offset:0},m:{name:&quot;m&quot;,base:z.LENGTH,prefixes:I.SHORT,value:1,offset:0},in:{name:&quot;in&quot;,base:z.LENGTH,prefixes:I.NONE,value:.0254,offset:0},ft:{name:&quot;ft&quot;,base:z.LENGTH,prefixes:I.NONE,value:.3048,offset:0},yd:{name:&quot;yd&quot;,base:z.LENGTH,prefixes:I.NONE,value:.9144,offset:0},mi:{name:&quot;mi&quot;,base:z.LENGTH,prefixes:I.NONE,value:1609.344,offset:0},li:{name:&quot;li&quot;,base:z.LENGTH,prefixes:I.NONE,value:.201168,offset:0},rd:{name:&quot;rd&quot;,base:z.LENGTH,prefixes:I.NONE,value:5.02921,offset:0},ch:{name:&quot;ch&quot;,base:z.LENGTH,prefixes:I.NONE,value:20.1168,offset:0},mil:{name:&quot;mil&quot;,base:z.LENGTH,prefixes:I.NONE,value:254e-7,offset:0},m2:{name:&quot;m2&quot;,base:z.SURFACE,prefixes:I.SQUARED,value:1,offset:0},sqin:{name:&quot;sqin&quot;,base:z.SURFACE,prefixes:I.NONE,value:64516e-8,offset:0},sqft:{name:&quot;sqft&quot;,base:z.SURFACE,prefixes:I.NONE,value:.09290304,offset:0},sqyd:{name:&quot;sqyd&quot;,base:z.SURFACE,prefixes:I.NONE,value:.83612736,offset:0},sqmi:{name:&quot;sqmi&quot;,base:z.SURFACE,prefixes:I.NONE,value:2589988.110336,offset:0},sqrd:{name:&quot;sqrd&quot;,base:z.SURFACE,prefixes:I.NONE,value:25.29295,offset:0},sqch:{name:&quot;sqch&quot;,base:z.SURFACE,prefixes:I.NONE,value:404.6873,offset:0},sqmil:{name:&quot;sqmil&quot;,base:z.SURFACE,prefixes:I.NONE,value:6.4516e-10,offset:0},acre:{name:&quot;acre&quot;,base:z.SURFACE,prefixes:I.NONE,value:4046.86,offset:0},hectare:{name:&quot;hectare&quot;,base:z.SURFACE,prefixes:I.NONE,value:1e4,offset:0},m3:{name:&quot;m3&quot;,base:z.VOLUME,prefixes:I.CUBIC,value:1,offset:0},L:{name:&quot;L&quot;,base:z.VOLUME,prefixes:I.SHORT,value:.001,offset:0},l:{name:&quot;l&quot;,base:z.VOLUME,prefixes:I.SHORT,value:.001,offset:0},litre:{name:&quot;litre&quot;,base:z.VOLUME,prefixes:I.LONG,value:.001,offset:0},cuin:{name:&quot;cuin&quot;,base:z.VOLUME,prefixes:I.NONE,value:16387064e-12,offset:0},cuft:{name:&quot;cuft&quot;,base:z.VOLUME,prefixes:I.NONE,value:.028316846592,offset:0},cuyd:{name:&quot;cuyd&quot;,base:z.VOLUME,prefixes:I.NONE,value:.764554857984,offset:0},teaspoon:{name:&quot;teaspoon&quot;,base:z.VOLUME,prefixes:I.NONE,value:5e-6,offset:0},tablespoon:{name:&quot;tablespoon&quot;,base:z.VOLUME,prefixes:I.NONE,value:15e-6,offset:0},drop:{name:&quot;drop&quot;,base:z.VOLUME,prefixes:I.NONE,value:5e-8,offset:0},gtt:{name:&quot;gtt&quot;,base:z.VOLUME,prefixes:I.NONE,value:5e-8,offset:0},minim:{name:&quot;minim&quot;,base:z.VOLUME,prefixes:I.NONE,value:6.161152e-8,offset:0},fluiddram:{name:&quot;fluiddram&quot;,base:z.VOLUME,prefixes:I.NONE,value:36966911e-13,offset:0},fluidounce:{name:&quot;fluidounce&quot;,base:z.VOLUME,prefixes:I.NONE,value:2957353e-11,offset:0},gill:{name:&quot;gill&quot;,base:z.VOLUME,prefixes:I.NONE,value:.0001182941,offset:0},cc:{name:&quot;cc&quot;,base:z.VOLUME,prefixes:I.NONE,value:1e-6,offset:0},cup:{name:&quot;cup&quot;,base:z.VOLUME,prefixes:I.NONE,value:.0002365882,offset:0},pint:{name:&quot;pint&quot;,base:z.VOLUME,prefixes:I.NONE,value:.0004731765,offset:0},quart:{name:&quot;quart&quot;,base:z.VOLUME,prefixes:I.NONE,value:.0009463529,offset:0},gallon:{name:&quot;gallon&quot;,base:z.VOLUME,prefixes:I.NONE,value:.003785412,offset:0},beerbarrel:{name:&quot;beerbarrel&quot;,base:z.VOLUME,prefixes:I.NONE,value:.1173478,offset:0},oilbarrel:{name:&quot;oilbarrel&quot;,base:z.VOLUME,prefixes:I.NONE,value:.1589873,offset:0},hogshead:{name:&quot;hogshead&quot;,base:z.VOLUME,prefixes:I.NONE,value:.238481,offset:0},fldr:{name:&quot;fldr&quot;,base:z.VOLUME,prefixes:I.NONE,value:36966911e-13,offset:0},floz:{name:&quot;floz&quot;,base:z.VOLUME,prefixes:I.NONE,value:2957353e-11,offset:0},gi:{name:&quot;gi&quot;,base:z.VOLUME,prefixes:I.NONE,value:.0001182941,offset:0},cp:{name:&quot;cp&quot;,base:z.VOLUME,prefixes:I.NONE,value:.0002365882,offset:0},pt:{name:&quot;pt&quot;,base:z.VOLUME,prefixes:I.NONE,value:.0004731765,offset:0},qt:{name:&quot;qt&quot;,base:z.VOLUME,prefixes:I.NONE,value:.0009463529,offset:0},gal:{name:&quot;gal&quot;,base:z.VOLUME,prefixes:I.NONE,value:.003785412,offset:0},bbl:{name:&quot;bbl&quot;,base:z.VOLUME,prefixes:I.NONE,value:.1173478,offset:0},obl:{name:&quot;obl&quot;,base:z.VOLUME,prefixes:I.NONE,value:.1589873,offset:0},g:{name:&quot;g&quot;,base:z.MASS,prefixes:I.SHORT,value:.001,offset:0},gram:{name:&quot;gram&quot;,base:z.MASS,prefixes:I.LONG,value:.001,offset:0},ton:{name:&quot;ton&quot;,base:z.MASS,prefixes:I.SHORT,value:907.18474,offset:0},t:{name:&quot;t&quot;,base:z.MASS,prefixes:I.SHORT,value:1e3,offset:0},tonne:{name:&quot;tonne&quot;,base:z.MASS,prefixes:I.LONG,value:1e3,offset:0},grain:{name:&quot;grain&quot;,base:z.MASS,prefixes:I.NONE,value:6479891e-11,offset:0},dram:{name:&quot;dram&quot;,base:z.MASS,prefixes:I.NONE,value:.0017718451953125,offset:0},ounce:{name:&quot;ounce&quot;,base:z.MASS,prefixes:I.NONE,value:.028349523125,offset:0},poundmass:{name:&quot;poundmass&quot;,base:z.MASS,prefixes:I.NONE,value:.45359237,offset:0},hundredweight:{name:&quot;hundredweight&quot;,base:z.MASS,prefixes:I.NONE,value:45.359237,offset:0},stick:{name:&quot;stick&quot;,base:z.MASS,prefixes:I.NONE,value:.115,offset:0},stone:{name:&quot;stone&quot;,base:z.MASS,prefixes:I.NONE,value:6.35029318,offset:0},gr:{name:&quot;gr&quot;,base:z.MASS,prefixes:I.NONE,value:6479891e-11,offset:0},dr:{name:&quot;dr&quot;,base:z.MASS,prefixes:I.NONE,value:.0017718451953125,offset:0},oz:{name:&quot;oz&quot;,base:z.MASS,prefixes:I.NONE,value:.028349523125,offset:0},lbm:{name:&quot;lbm&quot;,base:z.MASS,prefixes:I.NONE,value:.45359237,offset:0},cwt:{name:&quot;cwt&quot;,base:z.MASS,prefixes:I.NONE,value:45.359237,offset:0},s:{name:&quot;s&quot;,base:z.TIME,prefixes:I.SHORT,value:1,offset:0},min:{name:&quot;min&quot;,base:z.TIME,prefixes:I.NONE,value:60,offset:0},h:{name:&quot;h&quot;,base:z.TIME,prefixes:I.NONE,value:3600,offset:0},second:{name:&quot;second&quot;,base:z.TIME,prefixes:I.LONG,value:1,offset:0},sec:{name:&quot;sec&quot;,base:z.TIME,prefixes:I.LONG,value:1,offset:0},minute:{name:&quot;minute&quot;,base:z.TIME,prefixes:I.NONE,value:60,offset:0},hour:{name:&quot;hour&quot;,base:z.TIME,prefixes:I.NONE,value:3600,offset:0},day:{name:&quot;day&quot;,base:z.TIME,prefixes:I.NONE,value:86400,offset:0},week:{name:&quot;week&quot;,base:z.TIME,prefixes:I.NONE,value:604800,offset:0},month:{name:&quot;month&quot;,base:z.TIME,prefixes:I.NONE,value:2629800,offset:0},year:{name:&quot;year&quot;,base:z.TIME,prefixes:I.NONE,value:31557600,offset:0},decade:{name:&quot;decade&quot;,base:z.TIME,prefixes:I.NONE,value:315576e3,offset:0},century:{name:&quot;century&quot;,base:z.TIME,prefixes:I.NONE,value:315576e4,offset:0},millennium:{name:&quot;millennium&quot;,base:z.TIME,prefixes:I.NONE,value:315576e5,offset:0},hertz:{name:&quot;Hertz&quot;,base:z.FREQUENCY,prefixes:I.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:&quot;Hz&quot;,base:z.FREQUENCY,prefixes:I.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:&quot;rad&quot;,base:z.ANGLE,prefixes:I.SHORT,value:1,offset:0},radian:{name:&quot;radian&quot;,base:z.ANGLE,prefixes:I.LONG,value:1,offset:0},deg:{name:&quot;deg&quot;,base:z.ANGLE,prefixes:I.SHORT,value:null,offset:0},degree:{name:&quot;degree&quot;,base:z.ANGLE,prefixes:I.LONG,value:null,offset:0},grad:{name:&quot;grad&quot;,base:z.ANGLE,prefixes:I.SHORT,value:null,offset:0},gradian:{name:&quot;gradian&quot;,base:z.ANGLE,prefixes:I.LONG,value:null,offset:0},cycle:{name:&quot;cycle&quot;,base:z.ANGLE,prefixes:I.NONE,value:null,offset:0},arcsec:{name:&quot;arcsec&quot;,base:z.ANGLE,prefixes:I.NONE,value:null,offset:0},arcmin:{name:&quot;arcmin&quot;,base:z.ANGLE,prefixes:I.NONE,value:null,offset:0},A:{name:&quot;A&quot;,base:z.CURRENT,prefixes:I.SHORT,value:1,offset:0},ampere:{name:&quot;ampere&quot;,base:z.CURRENT,prefixes:I.LONG,value:1,offset:0},K:{name:&quot;K&quot;,base:z.TEMPERATURE,prefixes:I.SHORT,value:1,offset:0},degC:{name:&quot;degC&quot;,base:z.TEMPERATURE,prefixes:I.SHORT,value:1,offset:273.15},degF:{name:&quot;degF&quot;,base:z.TEMPERATURE,prefixes:I.SHORT,value:new D(5,9),offset:459.67},degR:{name:&quot;degR&quot;,base:z.TEMPERATURE,prefixes:I.SHORT,value:new D(5,9),offset:0},kelvin:{name:&quot;kelvin&quot;,base:z.TEMPERATURE,prefixes:I.LONG,value:1,offset:0},celsius:{name:&quot;celsius&quot;,base:z.TEMPERATURE,prefixes:I.LONG,value:1,offset:273.15},fahrenheit:{name:&quot;fahrenheit&quot;,base:z.TEMPERATURE,prefixes:I.LONG,value:new D(5,9),offset:459.67},rankine:{name:&quot;rankine&quot;,base:z.TEMPERATURE,prefixes:I.LONG,value:new D(5,9),offset:0},mol:{name:&quot;mol&quot;,base:z.AMOUNT_OF_SUBSTANCE,prefixes:I.SHORT,value:1,offset:0},mole:{name:&quot;mole&quot;,base:z.AMOUNT_OF_SUBSTANCE,prefixes:I.LONG,value:1,offset:0},cd:{name:&quot;cd&quot;,base:z.LUMINOUS_INTENSITY,prefixes:I.SHORT,value:1,offset:0},candela:{name:&quot;candela&quot;,base:z.LUMINOUS_INTENSITY,prefixes:I.LONG,value:1,offset:0},N:{name:&quot;N&quot;,base:z.FORCE,prefixes:I.SHORT,value:1,offset:0},newton:{name:&quot;newton&quot;,base:z.FORCE,prefixes:I.LONG,value:1,offset:0},dyn:{name:&quot;dyn&quot;,base:z.FORCE,prefixes:I.SHORT,value:1e-5,offset:0},dyne:{name:&quot;dyne&quot;,base:z.FORCE,prefixes:I.LONG,value:1e-5,offset:0},lbf:{name:&quot;lbf&quot;,base:z.FORCE,prefixes:I.NONE,value:4.4482216152605,offset:0},poundforce:{name:&quot;poundforce&quot;,base:z.FORCE,prefixes:I.NONE,value:4.4482216152605,offset:0},kip:{name:&quot;kip&quot;,base:z.FORCE,prefixes:I.LONG,value:4448.2216,offset:0},kilogramforce:{name:&quot;kilogramforce&quot;,base:z.FORCE,prefixes:I.NONE,value:9.80665,offset:0},J:{name:&quot;J&quot;,base:z.ENERGY,prefixes:I.SHORT,value:1,offset:0},joule:{name:&quot;joule&quot;,base:z.ENERGY,prefixes:I.SHORT,value:1,offset:0},erg:{name:&quot;erg&quot;,base:z.ENERGY,prefixes:I.NONE,value:1e-7,offset:0},Wh:{name:&quot;Wh&quot;,base:z.ENERGY,prefixes:I.SHORT,value:3600,offset:0},BTU:{name:&quot;BTU&quot;,base:z.ENERGY,prefixes:I.BTU,value:1055.05585262,offset:0},eV:{name:&quot;eV&quot;,base:z.ENERGY,prefixes:I.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:&quot;electronvolt&quot;,base:z.ENERGY,prefixes:I.LONG,value:1602176565e-28,offset:0},W:{name:&quot;W&quot;,base:z.POWER,prefixes:I.SHORT,value:1,offset:0},watt:{name:&quot;watt&quot;,base:z.POWER,prefixes:I.LONG,value:1,offset:0},hp:{name:&quot;hp&quot;,base:z.POWER,prefixes:I.NONE,value:745.6998715386,offset:0},VAR:{name:&quot;VAR&quot;,base:z.POWER,prefixes:I.SHORT,value:w.I,offset:0},VA:{name:&quot;VA&quot;,base:z.POWER,prefixes:I.SHORT,value:1,offset:0},Pa:{name:&quot;Pa&quot;,base:z.PRESSURE,prefixes:I.SHORT,value:1,offset:0},psi:{name:&quot;psi&quot;,base:z.PRESSURE,prefixes:I.NONE,value:6894.75729276459,offset:0},atm:{name:&quot;atm&quot;,base:z.PRESSURE,prefixes:I.NONE,value:101325,offset:0},bar:{name:&quot;bar&quot;,base:z.PRESSURE,prefixes:I.SHORTLONG,value:1e5,offset:0},torr:{name:&quot;torr&quot;,base:z.PRESSURE,prefixes:I.NONE,value:133.322,offset:0},mmHg:{name:&quot;mmHg&quot;,base:z.PRESSURE,prefixes:I.NONE,value:133.322,offset:0},mmH2O:{name:&quot;mmH2O&quot;,base:z.PRESSURE,prefixes:I.NONE,value:9.80665,offset:0},cmH2O:{name:&quot;cmH2O&quot;,base:z.PRESSURE,prefixes:I.NONE,value:98.0665,offset:0},coulomb:{name:&quot;coulomb&quot;,base:z.ELECTRIC_CHARGE,prefixes:I.LONG,value:1,offset:0},C:{name:&quot;C&quot;,base:z.ELECTRIC_CHARGE,prefixes:I.SHORT,value:1,offset:0},farad:{name:&quot;farad&quot;,base:z.ELECTRIC_CAPACITANCE,prefixes:I.LONG,value:1,offset:0},F:{name:&quot;F&quot;,base:z.ELECTRIC_CAPACITANCE,prefixes:I.SHORT,value:1,offset:0},volt:{name:&quot;volt&quot;,base:z.ELECTRIC_POTENTIAL,prefixes:I.LONG,value:1,offset:0},V:{name:&quot;V&quot;,base:z.ELECTRIC_POTENTIAL,prefixes:I.SHORT,value:1,offset:0},ohm:{name:&quot;ohm&quot;,base:z.ELECTRIC_RESISTANCE,prefixes:I.SHORTLONG,value:1,offset:0},henry:{name:&quot;henry&quot;,base:z.ELECTRIC_INDUCTANCE,prefixes:I.LONG,value:1,offset:0},H:{name:&quot;H&quot;,base:z.ELECTRIC_INDUCTANCE,prefixes:I.SHORT,value:1,offset:0},siemens:{name:&quot;siemens&quot;,base:z.ELECTRIC_CONDUCTANCE,prefixes:I.LONG,value:1,offset:0},S:{name:&quot;S&quot;,base:z.ELECTRIC_CONDUCTANCE,prefixes:I.SHORT,value:1,offset:0},weber:{name:&quot;weber&quot;,base:z.MAGNETIC_FLUX,prefixes:I.LONG,value:1,offset:0},Wb:{name:&quot;Wb&quot;,base:z.MAGNETIC_FLUX,prefixes:I.SHORT,value:1,offset:0},tesla:{name:&quot;tesla&quot;,base:z.MAGNETIC_FLUX_DENSITY,prefixes:I.LONG,value:1,offset:0},T:{name:&quot;T&quot;,base:z.MAGNETIC_FLUX_DENSITY,prefixes:I.SHORT,value:1,offset:0},b:{name:&quot;b&quot;,base:z.BIT,prefixes:I.BINARY_SHORT,value:1,offset:0},bits:{name:&quot;bits&quot;,base:z.BIT,prefixes:I.BINARY_LONG,value:1,offset:0},B:{name:&quot;B&quot;,base:z.BIT,prefixes:I.BINARY_SHORT,value:8,offset:0},bytes:{name:&quot;bytes&quot;,base:z.BIT,prefixes:I.BINARY_LONG,value:8,offset:0}},L={meters:&quot;meter&quot;,inches:&quot;inch&quot;,feet:&quot;foot&quot;,yards:&quot;yard&quot;,miles:&quot;mile&quot;,links:&quot;link&quot;,rods:&quot;rod&quot;,chains:&quot;chain&quot;,angstroms:&quot;angstrom&quot;,lt:&quot;l&quot;,litres:&quot;litre&quot;,liter:&quot;litre&quot;,liters:&quot;litre&quot;,teaspoons:&quot;teaspoon&quot;,tablespoons:&quot;tablespoon&quot;,minims:&quot;minim&quot;,fluiddrams:&quot;fluiddram&quot;,fluidounces:&quot;fluidounce&quot;,gills:&quot;gill&quot;,cups:&quot;cup&quot;,pints:&quot;pint&quot;,quarts:&quot;quart&quot;,gallons:&quot;gallon&quot;,beerbarrels:&quot;beerbarrel&quot;,oilbarrels:&quot;oilbarrel&quot;,hogsheads:&quot;hogshead&quot;,gtts:&quot;gtt&quot;,grams:&quot;gram&quot;,tons:&quot;ton&quot;,tonnes:&quot;tonne&quot;,grains:&quot;grain&quot;,drams:&quot;dram&quot;,ounces:&quot;ounce&quot;,poundmasses:&quot;poundmass&quot;,hundredweights:&quot;hundredweight&quot;,sticks:&quot;stick&quot;,lb:&quot;lbm&quot;,lbs:&quot;lbm&quot;,kips:&quot;kip&quot;,kgf:&quot;kilogramforce&quot;,acres:&quot;acre&quot;,hectares:&quot;hectare&quot;,sqfeet:&quot;sqft&quot;,sqyard:&quot;sqyd&quot;,sqmile:&quot;sqmi&quot;,sqmiles:&quot;sqmi&quot;,mmhg:&quot;mmHg&quot;,mmh2o:&quot;mmH2O&quot;,cmh2o:&quot;cmH2O&quot;,seconds:&quot;second&quot;,secs:&quot;second&quot;,minutes:&quot;minute&quot;,mins:&quot;minute&quot;,hours:&quot;hour&quot;,hr:&quot;hour&quot;,hrs:&quot;hour&quot;,days:&quot;day&quot;,weeks:&quot;week&quot;,months:&quot;month&quot;,years:&quot;year&quot;,decades:&quot;decade&quot;,centuries:&quot;century&quot;,millennia:&quot;millennium&quot;,hertz:&quot;hertz&quot;,radians:&quot;radian&quot;,degrees:&quot;degree&quot;,gradians:&quot;gradian&quot;,cycles:&quot;cycle&quot;,arcsecond:&quot;arcsec&quot;,arcseconds:&quot;arcsec&quot;,arcminute:&quot;arcmin&quot;,arcminutes:&quot;arcmin&quot;,BTUs:&quot;BTU&quot;,watts:&quot;watt&quot;,joules:&quot;joule&quot;,amperes:&quot;ampere&quot;,amps:&quot;ampere&quot;,amp:&quot;ampere&quot;,coulombs:&quot;coulomb&quot;,volts:&quot;volt&quot;,ohms:&quot;ohm&quot;,farads:&quot;farad&quot;,webers:&quot;weber&quot;,teslas:&quot;tesla&quot;,electronvolts:&quot;electronvolt&quot;,moles:&quot;mole&quot;,bit:&quot;bits&quot;,byte:&quot;bytes&quot;};function U(e){if(&quot;BigNumber&quot;===e.number){var t=cf(N);P.rad.value=new N(1),P.deg.value=t.div(180),P.grad.value=t.div(200),P.cycle.value=t.times(2),P.arcsec.value=t.div(648e3),P.arcmin.value=t.div(10800)}else P.rad.value=1,P.deg.value=Math.PI/180,P.grad.value=Math.PI/200,P.cycle.value=2*Math.PI,P.arcsec.value=Math.PI/648e3,P.arcmin.value=Math.PI/10800;P.radian.value=P.rad.value,P.degree.value=P.deg.value,P.gradian.value=P.grad.value}U(u),a&amp;&amp;a(&quot;config&quot;,(function(e,t){e.number!==t.number&amp;&amp;U(e)}));var $={si:{NONE:{unit:j,prefix:I.NONE[&quot;&quot;]},LENGTH:{unit:P.m,prefix:I.SHORT[&quot;&quot;]},MASS:{unit:P.g,prefix:I.SHORT.k},TIME:{unit:P.s,prefix:I.SHORT[&quot;&quot;]},CURRENT:{unit:P.A,prefix:I.SHORT[&quot;&quot;]},TEMPERATURE:{unit:P.K,prefix:I.SHORT[&quot;&quot;]},LUMINOUS_INTENSITY:{unit:P.cd,prefix:I.SHORT[&quot;&quot;]},AMOUNT_OF_SUBSTANCE:{unit:P.mol,prefix:I.SHORT[&quot;&quot;]},ANGLE:{unit:P.rad,prefix:I.SHORT[&quot;&quot;]},BIT:{unit:P.bits,prefix:I.SHORT[&quot;&quot;]},FORCE:{unit:P.N,prefix:I.SHORT[&quot;&quot;]},ENERGY:{unit:P.J,prefix:I.SHORT[&quot;&quot;]},POWER:{unit:P.W,prefix:I.SHORT[&quot;&quot;]},PRESSURE:{unit:P.Pa,prefix:I.SHORT[&quot;&quot;]},ELECTRIC_CHARGE:{unit:P.C,prefix:I.SHORT[&quot;&quot;]},ELECTRIC_CAPACITANCE:{unit:P.F,prefix:I.SHORT[&quot;&quot;]},ELECTRIC_POTENTIAL:{unit:P.V,prefix:I.SHORT[&quot;&quot;]},ELECTRIC_RESISTANCE:{unit:P.ohm,prefix:I.SHORT[&quot;&quot;]},ELECTRIC_INDUCTANCE:{unit:P.H,prefix:I.SHORT[&quot;&quot;]},ELECTRIC_CONDUCTANCE:{unit:P.S,prefix:I.SHORT[&quot;&quot;]},MAGNETIC_FLUX:{unit:P.Wb,prefix:I.SHORT[&quot;&quot;]},MAGNETIC_FLUX_DENSITY:{unit:P.T,prefix:I.SHORT[&quot;&quot;]},FREQUENCY:{unit:P.Hz,prefix:I.SHORT[&quot;&quot;]}}};$.cgs=JSON.parse(JSON.stringify($.si)),$.cgs.LENGTH={unit:P.m,prefix:I.SHORT.c},$.cgs.MASS={unit:P.g,prefix:I.SHORT[&quot;&quot;]},$.cgs.FORCE={unit:P.dyn,prefix:I.SHORT[&quot;&quot;]},$.cgs.ENERGY={unit:P.erg,prefix:I.NONE[&quot;&quot;]},$.us=JSON.parse(JSON.stringify($.si)),$.us.LENGTH={unit:P.ft,prefix:I.NONE[&quot;&quot;]},$.us.MASS={unit:P.lbm,prefix:I.NONE[&quot;&quot;]},$.us.TEMPERATURE={unit:P.degF,prefix:I.NONE[&quot;&quot;]},$.us.FORCE={unit:P.lbf,prefix:I.NONE[&quot;&quot;]},$.us.ENERGY={unit:P.BTU,prefix:I.BTU[&quot;&quot;]},$.us.POWER={unit:P.hp,prefix:I.NONE[&quot;&quot;]},$.us.PRESSURE={unit:P.psi,prefix:I.NONE[&quot;&quot;]},$.auto=JSON.parse(JSON.stringify($.si));var G=$.auto;for(var V in A.setUnitSystem=function(e){if(!Ne($,e))throw new Error(&quot;Unit system &quot;+e+&quot; does not exist. Choices are: &quot;+Object.keys($).join(&quot;, &quot;));G=$[e]},A.getUnitSystem=function(){for(var e in $)if(Ne($,e)&amp;&amp;$[e]===G)return e},A.typeConverters={BigNumber:function(e){return null!=e&amp;&amp;e.isFraction?new N(e.n).div(e.d).times(e.s):new N(e+&quot;&quot;)},Fraction:function(e){return new D(e)},Complex:function(e){return e},number:function(e){return null!=e&amp;&amp;e.isFraction?b(e):e}},A.prototype._numberConverter=function(){var e=A.typeConverters[this.valueType()];if(e)return e;throw new TypeError('Unsupported Unit value type &quot;'+this.valueType()+'&quot;')},A._getNumberConverter=function(e){if(!A.typeConverters[e])throw new TypeError('Unsupported type &quot;'+e+'&quot;');return A.typeConverters[e]},P)if(Ne(P,V)){var Z=P[V];Z.dimensions=Z.base.dimensions}for(var W in L)if(Ne(L,W)){var Y=P[L[W]],J={};for(var X in Y)Ne(Y,X)&amp;&amp;(J[X]=Y[X]);J.name=W,P[W]=J}return A.isValidAlpha=function(e){return/^[a-zA-Z]$/.test(e)},A.createUnit=function(e,r){if(&quot;object&quot;!==t(e))throw new TypeError(&quot;createUnit expects first parameter to be of type 'Object'&quot;);if(r&amp;&amp;r.override)for(var n in e)if(Ne(e,n)&amp;&amp;A.deleteUnit(n),e[n].aliases)for(var i=0;i&lt;e[n].aliases.length;i++)A.deleteUnit(e[n].aliases[i]);var a;for(var o in e)Ne(e,o)&amp;&amp;(a=A.createUnitSingle(o,e[o]));return a},A.createUnitSingle=function(e,r){if(null==r&amp;&amp;(r={}),&quot;string&quot;!=typeof e)throw new TypeError(&quot;createUnitSingle expects first parameter to be of type 'string'&quot;);if(Ne(P,e))throw new Error('Cannot create unit &quot;'+e+'&quot;: a unit with that name already exists');!function(e){for(var t=0;t&lt;e.length;t++){if(i=e.charAt(t),0===t&amp;&amp;!A.isValidAlpha(i))throw new Error('Invalid unit name (must begin with alpha character): &quot;'+e+'&quot;');if(t&gt;0&amp;&amp;!A.isValidAlpha(i)&amp;&amp;!C(i))throw new Error('Invalid unit name (only alphanumeric characters are allowed): &quot;'+e+'&quot;')}}(e);var n,a,o,u=null,s=[],c=0;if(r&amp;&amp;&quot;Unit&quot;===r.type)u=r.clone();else if(&quot;string&quot;==typeof r)&quot;&quot;!==r&amp;&amp;(n=r);else{if(&quot;object&quot;!==t(r))throw new TypeError('Cannot create unit &quot;'+e+'&quot; from &quot;'+r.toString()+'&quot;: expecting &quot;string&quot; or &quot;Unit&quot; or &quot;Object&quot;');n=r.definition,a=r.prefixes,c=r.offset,o=r.baseName,r.aliases&amp;&amp;(s=r.aliases.valueOf())}if(s)for(var f=0;f&lt;s.length;f++)if(Ne(P,s[f]))throw new Error('Cannot create alias &quot;'+s[f]+'&quot;: a unit with that name already exists');if(n&amp;&amp;&quot;string&quot;==typeof n&amp;&amp;!u)try{u=A.parse(n,{allowNoUnits:!0})}catch(t){throw t.message='Could not create unit &quot;'+e+'&quot; from &quot;'+n+'&quot;: '+t.message,t}else n&amp;&amp;&quot;Unit&quot;===n.type&amp;&amp;(u=n.clone());s=s||[],c=c||0,a=a&amp;&amp;a.toUpperCase&amp;&amp;I[a.toUpperCase()]||I.NONE;var l={};if(u){l={name:e,value:u.value,dimensions:u.dimensions.slice(0),prefixes:a,offset:c};var p=!1;for(var m in z)if(Ne(z,m)){for(var h=!0,d=0;d&lt;R.length;d++)if(Math.abs((l.dimensions[d]||0)-(z[m].dimensions[d]||0))&gt;1e-12){h=!1;break}if(h){p=!0,l.base=z[m];break}}if(!p){o=o||e+&quot;_STUFF&quot;;var v={dimensions:u.dimensions.slice(0)};v.key=o,z[o]=v,G[o]={unit:l,prefix:I.NONE[&quot;&quot;]},l.base=z[o]}}else{if(o=o||e+&quot;_STUFF&quot;,R.indexOf(o)&gt;=0)throw new Error('Cannot create new base unit &quot;'+e+'&quot;: a base unit with that name already exists (and cannot be overridden)');for(var y in R.push(o),z)Ne(z,y)&amp;&amp;(z[y].dimensions[R.length-1]=0);for(var g={dimensions:[]},x=0;x&lt;R.length;x++)g.dimensions[x]=0;g.dimensions[R.length-1]=1,g.key=o,z[o]=g,l={name:e,value:1,dimensions:z[o].dimensions.slice(0),prefixes:a,offset:c,base:z[o]},G[o]={unit:l,prefix:I.NONE[&quot;&quot;]}}A.UNITS[e]=l;for(var b=0;b&lt;s.length;b++){var w=s[b],N={};for(var D in l)Ne(l,D)&amp;&amp;(N[D]=l[D]);N.name=w,A.UNITS[w]=N}return delete _.cache,new A(null,e)},A.deleteUnit=function(e){delete A.UNITS[e]},A.PREFIXES=I,A.BASE_DIMENSIONS=R,A.BASE_UNITS=z,A.UNIT_SYSTEMS=$,A.UNITS=P,A}),{isClass:!0}),df=&quot;unit&quot;,vf=Ee(df,[&quot;typed&quot;,&quot;Unit&quot;],(function(e){var t=e.typed,r=e.Unit;return t(df,{Unit:function(e){return e.clone()},string:function(e){return r.isValuelessUnit(e)?new r(null,e):r.parse(e,{allowNoUnits:!0})},&quot;number | BigNumber | Fraction | Complex, string | Unit&quot;:function(e,t){return new r(e,t)},&quot;number | BigNumber | Fraction&quot;:function(e){return new r(e)},&quot;Array | Matrix&quot;:t.referToSelf((function(e){return function(t){return _n(t,e)}}))})})),yf=&quot;sparse&quot;,gf=Ee(yf,[&quot;typed&quot;,&quot;SparseMatrix&quot;],(function(e){var t=e.typed,r=e.SparseMatrix;return t(yf,{&quot;&quot;:function(){return new r([])},string:function(e){return new r([],e)},&quot;Array | Matrix&quot;:function(e){return new r(e)},&quot;Array | Matrix, string&quot;:function(e,t){return new r(e,t)}})})),xf=&quot;createUnit&quot;,bf=Ee(xf,[&quot;typed&quot;,&quot;Unit&quot;],(function(e){var t=e.typed,r=e.Unit;return t(xf,{&quot;Object, Object&quot;:function(e,t){return r.createUnit(e,t)},Object:function(e){return r.createUnit(e,{})},&quot;string, Unit | string | Object, Object&quot;:function(e,t,n){var i={};return i[e]=t,r.createUnit(i,n)},&quot;string, Unit | string | Object&quot;:function(e,t){var n={};return n[e]=t,r.createUnit(n,{})},string:function(e){var t={};return t[e]={},r.createUnit(t,{})}})})),wf=&quot;acos&quot;,Nf=Ee(wf,[&quot;typed&quot;,&quot;config&quot;,&quot;Complex&quot;],(function(e){var t=e.typed,r=e.config,n=e.Complex;return t(wf,{number:function(e){return e&gt;=-1&amp;&amp;e&lt;=1||r.predictable?Math.acos(e):new n(e,0).acos()},Complex:function(e){return e.acos()},BigNumber:function(e){return e.acos()}})})),Df=&quot;number&quot;;function Ef(e){return se(e)}function Af(e){return Math.atan(1/e)}function Sf(e){return isFinite(e)?(Math.log((e+1)/e)+Math.log(e/(e-1)))/2:0}function Cf(e){return Math.asin(1/e)}function Mf(e){var t=1/e;return Math.log(t+Math.sqrt(t*t+1))}function Ff(e){return Math.acos(1/e)}function Of(e){var t=1/e,r=Math.sqrt(t*t-1);return Math.log(r+t)}function Tf(e){return ce(e)}function Bf(e){return fe(e)}function _f(e){return 1/Math.tan(e)}function kf(e){var t=Math.exp(2*e);return(t+1)/(t-1)}function If(e){return 1/Math.sin(e)}function Rf(e){return 0===e?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(e)-Math.exp(-e)))*Z(e)}function zf(e){return 1/Math.cos(e)}function qf(e){return 2/(Math.exp(e)+Math.exp(-e))}function jf(e){return pe(e)}Ef.signature=Df,Af.signature=Df,Sf.signature=Df,Cf.signature=Df,Mf.signature=Df,Ff.signature=Df,Of.signature=Df,Tf.signature=Df,Bf.signature=Df,_f.signature=Df,kf.signature=Df,If.signature=Df,Rf.signature=Df,zf.signature=Df,qf.signature=Df,jf.signature=Df;var Pf=&quot;acosh&quot;,Lf=Ee(Pf,[&quot;typed&quot;,&quot;config&quot;,&quot;Complex&quot;],(function(e){var t=e.typed,r=e.config,n=e.Complex;return t(Pf,{number:function(e){return e&gt;=1||r.predictable?Ef(e):e&lt;=-1?new n(Math.log(Math.sqrt(e*e-1)-e),Math.PI):new n(e,0).acosh()},Complex:function(e){return e.acosh()},BigNumber:function(e){return e.acosh()}})})),Uf=&quot;acot&quot;,$f=Ee(Uf,[&quot;typed&quot;,&quot;BigNumber&quot;],(function(e){var t=e.typed,r=e.BigNumber;return t(Uf,{number:Af,Complex:function(e){return e.acot()},BigNumber:function(e){return new r(1).div(e).atan()}})})),Hf=&quot;acoth&quot;,Gf=Ee(Hf,[&quot;typed&quot;,&quot;config&quot;,&quot;Complex&quot;,&quot;BigNumber&quot;],(function(e){var t=e.typed,r=e.config,n=e.Complex,i=e.BigNumber;return t(Hf,{number:function(e){return e&gt;=1||e&lt;=-1||r.predictable?Sf(e):new n(e,0).acoth()},Complex:function(e){return e.acoth()},BigNumber:function(e){return new i(1).div(e).atanh()}})})),Vf=&quot;acsc&quot;,Zf=Ee(Vf,[&quot;typed&quot;,&quot;config&quot;,&quot;Complex&quot;,&quot;BigNumber&quot;],(function(e){var t=e.typed,r=e.config,n=e.Complex,i=e.BigNumber;return t(Vf,{number:function(e){return e&lt;=-1||e&gt;=1||r.predictable?Cf(e):new n(e,0).acsc()},Complex:function(e){return e.acsc()},BigNumber:function(e){return new i(1).div(e).asin()}})})),Wf=&quot;acsch&quot;,Yf=Ee(Wf,[&quot;typed&quot;,&quot;BigNumber&quot;],(function(e){var t=e.typed,r=e.BigNumber;return t(Wf,{number:Mf,Complex:function(e){return e.acsch()},BigNumber:function(e){return new r(1).div(e).asinh()}})})),Jf=&quot;asec&quot;,Xf=Ee(Jf,[&quot;typed&quot;,&quot;config&quot;,&quot;Complex&quot;,&quot;BigNumber&quot;],(function(e){var t=e.typed,r=e.config,n=e.Complex,i=e.BigNumber;return t(Jf,{number:function(e){return e&lt;=-1||e&gt;=1||r.predictable?Ff(e):new n(e,0).asec()},Complex:function(e){return e.asec()},BigNumber:function(e){return new i(1).div(e).acos()}})})),Qf=&quot;asech&quot;,Kf=Ee(Qf,[&quot;typed&quot;,&quot;config&quot;,&quot;Complex&quot;,&quot;BigNumber&quot;],(function(e){var t=e.typed,r=e.config,n=e.Complex,i=e.BigNumber;return t(Qf,{number:function(e){if(e&lt;=1&amp;&amp;e&gt;=-1||r.predictable){var t=1/e;if(t&gt;0||r.predictable)return Of(e);var i=Math.sqrt(t*t-1);return new n(Math.log(i-t),Math.PI)}return new n(e,0).asech()},Complex:function(e){return e.asech()},BigNumber:function(e){return new i(1).div(e).acosh()}})})),el=&quot;asin&quot;,tl=Ee(el,[&quot;typed&quot;,&quot;config&quot;,&quot;Complex&quot;],(function(e){var t=e.typed,r=e.config,n=e.Complex;return t(el,{number:function(e){return e&gt;=-1&amp;&amp;e&lt;=1||r.predictable?Math.asin(e):new n(e,0).asin()},Complex:function(e){return e.asin()},BigNumber:function(e){return e.asin()}})})),rl=Ee(&quot;asinh&quot;,[&quot;typed&quot;],(function(e){return(0,e.typed)(&quot;asinh&quot;,{number:Tf,Complex:function(e){return e.asinh()},BigNumber:function(e){return e.asinh()}})})),nl=Ee(&quot;atan&quot;,[&quot;typed&quot;],(function(e){return(0,e.typed)(&quot;atan&quot;,{number:function(e){return Math.atan(e)},Complex:function(e){return e.atan()},BigNumber:function(e){return e.atan()}})})),il=&quot;atan2&quot;,al=Ee(il,[&quot;typed&quot;,&quot;matrix&quot;,&quot;equalScalar&quot;,&quot;BigNumber&quot;,&quot;DenseMatrix&quot;,&quot;concat&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.equalScalar,i=e.BigNumber,a=e.DenseMatrix,o=e.concat,u=Va({typed:t,equalScalar:n}),s=Ka({typed:t}),c=xo({typed:t,equalScalar:n}),f=pa({typed:t,equalScalar:n}),l=ma({typed:t,DenseMatrix:a}),p=ja({typed:t,matrix:r,concat:o});return t(il,{&quot;number, number&quot;:Math.atan2,&quot;BigNumber, BigNumber&quot;:function(e,t){return i.atan2(e,t)}},p({scalar:&quot;number | BigNumber&quot;,SS:c,DS:s,SD:u,Ss:f,sS:l}))})),ol=&quot;atanh&quot;,ul=Ee(ol,[&quot;typed&quot;,&quot;config&quot;,&quot;Complex&quot;],(function(e){var t=e.typed,r=e.config,n=e.Complex;return t(ol,{number:function(e){return e&lt;=1&amp;&amp;e&gt;=-1||r.predictable?Bf(e):new n(e,0).atanh()},Complex:function(e){return e.atanh()},BigNumber:function(e){return e.atanh()}})})),sl=Ee(&quot;trigUnit&quot;,[&quot;typed&quot;],(function(e){var t=e.typed;return{Unit:t.referToSelf((function(e){return function(r){if(!r.hasBase(r.constructor.BASE_UNITS.ANGLE))throw new TypeError(&quot;Unit in function cot is no angle&quot;);return t.find(e,r.valueType())(r.value)}}))}})),cl=Ee(&quot;cos&quot;,[&quot;typed&quot;],(function(e){var t=e.typed,r=sl({typed:t});return t(&quot;cos&quot;,{number:Math.cos,&quot;Complex | BigNumber&quot;:function(e){return e.cos()}},r)})),fl=&quot;cosh&quot;,ll=Ee(fl,[&quot;typed&quot;],(function(e){return(0,e.typed)(fl,{number:le,&quot;Complex | BigNumber&quot;:function(e){return e.cosh()}})})),pl=Ee(&quot;cot&quot;,[&quot;typed&quot;,&quot;BigNumber&quot;],(function(e){var t=e.typed,r=e.BigNumber;return t(&quot;cot&quot;,{number:_f,Complex:function(e){return e.cot()},BigNumber:function(e){return new r(1).div(e.tan())}},sl({typed:t}))})),ml=&quot;coth&quot;,hl=Ee(ml,[&quot;typed&quot;,&quot;BigNumber&quot;],(function(e){var t=e.typed,r=e.BigNumber;return t(ml,{number:kf,Complex:function(e){return e.coth()},BigNumber:function(e){return new r(1).div(e.tanh())}})})),dl=Ee(&quot;csc&quot;,[&quot;typed&quot;,&quot;BigNumber&quot;],(function(e){var t=e.typed,r=e.BigNumber;return t(&quot;csc&quot;,{number:If,Complex:function(e){return e.csc()},BigNumber:function(e){return new r(1).div(e.sin())}},sl({typed:t}))})),vl=&quot;csch&quot;,yl=Ee(vl,[&quot;typed&quot;,&quot;BigNumber&quot;],(function(e){var t=e.typed,r=e.BigNumber;return t(vl,{number:Rf,Complex:function(e){return e.csch()},BigNumber:function(e){return new r(1).div(e.sinh())}})})),gl=Ee(&quot;sec&quot;,[&quot;typed&quot;,&quot;BigNumber&quot;],(function(e){var t=e.typed,r=e.BigNumber;return t(&quot;sec&quot;,{number:zf,Complex:function(e){return e.sec()},BigNumber:function(e){return new r(1).div(e.cos())}},sl({typed:t}))})),xl=&quot;sech&quot;,bl=Ee(xl,[&quot;typed&quot;,&quot;BigNumber&quot;],(function(e){var t=e.typed,r=e.BigNumber;return t(xl,{number:qf,Complex:function(e){return e.sech()},BigNumber:function(e){return new r(1).div(e.cosh())}})})),wl=Ee(&quot;sin&quot;,[&quot;typed&quot;],(function(e){var t=e.typed,r=sl({typed:t});return t(&quot;sin&quot;,{number:Math.sin,&quot;Complex | BigNumber&quot;:function(e){return e.sin()}},r)})),Nl=&quot;sinh&quot;,Dl=Ee(Nl,[&quot;typed&quot;],(function(e){return(0,e.typed)(Nl,{number:jf,&quot;Complex | BigNumber&quot;:function(e){return e.sinh()}})})),El=Ee(&quot;tan&quot;,[&quot;typed&quot;],(function(e){var t=e.typed,r=sl({typed:t});return t(&quot;tan&quot;,{number:Math.tan,&quot;Complex | BigNumber&quot;:function(e){return e.tan()}},r)})),Al=Ee(&quot;tanh&quot;,[&quot;typed&quot;],(function(e){return(0,e.typed)(&quot;tanh&quot;,{number:me,&quot;Complex | BigNumber&quot;:function(e){return e.tanh()}})})),Sl=&quot;setCartesian&quot;,Cl=Ee(Sl,[&quot;typed&quot;,&quot;size&quot;,&quot;subset&quot;,&quot;compareNatural&quot;,&quot;Index&quot;,&quot;DenseMatrix&quot;],(function(e){var t=e.typed,r=e.size,n=e.subset,i=e.compareNatural,a=e.Index,o=e.DenseMatrix;return t(Sl,{&quot;Array | Matrix, Array | Matrix&quot;:function(e,t){var u=[];if(0!==n(r(e),new a(0))&amp;&amp;0!==n(r(t),new a(0))){var s=mn(Array.isArray(e)?e:e.toArray()).sort(i),c=mn(Array.isArray(t)?t:t.toArray()).sort(i);u=[];for(var f=0;f&lt;s.length;f++)for(var l=0;l&lt;c.length;l++)u.push([s[f],c[l]])}return Array.isArray(e)&amp;&amp;Array.isArray(t)?u:new o(u)}})})),Ml=&quot;setDifference&quot;,Fl=Ee(Ml,[&quot;typed&quot;,&quot;size&quot;,&quot;subset&quot;,&quot;compareNatural&quot;,&quot;Index&quot;,&quot;DenseMatrix&quot;],(function(e){var t=e.typed,r=e.size,n=e.subset,i=e.compareNatural,a=e.Index,o=e.DenseMatrix;return t(Ml,{&quot;Array | Matrix, Array | Matrix&quot;:function(e,t){var u;if(0===n(r(e),new a(0)))u=[];else{if(0===n(r(t),new a(0)))return mn(e.toArray());var s,c=xn(mn(Array.isArray(e)?e:e.toArray()).sort(i)),f=xn(mn(Array.isArray(t)?t:t.toArray()).sort(i));u=[];for(var l=0;l&lt;c.length;l++){s=!1;for(var p=0;p&lt;f.length;p++)if(0===i(c[l].value,f[p].value)&amp;&amp;c[l].identifier===f[p].identifier){s=!0;break}s||u.push(c[l])}}return Array.isArray(e)&amp;&amp;Array.isArray(t)?bn(u):new o(bn(u))}})})),Ol=&quot;setDistinct&quot;,Tl=Ee(Ol,[&quot;typed&quot;,&quot;size&quot;,&quot;subset&quot;,&quot;compareNatural&quot;,&quot;Index&quot;,&quot;DenseMatrix&quot;],(function(e){var t=e.typed,r=e.size,n=e.subset,i=e.compareNatural,a=e.Index,o=e.DenseMatrix;return t(Ol,{&quot;Array | Matrix&quot;:function(e){var t;if(0===n(r(e),new a(0)))t=[];else{var u=mn(Array.isArray(e)?e:e.toArray()).sort(i);(t=[]).push(u[0]);for(var s=1;s&lt;u.length;s++)0!==i(u[s],u[s-1])&amp;&amp;t.push(u[s])}return Array.isArray(e)?t:new o(t)}})})),Bl=&quot;setIntersect&quot;,_l=Ee(Bl,[&quot;typed&quot;,&quot;size&quot;,&quot;subset&quot;,&quot;compareNatural&quot;,&quot;Index&quot;,&quot;DenseMatrix&quot;],(function(e){var t=e.typed,r=e.size,n=e.subset,i=e.compareNatural,a=e.Index,o=e.DenseMatrix;return t(Bl,{&quot;Array | Matrix, Array | Matrix&quot;:function(e,t){var u;if(0===n(r(e),new a(0))||0===n(r(t),new a(0)))u=[];else{var s=xn(mn(Array.isArray(e)?e:e.toArray()).sort(i)),c=xn(mn(Array.isArray(t)?t:t.toArray()).sort(i));u=[];for(var f=0;f&lt;s.length;f++)for(var l=0;l&lt;c.length;l++)if(0===i(s[f].value,c[l].value)&amp;&amp;s[f].identifier===c[l].identifier){u.push(s[f]);break}}return Array.isArray(e)&amp;&amp;Array.isArray(t)?bn(u):new o(bn(u))}})})),kl=&quot;setIsSubset&quot;,Il=Ee(kl,[&quot;typed&quot;,&quot;size&quot;,&quot;subset&quot;,&quot;compareNatural&quot;,&quot;Index&quot;],(function(e){var t=e.typed,r=e.size,n=e.subset,i=e.compareNatural,a=e.Index;return t(kl,{&quot;Array | Matrix, Array | Matrix&quot;:function(e,t){if(0===n(r(e),new a(0)))return!0;if(0===n(r(t),new a(0)))return!1;for(var o,u=xn(mn(Array.isArray(e)?e:e.toArray()).sort(i)),s=xn(mn(Array.isArray(t)?t:t.toArray()).sort(i)),c=0;c&lt;u.length;c++){o=!1;for(var f=0;f&lt;s.length;f++)if(0===i(u[c].value,s[f].value)&amp;&amp;u[c].identifier===s[f].identifier){o=!0;break}if(!1===o)return!1}return!0}})})),Rl=&quot;setMultiplicity&quot;,zl=Ee(Rl,[&quot;typed&quot;,&quot;size&quot;,&quot;subset&quot;,&quot;compareNatural&quot;,&quot;Index&quot;],(function(e){var t=e.typed,r=e.size,n=e.subset,i=e.compareNatural,a=e.Index;return t(Rl,{&quot;number | BigNumber | Fraction | Complex, Array | Matrix&quot;:function(e,t){if(0===n(r(t),new a(0)))return 0;for(var o=mn(Array.isArray(t)?t:t.toArray()),u=0,s=0;s&lt;o.length;s++)0===i(o[s],e)&amp;&amp;u++;return u}})})),ql=&quot;setPowerset&quot;,jl=Ee(ql,[&quot;typed&quot;,&quot;size&quot;,&quot;subset&quot;,&quot;compareNatural&quot;,&quot;Index&quot;],(function(e){var t=e.typed,r=e.size,n=e.subset,i=e.compareNatural,a=e.Index;return t(ql,{&quot;Array | Matrix&quot;:function(e){if(0===n(r(e),new a(0)))return[];for(var t=mn(Array.isArray(e)?e:e.toArray()).sort(i),u=[],s=0;s.toString(2).length&lt;=t.length;)u.push(o(t,s.toString(2).split(&quot;&quot;).reverse())),s++;return function(e){for(var t=[],r=e.length-1;r&gt;0;r--)for(var n=0;n&lt;r;n++)e[n].length&gt;e[n+1].length&amp;&amp;(t=e[n],e[n]=e[n+1],e[n+1]=t);return e}(u)}});function o(e,t){for(var r=[],n=0;n&lt;t.length;n++)&quot;1&quot;===t[n]&amp;&amp;r.push(e[n]);return r}})),Pl=&quot;setSize&quot;,Ll=Ee(Pl,[&quot;typed&quot;,&quot;compareNatural&quot;],(function(e){var t=e.typed,r=e.compareNatural;return t(Pl,{&quot;Array | Matrix&quot;:function(e){return Array.isArray(e)?mn(e).length:mn(e.toArray()).length},&quot;Array | Matrix, boolean&quot;:function(e,t){if(!1===t||0===e.length)return Array.isArray(e)?mn(e).length:mn(e.toArray()).length;for(var n=mn(Array.isArray(e)?e:e.toArray()).sort(r),i=1,a=1;a&lt;n.length;a++)0!==r(n[a],n[a-1])&amp;&amp;i++;return i}})})),Ul=&quot;setSymDifference&quot;,$l=Ee(Ul,[&quot;typed&quot;,&quot;size&quot;,&quot;concat&quot;,&quot;subset&quot;,&quot;setDifference&quot;,&quot;Index&quot;],(function(e){var t=e.typed,r=e.size,n=e.concat,i=e.subset,a=e.setDifference,o=e.Index;return t(Ul,{&quot;Array | Matrix, Array | Matrix&quot;:function(e,t){if(0===i(r(e),new o(0)))return mn(t);if(0===i(r(t),new o(0)))return mn(e);var u=mn(e),s=mn(t);return n(a(u,s),a(s,u))}})})),Hl=&quot;setUnion&quot;,Gl=Ee(Hl,[&quot;typed&quot;,&quot;size&quot;,&quot;concat&quot;,&quot;subset&quot;,&quot;setIntersect&quot;,&quot;setSymDifference&quot;,&quot;Index&quot;],(function(e){var t=e.typed,r=e.size,n=e.concat,i=e.subset,a=e.setIntersect,o=e.setSymDifference,u=e.Index;return t(Hl,{&quot;Array | Matrix, Array | Matrix&quot;:function(e,t){if(0===i(r(e),new u(0)))return mn(t);if(0===i(r(t),new u(0)))return mn(e);var s=mn(e),c=mn(t);return n(o(s,c),a(s,c))}})})),Vl=Ee(&quot;add&quot;,[&quot;typed&quot;,&quot;matrix&quot;,&quot;addScalar&quot;,&quot;equalScalar&quot;,&quot;DenseMatrix&quot;,&quot;SparseMatrix&quot;,&quot;concat&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.addScalar,i=e.equalScalar,a=e.DenseMatrix,o=(e.SparseMatrix,e.concat),u=ka({typed:t}),s=Ia({typed:t,equalScalar:i}),c=Ra({typed:t,DenseMatrix:a}),f=ja({typed:t,matrix:r,concat:o});return t(&quot;add&quot;,{&quot;any, any&quot;:n,&quot;any, any, ...any&quot;:t.referToSelf((function(e){return function(t,r,n){for(var i=e(t,r),a=0;a&lt;n.length;a++)i=e(i,n[a]);return i}}))},f({elop:n,DS:u,SS:s,Ss:c}))})),Zl=&quot;hypot&quot;,Wl=Ee(Zl,[&quot;typed&quot;,&quot;abs&quot;,&quot;addScalar&quot;,&quot;divideScalar&quot;,&quot;multiplyScalar&quot;,&quot;sqrt&quot;,&quot;smaller&quot;,&quot;isPositive&quot;],(function(e){var t=e.typed,r=e.abs,n=e.addScalar,i=e.divideScalar,a=e.multiplyScalar,u=e.sqrt,s=e.smaller,c=e.isPositive;return t(Zl,{&quot;... number | BigNumber&quot;:f,Array:f,Matrix:function(e){return f(mn(e.toArray()))}});function f(e){for(var t=0,f=0,l=0;l&lt;e.length;l++){if(o(e[l]))throw new TypeError(&quot;Unexpected type of argument to hypot&quot;);var p=r(e[l]);s(f,p)?(t=a(t,a(i(f,p),i(f,p))),t=n(t,1),f=p):t=n(t,c(p)?a(i(p,f),i(p,f)):p)}return a(f,u(t))}})),Yl=&quot;norm&quot;,Jl=Ee(Yl,[&quot;typed&quot;,&quot;abs&quot;,&quot;add&quot;,&quot;pow&quot;,&quot;conj&quot;,&quot;sqrt&quot;,&quot;multiply&quot;,&quot;equalScalar&quot;,&quot;larger&quot;,&quot;smaller&quot;,&quot;matrix&quot;,&quot;ctranspose&quot;,&quot;eigs&quot;],(function(e){var t=e.typed,r=e.abs,n=e.add,i=e.pow,a=e.conj,o=e.sqrt,u=e.multiply,s=e.equalScalar,c=e.larger,f=e.smaller,l=e.matrix,p=e.ctranspose,m=e.eigs;return t(Yl,{number:Math.abs,Complex:function(e){return e.abs()},BigNumber:function(e){return e.abs()},boolean:function(e){return Math.abs(e)},Array:function(e){return h(l(e),2)},Matrix:function(e){return h(e,2)},&quot;Array, number | BigNumber | string&quot;:function(e,t){return h(l(e),t)},&quot;Matrix, number | BigNumber | string&quot;:function(e,t){return h(e,t)}});function h(e,t){var l=e.size();if(1===l.length)return function(e,t){if(t===Number.POSITIVE_INFINITY||&quot;inf&quot;===t)return function(e){var t=0;return e.forEach((function(e){var n=r(e);c(n,t)&amp;&amp;(t=n)}),!0),t}(e);if(t===Number.NEGATIVE_INFINITY||&quot;-inf&quot;===t)return function(e){var t;return e.forEach((function(e){var n=r(e);t&amp;&amp;!f(n,t)||(t=n)}),!0),t||0}(e);if(&quot;fro&quot;===t)return h(e,2);if(&quot;number&quot;==typeof t&amp;&amp;!isNaN(t)){if(!s(t,0)){var a=0;return e.forEach((function(e){a=n(i(r(e),t),a)}),!0),i(a,1/t)}return Number.POSITIVE_INFINITY}throw new Error(&quot;Unsupported parameter value&quot;)}(e,t);if(2===l.length){if(l[0]&amp;&amp;l[1])return function(e,t){if(1===t)return function(e){var t=[],i=0;return e.forEach((function(e,a){var o=a[1],u=n(t[o]||0,r(e));c(u,i)&amp;&amp;(i=u),t[o]=u}),!0),i}(e);if(t===Number.POSITIVE_INFINITY||&quot;inf&quot;===t)return function(e){var t=[],i=0;return e.forEach((function(e,a){var o=a[0],u=n(t[o]||0,r(e));c(u,i)&amp;&amp;(i=u),t[o]=u}),!0),i}(e);if(&quot;fro&quot;===t)return function(e){var t=0;return e.forEach((function(e,r){t=n(t,u(e,a(e)))})),r(o(t))}(e);if(2===t)return function(e){var t=e.size();if(t[0]!==t[1])throw new RangeError(&quot;Invalid matrix dimensions&quot;);var n=p(e),i=u(n,e),a=m(i).values.toArray(),s=a[a.length-1];return r(o(s))}(e);throw new Error(&quot;Unsupported parameter value &quot;+t)}(e,t);throw new RangeError(&quot;Invalid matrix dimensions&quot;)}}})),Xl=Ee(&quot;dot&quot;,[&quot;typed&quot;,&quot;addScalar&quot;,&quot;multiplyScalar&quot;,&quot;conj&quot;,&quot;size&quot;],(function(e){var t=e.typed,r=e.addScalar,n=e.multiplyScalar,i=e.conj,a=e.size;return t(&quot;dot&quot;,{&quot;Array | DenseMatrix, Array | DenseMatrix&quot;:function(e,a){var s=o(e,a),c=l(e)?e._data:e,f=l(e)?e._datatype:void 0,p=l(a)?a._data:a,m=l(a)?a._datatype:void 0,h=2===u(e).length,d=2===u(a).length,v=r,y=n;if(f&amp;&amp;m&amp;&amp;f===m&amp;&amp;&quot;string&quot;==typeof f){var g=f;v=t.find(r,[g,g]),y=t.find(n,[g,g])}if(!h&amp;&amp;!d){for(var x=y(i(c[0]),p[0]),b=1;b&lt;s;b++)x=v(x,y(i(c[b]),p[b]));return x}if(!h&amp;&amp;d){for(var w=y(i(c[0]),p[0][0]),N=1;N&lt;s;N++)w=v(w,y(i(c[N]),p[N][0]));return w}if(h&amp;&amp;!d){for(var D=y(i(c[0][0]),p[0]),E=1;E&lt;s;E++)D=v(D,y(i(c[E][0]),p[E]));return D}if(h&amp;&amp;d){for(var A=y(i(c[0][0]),p[0][0]),S=1;S&lt;s;S++)A=v(A,y(i(c[S][0]),p[S][0]));return A}},&quot;SparseMatrix, SparseMatrix&quot;:function(e,t){o(e,t);for(var i=e._index,a=e._values,u=t._index,s=t._values,c=0,f=r,l=n,p=0,m=0;p&lt;i.length&amp;&amp;m&lt;u.length;){var h=i[p],d=u[m];h&lt;d?p++:h&gt;d?m++:h===d&amp;&amp;(c=f(c,l(a[p],s[m])),p++,m++)}return c}});function o(e,t){var r,n,i=u(e),a=u(t);if(1===i.length)r=i[0];else{if(2!==i.length||1!==i[1])throw new RangeError(&quot;Expected a column vector, instead got a matrix of size (&quot;+i.join(&quot;, &quot;)+&quot;)&quot;);r=i[0]}if(1===a.length)n=a[0];else{if(2!==a.length||1!==a[1])throw new RangeError(&quot;Expected a column vector, instead got a matrix of size (&quot;+a.join(&quot;, &quot;)+&quot;)&quot;);n=a[0]}if(r!==n)throw new RangeError(&quot;Vectors must have equal length (&quot;+r+&quot; != &quot;+n+&quot;)&quot;);if(0===r)throw new RangeError(&quot;Cannot calculate the dot product of empty vectors&quot;);return r}function u(e){return l(e)?e.size():a(e)}})),Ql=Ee(&quot;trace&quot;,[&quot;typed&quot;,&quot;matrix&quot;,&quot;add&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.add;return t(&quot;trace&quot;,{Array:function(e){return i(r(e))},SparseMatrix:function(e){var t=e._values,r=e._index,i=e._ptr,a=e._size,o=a[0],u=a[1];if(o===u){var s=0;if(t.length&gt;0)for(var c=0;c&lt;u;c++)for(var f=i[c],l=i[c+1],p=f;p&lt;l;p++){var m=r[p];if(m===c){s=n(s,t[p]);break}if(m&gt;c)break}return s}throw new RangeError(&quot;Matrix must be square (size: &quot;+Vr(a)+&quot;)&quot;)},DenseMatrix:i,any:he});function i(e){var t=e._size,r=e._data;switch(t.length){case 1:if(1===t[0])return he(r[0]);throw new RangeError(&quot;Matrix must be square (size: &quot;+Vr(t)+&quot;)&quot;);case 2:var i=t[0];if(i===t[1]){for(var a=0,o=0;o&lt;i;o++)a=n(a,r[o][o]);return a}throw new RangeError(&quot;Matrix must be square (size: &quot;+Vr(t)+&quot;)&quot;);default:throw new RangeError(&quot;Matrix must be two dimensional (size: &quot;+Vr(t)+&quot;)&quot;)}}})),Kl=&quot;index&quot;,ep=Ee(Kl,[&quot;typed&quot;,&quot;Index&quot;],(function(e){var t=e.typed,r=e.Index;return t(Kl,{&quot;...number | string | BigNumber | Range | Array | Matrix&quot;:function(e){var t=e.map((function(e){return a(e)?e.toNumber():Array.isArray(e)||l(e)?e.map((function(e){return a(e)?e.toNumber():e})):e})),n=new r;return r.apply(n,t),n}})})),tp=(r(189),new Set([&quot;end&quot;])),rp=Ee(&quot;Node&quot;,[&quot;mathWithTransform&quot;],(function(e){var r=e.mathWithTransform;return function(){function e(){Ce(this,e)}return Oe(e,[{key:&quot;type&quot;,get:function(){return&quot;Node&quot;}},{key:&quot;isNode&quot;,get:function(){return!0}},{key:&quot;evaluate&quot;,value:function(e){return this.compile().evaluate(e)}},{key:&quot;compile&quot;,value:function(){var e=this._compile(r,{}),t={};return{evaluate:function(r){var n=Ue(r);return function(e){for(var t=0,r=_a(tp);t&lt;r.length;t++){var n=r[t];if(e.has(n))throw new Error('Scope contains an illegal symbol, &quot;'+n+'&quot; is a reserved keyword')}}(n),e(n,t,null)}}}},{key:&quot;_compile&quot;,value:function(e,t){throw new Error(&quot;Method _compile must be implemented by type &quot;+this.type)}},{key:&quot;forEach&quot;,value:function(e){throw new Error(&quot;Cannot run forEach on a Node interface&quot;)}},{key:&quot;map&quot;,value:function(e){throw new Error(&quot;Cannot run map on a Node interface&quot;)}},{key:&quot;_ifNode&quot;,value:function(e){if(!R(e))throw new TypeError(&quot;Callback function must return a Node&quot;);return e}},{key:&quot;traverse&quot;,value:function(e){e(this,null,null),function e(t,r){t.forEach((function(t,n,i){r(t,n,i),e(t,r)}))}(this,e)}},{key:&quot;transform&quot;,value:function(e){return function t(r,n,i){var a=e(r,n,i);return a!==r?a:r.map(t)}(this,null,null)}},{key:&quot;filter&quot;,value:function(e){var t=[];return this.traverse((function(r,n,i){e(r,n,i)&amp;&amp;t.push(r)})),t}},{key:&quot;clone&quot;,value:function(){throw new Error(&quot;Cannot clone a Node interface&quot;)}},{key:&quot;cloneDeep&quot;,value:function(){return this.map((function(e){return e.cloneDeep()}))}},{key:&quot;equals&quot;,value:function(e){return!!e&amp;&amp;this.type===e.type&amp;&amp;ge(this,e)}},{key:&quot;toString&quot;,value:function(e){var t=this._getCustomString(e);return void 0!==t?t:this._toString(e)}},{key:&quot;toJSON&quot;,value:function(){throw new Error(&quot;Cannot serialize object: toJSON not implemented by &quot;+this.type)}},{key:&quot;toHTML&quot;,value:function(e){var t=this._getCustomString(e);return void 0!==t?t:this.toHTML(e)}},{key:&quot;_toString&quot;,value:function(){throw new Error(&quot;_toString not implemented for &quot;+this.type)}},{key:&quot;toTex&quot;,value:function(e){var t=this._getCustomString(e);return void 0!==t?t:this._toTex(e)}},{key:&quot;_toTex&quot;,value:function(e){throw new Error(&quot;_toTex not implemented for &quot;+this.type)}},{key:&quot;_getCustomString&quot;,value:function(e){if(e&amp;&amp;&quot;object&quot;===t(e))switch(t(e.handler)){case&quot;object&quot;:case&quot;undefined&quot;:return;case&quot;function&quot;:return e.handler(this,e);default:throw new TypeError(&quot;Object or function expected as callback&quot;)}}},{key:&quot;getIdentifier&quot;,value:function(){return this.type}},{key:&quot;getContent&quot;,value:function(){return this}}]),e}()}),{isClass:!0,isNode:!0});function np(e,t){return np=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},np(e,t)}function ip(e,t){if(&quot;function&quot;!=typeof t&amp;&amp;null!==t)throw new TypeError(&quot;Super expression must either be null or a function&quot;);e.prototype=Object.create(t&amp;&amp;t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,&quot;prototype&quot;,{writable:!1}),t&amp;&amp;np(e,t)}function ap(e,r){if(r&amp;&amp;(&quot;object&quot;===t(r)||&quot;function&quot;==typeof r))return r;if(void 0!==r)throw new TypeError(&quot;Derived constructors may only return object or undefined&quot;);return function(e){if(void 0===e)throw new ReferenceError(&quot;this hasn't been initialised - super() hasn't been called&quot;);return e}(e)}function op(e){return op=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},op(e)}function up(e){return e&amp;&amp;e.isIndexError?new Qr(e.index+1,e.min+1,void 0!==e.max?e.max+1:void 0):e}function sp(e){var r=e.subset;return function(e,n){try{if(Array.isArray(e))return r(e,n);if(e&amp;&amp;&quot;function&quot;==typeof e.subset)return e.subset(n);if(&quot;string&quot;==typeof e)return r(e,n);if(&quot;object&quot;===t(e)){if(!n.isObjectProperty())throw new TypeError(&quot;Cannot apply a numeric index as object property&quot;);return Te(e,n.getObjectProperty())}throw new TypeError(&quot;Cannot apply index: unsupported type of object&quot;)}catch(e){throw up(e)}}}r(1299),r(2419);var cp=&quot;AccessorNode&quot;,fp=Ee(cp,[&quot;subset&quot;,&quot;Node&quot;],(function(e){var t=e.subset,r=e.Node,n=sp({subset:t});function i(e){return!(S(e)||C(e)||T(e)||k(e)||z(e)||j(e)||U(e))}var a=function(e){ip(o,e);var t,r,a=(t=o,r=function(){if(&quot;undefined&quot;==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(&quot;function&quot;==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=op(t);if(r){var i=op(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return ap(this,e)});function o(e,t){var r;if(Ce(this,o),r=a.call(this),!R(e))throw new TypeError('Node expected for parameter &quot;object&quot;');if(!I(t))throw new TypeError('IndexNode expected for parameter &quot;index&quot;');return r.object=e,r.index=t,r}return Oe(o,[{key:&quot;name&quot;,get:function(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():&quot;&quot;:this.object.name||&quot;&quot;}},{key:&quot;type&quot;,get:function(){return cp}},{key:&quot;isAccessorNode&quot;,get:function(){return!0}},{key:&quot;_compile&quot;,value:function(e,t){var r=this.object._compile(e,t),i=this.index._compile(e,t);if(this.index.isObjectProperty()){var a=this.index.getObjectProperty();return function(e,t,n){return Te(r(e,t,n),a)}}return function(e,t,a){var o=r(e,t,a),u=i(e,t,o);return n(o,u)}}},{key:&quot;forEach&quot;,value:function(e){e(this.object,&quot;object&quot;,this),e(this.index,&quot;index&quot;,this)}},{key:&quot;map&quot;,value:function(e){return new o(this._ifNode(e(this.object,&quot;object&quot;,this)),this._ifNode(e(this.index,&quot;index&quot;,this)))}},{key:&quot;clone&quot;,value:function(){return new o(this.object,this.index)}},{key:&quot;_toString&quot;,value:function(e){var t=this.object.toString(e);return i(this.object)&amp;&amp;(t=&quot;(&quot;+t+&quot;)&quot;),t+this.index.toString(e)}},{key:&quot;toHTML&quot;,value:function(e){var t=this.object.toHTML(e);return i(this.object)&amp;&amp;(t='&lt;span class=&quot;math-parenthesis math-round-parenthesis&quot;&gt;(&lt;/span&gt;'+t+'&lt;span class=&quot;math-parenthesis math-round-parenthesis&quot;&gt;)&lt;/span&gt;'),t+this.index.toHTML(e)}},{key:&quot;_toTex&quot;,value:function(e){var t=this.object.toTex(e);return i(this.object)&amp;&amp;(t=&quot;\s\sleft(' + object + '\s\sright)&quot;),t+this.index.toTex(e)}},{key:&quot;toJSON&quot;,value:function(){return{mathjs:cp,object:this.object,index:this.index}}}],[{key:&quot;fromJSON&quot;,value:function(e){return new o(e.object,e.index)}}]),o}(r);return Ba(a,&quot;name&quot;,cp),a}),{isClass:!0,isNode:!0});var lp=&quot;ArrayNode&quot;,pp=Ee(lp,[&quot;Node&quot;],(function(e){var t=function(e){ip(i,e);var t,r,n=(t=i,r=function(){if(&quot;undefined&quot;==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(&quot;function&quot;==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=op(t);if(r){var i=op(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return ap(this,e)});function i(e){var t;if(Ce(this,i),(t=n.call(this)).items=e||[],!Array.isArray(t.items)||!t.items.every(R))throw new TypeError(&quot;Array containing Nodes expected&quot;);return t}return Oe(i,[{key:&quot;type&quot;,get:function(){return lp}},{key:&quot;isArrayNode&quot;,get:function(){return!0}},{key:&quot;_compile&quot;,value:function(e,t){var r=hn(this.items,(function(r){return r._compile(e,t)}));if(&quot;Array&quot;!==e.config.matrix){var n=e.matrix;return function(e,t,i){return n(hn(r,(function(r){return r(e,t,i)})))}}return function(e,t,n){return hn(r,(function(r){return r(e,t,n)}))}}},{key:&quot;forEach&quot;,value:function(e){for(var t=0;t&lt;this.items.length;t++)e(this.items[t],&quot;items[&quot;+t+&quot;]&quot;,this)}},{key:&quot;map&quot;,value:function(e){for(var t=[],r=0;r&lt;this.items.length;r++)t[r]=this._ifNode(e(this.items[r],&quot;items[&quot;+r+&quot;]&quot;,this));return new i(t)}},{key:&quot;clone&quot;,value:function(){return new i(this.items.slice(0))}},{key:&quot;_toString&quot;,value:function(e){return&quot;[&quot;+this.items.map((function(t){return t.toString(e)})).join(&quot;, &quot;)+&quot;]&quot;}},{key:&quot;toJSON&quot;,value:function(){return{mathjs:lp,items:this.items}}},{key:&quot;toHTML&quot;,value:function(e){return'&lt;span class=&quot;math-parenthesis math-square-parenthesis&quot;&gt;[&lt;/span&gt;'+this.items.map((function(t){return t.toHTML(e)})).join('&lt;span class=&quot;math-separator&quot;&gt;,&lt;/span&gt;')+'&lt;span class=&quot;math-parenthesis math-square-parenthesis&quot;&gt;]&lt;/span&gt;'}},{key:&quot;_toTex&quot;,value:function(e){return function t(r,n){var i=r.some(C)&amp;&amp;!r.every(C),a=n||i,o=a?&quot;&amp;&quot;:&quot;\s\s\s\s&quot;,u=r.map((function(r){return r.items?t(r.items,!n):r.toTex(e)})).join(o);return i||!a||a&amp;&amp;!n?&quot;\s\sbegin{bmatrix}&quot;+u+&quot;\s\send{bmatrix}&quot;:u}(this.items,!1)}}],[{key:&quot;fromJSON&quot;,value:function(e){return new i(e.items)}}]),i}(e.Node);return Ba(t,&quot;name&quot;,lp),t}),{isClass:!0,isNode:!0});function mp(e,t){(null==t||t&gt;e.length)&amp;&amp;(t=e.length);for(var r=0,n=new Array(t);r&lt;t;r++)n[r]=e[r];return n}var hp=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{&quot;OperatorNode:or&quot;:{op:&quot;or&quot;,associativity:&quot;left&quot;,associativeWith:[]}},{&quot;OperatorNode:xor&quot;:{op:&quot;xor&quot;,associativity:&quot;left&quot;,associativeWith:[]}},{&quot;OperatorNode:and&quot;:{op:&quot;and&quot;,associativity:&quot;left&quot;,associativeWith:[]}},{&quot;OperatorNode:bitOr&quot;:{op:&quot;|&quot;,associativity:&quot;left&quot;,associativeWith:[]}},{&quot;OperatorNode:bitXor&quot;:{op:&quot;^|&quot;,associativity:&quot;left&quot;,associativeWith:[]}},{&quot;OperatorNode:bitAnd&quot;:{op:&quot;&amp;&quot;,associativity:&quot;left&quot;,associativeWith:[]}},{&quot;OperatorNode:equal&quot;:{op:&quot;==&quot;,associativity:&quot;left&quot;,associativeWith:[]},&quot;OperatorNode:unequal&quot;:{op:&quot;!=&quot;,associativity:&quot;left&quot;,associativeWith:[]},&quot;OperatorNode:smaller&quot;:{op:&quot;&lt;&quot;,associativity:&quot;left&quot;,associativeWith:[]},&quot;OperatorNode:larger&quot;:{op:&quot;&gt;&quot;,associativity:&quot;left&quot;,associativeWith:[]},&quot;OperatorNode:smallerEq&quot;:{op:&quot;&lt;=&quot;,associativity:&quot;left&quot;,associativeWith:[]},&quot;OperatorNode:largerEq&quot;:{op:&quot;&gt;=&quot;,associativity:&quot;left&quot;,associativeWith:[]},RelationalNode:{associativity:&quot;left&quot;,associativeWith:[]}},{&quot;OperatorNode:leftShift&quot;:{op:&quot;&lt;&lt;&quot;,associativity:&quot;left&quot;,associativeWith:[]},&quot;OperatorNode:rightArithShift&quot;:{op:&quot;&gt;&gt;&quot;,associativity:&quot;left&quot;,associativeWith:[]},&quot;OperatorNode:rightLogShift&quot;:{op:&quot;&gt;&gt;&gt;&quot;,associativity:&quot;left&quot;,associativeWith:[]}},{&quot;OperatorNode:to&quot;:{op:&quot;to&quot;,associativity:&quot;left&quot;,associativeWith:[]}},{RangeNode:{}},{&quot;OperatorNode:add&quot;:{op:&quot;+&quot;,associativity:&quot;left&quot;,associativeWith:[&quot;OperatorNode:add&quot;,&quot;OperatorNode:subtract&quot;]},&quot;OperatorNode:subtract&quot;:{op:&quot;-&quot;,associativity:&quot;left&quot;,associativeWith:[]}},{&quot;OperatorNode:multiply&quot;:{op:&quot;*&quot;,associativity:&quot;left&quot;,associativeWith:[&quot;OperatorNode:multiply&quot;,&quot;OperatorNode:divide&quot;,&quot;Operator:dotMultiply&quot;,&quot;Operator:dotDivide&quot;]},&quot;OperatorNode:divide&quot;:{op:&quot;/&quot;,associativity:&quot;left&quot;,associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},&quot;OperatorNode:dotMultiply&quot;:{op:&quot;.*&quot;,associativity:&quot;left&quot;,associativeWith:[&quot;OperatorNode:multiply&quot;,&quot;OperatorNode:divide&quot;,&quot;OperatorNode:dotMultiply&quot;,&quot;OperatorNode:doDivide&quot;]},&quot;OperatorNode:dotDivide&quot;:{op:&quot;./&quot;,associativity:&quot;left&quot;,associativeWith:[]},&quot;OperatorNode:mod&quot;:{op:&quot;mod&quot;,associativity:&quot;left&quot;,associativeWith:[]}},{&quot;OperatorNode:multiply&quot;:{associativity:&quot;left&quot;,associativeWith:[&quot;OperatorNode:multiply&quot;,&quot;OperatorNode:divide&quot;,&quot;Operator:dotMultiply&quot;,&quot;Operator:dotDivide&quot;]}},{&quot;OperatorNode:unaryPlus&quot;:{op:&quot;+&quot;,associativity:&quot;right&quot;},&quot;OperatorNode:unaryMinus&quot;:{op:&quot;-&quot;,associativity:&quot;right&quot;},&quot;OperatorNode:bitNot&quot;:{op:&quot;~&quot;,associativity:&quot;right&quot;},&quot;OperatorNode:not&quot;:{op:&quot;not&quot;,associativity:&quot;right&quot;}},{&quot;OperatorNode:pow&quot;:{op:&quot;^&quot;,associativity:&quot;right&quot;,associativeWith:[],latexRightParens:!1},&quot;OperatorNode:dotPow&quot;:{op:&quot;.^&quot;,associativity:&quot;right&quot;,associativeWith:[]}},{&quot;OperatorNode:factorial&quot;:{op:&quot;!&quot;,associativity:&quot;left&quot;}},{&quot;OperatorNode:ctranspose&quot;:{op:&quot;'&quot;,associativity:&quot;left&quot;}}];function dp(e,t){if(!t||&quot;auto&quot;!==t)return e;for(var r=e;j(r);)r=r.content;return r}function vp(e,t,r,n){var i=e;&quot;keep&quot;!==t&amp;&amp;(i=e.getContent());for(var a=i.getIdentifier(),o=null,u=0;u&lt;hp.length;u++)if(a in hp[u]){o=u;break}if(&quot;OperatorNode:multiply&quot;===a&amp;&amp;i.implicit&amp;&amp;&quot;show&quot;!==r){var s=dp(i.args[0],t);T(s)&amp;&amp;n&amp;&amp;&quot;OperatorNode:divide&quot;===n.getIdentifier()&amp;&amp;B(dp(n.args[0],t))||&quot;OperatorNode:divide&quot;===s.getIdentifier()&amp;&amp;B(dp(s.args[0],t))&amp;&amp;T(dp(s.args[1]))||(o+=1)}return o}function yp(e,t){var r=e;&quot;keep&quot;!==t&amp;&amp;(r=e.getContent());var n=r.getIdentifier(),i=vp(r,t);if(null===i)return null;var a=hp[i][n];if(Ne(a,&quot;associativity&quot;)){if(&quot;left&quot;===a.associativity)return&quot;left&quot;;if(&quot;right&quot;===a.associativity)return&quot;right&quot;;throw Error(&quot;'&quot;+n+&quot;' has the invalid associativity '&quot;+a.associativity+&quot;'.&quot;)}return null}function gp(e,t,r){var n=&quot;keep&quot;!==r?e.getContent():e,i=&quot;keep&quot;!==r?e.getContent():t,a=n.getIdentifier(),o=i.getIdentifier(),u=vp(n,r);if(null===u)return null;var s=hp[u][a];if(Ne(s,&quot;associativeWith&quot;)&amp;&amp;s.associativeWith instanceof Array){for(var c=0;c&lt;s.associativeWith.length;c++)if(s.associativeWith[c]===o)return!0;return!1}return null}var xp=&quot;AssignmentNode&quot;,bp=Ee(xp,[&quot;subset&quot;,&quot;?matrix&quot;,&quot;Node&quot;],(function(e){var r=e.subset,n=e.matrix,i=e.Node,a=sp({subset:r}),o=function(e){var r=e.subset,n=e.matrix;return function(e,i,a){try{if(Array.isArray(e))return n(e).subset(i,a).valueOf();if(e&amp;&amp;&quot;function&quot;==typeof e.subset)return e.subset(i,a);if(&quot;string&quot;==typeof e)return r(e,i,a);if(&quot;object&quot;===t(e)){if(!i.isObjectProperty())throw TypeError(&quot;Cannot apply a numeric index as object property&quot;);return Be(e,i.getObjectProperty(),a),e}throw new TypeError(&quot;Cannot apply index: unsupported type of object&quot;)}catch(e){throw up(e)}}}({subset:r,matrix:n});function u(e,t,r){t||(t=&quot;keep&quot;);var n=vp(e,t,r),i=vp(e.value,t,r);return&quot;all&quot;===t||null!==i&amp;&amp;i&lt;=n}var s=function(e){ip(i,e);var t,r,n=(t=i,r=function(){if(&quot;undefined&quot;==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(&quot;function&quot;==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=op(t);if(r){var i=op(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return ap(this,e)});function i(e,t,r){var a;if(Ce(this,i),(a=n.call(this)).object=e,a.index=r?t:null,a.value=r||t,!U(e)&amp;&amp;!S(e))throw new TypeError('SymbolNode or AccessorNode expected as &quot;object&quot;');if(U(e)&amp;&amp;&quot;end&quot;===e.name)throw new Error('Cannot assign to symbol &quot;end&quot;');if(a.index&amp;&amp;!I(a.index))throw new TypeError('IndexNode expected as &quot;index&quot;');if(!R(a.value))throw new TypeError('Node expected as &quot;value&quot;');return a}return Oe(i,[{key:&quot;name&quot;,get:function(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():&quot;&quot;:this.object.name||&quot;&quot;}},{key:&quot;type&quot;,get:function(){return xp}},{key:&quot;isAssignmentNode&quot;,get:function(){return!0}},{key:&quot;_compile&quot;,value:function(e,t){var r=this.object._compile(e,t),n=this.index?this.index._compile(e,t):null,i=this.value._compile(e,t),u=this.object.name;if(this.index){if(this.index.isObjectProperty()){var s=this.index.getObjectProperty();return function(e,t,n){var a=r(e,t,n),o=i(e,t,n);return Be(a,s,o),o}}if(U(this.object))return function(e,t,a){var s=r(e,t,a),c=i(e,t,a),f=n(e,t,s);return e.set(u,o(s,f,c)),c};var c=this.object.object._compile(e,t);if(this.object.index.isObjectProperty()){var f=this.object.index.getObjectProperty();return function(e,t,r){var a=c(e,t,r),u=Te(a,f),s=n(e,t,u),l=i(e,t,r);return Be(a,f,o(u,s,l)),l}}var l=this.object.index._compile(e,t);return function(e,t,r){var u=c(e,t,r),s=l(e,t,u),f=a(u,s),p=n(e,t,f),m=i(e,t,r);return o(u,s,o(f,p,m)),m}}if(!U(this.object))throw new TypeError(&quot;SymbolNode expected as object&quot;);return function(e,t,r){var n=i(e,t,r);return e.set(u,n),n}}},{key:&quot;forEach&quot;,value:function(e){e(this.object,&quot;object&quot;,this),this.index&amp;&amp;e(this.index,&quot;index&quot;,this),e(this.value,&quot;value&quot;,this)}},{key:&quot;map&quot;,value:function(e){return new i(this._ifNode(e(this.object,&quot;object&quot;,this)),this.index?this._ifNode(e(this.index,&quot;index&quot;,this)):null,this._ifNode(e(this.value,&quot;value&quot;,this)))}},{key:&quot;clone&quot;,value:function(){return new i(this.object,this.index,this.value)}},{key:&quot;_toString&quot;,value:function(e){var t=this.object.toString(e),r=this.index?this.index.toString(e):&quot;&quot;,n=this.value.toString(e);return u(this,e&amp;&amp;e.parenthesis,e&amp;&amp;e.implicit)&amp;&amp;(n=&quot;(&quot;+n+&quot;)&quot;),t+r+&quot; = &quot;+n}},{key:&quot;toJSON&quot;,value:function(){return{mathjs:xp,object:this.object,index:this.index,value:this.value}}},{key:&quot;toHTML&quot;,value:function(e){var t=this.object.toHTML(e),r=this.index?this.index.toHTML(e):&quot;&quot;,n=this.value.toHTML(e);return u(this,e&amp;&amp;e.parenthesis,e&amp;&amp;e.implicit)&amp;&amp;(n='&lt;span class=&quot;math-paranthesis math-round-parenthesis&quot;&gt;(&lt;/span&gt;'+n+'&lt;span class=&quot;math-paranthesis math-round-parenthesis&quot;&gt;)&lt;/span&gt;'),t+r+'&lt;span class=&quot;math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator&quot;&gt;=&lt;/span&gt;'+n}},{key:&quot;_toTex&quot;,value:function(e){var t=this.object.toTex(e),r=this.index?this.index.toTex(e):&quot;&quot;,n=this.value.toTex(e);return u(this,e&amp;&amp;e.parenthesis,e&amp;&amp;e.implicit)&amp;&amp;(n=&quot;\s\sleft(&quot;.concat(n,&quot;\s\sright)&quot;)),t+r+&quot;:=&quot;+n}}],[{key:&quot;fromJSON&quot;,value:function(e){return new i(e.object,e.index,e.value)}}]),i}(i);return Ba(s,&quot;name&quot;,xp),s}),{isClass:!0,isNode:!0});var wp=&quot;BlockNode&quot;,Np=Ee(wp,[&quot;ResultSet&quot;,&quot;Node&quot;],(function(e){var t=e.ResultSet,r=function(e){ip(a,e);var r,n,i=(r=a,n=function(){if(&quot;undefined&quot;==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(&quot;function&quot;==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=op(r);if(n){var i=op(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return ap(this,e)});function a(e){var t;if(Ce(this,a),t=i.call(this),!Array.isArray(e))throw new Error(&quot;Array expected&quot;);return t.blocks=e.map((function(e){var t=e&amp;&amp;e.node,r=!e||void 0===e.visible||e.visible;if(!R(t))throw new TypeError('Property &quot;node&quot; must be a Node');if(&quot;boolean&quot;!=typeof r)throw new TypeError('Property &quot;visible&quot; must be a boolean');return{node:t,visible:r}})),t}return Oe(a,[{key:&quot;type&quot;,get:function(){return wp}},{key:&quot;isBlockNode&quot;,get:function(){return!0}},{key:&quot;_compile&quot;,value:function(e,r){var n=hn(this.blocks,(function(t){return{evaluate:t.node._compile(e,r),visible:t.visible}}));return function(e,r,i){var a=[];return dn(n,(function(t){var n=t.evaluate(e,r,i);t.visible&amp;&amp;a.push(n)})),new t(a)}}},{key:&quot;forEach&quot;,value:function(e){for(var t=0;t&lt;this.blocks.length;t++)e(this.blocks[t].node,&quot;blocks[&quot;+t+&quot;].node&quot;,this)}},{key:&quot;map&quot;,value:function(e){for(var t=[],r=0;r&lt;this.blocks.length;r++){var n=this.blocks[r],i=this._ifNode(e(n.node,&quot;blocks[&quot;+r+&quot;].node&quot;,this));t[r]={node:i,visible:n.visible}}return new a(t)}},{key:&quot;clone&quot;,value:function(){return new a(this.blocks.map((function(e){return{node:e.node,visible:e.visible}})))}},{key:&quot;_toString&quot;,value:function(e){return this.blocks.map((function(t){return t.node.toString(e)+(t.visible?&quot;&quot;:&quot;;&quot;)})).join(&quot;\sn&quot;)}},{key:&quot;toJSON&quot;,value:function(){return{mathjs:wp,blocks:this.blocks}}},{key:&quot;toHTML&quot;,value:function(e){return this.blocks.map((function(t){return t.node.toHTML(e)+(t.visible?&quot;&quot;:'&lt;span class=&quot;math-separator&quot;&gt;;&lt;/span&gt;')})).join('&lt;span class=&quot;math-separator&quot;&gt;&lt;br /&gt;&lt;/span&gt;')}},{key:&quot;_toTex&quot;,value:function(e){return this.blocks.map((function(t){return t.node.toTex(e)+(t.visible?&quot;&quot;:&quot;;&quot;)})).join(&quot;\s\s;\s\s;\sn&quot;)}}],[{key:&quot;fromJSON&quot;,value:function(e){return new a(e.blocks)}}]),a}(e.Node);return Ba(r,&quot;name&quot;,wp),r}),{isClass:!0,isNode:!0});var Dp=&quot;ConditionalNode&quot;,Ep=Ee(Dp,[&quot;Node&quot;],(function(e){var t=function(e){ip(i,e);var t,r,n=(t=i,r=function(){if(&quot;undefined&quot;==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(&quot;function&quot;==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=op(t);if(r){var i=op(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return ap(this,e)});function i(e,t,r){var a;if(Ce(this,i),a=n.call(this),!R(e))throw new TypeError(&quot;Parameter condition must be a Node&quot;);if(!R(t))throw new TypeError(&quot;Parameter trueExpr must be a Node&quot;);if(!R(r))throw new TypeError(&quot;Parameter falseExpr must be a Node&quot;);return a.condition=e,a.trueExpr=t,a.falseExpr=r,a}return Oe(i,[{key:&quot;type&quot;,get:function(){return Dp}},{key:&quot;isConditionalNode&quot;,get:function(){return!0}},{key:&quot;_compile&quot;,value:function(e,t){var r=this.condition._compile(e,t),n=this.trueExpr._compile(e,t),i=this.falseExpr._compile(e,t);return function(e,t,u){return function(e){if(&quot;number&quot;==typeof e||&quot;boolean&quot;==typeof e||&quot;string&quot;==typeof e)return!!e;if(e){if(a(e))return!e.isZero();if(o(e))return!(!e.re&amp;&amp;!e.im);if(s(e))return!!e.value}if(null==e)return!1;throw new TypeError('Unsupported type of condition &quot;'+H(e)+'&quot;')}(r(e,t,u))?n(e,t,u):i(e,t,u)}}},{key:&quot;forEach&quot;,value:function(e){e(this.condition,&quot;condition&quot;,this),e(this.trueExpr,&quot;trueExpr&quot;,this),e(this.falseExpr,&quot;falseExpr&quot;,this)}},{key:&quot;map&quot;,value:function(e){return new i(this._ifNode(e(this.condition,&quot;condition&quot;,this)),this._ifNode(e(this.trueExpr,&quot;trueExpr&quot;,this)),this._ifNode(e(this.falseExpr,&quot;falseExpr&quot;,this)))}},{key:&quot;clone&quot;,value:function(){return new i(this.condition,this.trueExpr,this.falseExpr)}},{key:&quot;_toString&quot;,value:function(e){var t=e&amp;&amp;e.parenthesis?e.parenthesis:&quot;keep&quot;,r=vp(this,t,e&amp;&amp;e.implicit),n=this.condition.toString(e),i=vp(this.condition,t,e&amp;&amp;e.implicit);(&quot;all&quot;===t||&quot;OperatorNode&quot;===this.condition.type||null!==i&amp;&amp;i&lt;=r)&amp;&amp;(n=&quot;(&quot;+n+&quot;)&quot;);var a=this.trueExpr.toString(e),o=vp(this.trueExpr,t,e&amp;&amp;e.implicit);(&quot;all&quot;===t||&quot;OperatorNode&quot;===this.trueExpr.type||null!==o&amp;&amp;o&lt;=r)&amp;&amp;(a=&quot;(&quot;+a+&quot;)&quot;);var u=this.falseExpr.toString(e),s=vp(this.falseExpr,t,e&amp;&amp;e.implicit);return(&quot;all&quot;===t||&quot;OperatorNode&quot;===this.falseExpr.type||null!==s&amp;&amp;s&lt;=r)&amp;&amp;(u=&quot;(&quot;+u+&quot;)&quot;),n+&quot; ? &quot;+a+&quot; : &quot;+u}},{key:&quot;toJSON&quot;,value:function(){return{mathjs:Dp,condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}}},{key:&quot;toHTML&quot;,value:function(e){var t=e&amp;&amp;e.parenthesis?e.parenthesis:&quot;keep&quot;,r=vp(this,t,e&amp;&amp;e.implicit),n=this.condition.toHTML(e),i=vp(this.condition,t,e&amp;&amp;e.implicit);(&quot;all&quot;===t||&quot;OperatorNode&quot;===this.condition.type||null!==i&amp;&amp;i&lt;=r)&amp;&amp;(n='&lt;span class=&quot;math-parenthesis math-round-parenthesis&quot;&gt;(&lt;/span&gt;'+n+'&lt;span class=&quot;math-parenthesis math-round-parenthesis&quot;&gt;)&lt;/span&gt;');var a=this.trueExpr.toHTML(e),o=vp(this.trueExpr,t,e&amp;&amp;e.implicit);(&quot;all&quot;===t||&quot;OperatorNode&quot;===this.trueExpr.type||null!==o&amp;&amp;o&lt;=r)&amp;&amp;(a='&lt;span class=&quot;math-parenthesis math-round-parenthesis&quot;&gt;(&lt;/span&gt;'+a+'&lt;span class=&quot;math-parenthesis math-round-parenthesis&quot;&gt;)&lt;/span&gt;');var u=this.falseExpr.toHTML(e),s=vp(this.falseExpr,t,e&amp;&amp;e.implicit);return(&quot;all&quot;===t||&quot;OperatorNode&quot;===this.falseExpr.type||null!==s&amp;&amp;s&lt;=r)&amp;&amp;(u='&lt;span class=&quot;math-parenthesis math-round-parenthesis&quot;&gt;(&lt;/span&gt;'+u+'&lt;span class=&quot;math-parenthesis math-round-parenthesis&quot;&gt;)&lt;/span&gt;'),n+'&lt;span class=&quot;math-operator math-conditional-operator&quot;&gt;?&lt;/span&gt;'+a+'&lt;span class=&quot;math-operator math-conditional-operator&quot;&gt;:&lt;/span&gt;'+u}},{key:&quot;_toTex&quot;,value:function(e){return&quot;\s\sbegin{cases} {&quot;+this.trueExpr.toTex(e)+&quot;}, &amp;\s\squad{\s\stext{if }\s\s;&quot;+this.condition.toTex(e)+&quot;}\s\s\s\s{&quot;+this.falseExpr.toTex(e)+&quot;}, &amp;\s\squad{\s\stext{otherwise}}\s\send{cases}&quot;}}],[{key:&quot;fromJSON&quot;,value:function(e){return new i(e.condition,e.trueExpr,e.falseExpr)}}]),i}(e.Node);return Ba(t,&quot;name&quot;,Dp),t}),{isClass:!0,isNode:!0}),Ap=r(7928),Sp={Alpha:&quot;A&quot;,alpha:&quot;\s\salpha&quot;,Beta:&quot;B&quot;,beta:&quot;\s\sbeta&quot;,Gamma:&quot;\s\sGamma&quot;,gamma:&quot;\s\sgamma&quot;,Delta:&quot;\s\sDelta&quot;,delta:&quot;\s\sdelta&quot;,Epsilon:&quot;E&quot;,epsilon:&quot;\s\sepsilon&quot;,varepsilon:&quot;\s\svarepsilon&quot;,Zeta:&quot;Z&quot;,zeta:&quot;\s\szeta&quot;,Eta:&quot;H&quot;,eta:&quot;\s\seta&quot;,Theta:&quot;\s\sTheta&quot;,theta:&quot;\s\stheta&quot;,vartheta:&quot;\s\svartheta&quot;,Iota:&quot;I&quot;,iota:&quot;\s\siota&quot;,Kappa:&quot;K&quot;,kappa:&quot;\s\skappa&quot;,varkappa:&quot;\s\svarkappa&quot;,Lambda:&quot;\s\sLambda&quot;,lambda:&quot;\s\slambda&quot;,Mu:&quot;M&quot;,mu:&quot;\s\smu&quot;,Nu:&quot;N&quot;,nu:&quot;\s\snu&quot;,Xi:&quot;\s\sXi&quot;,xi:&quot;\s\sxi&quot;,Omicron:&quot;O&quot;,omicron:&quot;o&quot;,Pi:&quot;\s\sPi&quot;,pi:&quot;\s\spi&quot;,varpi:&quot;\s\svarpi&quot;,Rho:&quot;P&quot;,rho:&quot;\s\srho&quot;,varrho:&quot;\s\svarrho&quot;,Sigma:&quot;\s\sSigma&quot;,sigma:&quot;\s\ssigma&quot;,varsigma:&quot;\s\svarsigma&quot;,Tau:&quot;T&quot;,tau:&quot;\s\stau&quot;,Upsilon:&quot;\s\sUpsilon&quot;,upsilon:&quot;\s\supsilon&quot;,Phi:&quot;\s\sPhi&quot;,phi:&quot;\s\sphi&quot;,varphi:&quot;\s\svarphi&quot;,Chi:&quot;X&quot;,chi:&quot;\s\schi&quot;,Psi:&quot;\s\sPsi&quot;,psi:&quot;\s\spsi&quot;,Omega:&quot;\s\sOmega&quot;,omega:&quot;\s\somega&quot;,true:&quot;\s\smathrm{True}&quot;,false:&quot;\s\smathrm{False}&quot;,i:&quot;i&quot;,inf:&quot;\s\sinfty&quot;,Inf:&quot;\s\sinfty&quot;,infinity:&quot;\s\sinfty&quot;,Infinity:&quot;\s\sinfty&quot;,oo:&quot;\s\sinfty&quot;,lim:&quot;\s\slim&quot;,undefined:&quot;\s\smathbf{?}&quot;},Cp={transpose:&quot;^\s\stop&quot;,ctranspose:&quot;^H&quot;,factorial:&quot;!&quot;,pow:&quot;^&quot;,dotPow:&quot;.^\s\swedge&quot;,unaryPlus:&quot;+&quot;,unaryMinus:&quot;-&quot;,bitNot:&quot;\s\s~&quot;,not:&quot;\s\sneg&quot;,multiply:&quot;\s\scdot&quot;,divide:&quot;\s\sfrac&quot;,dotMultiply:&quot;.\s\scdot&quot;,dotDivide:&quot;.:&quot;,mod:&quot;\s\smod&quot;,add:&quot;+&quot;,subtract:&quot;-&quot;,to:&quot;\s\srightarrow&quot;,leftShift:&quot;&lt;&lt;&quot;,rightArithShift:&quot;&gt;&gt;&quot;,rightLogShift:&quot;&gt;&gt;&gt;&quot;,equal:&quot;=&quot;,unequal:&quot;\s\sneq&quot;,smaller:&quot;&lt;&quot;,larger:&quot;&gt;&quot;,smallerEq:&quot;\s\sleq&quot;,largerEq:&quot;\s\sgeq&quot;,bitAnd:&quot;\s\s&amp;&quot;,bitXor:&quot;\s\sunderline{|}&quot;,bitOr:&quot;|&quot;,and:&quot;\s\swedge&quot;,xor:&quot;\s\sveebar&quot;,or:&quot;\s\svee&quot;},Mp={abs:{1:&quot;\s\sleft|${args[0]}\s\sright|&quot;},add:{2:&quot;\s\sleft(${args[0]}&quot;.concat(Cp.add,&quot;${args[1]}\s\sright)&quot;)},cbrt:{1:&quot;\s\ssqrt[3]{${args[0]}}&quot;},ceil:{1:&quot;\s\sleft\s\slceil${args[0]}\s\sright\s\srceil&quot;},cube:{1:&quot;\s\sleft(${args[0]}\s\sright)^3&quot;},divide:{2:&quot;\s\sfrac{${args[0]}}{${args[1]}}&quot;},dotDivide:{2:&quot;\s\sleft(${args[0]}&quot;.concat(Cp.dotDivide,&quot;${args[1]}\s\sright)&quot;)},dotMultiply:{2:&quot;\s\sleft(${args[0]}&quot;.concat(Cp.dotMultiply,&quot;${args[1]}\s\sright)&quot;)},dotPow:{2:&quot;\s\sleft(${args[0]}&quot;.concat(Cp.dotPow,&quot;${args[1]}\s\sright)&quot;)},exp:{1:&quot;\s\sexp\s\sleft(${args[0]}\s\sright)&quot;},expm1:&quot;\s\sleft(e&quot;.concat(Cp.pow,&quot;{${args[0]}}-1\s\sright)&quot;),fix:{1:&quot;\s\smathrm{${name}}\s\sleft(${args[0]}\s\sright)&quot;},floor:{1:&quot;\s\sleft\s\slfloor${args[0]}\s\sright\s\srfloor&quot;},gcd:&quot;\s\sgcd\s\sleft(${args}\s\sright)&quot;,hypot:&quot;\s\shypot\s\sleft(${args}\s\sright)&quot;,log:{1:&quot;\s\sln\s\sleft(${args[0]}\s\sright)&quot;,2:&quot;\s\slog_{${args[1]}}\s\sleft(${args[0]}\s\sright)&quot;},log10:{1:&quot;\s\slog_{10}\s\sleft(${args[0]}\s\sright)&quot;},log1p:{1:&quot;\s\sln\s\sleft(${args[0]}+1\s\sright)&quot;,2:&quot;\s\slog_{${args[1]}}\s\sleft(${args[0]}+1\s\sright)&quot;},log2:&quot;\s\slog_{2}\s\sleft(${args[0]}\s\sright)&quot;,mod:{2:&quot;\s\sleft(${args[0]}&quot;.concat(Cp.mod,&quot;${args[1]}\s\sright)&quot;)},multiply:{2:&quot;\s\sleft(${args[0]}&quot;.concat(Cp.multiply,&quot;${args[1]}\s\sright)&quot;)},norm:{1:&quot;\s\sleft\s\s|${args[0]}\s\sright\s\s|&quot;,2:void 0},nthRoot:{2:&quot;\s\ssqrt[${args[1]}]{${args[0]}}&quot;},nthRoots:{2:&quot;\s\s{y : $y^{args[1]} = {${args[0]}}\s\s}&quot;},pow:{2:&quot;\s\sleft(${args[0]}\s\sright)&quot;.concat(Cp.pow,&quot;{${args[1]}}&quot;)},round:{1:&quot;\s\sleft\s\slfloor${args[0]}\s\sright\s\srceil&quot;,2:void 0},sign:{1:&quot;\s\smathrm{${name}}\s\sleft(${args[0]}\s\sright)&quot;},sqrt:{1:&quot;\s\ssqrt{${args[0]}}&quot;},square:{1:&quot;\s\sleft(${args[0]}\s\sright)^2&quot;},subtract:{2:&quot;\s\sleft(${args[0]}&quot;.concat(Cp.subtract,&quot;${args[1]}\s\sright)&quot;)},unaryMinus:{1:&quot;&quot;.concat(Cp.unaryMinus,&quot;\s\sleft(${args[0]}\s\sright)&quot;)},unaryPlus:{1:&quot;&quot;.concat(Cp.unaryPlus,&quot;\s\sleft(${args[0]}\s\sright)&quot;)},bitAnd:{2:&quot;\s\sleft(${args[0]}&quot;.concat(Cp.bitAnd,&quot;${args[1]}\s\sright)&quot;)},bitNot:{1:Cp.bitNot+&quot;\s\sleft(${args[0]}\s\sright)&quot;},bitOr:{2:&quot;\s\sleft(${args[0]}&quot;.concat(Cp.bitOr,&quot;${args[1]}\s\sright)&quot;)},bitXor:{2:&quot;\s\sleft(${args[0]}&quot;.concat(Cp.bitXor,&quot;${args[1]}\s\sright)&quot;)},leftShift:{2:&quot;\s\sleft(${args[0]}&quot;.concat(Cp.leftShift,&quot;${args[1]}\s\sright)&quot;)},rightArithShift:{2:&quot;\s\sleft(${args[0]}&quot;.concat(Cp.rightArithShift,&quot;${args[1]}\s\sright)&quot;)},rightLogShift:{2:&quot;\s\sleft(${args[0]}&quot;.concat(Cp.rightLogShift,&quot;${args[1]}\s\sright)&quot;)},bellNumbers:{1:&quot;\s\smathrm{B}_{${args[0]}}&quot;},catalan:{1:&quot;\s\smathrm{C}_{${args[0]}}&quot;},stirlingS2:{2:&quot;\s\smathrm{S}\s\sleft(${args}\s\sright)&quot;},arg:{1:&quot;\s\sarg\s\sleft(${args[0]}\s\sright)&quot;},conj:{1:&quot;\s\sleft(${args[0]}\s\sright)^*&quot;},im:{1:&quot;\s\sIm\s\sleft\s\slbrace${args[0]}\s\sright\s\srbrace&quot;},re:{1:&quot;\s\sRe\s\sleft\s\slbrace${args[0]}\s\sright\s\srbrace&quot;},and:{2:&quot;\s\sleft(${args[0]}&quot;.concat(Cp.and,&quot;${args[1]}\s\sright)&quot;)},not:{1:Cp.not+&quot;\s\sleft(${args[0]}\s\sright)&quot;},or:{2:&quot;\s\sleft(${args[0]}&quot;.concat(Cp.or,&quot;${args[1]}\s\sright)&quot;)},xor:{2:&quot;\s\sleft(${args[0]}&quot;.concat(Cp.xor,&quot;${args[1]}\s\sright)&quot;)},cross:{2:&quot;\s\sleft(${args[0]}\s\sright)\s\stimes\s\sleft(${args[1]}\s\sright)&quot;},ctranspose:{1:&quot;\s\sleft(${args[0]}\s\sright)&quot;.concat(Cp.ctranspose)},det:{1:&quot;\s\sdet\s\sleft(${args[0]}\s\sright)&quot;},dot:{2:&quot;\s\sleft(${args[0]}\s\scdot${args[1]}\s\sright)&quot;},expm:{1:&quot;\s\sexp\s\sleft(${args[0]}\s\sright)&quot;},inv:{1:&quot;\s\sleft(${args[0]}\s\sright)^{-1}&quot;},pinv:{1:&quot;\s\sleft(${args[0]}\s\sright)^{+}&quot;},sqrtm:{1:&quot;{${args[0]}}&quot;.concat(Cp.pow,&quot;{\s\sfrac{1}{2}}&quot;)},trace:{1:&quot;\s\smathrm{tr}\s\sleft(${args[0]}\s\sright)&quot;},transpose:{1:&quot;\s\sleft(${args[0]}\s\sright)&quot;.concat(Cp.transpose)},combinations:{2:&quot;\s\sbinom{${args[0]}}{${args[1]}}&quot;},combinationsWithRep:{2:&quot;\s\sleft(\s\s!\s\s!{\s\sbinom{${args[0]}}{${args[1]}}}\s\s!\s\s!\s\sright)&quot;},factorial:{1:&quot;\s\sleft(${args[0]}\s\sright)&quot;.concat(Cp.factorial)},gamma:{1:&quot;\s\sGamma\s\sleft(${args[0]}\s\sright)&quot;},lgamma:{1:&quot;\s\sln\s\sGamma\s\sleft(${args[0]}\s\sright)&quot;},equal:{2:&quot;\s\sleft(${args[0]}&quot;.concat(Cp.equal,&quot;${args[1]}\s\sright)&quot;)},larger:{2:&quot;\s\sleft(${args[0]}&quot;.concat(Cp.larger,&quot;${args[1]}\s\sright)&quot;)},largerEq:{2:&quot;\s\sleft(${args[0]}&quot;.concat(Cp.largerEq,&quot;${args[1]}\s\sright)&quot;)},smaller:{2:&quot;\s\sleft(${args[0]}&quot;.concat(Cp.smaller,&quot;${args[1]}\s\sright)&quot;)},smallerEq:{2:&quot;\s\sleft(${args[0]}&quot;.concat(Cp.smallerEq,&quot;${args[1]}\s\sright)&quot;)},unequal:{2:&quot;\s\sleft(${args[0]}&quot;.concat(Cp.unequal,&quot;${args[1]}\s\sright)&quot;)},erf:{1:&quot;erf\s\sleft(${args[0]}\s\sright)&quot;},max:&quot;\s\smax\s\sleft(${args}\s\sright)&quot;,min:&quot;\s\smin\s\sleft(${args}\s\sright)&quot;,variance:&quot;\s\smathrm{Var}\s\sleft(${args}\s\sright)&quot;,acos:{1:&quot;\s\scos^{-1}\s\sleft(${args[0]}\s\sright)&quot;},acosh:{1:&quot;\s\scosh^{-1}\s\sleft(${args[0]}\s\sright)&quot;},acot:{1:&quot;\s\scot^{-1}\s\sleft(${args[0]}\s\sright)&quot;},acoth:{1:&quot;\s\scoth^{-1}\s\sleft(${args[0]}\s\sright)&quot;},acsc:{1:&quot;\s\scsc^{-1}\s\sleft(${args[0]}\s\sright)&quot;},acsch:{1:&quot;\s\smathrm{csch}^{-1}\s\sleft(${args[0]}\s\sright)&quot;},asec:{1:&quot;\s\ssec^{-1}\s\sleft(${args[0]}\s\sright)&quot;},asech:{1:&quot;\s\smathrm{sech}^{-1}\s\sleft(${args[0]}\s\sright)&quot;},asin:{1:&quot;\s\ssin^{-1}\s\sleft(${args[0]}\s\sright)&quot;},asinh:{1:&quot;\s\ssinh^{-1}\s\sleft(${args[0]}\s\sright)&quot;},atan:{1:&quot;\s\stan^{-1}\s\sleft(${args[0]}\s\sright)&quot;},atan2:{2:&quot;\s\smathrm{atan2}\s\sleft(${args}\s\sright)&quot;},atanh:{1:&quot;\s\stanh^{-1}\s\sleft(${args[0]}\s\sright)&quot;},cos:{1:&quot;\s\scos\s\sleft(${args[0]}\s\sright)&quot;},cosh:{1:&quot;\s\scosh\s\sleft(${args[0]}\s\sright)&quot;},cot:{1:&quot;\s\scot\s\sleft(${args[0]}\s\sright)&quot;},coth:{1:&quot;\s\scoth\s\sleft(${args[0]}\s\sright)&quot;},csc:{1:&quot;\s\scsc\s\sleft(${args[0]}\s\sright)&quot;},csch:{1:&quot;\s\smathrm{csch}\s\sleft(${args[0]}\s\sright)&quot;},sec:{1:&quot;\s\ssec\s\sleft(${args[0]}\s\sright)&quot;},sech:{1:&quot;\s\smathrm{sech}\s\sleft(${args[0]}\s\sright)&quot;},sin:{1:&quot;\s\ssin\s\sleft(${args[0]}\s\sright)&quot;},sinh:{1:&quot;\s\ssinh\s\sleft(${args[0]}\s\sright)&quot;},tan:{1:&quot;\s\stan\s\sleft(${args[0]}\s\sright)&quot;},tanh:{1:&quot;\s\stanh\s\sleft(${args[0]}\s\sright)&quot;},to:{2:&quot;\s\sleft(${args[0]}&quot;.concat(Cp.to,&quot;${args[1]}\s\sright)&quot;)},numeric:function(e,t){return e.args[0].toTex()},number:{0:&quot;0&quot;,1:&quot;\s\sleft(${args[0]}\s\sright)&quot;,2:&quot;\s\sleft(\s\sleft(${args[0]}\s\sright)${args[1]}\s\sright)&quot;},string:{0:'\s\smathtt{&quot;&quot;}',1:&quot;\s\smathrm{string}\s\sleft(${args[0]}\s\sright)&quot;},bignumber:{0:&quot;0&quot;,1:&quot;\s\sleft(${args[0]}\s\sright)&quot;},complex:{0:&quot;0&quot;,1:&quot;\s\sleft(${args[0]}\s\sright)&quot;,2:&quot;\s\sleft(\s\sleft(${args[0]}\s\sright)+&quot;.concat(Sp.i,&quot;\s\scdot\s\sleft(${args[1]}\s\sright)\s\sright)&quot;)},matrix:{0:&quot;\s\sbegin{bmatrix}\s\send{bmatrix}&quot;,1:&quot;\s\sleft(${args[0]}\s\sright)&quot;,2:&quot;\s\sleft(${args[0]}\s\sright)&quot;},sparse:{0:&quot;\s\sbegin{bsparse}\s\send{bsparse}&quot;,1:&quot;\s\sleft(${args[0]}\s\sright)&quot;},unit:{1:&quot;\s\sleft(${args[0]}\s\sright)&quot;,2:&quot;\s\sleft(\s\sleft(${args[0]}\s\sright)${args[1]}\s\sright)&quot;}},Fp={deg:&quot;^\s\scirc&quot;};function Op(e){return Ap(e,{preserveFormatting:!0})}function Tp(e,t){return(t=void 0!==t&amp;&amp;t)?Ne(Fp,e)?Fp[e]:&quot;\s\smathrm{&quot;+Op(e)+&quot;}&quot;:Ne(Sp,e)?Sp[e]:Op(e)}var Bp=&quot;ConstantNode&quot;,_p=Ee(Bp,[&quot;Node&quot;],(function(e){var t=function(e){ip(i,e);var t,r,n=(t=i,r=function(){if(&quot;undefined&quot;==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(&quot;function&quot;==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=op(t);if(r){var i=op(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return ap(this,e)});function i(e){var t;return Ce(this,i),(t=n.call(this)).value=e,t}return Oe(i,[{key:&quot;type&quot;,get:function(){return Bp}},{key:&quot;isConstantNode&quot;,get:function(){return!0}},{key:&quot;_compile&quot;,value:function(e,t){var r=this.value;return function(){return r}}},{key:&quot;forEach&quot;,value:function(e){}},{key:&quot;map&quot;,value:function(e){return this.clone()}},{key:&quot;clone&quot;,value:function(){return new i(this.value)}},{key:&quot;_toString&quot;,value:function(e){return Vr(this.value,e)}},{key:&quot;toHTML&quot;,value:function(e){var t=this._toString(e);switch(H(this.value)){case&quot;number&quot;:case&quot;BigNumber&quot;:case&quot;Fraction&quot;:return'&lt;span class=&quot;math-number&quot;&gt;'+t+&quot;&lt;/span&gt;&quot;;case&quot;string&quot;:return'&lt;span class=&quot;math-string&quot;&gt;'+t+&quot;&lt;/span&gt;&quot;;case&quot;boolean&quot;:return'&lt;span class=&quot;math-boolean&quot;&gt;'+t+&quot;&lt;/span&gt;&quot;;case&quot;null&quot;:return'&lt;span class=&quot;math-null-symbol&quot;&gt;'+t+&quot;&lt;/span&gt;&quot;;case&quot;undefined&quot;:return'&lt;span class=&quot;math-undefined&quot;&gt;'+t+&quot;&lt;/span&gt;&quot;;default:return'&lt;span class=&quot;math-symbol&quot;&gt;'+t+&quot;&lt;/span&gt;&quot;}}},{key:&quot;toJSON&quot;,value:function(){return{mathjs:Bp,value:this.value}}},{key:&quot;_toTex&quot;,value:function(e){var t=this._toString(e);switch(H(this.value)){case&quot;string&quot;:return&quot;\s\smathtt{&quot;+Op(t)+&quot;}&quot;;case&quot;number&quot;:case&quot;BigNumber&quot;:if(!isFinite(this.value))return this.value.valueOf()&lt;0?&quot;-\s\sinfty&quot;:&quot;\s\sinfty&quot;;var r=t.toLowerCase().indexOf(&quot;e&quot;);return-1!==r?t.substring(0,r)+&quot;\s\scdot10^{&quot;+t.substring(r+1)+&quot;}&quot;:t;case&quot;Fraction&quot;:return this.value.toLatex();default:return t}}}],[{key:&quot;fromJSON&quot;,value:function(e){return new i(e.value)}}]),i}(e.Node);return Ba(t,&quot;name&quot;,Bp),t}),{isClass:!0,isNode:!0});function kp(e,t){(null==t||t&gt;e.length)&amp;&amp;(t=e.length);for(var r=0,n=new Array(t);r&lt;t;r++)n[r]=e[r];return n}var Ip=&quot;FunctionAssignmentNode&quot;,Rp=Ee(Ip,[&quot;typed&quot;,&quot;Node&quot;],(function(e){var t=e.typed;function r(e,t,r){var n=vp(e,t,r),i=vp(e.expr,t,r);return&quot;all&quot;===t||null!==i&amp;&amp;i&lt;=n}var n=function(e){ip(o,e);var n,i,a=(n=o,i=function(){if(&quot;undefined&quot;==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(&quot;function&quot;==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=op(n);if(i){var r=op(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ap(this,e)});function o(e,t,r){var n;if(Ce(this,o),n=a.call(this),&quot;string&quot;!=typeof e)throw new TypeError('String expected for parameter &quot;name&quot;');if(!Array.isArray(t))throw new TypeError('Array containing strings or objects expected for parameter &quot;params&quot;');if(!R(r))throw new TypeError('Node expected for parameter &quot;expr&quot;');if(tp.has(e))throw new Error('Illegal function name, &quot;'+e+'&quot; is a reserved keyword');var i,u=new Set,s=function(e,t){var r=&quot;undefined&quot;!=typeof Symbol&amp;&amp;e[Symbol.iterator]||e[&quot;@@iterator&quot;];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if(&quot;string&quot;==typeof e)return kp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return&quot;Object&quot;===r&amp;&amp;e.constructor&amp;&amp;(r=e.constructor.name),&quot;Map&quot;===r||&quot;Set&quot;===r?Array.from(e):&quot;Arguments&quot;===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?kp(e,t):void 0}}(e))||t&amp;&amp;e&amp;&amp;&quot;number&quot;==typeof e.length){r&amp;&amp;(e=r);var n=0,i=function(){};return{s:i,n:function(){return n&gt;=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError(&quot;Invalid attempt to iterate non-iterable instance.\snIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.&quot;)}var a,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw a}}}}(t);try{for(s.s();!(i=s.n()).done;){var c=i.value,f=&quot;string&quot;==typeof c?c:c.name;if(u.has(f))throw new Error('Duplicate parameter name &quot;'.concat(f,'&quot;'));u.add(f)}}catch(e){s.e(e)}finally{s.f()}return n.name=e,n.params=t.map((function(e){return e&amp;&amp;e.name||e})),n.types=t.map((function(e){return e&amp;&amp;e.type||&quot;any&quot;})),n.expr=r,n}return Oe(o,[{key:&quot;type&quot;,get:function(){return Ip}},{key:&quot;isFunctionAssignmentNode&quot;,get:function(){return!0}},{key:&quot;_compile&quot;,value:function(e,r){var n=Object.create(r);dn(this.params,(function(e){n[e]=!0}));var i=this.expr._compile(e,n),a=this.name,o=this.params,u=gn(this.types,&quot;,&quot;),s=a+&quot;(&quot;+gn(this.params,&quot;, &quot;)+&quot;)&quot;;return function(e,r,n){var c={};c[u]=function(){for(var t=Object.create(r),a=0;a&lt;o.length;a++)t[o[a]]=arguments[a];return i(e,t,n)};var f=t(a,c);return f.syntax=s,e.set(a,f),f}}},{key:&quot;forEach&quot;,value:function(e){e(this.expr,&quot;expr&quot;,this)}},{key:&quot;map&quot;,value:function(e){var t=this._ifNode(e(this.expr,&quot;expr&quot;,this));return new o(this.name,this.params.slice(0),t)}},{key:&quot;clone&quot;,value:function(){return new o(this.name,this.params.slice(0),this.expr)}},{key:&quot;_toString&quot;,value:function(e){var t=e&amp;&amp;e.parenthesis?e.parenthesis:&quot;keep&quot;,n=this.expr.toString(e);return r(this,t,e&amp;&amp;e.implicit)&amp;&amp;(n=&quot;(&quot;+n+&quot;)&quot;),this.name+&quot;(&quot;+this.params.join(&quot;, &quot;)+&quot;) = &quot;+n}},{key:&quot;toJSON&quot;,value:function(){var e=this.types;return{mathjs:Ip,name:this.name,params:this.params.map((function(t,r){return{name:t,type:e[r]}})),expr:this.expr}}},{key:&quot;toHTML&quot;,value:function(e){for(var t=e&amp;&amp;e.parenthesis?e.parenthesis:&quot;keep&quot;,n=[],i=0;i&lt;this.params.length;i++)n.push('&lt;span class=&quot;math-symbol math-parameter&quot;&gt;'+Wr(this.params[i])+&quot;&lt;/span&gt;&quot;);var a=this.expr.toHTML(e);return r(this,t,e&amp;&amp;e.implicit)&amp;&amp;(a='&lt;span class=&quot;math-parenthesis math-round-parenthesis&quot;&gt;(&lt;/span&gt;'+a+'&lt;span class=&quot;math-parenthesis math-round-parenthesis&quot;&gt;)&lt;/span&gt;'),'&lt;span class=&quot;math-function&quot;&gt;'+Wr(this.name)+'&lt;/span&gt;&lt;span class=&quot;math-parenthesis math-round-parenthesis&quot;&gt;(&lt;/span&gt;'+n.join('&lt;span class=&quot;math-separator&quot;&gt;,&lt;/span&gt;')+'&lt;span class=&quot;math-parenthesis math-round-parenthesis&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator&quot;&gt;=&lt;/span&gt;'+a}},{key:&quot;_toTex&quot;,value:function(e){var t=e&amp;&amp;e.parenthesis?e.parenthesis:&quot;keep&quot;,n=this.expr.toTex(e);return r(this,t,e&amp;&amp;e.implicit)&amp;&amp;(n=&quot;\s\sleft(&quot;.concat(n,&quot;\s\sright)&quot;)),&quot;\s\smathrm{&quot;+this.name+&quot;}\s\sleft(&quot;+this.params.map(Tp).join(&quot;,&quot;)+&quot;\s\sright):=&quot;+n}}],[{key:&quot;fromJSON&quot;,value:function(e){return new o(e.name,e.params,e.expr)}}]),o}(e.Node);return Ba(n,&quot;name&quot;,Ip),n}),{isClass:!0,isNode:!0});var zp=&quot;IndexNode&quot;,qp=Ee(zp,[&quot;Node&quot;,&quot;size&quot;],(function(e){var t=e.Node,r=e.size,n=function(e){ip(a,e);var t,n,i=(t=a,n=function(){if(&quot;undefined&quot;==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(&quot;function&quot;==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=op(t);if(n){var i=op(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return ap(this,e)});function a(e,t){var r;if(Ce(this,a),(r=i.call(this)).dimensions=e,r.dotNotation=t||!1,!Array.isArray(e)||!e.every(R))throw new TypeError('Array containing Nodes expected for parameter &quot;dimensions&quot;');if(r.dotNotation&amp;&amp;!r.isObjectProperty())throw new Error(&quot;dotNotation only applicable for object properties&quot;);return r}return Oe(a,[{key:&quot;type&quot;,get:function(){return zp}},{key:&quot;isIndexNode&quot;,get:function(){return!0}},{key:&quot;_compile&quot;,value:function(e,t){var n=hn(this.dimensions,(function(n,i){if(n.filter((function(e){return e.isSymbolNode&amp;&amp;&quot;end&quot;===e.name})).length&gt;0){var a=Object.create(t);a.end=!0;var o=n._compile(e,a);return function(e,t,n){if(!l(n)&amp;&amp;!f(n)&amp;&amp;!c(n))throw new TypeError('Cannot resolve &quot;end&quot;: context must be a Matrix, Array, or string but is '+H(n));var a=r(n).valueOf(),u=Object.create(t);return u.end=a[i],o(e,u,n)}}return n._compile(e,t)})),i=Te(e,&quot;index&quot;);return function(e,t,r){var a=hn(n,(function(n){return n(e,t,r)}));return i.apply(void 0,_a(a))}}},{key:&quot;forEach&quot;,value:function(e){for(var t=0;t&lt;this.dimensions.length;t++)e(this.dimensions[t],&quot;dimensions[&quot;+t+&quot;]&quot;,this)}},{key:&quot;map&quot;,value:function(e){for(var t=[],r=0;r&lt;this.dimensions.length;r++)t[r]=this._ifNode(e(this.dimensions[r],&quot;dimensions[&quot;+r+&quot;]&quot;,this));return new a(t,this.dotNotation)}},{key:&quot;clone&quot;,value:function(){return new a(this.dimensions.slice(0),this.dotNotation)}},{key:&quot;isObjectProperty&quot;,value:function(){return 1===this.dimensions.length&amp;&amp;T(this.dimensions[0])&amp;&amp;&quot;string&quot;==typeof this.dimensions[0].value}},{key:&quot;getObjectProperty&quot;,value:function(){return this.isObjectProperty()?this.dimensions[0].value:null}},{key:&quot;_toString&quot;,value:function(e){return this.dotNotation?&quot;.&quot;+this.getObjectProperty():&quot;[&quot;+this.dimensions.join(&quot;, &quot;)+&quot;]&quot;}},{key:&quot;toJSON&quot;,value:function(){return{mathjs:zp,dimensions:this.dimensions,dotNotation:this.dotNotation}}},{key:&quot;toHTML&quot;,value:function(e){for(var t=[],r=0;r&lt;this.dimensions.length;r++)t[r]=this.dimensions[r].toHTML();return this.dotNotation?'&lt;span class=&quot;math-operator math-accessor-operator&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;math-symbol math-property&quot;&gt;'+Wr(this.getObjectProperty())+&quot;&lt;/span&gt;&quot;:'&lt;span class=&quot;math-parenthesis math-square-parenthesis&quot;&gt;[&lt;/span&gt;'+t.join('&lt;span class=&quot;math-separator&quot;&gt;,&lt;/span&gt;')+'&lt;span class=&quot;math-parenthesis math-square-parenthesis&quot;&gt;]&lt;/span&gt;'}},{key:&quot;_toTex&quot;,value:function(e){var t=this.dimensions.map((function(t){return t.toTex(e)}));return this.dotNotation?&quot;.&quot;+this.getObjectProperty():&quot;_{&quot;+t.join(&quot;,&quot;)+&quot;}&quot;}}],[{key:&quot;fromJSON&quot;,value:function(e){return new a(e.dimensions,e.dotNotation)}}]),a}(t);return Ba(n,&quot;name&quot;,zp),n}),{isClass:!0,isNode:!0});var jp=&quot;ObjectNode&quot;,Pp=Ee(jp,[&quot;Node&quot;],(function(e){var r=function(e){ip(a,e);var r,n,i=(r=a,n=function(){if(&quot;undefined&quot;==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(&quot;function&quot;==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=op(r);if(n){var i=op(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return ap(this,e)});function a(e){var r;if(Ce(this,a),(r=i.call(this)).properties=e||{},e&amp;&amp;(&quot;object&quot;!==t(e)||!Object.keys(e).every((function(t){return R(e[t])}))))throw new TypeError(&quot;Object containing Nodes expected&quot;);return r}return Oe(a,[{key:&quot;type&quot;,get:function(){return jp}},{key:&quot;isObjectNode&quot;,get:function(){return!0}},{key:&quot;_compile&quot;,value:function(e,t){var r={};for(var n in this.properties)if(Ne(this.properties,n)){var i=Zr(n),a=JSON.parse(i),o=Te(this.properties,n);r[a]=o._compile(e,t)}return function(e,t,n){var i={};for(var a in r)Ne(r,a)&amp;&amp;(i[a]=r[a](e,t,n));return i}}},{key:&quot;forEach&quot;,value:function(e){for(var t in this.properties)Ne(this.properties,t)&amp;&amp;e(this.properties[t],&quot;properties[&quot;+Zr(t)+&quot;]&quot;,this)}},{key:&quot;map&quot;,value:function(e){var t={};for(var r in this.properties)Ne(this.properties,r)&amp;&amp;(t[r]=this._ifNode(e(this.properties[r],&quot;properties[&quot;+Zr(r)+&quot;]&quot;,this)));return new a(t)}},{key:&quot;clone&quot;,value:function(){var e={};for(var t in this.properties)Ne(this.properties,t)&amp;&amp;(e[t]=this.properties[t]);return new a(e)}},{key:&quot;_toString&quot;,value:function(e){var t=[];for(var r in this.properties)Ne(this.properties,r)&amp;&amp;t.push(Zr(r)+&quot;: &quot;+this.properties[r].toString(e));return&quot;{&quot;+t.join(&quot;, &quot;)+&quot;}&quot;}},{key:&quot;toJSON&quot;,value:function(){return{mathjs:jp,properties:this.properties}}},{key:&quot;toHTML&quot;,value:function(e){var t=[];for(var r in this.properties)Ne(this.properties,r)&amp;&amp;t.push('&lt;span class=&quot;math-symbol math-property&quot;&gt;'+Wr(r)+'&lt;/span&gt;&lt;span class=&quot;math-operator math-assignment-operator math-property-assignment-operator math-binary-operator&quot;&gt;:&lt;/span&gt;'+this.properties[r].toHTML(e));return'&lt;span class=&quot;math-parenthesis math-curly-parenthesis&quot;&gt;{&lt;/span&gt;'+t.join('&lt;span class=&quot;math-separator&quot;&gt;,&lt;/span&gt;')+'&lt;span class=&quot;math-parenthesis math-curly-parenthesis&quot;&gt;}&lt;/span&gt;'}},{key:&quot;_toTex&quot;,value:function(e){var t=[];for(var r in this.properties)Ne(this.properties,r)&amp;&amp;t.push(&quot;\s\smathbf{&quot;+r+&quot;:} &amp; &quot;+this.properties[r].toTex(e)+&quot;\s\s\s\s&quot;);return&quot;\s\sleft\s\s{\s\sbegin{array}{ll}&quot;+t.join(&quot;\sn&quot;)+&quot;\s\send{array}\s\sright\s\s}&quot;}}],[{key:&quot;fromJSON&quot;,value:function(e){return new a(e.properties)}}]),a}(e.Node);return Ba(r,&quot;name&quot;,jp),r}),{isClass:!0,isNode:!0});var Lp=&quot;OperatorNode&quot;,Up=Ee(Lp,[&quot;Node&quot;],(function(e){function t(e,r){var n=e;if(&quot;auto&quot;===r)for(;j(n);)n=n.content;return!!T(n)||!!q(n)&amp;&amp;t(n.args[0],r)}function r(e,r,n,i,a){var o,u=vp(e,r,n),s=yp(e,r);if(&quot;all&quot;===r||i.length&gt;2&amp;&amp;&quot;OperatorNode:add&quot;!==e.getIdentifier()&amp;&amp;&quot;OperatorNode:multiply&quot;!==e.getIdentifier())return i.map((function(e){switch(e.getContent().type){case&quot;ArrayNode&quot;:case&quot;ConstantNode&quot;:case&quot;SymbolNode&quot;:case&quot;ParenthesisNode&quot;:return!1;default:return!0}}));switch(i.length){case 0:o=[];break;case 1:var c=vp(i[0],r,n,e);if(a&amp;&amp;null!==c){var f,l;if(&quot;keep&quot;===r?(f=i[0].getIdentifier(),l=e.getIdentifier()):(f=i[0].getContent().getIdentifier(),l=e.getContent().getIdentifier()),!1===hp[u][l].latexLeftParens){o=[!1];break}if(!1===hp[c][f].latexParens){o=[!1];break}}if(null===c){o=[!1];break}if(c&lt;=u){o=[!0];break}o=[!1];break;case 2:var p,m,h=vp(i[0],r,n,e),d=gp(e,i[0],r);p=null!==h&amp;&amp;(h===u&amp;&amp;&quot;right&quot;===s&amp;&amp;!d||h&lt;u);var v,y,g,x=vp(i[1],r,n,e),b=gp(e,i[1],r);m=null!==x&amp;&amp;(x===u&amp;&amp;&quot;left&quot;===s&amp;&amp;!b||x&lt;u),a&amp;&amp;(&quot;keep&quot;===r?(v=e.getIdentifier(),y=e.args[0].getIdentifier(),g=e.args[1].getIdentifier()):(v=e.getContent().getIdentifier(),y=e.args[0].getContent().getIdentifier(),g=e.args[1].getContent().getIdentifier()),null!==h&amp;&amp;(!1===hp[u][v].latexLeftParens&amp;&amp;(p=!1),!1===hp[h][y].latexParens&amp;&amp;(p=!1)),null!==x&amp;&amp;(!1===hp[u][v].latexRightParens&amp;&amp;(m=!1),!1===hp[x][g].latexParens&amp;&amp;(m=!1))),o=[p,m];break;default:&quot;OperatorNode:add&quot;!==e.getIdentifier()&amp;&amp;&quot;OperatorNode:multiply&quot;!==e.getIdentifier()||(o=i.map((function(t){var i=vp(t,r,n,e),a=gp(e,t,r),o=yp(t,r);return null!==i&amp;&amp;(u===i&amp;&amp;s===o&amp;&amp;!a||i&lt;u)})))}if(i.length&gt;=2&amp;&amp;&quot;OperatorNode:multiply&quot;===e.getIdentifier()&amp;&amp;e.implicit&amp;&amp;&quot;all&quot;!==r&amp;&amp;&quot;hide&quot;===n)for(var w=1;w&lt;o.length;++w)!t(i[w],r)||o[w-1]||&quot;keep&quot;===r&amp;&amp;j(i[w-1])||(o[w]=!0);return o}var n=function(e){ip(a,e);var t,n,i=(t=a,n=function(){if(&quot;undefined&quot;==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(&quot;function&quot;==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=op(t);if(n){var i=op(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return ap(this,e)});function a(e,t,r,n,o){var u;if(Ce(this,a),u=i.call(this),&quot;string&quot;!=typeof e)throw new TypeError('string expected for parameter &quot;op&quot;');if(&quot;string&quot;!=typeof t)throw new TypeError('string expected for parameter &quot;fn&quot;');if(!Array.isArray(r)||!r.every(R))throw new TypeError('Array containing Nodes expected for parameter &quot;args&quot;');return u.implicit=!0===n,u.isPercentage=!0===o,u.op=e,u.fn=t,u.args=r||[],u}return Oe(a,[{key:&quot;type&quot;,get:function(){return Lp}},{key:&quot;isOperatorNode&quot;,get:function(){return!0}},{key:&quot;_compile&quot;,value:function(e,t){if(&quot;string&quot;!=typeof this.fn||!ke(e,this.fn))throw e[this.fn]?new Error('No access to function &quot;'+this.fn+'&quot;'):new Error(&quot;Function &quot;+this.fn+' missing in provided namespace &quot;math&quot;');var r=Te(e,this.fn),n=hn(this.args,(function(r){return r._compile(e,t)}));if(1===n.length){var i=n[0];return function(e,t,n){return r(i(e,t,n))}}if(2===n.length){var a=n[0],o=n[1];return function(e,t,n){return r(a(e,t,n),o(e,t,n))}}return function(e,t,i){return r.apply(null,hn(n,(function(r){return r(e,t,i)})))}}},{key:&quot;forEach&quot;,value:function(e){for(var t=0;t&lt;this.args.length;t++)e(this.args[t],&quot;args[&quot;+t+&quot;]&quot;,this)}},{key:&quot;map&quot;,value:function(e){for(var t=[],r=0;r&lt;this.args.length;r++)t[r]=this._ifNode(e(this.args[r],&quot;args[&quot;+r+&quot;]&quot;,this));return new a(this.op,this.fn,t,this.implicit,this.isPercentage)}},{key:&quot;clone&quot;,value:function(){return new a(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)}},{key:&quot;isUnary&quot;,value:function(){return 1===this.args.length}},{key:&quot;isBinary&quot;,value:function(){return 2===this.args.length}},{key:&quot;_toString&quot;,value:function(e){var t=e&amp;&amp;e.parenthesis?e.parenthesis:&quot;keep&quot;,n=e&amp;&amp;e.implicit?e.implicit:&quot;hide&quot;,i=this.args,a=r(this,t,n,i,!1);if(1===i.length){var o=yp(this,t),u=i[0].toString(e);a[0]&amp;&amp;(u=&quot;(&quot;+u+&quot;)&quot;);var s=/[a-zA-Z]+/.test(this.op);return&quot;right&quot;===o?this.op+(s?&quot; &quot;:&quot;&quot;)+u:&quot;left&quot;===o?u+(s?&quot; &quot;:&quot;&quot;)+this.op:u+this.op}if(2===i.length){var c=i[0].toString(e),f=i[1].toString(e);return a[0]&amp;&amp;(c=&quot;(&quot;+c+&quot;)&quot;),a[1]&amp;&amp;(f=&quot;(&quot;+f+&quot;)&quot;),this.implicit&amp;&amp;&quot;OperatorNode:multiply&quot;===this.getIdentifier()&amp;&amp;&quot;hide&quot;===n?c+&quot; &quot;+f:c+&quot; &quot;+this.op+&quot; &quot;+f}if(i.length&gt;2&amp;&amp;(&quot;OperatorNode:add&quot;===this.getIdentifier()||&quot;OperatorNode:multiply&quot;===this.getIdentifier())){var l=i.map((function(t,r){return t=t.toString(e),a[r]&amp;&amp;(t=&quot;(&quot;+t+&quot;)&quot;),t}));return this.implicit&amp;&amp;&quot;OperatorNode:multiply&quot;===this.getIdentifier()&amp;&amp;&quot;hide&quot;===n?l.join(&quot; &quot;):l.join(&quot; &quot;+this.op+&quot; &quot;)}return this.fn+&quot;(&quot;+this.args.join(&quot;, &quot;)+&quot;)&quot;}},{key:&quot;toJSON&quot;,value:function(){return{mathjs:Lp,op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}}},{key:&quot;toHTML&quot;,value:function(e){var t=e&amp;&amp;e.parenthesis?e.parenthesis:&quot;keep&quot;,n=e&amp;&amp;e.implicit?e.implicit:&quot;hide&quot;,i=this.args,a=r(this,t,n,i,!1);if(1===i.length){var o=yp(this,t),u=i[0].toHTML(e);return a[0]&amp;&amp;(u='&lt;span class=&quot;math-parenthesis math-round-parenthesis&quot;&gt;(&lt;/span&gt;'+u+'&lt;span class=&quot;math-parenthesis math-round-parenthesis&quot;&gt;)&lt;/span&gt;'),&quot;right&quot;===o?'&lt;span class=&quot;math-operator math-unary-operator math-lefthand-unary-operator&quot;&gt;'+Wr(this.op)+&quot;&lt;/span&gt;&quot;+u:u+'&lt;span class=&quot;math-operator math-unary-operator math-righthand-unary-operator&quot;&gt;'+Wr(this.op)+&quot;&lt;/span&gt;&quot;}if(2===i.length){var s=i[0].toHTML(e),c=i[1].toHTML(e);return a[0]&amp;&amp;(s='&lt;span class=&quot;math-parenthesis math-round-parenthesis&quot;&gt;(&lt;/span&gt;'+s+'&lt;span class=&quot;math-parenthesis math-round-parenthesis&quot;&gt;)&lt;/span&gt;'),a[1]&amp;&amp;(c='&lt;span class=&quot;math-parenthesis math-round-parenthesis&quot;&gt;(&lt;/span&gt;'+c+'&lt;span class=&quot;math-parenthesis math-round-parenthesis&quot;&gt;)&lt;/span&gt;'),this.implicit&amp;&amp;&quot;OperatorNode:multiply&quot;===this.getIdentifier()&amp;&amp;&quot;hide&quot;===n?s+'&lt;span class=&quot;math-operator math-binary-operator math-implicit-binary-operator&quot;&gt;&lt;/span&gt;'+c:s+'&lt;span class=&quot;math-operator math-binary-operator math-explicit-binary-operator&quot;&gt;'+Wr(this.op)+&quot;&lt;/span&gt;&quot;+c}var f=i.map((function(t,r){return t=t.toHTML(e),a[r]&amp;&amp;(t='&lt;span class=&quot;math-parenthesis math-round-parenthesis&quot;&gt;(&lt;/span&gt;'+t+'&lt;span class=&quot;math-parenthesis math-round-parenthesis&quot;&gt;)&lt;/span&gt;'),t}));return i.length&gt;2&amp;&amp;(&quot;OperatorNode:add&quot;===this.getIdentifier()||&quot;OperatorNode:multiply&quot;===this.getIdentifier())?this.implicit&amp;&amp;&quot;OperatorNode:multiply&quot;===this.getIdentifier()&amp;&amp;&quot;hide&quot;===n?f.join('&lt;span class=&quot;math-operator math-binary-operator math-implicit-binary-operator&quot;&gt;&lt;/span&gt;'):f.join('&lt;span class=&quot;math-operator math-binary-operator math-explicit-binary-operator&quot;&gt;'+Wr(this.op)+&quot;&lt;/span&gt;&quot;):'&lt;span class=&quot;math-function&quot;&gt;'+Wr(this.fn)+'&lt;/span&gt;&lt;span class=&quot;math-paranthesis math-round-parenthesis&quot;&gt;(&lt;/span&gt;'+f.join('&lt;span class=&quot;math-separator&quot;&gt;,&lt;/span&gt;')+'&lt;span class=&quot;math-paranthesis math-round-parenthesis&quot;&gt;)&lt;/span&gt;'}},{key:&quot;_toTex&quot;,value:function(e){var t=e&amp;&amp;e.parenthesis?e.parenthesis:&quot;keep&quot;,n=e&amp;&amp;e.implicit?e.implicit:&quot;hide&quot;,i=this.args,a=r(this,t,n,i,!0),o=Cp[this.fn];if(o=void 0===o?this.op:o,1===i.length){var u=yp(this,t),s=i[0].toTex(e);return a[0]&amp;&amp;(s=&quot;\s\sleft(&quot;.concat(s,&quot;\s\sright)&quot;)),&quot;right&quot;===u?o+s:s+o}if(2===i.length){var c=i[0],f=c.toTex(e);a[0]&amp;&amp;(f=&quot;\s\sleft(&quot;.concat(f,&quot;\s\sright)&quot;));var l,p=i[1].toTex(e);switch(a[1]&amp;&amp;(p=&quot;\s\sleft(&quot;.concat(p,&quot;\s\sright)&quot;)),l=&quot;keep&quot;===t?c.getIdentifier():c.getContent().getIdentifier(),this.getIdentifier()){case&quot;OperatorNode:divide&quot;:return o+&quot;{&quot;+f+&quot;}{&quot;+p+&quot;}&quot;;case&quot;OperatorNode:pow&quot;:switch(f=&quot;{&quot;+f+&quot;}&quot;,p=&quot;{&quot;+p+&quot;}&quot;,l){case&quot;ConditionalNode&quot;:case&quot;OperatorNode:divide&quot;:f=&quot;\s\sleft(&quot;.concat(f,&quot;\s\sright)&quot;)}break;case&quot;OperatorNode:multiply&quot;:if(this.implicit&amp;&amp;&quot;hide&quot;===n)return f+&quot;~&quot;+p}return f+o+p}if(i.length&gt;2&amp;&amp;(&quot;OperatorNode:add&quot;===this.getIdentifier()||&quot;OperatorNode:multiply&quot;===this.getIdentifier())){var m=i.map((function(t,r){return t=t.toTex(e),a[r]&amp;&amp;(t=&quot;\s\sleft(&quot;.concat(t,&quot;\s\sright)&quot;)),t}));return&quot;OperatorNode:multiply&quot;===this.getIdentifier()&amp;&amp;this.implicit&amp;&amp;&quot;hide&quot;===n?m.join(&quot;~&quot;):m.join(o)}return&quot;\s\smathrm{&quot;+this.fn+&quot;}\s\sleft(&quot;+i.map((function(t){return t.toTex(e)})).join(&quot;,&quot;)+&quot;\s\sright)&quot;}},{key:&quot;getIdentifier&quot;,value:function(){return this.type+&quot;:&quot;+this.fn}}],[{key:&quot;fromJSON&quot;,value:function(e){return new a(e.op,e.fn,e.args,e.implicit,e.isPercentage)}}]),a}(e.Node);return Ba(n,&quot;name&quot;,Lp),n}),{isClass:!0,isNode:!0});var $p=&quot;ParenthesisNode&quot;,Hp=Ee($p,[&quot;Node&quot;],(function(e){var t=function(e){ip(i,e);var t,r,n=(t=i,r=function(){if(&quot;undefined&quot;==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(&quot;function&quot;==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=op(t);if(r){var i=op(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return ap(this,e)});function i(e){var t;if(Ce(this,i),t=n.call(this),!R(e))throw new TypeError('Node expected for parameter &quot;content&quot;');return t.content=e,t}return Oe(i,[{key:&quot;type&quot;,get:function(){return $p}},{key:&quot;isParenthesisNode&quot;,get:function(){return!0}},{key:&quot;_compile&quot;,value:function(e,t){return this.content._compile(e,t)}},{key:&quot;getContent&quot;,value:function(){return this.content.getContent()}},{key:&quot;forEach&quot;,value:function(e){e(this.content,&quot;content&quot;,this)}},{key:&quot;map&quot;,value:function(e){return new i(e(this.content,&quot;content&quot;,this))}},{key:&quot;clone&quot;,value:function(){return new i(this.content)}},{key:&quot;_toString&quot;,value:function(e){return!e||e&amp;&amp;!e.parenthesis||e&amp;&amp;&quot;keep&quot;===e.parenthesis?&quot;(&quot;+this.content.toString(e)+&quot;)&quot;:this.content.toString(e)}},{key:&quot;toJSON&quot;,value:function(){return{mathjs:$p,content:this.content}}},{key:&quot;toHTML&quot;,value:function(e){return!e||e&amp;&amp;!e.parenthesis||e&amp;&amp;&quot;keep&quot;===e.parenthesis?'&lt;span class=&quot;math-parenthesis math-round-parenthesis&quot;&gt;(&lt;/span&gt;'+this.content.toHTML(e)+'&lt;span class=&quot;math-parenthesis math-round-parenthesis&quot;&gt;)&lt;/span&gt;':this.content.toHTML(e)}},{key:&quot;_toTex&quot;,value:function(e){return!e||e&amp;&amp;!e.parenthesis||e&amp;&amp;&quot;keep&quot;===e.parenthesis?&quot;\s\sleft(&quot;.concat(this.content.toTex(e),&quot;\s\sright)&quot;):this.content.toTex(e)}}],[{key:&quot;fromJSON&quot;,value:function(e){return new i(e.content)}}]),i}(e.Node);return Ba(t,&quot;name&quot;,$p),t}),{isClass:!0,isNode:!0});var Gp=&quot;RangeNode&quot;,Vp=Ee(Gp,[&quot;Node&quot;],(function(e){function t(e,t,r){var n=vp(e,t,r),i={},a=vp(e.start,t,r);if(i.start=null!==a&amp;&amp;a&lt;=n||&quot;all&quot;===t,e.step){var o=vp(e.step,t,r);i.step=null!==o&amp;&amp;o&lt;=n||&quot;all&quot;===t}var u=vp(e.end,t,r);return i.end=null!==u&amp;&amp;u&lt;=n||&quot;all&quot;===t,i}var r=function(e){ip(a,e);var r,n,i=(r=a,n=function(){if(&quot;undefined&quot;==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(&quot;function&quot;==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=op(r);if(n){var i=op(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return ap(this,e)});function a(e,t,r){var n;if(Ce(this,a),n=i.call(this),!R(e))throw new TypeError(&quot;Node expected&quot;);if(!R(t))throw new TypeError(&quot;Node expected&quot;);if(r&amp;&amp;!R(r))throw new TypeError(&quot;Node expected&quot;);if(arguments.length&gt;3)throw new Error(&quot;Too many arguments&quot;);return n.start=e,n.end=t,n.step=r||null,n}return Oe(a,[{key:&quot;type&quot;,get:function(){return Gp}},{key:&quot;isRangeNode&quot;,get:function(){return!0}},{key:&quot;needsEnd&quot;,value:function(){return this.filter((function(e){return U(e)&amp;&amp;&quot;end&quot;===e.name})).length&gt;0}},{key:&quot;_compile&quot;,value:function(e,t){var r=e.range,n=this.start._compile(e,t),i=this.end._compile(e,t);if(this.step){var a=this.step._compile(e,t);return function(e,t,o){return r(n(e,t,o),i(e,t,o),a(e,t,o))}}return function(e,t,a){return r(n(e,t,a),i(e,t,a))}}},{key:&quot;forEach&quot;,value:function(e){e(this.start,&quot;start&quot;,this),e(this.end,&quot;end&quot;,this),this.step&amp;&amp;e(this.step,&quot;step&quot;,this)}},{key:&quot;map&quot;,value:function(e){return new a(this._ifNode(e(this.start,&quot;start&quot;,this)),this._ifNode(e(this.end,&quot;end&quot;,this)),this.step&amp;&amp;this._ifNode(e(this.step,&quot;step&quot;,this)))}},{key:&quot;clone&quot;,value:function(){return new a(this.start,this.end,this.step&amp;&amp;this.step)}},{key:&quot;_toString&quot;,value:function(e){var r,n=t(this,e&amp;&amp;e.parenthesis?e.parenthesis:&quot;keep&quot;,e&amp;&amp;e.implicit),i=this.start.toString(e);if(n.start&amp;&amp;(i=&quot;(&quot;+i+&quot;)&quot;),r=i,this.step){var a=this.step.toString(e);n.step&amp;&amp;(a=&quot;(&quot;+a+&quot;)&quot;),r+=&quot;:&quot;+a}var o=this.end.toString(e);return n.end&amp;&amp;(o=&quot;(&quot;+o+&quot;)&quot;),r+&quot;:&quot;+o}},{key:&quot;toJSON&quot;,value:function(){return{mathjs:Gp,start:this.start,end:this.end,step:this.step}}},{key:&quot;toHTML&quot;,value:function(e){var r,n=t(this,e&amp;&amp;e.parenthesis?e.parenthesis:&quot;keep&quot;,e&amp;&amp;e.implicit),i=this.start.toHTML(e);if(n.start&amp;&amp;(i='&lt;span class=&quot;math-parenthesis math-round-parenthesis&quot;&gt;(&lt;/span&gt;'+i+'&lt;span class=&quot;math-parenthesis math-round-parenthesis&quot;&gt;)&lt;/span&gt;'),r=i,this.step){var a=this.step.toHTML(e);n.step&amp;&amp;(a='&lt;span class=&quot;math-parenthesis math-round-parenthesis&quot;&gt;(&lt;/span&gt;'+a+'&lt;span class=&quot;math-parenthesis math-round-parenthesis&quot;&gt;)&lt;/span&gt;'),r+='&lt;span class=&quot;math-operator math-range-operator&quot;&gt;:&lt;/span&gt;'+a}var o=this.end.toHTML(e);return n.end&amp;&amp;(o='&lt;span class=&quot;math-parenthesis math-round-parenthesis&quot;&gt;(&lt;/span&gt;'+o+'&lt;span class=&quot;math-parenthesis math-round-parenthesis&quot;&gt;)&lt;/span&gt;'),r+'&lt;span class=&quot;math-operator math-range-operator&quot;&gt;:&lt;/span&gt;'+o}},{key:&quot;_toTex&quot;,value:function(e){var r=t(this,e&amp;&amp;e.parenthesis?e.parenthesis:&quot;keep&quot;,e&amp;&amp;e.implicit),n=this.start.toTex(e);if(r.start&amp;&amp;(n=&quot;\s\sleft(&quot;.concat(n,&quot;\s\sright)&quot;)),this.step){var i=this.step.toTex(e);r.step&amp;&amp;(i=&quot;\s\sleft(&quot;.concat(i,&quot;\s\sright)&quot;)),n+=&quot;:&quot;+i}var a=this.end.toTex(e);return r.end&amp;&amp;(a=&quot;\s\sleft(&quot;.concat(a,&quot;\s\sright)&quot;)),n+&quot;:&quot;+a}}],[{key:&quot;fromJSON&quot;,value:function(e){return new a(e.start,e.end,e.step)}}]),a}(e.Node);return Ba(r,&quot;name&quot;,Gp),r}),{isClass:!0,isNode:!0});var Zp=&quot;RelationalNode&quot;,Wp=Ee(Zp,[&quot;Node&quot;],(function(e){var t=e.Node,r={equal:&quot;==&quot;,unequal:&quot;!=&quot;,smaller:&quot;&lt;&quot;,larger:&quot;&gt;&quot;,smallerEq:&quot;&lt;=&quot;,largerEq:&quot;&gt;=&quot;},n=function(e){ip(a,e);var t,n,i=(t=a,n=function(){if(&quot;undefined&quot;==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(&quot;function&quot;==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=op(t);if(n){var i=op(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return ap(this,e)});function a(e,t){var r;if(Ce(this,a),r=i.call(this),!Array.isArray(e))throw new TypeError(&quot;Parameter conditionals must be an array&quot;);if(!Array.isArray(t))throw new TypeError(&quot;Parameter params must be an array&quot;);if(e.length!==t.length-1)throw new TypeError(&quot;Parameter params must contain exactly one more element than parameter conditionals&quot;);return r.conditionals=e,r.params=t,r}return Oe(a,[{key:&quot;type&quot;,get:function(){return Zp}},{key:&quot;isRelationalNode&quot;,get:function(){return!0}},{key:&quot;_compile&quot;,value:function(e,t){var r=this,n=this.params.map((function(r){return r._compile(e,t)}));return function(t,i,a){for(var o,u=n[0](t,i,a),s=0;s&lt;r.conditionals.length;s++)if(o=u,u=n[s+1](t,i,a),!Te(e,r.conditionals[s])(o,u))return!1;return!0}}},{key:&quot;forEach&quot;,value:function(e){var t=this;this.params.forEach((function(r,n){return e(r,&quot;params[&quot;+n+&quot;]&quot;,t)}),this)}},{key:&quot;map&quot;,value:function(e){var t=this;return new a(this.conditionals.slice(),this.params.map((function(r,n){return t._ifNode(e(r,&quot;params[&quot;+n+&quot;]&quot;,t))}),this))}},{key:&quot;clone&quot;,value:function(){return new a(this.conditionals,this.params)}},{key:&quot;_toString&quot;,value:function(e){for(var t=e&amp;&amp;e.parenthesis?e.parenthesis:&quot;keep&quot;,n=vp(this,t,e&amp;&amp;e.implicit),i=this.params.map((function(r,i){var a=vp(r,t,e&amp;&amp;e.implicit);return&quot;all&quot;===t||null!==a&amp;&amp;a&lt;=n?&quot;(&quot;+r.toString(e)+&quot;)&quot;:r.toString(e)})),a=i[0],o=0;o&lt;this.conditionals.length;o++)a+=&quot; &quot;+r[this.conditionals[o]],a+=&quot; &quot;+i[o+1];return a}},{key:&quot;toJSON&quot;,value:function(){return{mathjs:Zp,conditionals:this.conditionals,params:this.params}}},{key:&quot;toHTML&quot;,value:function(e){for(var t=e&amp;&amp;e.parenthesis?e.parenthesis:&quot;keep&quot;,n=vp(this,t,e&amp;&amp;e.implicit),i=this.params.map((function(r,i){var a=vp(r,t,e&amp;&amp;e.implicit);return&quot;all&quot;===t||null!==a&amp;&amp;a&lt;=n?'&lt;span class=&quot;math-parenthesis math-round-parenthesis&quot;&gt;(&lt;/span&gt;'+r.toHTML(e)+'&lt;span class=&quot;math-parenthesis math-round-parenthesis&quot;&gt;)&lt;/span&gt;':r.toHTML(e)})),a=i[0],o=0;o&lt;this.conditionals.length;o++)a+='&lt;span class=&quot;math-operator math-binary-operator math-explicit-binary-operator&quot;&gt;'+Wr(r[this.conditionals[o]])+&quot;&lt;/span&gt;&quot;+i[o+1];return a}},{key:&quot;_toTex&quot;,value:function(e){for(var t=e&amp;&amp;e.parenthesis?e.parenthesis:&quot;keep&quot;,r=vp(this,t,e&amp;&amp;e.implicit),n=this.params.map((function(n,i){var a=vp(n,t,e&amp;&amp;e.implicit);return&quot;all&quot;===t||null!==a&amp;&amp;a&lt;=r?&quot;\s\sleft(&quot;+n.toTex(e)+&quot;\sright)&quot;:n.toTex(e)})),i=n[0],a=0;a&lt;this.conditionals.length;a++)i+=Cp[this.conditionals[a]]+n[a+1];return i}}],[{key:&quot;fromJSON&quot;,value:function(e){return new a(e.conditionals,e.params)}}]),a}(t);return Ba(n,&quot;name&quot;,Zp),n}),{isClass:!0,isNode:!0});var Yp=Ee(&quot;SymbolNode&quot;,[&quot;math&quot;,&quot;?Unit&quot;,&quot;Node&quot;],(function(e){var t=e.math,r=e.Unit;function n(e){return!!r&amp;&amp;r.isValuelessUnit(e)}var i=function(e){ip(u,e);var i,a,o=(i=u,a=function(){if(&quot;undefined&quot;==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(&quot;function&quot;==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=op(i);if(a){var r=op(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ap(this,e)});function u(e){var t;if(Ce(this,u),t=o.call(this),&quot;string&quot;!=typeof e)throw new TypeError('String expected for parameter &quot;name&quot;');return t.name=e,t}return Oe(u,[{key:&quot;type&quot;,get:function(){return&quot;SymbolNode&quot;}},{key:&quot;isSymbolNode&quot;,get:function(){return!0}},{key:&quot;_compile&quot;,value:function(e,t){var i=this.name;if(!0===t[i])return function(e,t,r){return Te(t,i)};if(i in e)return function(t,r,n){return t.has(i)?t.get(i):Te(e,i)};var a=n(i);return function(e,t,n){return e.has(i)?e.get(i):a?new r(null,i):u.onUndefinedSymbol(i)}}},{key:&quot;forEach&quot;,value:function(e){}},{key:&quot;map&quot;,value:function(e){return this.clone()}},{key:&quot;clone&quot;,value:function(){return new u(this.name)}},{key:&quot;_toString&quot;,value:function(e){return this.name}},{key:&quot;toHTML&quot;,value:function(e){var t=Wr(this.name);return&quot;true&quot;===t||&quot;false&quot;===t?'&lt;span class=&quot;math-symbol math-boolean&quot;&gt;'+t+&quot;&lt;/span&gt;&quot;:&quot;i&quot;===t?'&lt;span class=&quot;math-symbol math-imaginary-symbol&quot;&gt;'+t+&quot;&lt;/span&gt;&quot;:&quot;Infinity&quot;===t?'&lt;span class=&quot;math-symbol math-infinity-symbol&quot;&gt;'+t+&quot;&lt;/span&gt;&quot;:&quot;NaN&quot;===t?'&lt;span class=&quot;math-symbol math-nan-symbol&quot;&gt;'+t+&quot;&lt;/span&gt;&quot;:&quot;null&quot;===t?'&lt;span class=&quot;math-symbol math-null-symbol&quot;&gt;'+t+&quot;&lt;/span&gt;&quot;:&quot;undefined&quot;===t?'&lt;span class=&quot;math-symbol math-undefined-symbol&quot;&gt;'+t+&quot;&lt;/span&gt;&quot;:'&lt;span class=&quot;math-symbol&quot;&gt;'+t+&quot;&lt;/span&gt;&quot;}},{key:&quot;toJSON&quot;,value:function(){return{mathjs:&quot;SymbolNode&quot;,name:this.name}}},{key:&quot;_toTex&quot;,value:function(e){var r=!1;void 0===t[this.name]&amp;&amp;n(this.name)&amp;&amp;(r=!0);var i=Tp(this.name,r);return&quot;\s\s&quot;===i[0]?i:&quot; &quot;+i}}],[{key:&quot;onUndefinedSymbol&quot;,value:function(e){throw new Error(&quot;Undefined symbol &quot;+e)}},{key:&quot;fromJSON&quot;,value:function(e){return new u(e.name)}}]),u}(e.Node);return i}),{isClass:!0,isNode:!0});function Jp(){return Jp=&quot;undefined&quot;!=typeof Reflect&amp;&amp;Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&amp;&amp;null!==(e=op(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length&lt;3?e:r):i.value}},Jp.apply(this,arguments)}function Xp(e){for(var t=arguments.length,r=new Array(t&gt;1?t-1:0),n=1;n&lt;t;n++)r[n-1]=arguments[n];return&quot;function&quot;==typeof e.createSubScope?He.apply(void 0,[e.createSubScope()].concat(r)):He.apply(void 0,[Le(),e].concat(r))}var Qp=&quot;FunctionNode&quot;,Kp=Ee(Qp,[&quot;math&quot;,&quot;Node&quot;,&quot;SymbolNode&quot;],(function(e){var r=e.math,n=e.Node,i=e.SymbolNode,a=function(e){return Vr(e,{truncate:78})};function o(e,r,n){for(var i,a=&quot;&quot;,o=/\s$(?:\s{([a-z_][a-z_0-9]*)(?:\s[([0-9]+)\s])?\s}|\s$)/gi,u=0;null!==(i=o.exec(e));)if(a+=e.substring(u,i.index),u=i.index,&quot;$$&quot;===i[0])a+=&quot;$&quot;,u++;else{u+=i[0].length;var s=r[i[1]];if(!s)throw new ReferenceError(&quot;Template: Property &quot;+i[1]+&quot; does not exist.&quot;);if(void 0===i[2])switch(t(s)){case&quot;string&quot;:a+=s;break;case&quot;object&quot;:if(R(s))a+=s.toTex(n);else{if(!Array.isArray(s))throw new TypeError(&quot;Template: &quot;+i[1]+&quot; has to be a Node, String or array of Nodes&quot;);a+=s.map((function(e,t){if(R(e))return e.toTex(n);throw new TypeError(&quot;Template: &quot;+i[1]+&quot;[&quot;+t+&quot;] is not a Node.&quot;)})).join(&quot;,&quot;)}break;default:throw new TypeError(&quot;Template: &quot;+i[1]+&quot; has to be a Node, String or array of Nodes&quot;)}else{if(!R(s[i[2]]&amp;&amp;s[i[2]]))throw new TypeError(&quot;Template: &quot;+i[1]+&quot;[&quot;+i[2]+&quot;] is not a Node.&quot;);a+=s[i[2]].toTex(n)}}return a+e.slice(u)}var u=function(e){ip(c,e);var n,u,s=(n=c,u=function(){if(&quot;undefined&quot;==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(&quot;function&quot;==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=op(n);if(u){var r=op(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ap(this,e)});function c(e,t){var r;if(Ce(this,c),r=s.call(this),&quot;string&quot;==typeof e&amp;&amp;(e=new i(e)),!R(e))throw new TypeError('Node expected as parameter &quot;fn&quot;');if(!Array.isArray(t)||!t.every(R))throw new TypeError('Array containing Nodes expected for parameter &quot;args&quot;');return r.fn=e,r.args=t||[],r}return Oe(c,[{key:&quot;name&quot;,get:function(){return this.fn.name||&quot;&quot;}},{key:&quot;type&quot;,get:function(){return Qp}},{key:&quot;isFunctionNode&quot;,get:function(){return!0}},{key:&quot;_compile&quot;,value:function(e,t){var r=this.args.map((function(r){return r._compile(e,t)}));if(!U(this.fn)){if(S(this.fn)&amp;&amp;I(this.fn.index)&amp;&amp;this.fn.index.isObjectProperty()){var n=this.fn.object._compile(e,t),i=this.fn.index.getObjectProperty(),o=this.args;return function(t,a,u){var s=n(t,a,u),c=function(e,t){if(!ke(e,t))throw new Error('No access to method &quot;'+t+'&quot;');return e[t]}(s,i);if(null!=c&amp;&amp;c.rawArgs)return c(o,e,Xp(t,a),t);var f=r.map((function(e){return e(t,a,u)}));return c.apply(s,f)}}var u=this.fn.toString(),s=this.fn._compile(e,t),f=this.args;return function(t,n,i){var o=s(t,n,i);if(&quot;function&quot;!=typeof o)throw new TypeError(&quot;Expression '&quot;.concat(u,&quot;' did not evaluate to a function; value is:&quot;)+&quot;\sn  &quot;.concat(a(o)));if(o.rawArgs)return o(f,e,Xp(t,n),t);var c=r.map((function(e){return e(t,n,i)}));return o.apply(o,c)}}var l=this.fn.name;if(t[l]){var p=this.args;return function(t,n,i){var o=Te(n,l);if(&quot;function&quot;!=typeof o)throw new TypeError(&quot;Argument '&quot;.concat(l,&quot;' was not a function; received: &quot;).concat(a(o)));if(o.rawArgs)return o(p,e,Xp(t,n),t);var u=r.map((function(e){return e(t,n,i)}));return o.apply(o,u)}}var m=l in e?Te(e,l):void 0,h=&quot;function&quot;==typeof m&amp;&amp;!0===m.rawArgs,d=function(t){var r;if(t.has(l))r=t.get(l);else{if(!(l in e))return c.onUndefinedFunction(l);r=Te(e,l)}if(&quot;function&quot;==typeof r)return r;throw new TypeError(&quot;'&quot;.concat(l,&quot;' is not a function; its value is:\sn  &quot;).concat(a(r)))};if(h){var v=this.args;return function(t,r,n){return d(t)(v,e,Xp(t,r),t)}}switch(r.length){case 0:return function(e,t,r){return d(e)()};case 1:return function(e,t,n){return d(e)((0,r[0])(e,t,n))};case 2:return function(e,t,n){var i=d(e),a=r[0],o=r[1];return i(a(e,t,n),o(e,t,n))};default:return function(e,t,n){var i=d(e),a=r.map((function(r){return r(e,t,n)}));return i.apply(void 0,_a(a))}}}},{key:&quot;forEach&quot;,value:function(e){e(this.fn,&quot;fn&quot;,this);for(var t=0;t&lt;this.args.length;t++)e(this.args[t],&quot;args[&quot;+t+&quot;]&quot;,this)}},{key:&quot;map&quot;,value:function(e){for(var t=this._ifNode(e(this.fn,&quot;fn&quot;,this)),r=[],n=0;n&lt;this.args.length;n++)r[n]=this._ifNode(e(this.args[n],&quot;args[&quot;+n+&quot;]&quot;,this));return new c(t,r)}},{key:&quot;clone&quot;,value:function(){return new c(this.fn,this.args.slice(0))}},{key:&quot;toString&quot;,value:function(e){var r,n=this.fn.toString(e);return e&amp;&amp;&quot;object&quot;===t(e.handler)&amp;&amp;Ne(e.handler,n)&amp;&amp;(r=e.handler[n](this,e)),void 0!==r?r:Jp(op(c.prototype),&quot;toString&quot;,this).call(this,e)}},{key:&quot;_toString&quot;,value:function(e){var t=this.args.map((function(t){return t.toString(e)}));return(_(this.fn)?&quot;(&quot;+this.fn.toString(e)+&quot;)&quot;:this.fn.toString(e))+&quot;(&quot;+t.join(&quot;, &quot;)+&quot;)&quot;}},{key:&quot;toJSON&quot;,value:function(){return{mathjs:Qp,fn:this.fn,args:this.args}}},{key:&quot;toHTML&quot;,value:function(e){var t=this.args.map((function(t){return t.toHTML(e)}));return'&lt;span class=&quot;math-function&quot;&gt;'+Wr(this.fn)+'&lt;/span&gt;&lt;span class=&quot;math-paranthesis math-round-parenthesis&quot;&gt;(&lt;/span&gt;'+t.join('&lt;span class=&quot;math-separator&quot;&gt;,&lt;/span&gt;')+'&lt;span class=&quot;math-paranthesis math-round-parenthesis&quot;&gt;)&lt;/span&gt;'}},{key:&quot;toTex&quot;,value:function(e){var r;return e&amp;&amp;&quot;object&quot;===t(e.handler)&amp;&amp;Ne(e.handler,this.name)&amp;&amp;(r=e.handler[this.name](this,e)),void 0!==r?r:Jp(op(c.prototype),&quot;toTex&quot;,this).call(this,e)}},{key:&quot;_toTex&quot;,value:function(e){var n,i,a=this.args.map((function(t){return t.toTex(e)}));switch(Mp[this.name]&amp;&amp;(n=Mp[this.name]),!r[this.name]||&quot;function&quot;!=typeof r[this.name].toTex&amp;&amp;&quot;object&quot;!==t(r[this.name].toTex)&amp;&amp;&quot;string&quot;!=typeof r[this.name].toTex||(n=r[this.name].toTex),t(n)){case&quot;function&quot;:i=n(this,e);break;case&quot;string&quot;:i=o(n,this,e);break;case&quot;object&quot;:switch(t(n[a.length])){case&quot;function&quot;:i=n[a.length](this,e);break;case&quot;string&quot;:i=o(n[a.length],this,e)}}return void 0!==i?i:o(&quot;\s\smathrm{${name}}\s\sleft(${args}\s\sright)&quot;,this,e)}},{key:&quot;getIdentifier&quot;,value:function(){return this.type+&quot;:&quot;+this.name}}]),c}(n);return Ba(u,&quot;name&quot;,Qp),Ba(u,&quot;onUndefinedFunction&quot;,(function(e){throw new Error(&quot;Undefined function &quot;+e)})),Ba(u,&quot;fromJSON&quot;,(function(e){return new u(e.fn,e.args)})),u}),{isClass:!0,isNode:!0}),em=&quot;parse&quot;,tm=Ee(em,[&quot;typed&quot;,&quot;numeric&quot;,&quot;config&quot;,&quot;AccessorNode&quot;,&quot;ArrayNode&quot;,&quot;AssignmentNode&quot;,&quot;BlockNode&quot;,&quot;ConditionalNode&quot;,&quot;ConstantNode&quot;,&quot;FunctionAssignmentNode&quot;,&quot;FunctionNode&quot;,&quot;IndexNode&quot;,&quot;ObjectNode&quot;,&quot;OperatorNode&quot;,&quot;ParenthesisNode&quot;,&quot;RangeNode&quot;,&quot;RelationalNode&quot;,&quot;SymbolNode&quot;],(function(e){var t=e.typed,r=e.numeric,n=e.config,i=e.AccessorNode,a=e.ArrayNode,o=e.AssignmentNode,u=e.BlockNode,s=e.ConditionalNode,c=e.ConstantNode,f=e.FunctionAssignmentNode,l=e.FunctionNode,p=e.IndexNode,m=e.ObjectNode,h=e.OperatorNode,d=e.ParenthesisNode,v=e.RangeNode,y=e.RelationalNode,g=e.SymbolNode,x=t(em,{string:function(e){return P(e,{})},&quot;Array | Matrix&quot;:function(e){return b(e,{})},&quot;string, Object&quot;:function(e,t){return P(e,void 0!==t.nodes?t.nodes:{})},&quot;Array | Matrix, Object&quot;:b});function b(e){var t=arguments.length&gt;1&amp;&amp;void 0!==arguments[1]?arguments[1]:{},r=void 0!==t.nodes?t.nodes:{};return _n(e,(function(e){if(&quot;string&quot;!=typeof e)throw new TypeError(&quot;String expected&quot;);return P(e,r)}))}var w={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},N={&quot;,&quot;:!0,&quot;(&quot;:!0,&quot;)&quot;:!0,&quot;[&quot;:!0,&quot;]&quot;:!0,&quot;{&quot;:!0,&quot;}&quot;:!0,'&quot;':!0,&quot;'&quot;:!0,&quot;;&quot;:!0,&quot;+&quot;:!0,&quot;-&quot;:!0,&quot;*&quot;:!0,&quot;.*&quot;:!0,&quot;/&quot;:!0,&quot;./&quot;:!0,&quot;%&quot;:!0,&quot;^&quot;:!0,&quot;.^&quot;:!0,&quot;~&quot;:!0,&quot;!&quot;:!0,&quot;&amp;&quot;:!0,&quot;|&quot;:!0,&quot;^|&quot;:!0,&quot;=&quot;:!0,&quot;:&quot;:!0,&quot;?&quot;:!0,&quot;==&quot;:!0,&quot;!=&quot;:!0,&quot;&lt;&quot;:!0,&quot;&gt;&quot;:!0,&quot;&lt;=&quot;:!0,&quot;&gt;=&quot;:!0,&quot;&lt;&lt;&quot;:!0,&quot;&gt;&gt;&quot;:!0,&quot;&gt;&gt;&gt;&quot;:!0},D={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},E={true:!0,false:!1,null:null,undefined:void 0},A=[&quot;NaN&quot;,&quot;Infinity&quot;];function C(e,t){return e.expression.substr(e.index,t)}function M(e){return C(e,1)}function F(e){e.index++}function O(e){return e.expression.charAt(e.index-1)}function _(e){return e.expression.charAt(e.index+1)}function I(e){for(e.tokenType=w.NULL,e.token=&quot;&quot;,e.comment=&quot;&quot;;;){if(&quot;#&quot;===M(e))for(;&quot;\sn&quot;!==M(e)&amp;&amp;&quot;&quot;!==M(e);)e.comment+=M(e),F(e);if(!x.isWhitespace(M(e),e.nestingLevel))break;F(e)}if(&quot;&quot;!==M(e)){if(&quot;\sn&quot;===M(e)&amp;&amp;!e.nestingLevel)return e.tokenType=w.DELIMITER,e.token=M(e),void F(e);var t=M(e),r=C(e,2),n=C(e,3);if(3===n.length&amp;&amp;N[n])return e.tokenType=w.DELIMITER,e.token=n,F(e),F(e),void F(e);if(2===r.length&amp;&amp;N[r])return e.tokenType=w.DELIMITER,e.token=r,F(e),void F(e);if(N[t])return e.tokenType=w.DELIMITER,e.token=t,void F(e);if(x.isDigitDot(t)){e.tokenType=w.NUMBER;var i=C(e,2);if(&quot;0b&quot;===i||&quot;0o&quot;===i||&quot;0x&quot;===i){for(e.token+=M(e),F(e),e.token+=M(e),F(e);x.isHexDigit(M(e));)e.token+=M(e),F(e);if(&quot;.&quot;===M(e))for(e.token+=&quot;.&quot;,F(e);x.isHexDigit(M(e));)e.token+=M(e),F(e);else if(&quot;i&quot;===M(e))for(e.token+=&quot;i&quot;,F(e);x.isDigit(M(e));)e.token+=M(e),F(e);return}if(&quot;.&quot;===M(e)){if(e.token+=M(e),F(e),!x.isDigit(M(e)))return void(e.tokenType=w.DELIMITER)}else{for(;x.isDigit(M(e));)e.token+=M(e),F(e);x.isDecimalMark(M(e),_(e))&amp;&amp;(e.token+=M(e),F(e))}for(;x.isDigit(M(e));)e.token+=M(e),F(e);if(&quot;E&quot;===M(e)||&quot;e&quot;===M(e))if(x.isDigit(_(e))||&quot;-&quot;===_(e)||&quot;+&quot;===_(e)){if(e.token+=M(e),F(e),&quot;+&quot;!==M(e)&amp;&amp;&quot;-&quot;!==M(e)||(e.token+=M(e),F(e)),!x.isDigit(M(e)))throw ce(e,'Digit expected, got &quot;'+M(e)+'&quot;');for(;x.isDigit(M(e));)e.token+=M(e),F(e);if(x.isDecimalMark(M(e),_(e)))throw ce(e,'Digit expected, got &quot;'+M(e)+'&quot;')}else if(&quot;.&quot;===_(e))throw F(e),ce(e,'Digit expected, got &quot;'+M(e)+'&quot;')}else{if(!x.isAlpha(M(e),O(e),_(e))){for(e.tokenType=w.UNKNOWN;&quot;&quot;!==M(e);)e.token+=M(e),F(e);throw ce(e,'Syntax error in part &quot;'+e.token+'&quot;')}for(;x.isAlpha(M(e),O(e),_(e))||x.isDigit(M(e));)e.token+=M(e),F(e);Ne(D,e.token)?e.tokenType=w.DELIMITER:e.tokenType=w.SYMBOL}}else e.tokenType=w.DELIMITER}function R(e){do{I(e)}while(&quot;\sn&quot;===e.token)}function z(e){e.nestingLevel++}function j(e){e.nestingLevel--}function P(e,t){var r={extraNodes:{},expression:&quot;&quot;,comment:&quot;&quot;,index:0,token:&quot;&quot;,tokenType:w.NULL,nestingLevel:0,conditionalLevel:null};of(r,{expression:e,extraNodes:t}),I(r);var n=function(e){var t,r,n=[];for(&quot;&quot;!==e.token&amp;&amp;&quot;\sn&quot;!==e.token&amp;&amp;&quot;;&quot;!==e.token&amp;&amp;(t=L(e),e.comment&amp;&amp;(t.comment=e.comment));&quot;\sn&quot;===e.token||&quot;;&quot;===e.token;)0===n.length&amp;&amp;t&amp;&amp;(r=&quot;;&quot;!==e.token,n.push({node:t,visible:r})),I(e),&quot;\sn&quot;!==e.token&amp;&amp;&quot;;&quot;!==e.token&amp;&amp;&quot;&quot;!==e.token&amp;&amp;(t=L(e),e.comment&amp;&amp;(t.comment=e.comment),r=&quot;;&quot;!==e.token,n.push({node:t,visible:r}));return n.length&gt;0?new u(n):(t||(t=new c(void 0),e.comment&amp;&amp;(t.comment=e.comment)),t)}(r);if(&quot;&quot;!==r.token)throw r.tokenType===w.DELIMITER?fe(r,&quot;Unexpected operator &quot;+r.token):ce(r,'Unexpected part &quot;'+r.token+'&quot;');return n}function L(e){var t,r,n,i,a=function(e){for(var t=function(e){for(var t=$(e);&quot;or&quot;===e.token;)R(e),t=new h(&quot;or&quot;,&quot;or&quot;,[t,$(e)]);return t}(e);&quot;?&quot;===e.token;){var r=e.conditionalLevel;e.conditionalLevel=e.nestingLevel,R(e);var n=t,i=L(e);if(&quot;:&quot;!==e.token)throw ce(e,&quot;False part of conditional expression expected&quot;);e.conditionalLevel=null,R(e);var a=L(e);t=new s(n,i,a),e.conditionalLevel=r}return t}(e);if(&quot;=&quot;===e.token){if(U(a))return t=a.name,R(e),n=L(e),new o(new g(t),n);if(S(a))return R(e),n=L(e),new o(a.object,a.index,n);if(k(a)&amp;&amp;U(a.fn)&amp;&amp;(i=!0,r=[],t=a.name,a.args.forEach((function(e,t){U(e)?r[t]=e.name:i=!1})),i))return R(e),n=L(e),new f(t,r,n);throw ce(e,&quot;Invalid left hand side of assignment operator =&quot;)}return a}function $(e){for(var t=H(e);&quot;xor&quot;===e.token;)R(e),t=new h(&quot;xor&quot;,&quot;xor&quot;,[t,H(e)]);return t}function H(e){for(var t=G(e);&quot;and&quot;===e.token;)R(e),t=new h(&quot;and&quot;,&quot;and&quot;,[t,G(e)]);return t}function G(e){for(var t=V(e);&quot;|&quot;===e.token;)R(e),t=new h(&quot;|&quot;,&quot;bitOr&quot;,[t,V(e)]);return t}function V(e){for(var t=Z(e);&quot;^|&quot;===e.token;)R(e),t=new h(&quot;^|&quot;,&quot;bitXor&quot;,[t,Z(e)]);return t}function Z(e){for(var t=W(e);&quot;&amp;&quot;===e.token;)R(e),t=new h(&quot;&amp;&quot;,&quot;bitAnd&quot;,[t,W(e)]);return t}function W(e){for(var t=[Y(e)],r=[],n={&quot;==&quot;:&quot;equal&quot;,&quot;!=&quot;:&quot;unequal&quot;,&quot;&lt;&quot;:&quot;smaller&quot;,&quot;&gt;&quot;:&quot;larger&quot;,&quot;&lt;=&quot;:&quot;smallerEq&quot;,&quot;&gt;=&quot;:&quot;largerEq&quot;};Ne(n,e.token);){var i={name:e.token,fn:n[e.token]};r.push(i),R(e),t.push(Y(e))}return 1===t.length?t[0]:2===t.length?new h(r[0].name,r[0].fn,t):new y(r.map((function(e){return e.fn})),t)}function Y(e){var t,r,n,i;t=J(e);for(var a={&quot;&lt;&lt;&quot;:&quot;leftShift&quot;,&quot;&gt;&gt;&quot;:&quot;rightArithShift&quot;,&quot;&gt;&gt;&gt;&quot;:&quot;rightLogShift&quot;};Ne(a,e.token);)n=a[r=e.token],R(e),i=[t,J(e)],t=new h(r,n,i);return t}function J(e){var t,r,n,i;t=X(e);for(var a={to:&quot;to&quot;,in:&quot;to&quot;};Ne(a,e.token);)n=a[r=e.token],R(e),&quot;in&quot;===r&amp;&amp;&quot;&quot;===e.token?t=new h(&quot;*&quot;,&quot;multiply&quot;,[t,new g(&quot;in&quot;)],!0):(i=[t,X(e)],t=new h(r,n,i));return t}function X(e){var t,r=[];if(t=&quot;:&quot;===e.token?new c(1):Q(e),&quot;:&quot;===e.token&amp;&amp;e.conditionalLevel!==e.nestingLevel){for(r.push(t);&quot;:&quot;===e.token&amp;&amp;r.length&lt;3;)R(e),&quot;)&quot;===e.token||&quot;]&quot;===e.token||&quot;,&quot;===e.token||&quot;&quot;===e.token?r.push(new g(&quot;end&quot;)):r.push(Q(e));t=3===r.length?new v(r[0],r[2],r[1]):new v(r[0],r[1])}return t}function Q(e){var t,r,n,i;t=K(e);for(var a={&quot;+&quot;:&quot;add&quot;,&quot;-&quot;:&quot;subtract&quot;};Ne(a,e.token);){n=a[r=e.token],R(e);var o=K(e);i=o.isPercentage?[t,new h(&quot;*&quot;,&quot;multiply&quot;,[t,o])]:[t,o],t=new h(r,n,i)}return t}function K(e){var t,r,n,i;r=t=ee(e);for(var a={&quot;*&quot;:&quot;multiply&quot;,&quot;.*&quot;:&quot;dotMultiply&quot;,&quot;/&quot;:&quot;divide&quot;,&quot;./&quot;:&quot;dotDivide&quot;};Ne(a,e.token);)i=a[n=e.token],R(e),r=ee(e),t=new h(n,i,[t,r]);return t}function ee(e){var t,r;for(r=t=te(e);e.tokenType===w.SYMBOL||&quot;in&quot;===e.token&amp;&amp;T(t)||!(e.tokenType!==w.NUMBER||T(r)||q(r)&amp;&amp;&quot;!&quot;!==r.op)||&quot;(&quot;===e.token;)r=te(e),t=new h(&quot;*&quot;,&quot;multiply&quot;,[t,r],!0);return t}function te(e){for(var t=re(e),r=t,n=[];&quot;/&quot;===e.token&amp;&amp;B(r);){if(n.push(of({},e)),R(e),e.tokenType!==w.NUMBER){of(e,n.pop());break}if(n.push(of({},e)),R(e),e.tokenType!==w.SYMBOL&amp;&amp;&quot;(&quot;!==e.token){n.pop(),of(e,n.pop());break}of(e,n.pop()),n.pop(),r=re(e),t=new h(&quot;/&quot;,&quot;divide&quot;,[t,r])}return t}function re(e){var t,r,n,i;t=ne(e);for(var a={&quot;%&quot;:&quot;mod&quot;,mod:&quot;mod&quot;};Ne(a,e.token);)n=a[r=e.token],R(e),&quot;%&quot;===r&amp;&amp;e.tokenType===w.DELIMITER&amp;&amp;&quot;(&quot;!==e.token?t=new h(&quot;/&quot;,&quot;divide&quot;,[t,new c(100)],!1,!0):(i=[t,ne(e)],t=new h(r,n,i));return t}function ne(e){var t,i,o,u={&quot;-&quot;:&quot;unaryMinus&quot;,&quot;+&quot;:&quot;unaryPlus&quot;,&quot;~&quot;:&quot;bitNot&quot;,not:&quot;not&quot;};return Ne(u,e.token)?(o=u[e.token],t=e.token,R(e),i=[ne(e)],new h(t,o,i)):function(e){var t,i,o,u;return t=function(e){var t,i,o;t=function(e){var t=[];if(e.tokenType===w.SYMBOL&amp;&amp;Ne(e.extraNodes,e.token)){var i=e.extraNodes[e.token];if(I(e),&quot;(&quot;===e.token){if(t=[],z(e),I(e),&quot;)&quot;!==e.token)for(t.push(L(e));&quot;,&quot;===e.token;)I(e),t.push(L(e));if(&quot;)&quot;!==e.token)throw ce(e,&quot;Parenthesis ) expected&quot;);j(e),I(e)}return new i(t)}return function(e){var t;return e.tokenType===w.SYMBOL||e.tokenType===w.DELIMITER&amp;&amp;e.token in D?(t=e.token,I(e),ie(e,Ne(E,t)?new c(E[t]):-1!==A.indexOf(t)?new c(r(t,&quot;number&quot;)):new g(t))):function(e){var t;return'&quot;'===e.token?(t=ae(e),ie(e,new c(t))):function(e){var t;return&quot;'&quot;===e.token?(t=oe(e),ie(e,new c(t))):function(e){var t,i,o,u;if(&quot;[&quot;===e.token){if(z(e),I(e),&quot;]&quot;!==e.token){var s=ue(e);if(&quot;;&quot;===e.token){for(o=1,i=[s];&quot;;&quot;===e.token;)I(e),i[o]=ue(e),o++;if(&quot;]&quot;!==e.token)throw ce(e,&quot;End of matrix ] expected&quot;);j(e),I(e),u=i[0].items.length;for(var f=1;f&lt;o;f++)if(i[f].items.length!==u)throw fe(e,&quot;Column dimensions mismatch (&quot;+i[f].items.length+&quot; !== &quot;+u+&quot;)&quot;);t=new a(i)}else{if(&quot;]&quot;!==e.token)throw ce(e,&quot;End of matrix ] expected&quot;);j(e),I(e),t=s}}else j(e),I(e),t=new a([]);return ie(e,t)}return function(e){if(&quot;{&quot;===e.token){var t;z(e);var i={};do{if(I(e),&quot;}&quot;!==e.token){if('&quot;'===e.token)t=ae(e);else if(&quot;'&quot;===e.token)t=oe(e);else{if(!(e.tokenType===w.SYMBOL||e.tokenType===w.DELIMITER&amp;&amp;e.token in D))throw ce(e,&quot;Symbol or string expected as object key&quot;);t=e.token,I(e)}if(&quot;:&quot;!==e.token)throw ce(e,&quot;Colon : expected after object key&quot;);I(e),i[t]=L(e)}}while(&quot;,&quot;===e.token);if(&quot;}&quot;!==e.token)throw ce(e,&quot;Comma , or bracket } expected after object value&quot;);j(e),I(e);var a=new m(i);return ie(e,a)}return function(e){var t;return e.tokenType===w.NUMBER?(t=e.token,I(e),new c(r(t,n.number))):function(e){var t;if(&quot;(&quot;===e.token){if(z(e),I(e),t=L(e),&quot;)&quot;!==e.token)throw ce(e,&quot;Parenthesis ) expected&quot;);return j(e),I(e),ie(e,t=new d(t))}return function(e){throw&quot;&quot;===e.token?ce(e,&quot;Unexpected end of expression&quot;):ce(e,&quot;Value expected&quot;)}(e)}(e)}(e)}(e)}(e)}(e)}(e)}(e)}(e);for(var u={&quot;!&quot;:&quot;factorial&quot;,&quot;'&quot;:&quot;ctranspose&quot;};Ne(u,e.token);)o=u[i=e.token],I(e),t=ie(e,t=new h(i,o,[t]));return t}(e),(&quot;^&quot;===e.token||&quot;.^&quot;===e.token)&amp;&amp;(o=&quot;^&quot;===(i=e.token)?&quot;pow&quot;:&quot;dotPow&quot;,R(e),u=[t,ne(e)],t=new h(i,o,u)),t}(e)}function ie(e,t,r){for(var n;!(&quot;(&quot;!==e.token&amp;&amp;&quot;[&quot;!==e.token&amp;&amp;&quot;.&quot;!==e.token||r&amp;&amp;-1===r.indexOf(e.token));)if(n=[],&quot;(&quot;===e.token){if(!U(t)&amp;&amp;!S(t))return t;if(z(e),I(e),&quot;)&quot;!==e.token)for(n.push(L(e));&quot;,&quot;===e.token;)I(e),n.push(L(e));if(&quot;)&quot;!==e.token)throw ce(e,&quot;Parenthesis ) expected&quot;);j(e),I(e),t=new l(t,n)}else if(&quot;[&quot;===e.token){if(z(e),I(e),&quot;]&quot;!==e.token)for(n.push(L(e));&quot;,&quot;===e.token;)I(e),n.push(L(e));if(&quot;]&quot;!==e.token)throw ce(e,&quot;Parenthesis ] expected&quot;);j(e),I(e),t=new i(t,new p(n))}else{if(I(e),e.tokenType!==w.SYMBOL)throw ce(e,&quot;Property name expected after dot&quot;);n.push(new c(e.token)),I(e),t=new i(t,new p(n,!0))}return t}function ae(e){for(var t=&quot;&quot;;&quot;&quot;!==M(e)&amp;&amp;'&quot;'!==M(e);)&quot;\s\s&quot;===M(e)&amp;&amp;(t+=M(e),F(e)),t+=M(e),F(e);if(I(e),'&quot;'!==e.token)throw ce(e,'End of string &quot; expected');return I(e),JSON.parse('&quot;'+t+'&quot;')}function oe(e){for(var t=&quot;&quot;;&quot;&quot;!==M(e)&amp;&amp;&quot;'&quot;!==M(e);)&quot;\s\s&quot;===M(e)&amp;&amp;(t+=M(e),F(e)),t+=M(e),F(e);if(I(e),&quot;'&quot;!==e.token)throw ce(e,&quot;End of string ' expected&quot;);return I(e),JSON.parse('&quot;'+t+'&quot;')}function ue(e){for(var t=[L(e)],r=1;&quot;,&quot;===e.token;)I(e),t[r]=L(e),r++;return new a(t)}function se(e){return e.index-e.token.length+1}function ce(e,t){var r=se(e),n=new SyntaxError(t+&quot; (char &quot;+r+&quot;)&quot;);return n.char=r,n}function fe(e,t){var r=se(e),n=new SyntaxError(t+&quot; (char &quot;+r+&quot;)&quot;);return n.char=r,n}return x.isAlpha=function(e,t,r){return x.isValidLatinOrGreek(e)||x.isValidMathSymbol(e,r)||x.isValidMathSymbol(t,e)},x.isValidLatinOrGreek=function(e){return/^[a-zA-Z_$\su00C0-\su02AF\su0370-\su03FF\su2100-\su214F]$/.test(e)},x.isValidMathSymbol=function(e,t){return/^[\suD835]$/.test(e)&amp;&amp;/^[\suDC00-\suDFFF]$/.test(t)&amp;&amp;/^[^\suDC55\suDC9D\suDCA0\suDCA1\suDCA3\suDCA4\suDCA7\suDCA8\suDCAD\suDCBA\suDCBC\suDCC4\suDD06\suDD0B\suDD0C\suDD15\suDD1D\suDD3A\suDD3F\suDD45\suDD47-\suDD49\suDD51\suDEA6\suDEA7\suDFCC\suDFCD]$/.test(t)},x.isWhitespace=function(e,t){return&quot; &quot;===e||&quot;\st&quot;===e||&quot;\sn&quot;===e&amp;&amp;t&gt;0},x.isDecimalMark=function(e,t){return&quot;.&quot;===e&amp;&amp;&quot;/&quot;!==t&amp;&amp;&quot;*&quot;!==t&amp;&amp;&quot;^&quot;!==t},x.isDigitDot=function(e){return e&gt;=&quot;0&quot;&amp;&amp;e&lt;=&quot;9&quot;||&quot;.&quot;===e},x.isDigit=function(e){return e&gt;=&quot;0&quot;&amp;&amp;e&lt;=&quot;9&quot;},x.isHexDigit=function(e){return e&gt;=&quot;0&quot;&amp;&amp;e&lt;=&quot;9&quot;||e&gt;=&quot;a&quot;&amp;&amp;e&lt;=&quot;f&quot;||e&gt;=&quot;A&quot;&amp;&amp;e&lt;=&quot;F&quot;},t.addConversion({from:&quot;string&quot;,to:&quot;Node&quot;,convert:x}),x})),rm=&quot;compile&quot;,nm=Ee(rm,[&quot;typed&quot;,&quot;parse&quot;],(function(e){var t=e.typed,r=e.parse;return t(rm,{string:function(e){return r(e).compile()},&quot;Array | Matrix&quot;:function(e){return _n(e,(function(e){return r(e).compile()}))}})})),im=&quot;evaluate&quot;,am=Ee(im,[&quot;typed&quot;,&quot;parse&quot;],(function(e){var t=e.typed,r=e.parse;return t(im,{string:function(e){var t=Le();return r(e).compile().evaluate(t)},&quot;string, Map | Object&quot;:function(e,t){return r(e).compile().evaluate(t)},&quot;Array | Matrix&quot;:function(e){var t=Le();return _n(e,(function(e){return r(e).compile().evaluate(t)}))},&quot;Array | Matrix, Map | Object&quot;:function(e,t){return _n(e,(function(e){return r(e).compile().evaluate(t)}))}})})),om=Ee(&quot;Parser&quot;,[&quot;evaluate&quot;],(function(e){var t=e.evaluate;function r(){if(!(this instanceof r))throw new SyntaxError(&quot;Constructor must be called with the new operator&quot;);Object.defineProperty(this,&quot;scope&quot;,{value:Le(),writable:!1})}return r.prototype.type=&quot;Parser&quot;,r.prototype.isParser=!0,r.prototype.evaluate=function(e){return t(e,this.scope)},r.prototype.get=function(e){if(this.scope.has(e))return this.scope.get(e)},r.prototype.getAll=function(){return function(e){if(e instanceof Pe)return e.wrappedObject;var t,r={},n=qe(e.keys());try{for(n.s();!(t=n.n()).done;){var i=t.value;Be(r,i,e.get(i))}}catch(e){n.e(e)}finally{n.f()}return r}(this.scope)},r.prototype.getAllAsMap=function(){return this.scope},r.prototype.set=function(e,t){return this.scope.set(e,t),t},r.prototype.remove=function(e){this.scope.delete(e)},r.prototype.clear=function(){this.scope.clear()},r}),{isClass:!0}),um=&quot;parser&quot;,sm=Ee(um,[&quot;typed&quot;,&quot;Parser&quot;],(function(e){var t=e.typed,r=e.Parser;return t(um,{&quot;&quot;:function(){return new r}})})),cm=Ee(&quot;lup&quot;,[&quot;typed&quot;,&quot;matrix&quot;,&quot;abs&quot;,&quot;addScalar&quot;,&quot;divideScalar&quot;,&quot;multiplyScalar&quot;,&quot;subtract&quot;,&quot;larger&quot;,&quot;equalScalar&quot;,&quot;unaryMinus&quot;,&quot;DenseMatrix&quot;,&quot;SparseMatrix&quot;,&quot;Spa&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.abs,i=e.addScalar,a=e.divideScalar,o=e.multiplyScalar,u=e.subtract,s=e.larger,c=e.equalScalar,f=e.unaryMinus,l=e.DenseMatrix,p=e.SparseMatrix,m=e.Spa;return t(&quot;lup&quot;,{DenseMatrix:function(e){return h(e)},SparseMatrix:function(e){return function(e){var t,r,i,u=e._size[0],l=e._size[1],h=Math.min(u,l),d=e._values,v=e._index,y=e._ptr,g=[],x=[],b=[],w=[u,h],N=[],D=[],E=[],A=[h,l],S=[],C=[];for(t=0;t&lt;u;t++)S[t]=t,C[t]=t;var M=function(){var e=new m;r&lt;u&amp;&amp;(b.push(g.length),g.push(1),x.push(r)),E.push(N.length);var l=y[r],h=y[r+1];for(i=l;i&lt;h;i++)t=v[i],e.set(S[t],d[i]);r&gt;0&amp;&amp;e.forEach(0,r-1,(function(t,r){p._forEachRow(t,g,x,b,(function(n,i){n&gt;t&amp;&amp;e.accumulate(n,f(o(i,r)))}))}));var M,F,O,T,B=r,_=e.get(r),k=n(_);e.forEach(r+1,u-1,(function(e,t){var r=n(t);s(r,k)&amp;&amp;(B=e,k=r,_=t)})),r!==B&amp;&amp;(p._swapRows(r,B,w[1],g,x,b),p._swapRows(r,B,A[1],N,D,E),e.swap(r,B),F=B,O=C[M=r],T=C[F],S[O]=F,S[T]=M,C[M]=T,C[F]=O),e.forEach(0,u-1,(function(e,t){e&lt;=r?(N.push(t),D.push(e)):(t=a(t,_),c(t,0)||(g.push(t),x.push(e)))}))};for(r=0;r&lt;l;r++)M();return E.push(N.length),b.push(g.length),{L:new p({values:g,index:x,ptr:b,size:w}),U:new p({values:N,index:D,ptr:E,size:A}),p:S,toString:function(){return&quot;L: &quot;+this.L.toString()+&quot;\snU: &quot;+this.U.toString()+&quot;\snP: &quot;+this.p}}}(e)},Array:function(e){var t=h(r(e));return{L:t.L.valueOf(),U:t.U.valueOf(),p:t.p}}});function h(e){var t,r,f,p=e._size[0],m=e._size[1],h=Math.min(p,m),d=he(e._data),v=[],y=[p,h],g=[],x=[h,m],b=[];for(t=0;t&lt;p;t++)b[t]=t;for(r=0;r&lt;m;r++){if(r&gt;0)for(t=0;t&lt;p;t++){var w=Math.min(t,r),N=0;for(f=0;f&lt;w;f++)N=i(N,o(d[t][f],d[f][r]));d[t][r]=u(d[t][r],N)}var D=r,E=0,A=0;for(t=r;t&lt;p;t++){var S=d[t][r],C=n(S);s(C,E)&amp;&amp;(D=t,E=C,A=S)}if(r!==D&amp;&amp;(b[r]=[b[D],b[D]=b[r]][0],l._swapRows(r,D,d)),r&lt;p)for(t=r+1;t&lt;p;t++){var M=d[t][r];c(M,0)||(d[t][r]=a(d[t][r],A))}}for(r=0;r&lt;m;r++)for(t=0;t&lt;p;t++)0===r&amp;&amp;(t&lt;m&amp;&amp;(g[t]=[]),v[t]=[]),t&lt;r?(t&lt;m&amp;&amp;(g[t][r]=d[t][r]),r&lt;p&amp;&amp;(v[t][r]=0)):t!==r?(t&lt;m&amp;&amp;(g[t][r]=0),r&lt;p&amp;&amp;(v[t][r]=d[t][r])):(t&lt;m&amp;&amp;(g[t][r]=d[t][r]),r&lt;p&amp;&amp;(v[t][r]=1));var F=new l({data:v,size:y}),O=new l({data:g,size:x}),T=[];for(t=0,h=b.length;t&lt;h;t++)T[b[t]]=t;return{L:F,U:O,p:T,toString:function(){return&quot;L: &quot;+this.L.toString()+&quot;\snU: &quot;+this.U.toString()+&quot;\snP: &quot;+this.p}}}})),fm=Ee(&quot;qr&quot;,[&quot;typed&quot;,&quot;matrix&quot;,&quot;zeros&quot;,&quot;identity&quot;,&quot;isZero&quot;,&quot;equal&quot;,&quot;sign&quot;,&quot;sqrt&quot;,&quot;conj&quot;,&quot;unaryMinus&quot;,&quot;addScalar&quot;,&quot;divideScalar&quot;,&quot;multiplyScalar&quot;,&quot;subtract&quot;,&quot;complex&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.zeros,i=e.identity,a=e.isZero,o=e.equal,u=e.sign,s=e.sqrt,c=e.conj,f=e.unaryMinus,l=e.addScalar,p=e.divideScalar,m=e.multiplyScalar,h=e.subtract,d=e.complex;return of(t(&quot;qr&quot;,{DenseMatrix:function(e){return y(e)},SparseMatrix:function(e){return function(e){throw new Error(&quot;qr not implemented for sparse matrices yet&quot;)}()},Array:function(e){var t=y(r(e));return{Q:t.Q.valueOf(),R:t.R.valueOf()}}}),{_denseQRimpl:v});function v(e){var t,r,d,v=e._size[0],y=e._size[1],g=i([v],&quot;dense&quot;),x=g._data,b=e.clone(),w=b._data,N=n([v],&quot;&quot;);for(d=0;d&lt;Math.min(y,v);++d){var D=w[d][d],E=f(o(D,0)?1:u(D)),A=c(E),S=0;for(t=d;t&lt;v;t++)S=l(S,m(w[t][d],c(w[t][d])));var C=m(E,s(S));if(!a(C)){var M=h(D,C);for(N[d]=1,t=d+1;t&lt;v;t++)N[t]=p(w[t][d],M);var F=f(c(p(M,C))),O=void 0;for(r=d;r&lt;y;r++){for(O=0,t=d;t&lt;v;t++)O=l(O,m(c(N[t]),w[t][r]));for(O=m(O,F),t=d;t&lt;v;t++)w[t][r]=m(h(w[t][r],m(N[t],O)),A)}for(t=0;t&lt;v;t++){for(O=0,r=d;r&lt;v;r++)O=l(O,m(x[t][r],N[r]));for(O=m(O,F),r=d;r&lt;v;++r)x[t][r]=p(h(x[t][r],m(O,c(N[r]))),A)}}}return{Q:g,R:b,toString:function(){return&quot;Q: &quot;+this.Q.toString()+&quot;\snR: &quot;+this.R.toString()}}}function y(e){var t=v(e),r=t.R._data;if(e._data.length&gt;0)for(var n=&quot;Complex&quot;===r[0][0].type?d(0):0,i=0;i&lt;r.length;++i)for(var a=0;a&lt;i&amp;&amp;a&lt;(r[0]||[]).length;++a)r[i][a]=n;return t}}));function lm(e,t,r,n,i,a,o){var u=0;for(r[o]=e;u&gt;=0;){var s=r[o+u],c=r[n+s];-1===c?(u--,a[t++]=s):(r[n+s]=r[i+c],r[o+ ++u]=c)}return t}function pm(e){return-e-2}var mm=Ee(&quot;csAmd&quot;,[&quot;add&quot;,&quot;multiply&quot;,&quot;transpose&quot;],(function(e){var t=e.add,r=e.multiply,n=e.transpose;return function(e,o){if(!o||e&lt;=0||e&gt;3)return null;var u=o._size,s=u[0],c=u[1],f=0,l=Math.max(16,10*Math.sqrt(c)),p=function(e,i,a,o,u){var s=n(i);if(1===e&amp;&amp;o===a)return t(i,s);if(2===e){for(var c=s._index,f=s._ptr,l=0,p=0;p&lt;a;p++){var m=f[p];if(f[p]=l,!(f[p+1]-m&gt;u))for(var h=f[p+1];m&lt;h;m++)c[l++]=c[m]}return f[a]=l,i=n(s),r(s,i)}return r(s,i)}(e,o,s,c,l=Math.min(c-2,l));!function(e,t,r){for(var n=e._values,i=e._index,a=e._ptr,o=e._size[1],u=0,s=0;s&lt;o;s++){var c=a[s];for(a[s]=u;c&lt;a[s+1];c++)t(i[c],s,n?n[c]:1,null)&amp;&amp;(i[u]=i[c],n&amp;&amp;(n[u]=n[c]),u++)}a[o]=u,i.splice(u,i.length-u),n&amp;&amp;n.splice(u,n.length-u)}(p,a);for(var m,h,d,v,y,g,x,b,w,N,D,E,A,S,C,M,F=p._index,O=p._ptr,T=O[c],B=[],_=[],k=c+1,I=2*(c+1),R=3*(c+1),z=4*(c+1),q=5*(c+1),j=6*(c+1),P=7*(c+1),L=B,U=function(e,t,r,n,a,o,u,s,c,f,l,p){for(var m=0;m&lt;e;m++)r[0+m]=t[m+1]-t[m];r[0+e]=0;for(var h=0;h&lt;=e;h++)r[a+h]=-1,o[h]=-1,r[u+h]=-1,r[s+h]=-1,r[c+h]=1,r[f+h]=1,r[l+h]=0,r[p+h]=r[0+h];var d=i(0,0,r,f,e);return r[l+e]=-2,t[e]=-1,r[f+e]=0,d}(c,O,_,0,R,L,I,P,k,j,z,q),$=function(e,t,r,n,i,a,o,u,s,c,f){for(var l=0,p=0;p&lt;e;p++){var m=r[n+p];if(0===m)r[i+p]=-2,l++,t[p]=-1,r[a+p]=0;else if(m&gt;o)r[u+p]=0,r[i+p]=-1,l++,t[p]=pm(e),r[u+e]++;else{var h=r[s+m];-1!==h&amp;&amp;(c[h]=p),r[f+p]=r[s+m],r[s+m]=p}}return l}(c,O,_,q,z,j,l,k,R,L,I),H=0;$&lt;c;){for(d=-1;H&lt;c&amp;&amp;-1===(d=_[R+H]);H++);-1!==_[I+d]&amp;&amp;(L[_[I+d]]=-1),_[R+H]=_[I+d];var G=_[z+d],V=_[k+d];$+=V;var Z=0;_[k+d]=-V;var W=O[d],Y=0===G?W:T,J=Y;for(v=1;v&lt;=G+1;v++){for(v&gt;G?(g=d,x=W,b=_[0+d]-G):(x=O[g=F[W++]],b=_[0+g]),y=1;y&lt;=b;y++)(w=_[k+(m=F[x++])])&lt;=0||(Z+=w,_[k+m]=-w,F[J++]=m,-1!==_[I+m]&amp;&amp;(L[_[I+m]]=L[m]),-1!==L[m]?_[I+L[m]]=_[I+m]:_[R+_[q+m]]=_[I+m]);g!==d&amp;&amp;(O[g]=pm(d),_[j+g]=0)}for(0!==G&amp;&amp;(T=J),_[q+d]=Z,O[d]=Y,_[0+d]=J-Y,_[z+d]=-2,U=i(U,f,_,j,c),N=Y;N&lt;J;N++)if(!((D=_[z+(m=F[N])])&lt;=0)){var X=U-(w=-_[k+m]);for(W=O[m],E=O[m]+D-1;W&lt;=E;W++)_[j+(g=F[W])]&gt;=U?_[j+g]-=w:0!==_[j+g]&amp;&amp;(_[j+g]=_[q+g]+X)}for(N=Y;N&lt;J;N++){for(A=(E=O[m=F[N]])+_[z+m]-1,S=E,C=0,M=0,W=E;W&lt;=A;W++)if(0!==_[j+(g=F[W])]){var Q=_[j+g]-U;Q&gt;0?(M+=Q,F[S++]=g,C+=g):(O[g]=pm(d),_[j+g]=0)}_[z+m]=S-E+1;var K=S,ee=E+_[0+m];for(W=A+1;W&lt;ee;W++){var te=_[k+(h=F[W])];te&lt;=0||(M+=te,F[S++]=h,C+=h)}0===M?(O[m]=pm(d),Z-=w=-_[k+m],V+=w,$+=w,_[k+m]=0,_[z+m]=-1):(_[q+m]=Math.min(_[q+m],M),F[S]=F[K],F[K]=F[E],F[E]=d,_[0+m]=S-E+1,C=(C&lt;0?-C:C)%c,_[I+m]=_[P+C],_[P+C]=m,L[m]=C)}for(_[q+d]=Z,U=i(U+(f=Math.max(f,Z)),f,_,j,c),N=Y;N&lt;J;N++)if(!(_[k+(m=F[N])]&gt;=0))for(m=_[P+(C=L[m])],_[P+C]=-1;-1!==m&amp;&amp;-1!==_[I+m];m=_[I+m],U++){for(b=_[0+m],D=_[z+m],W=O[m]+1;W&lt;=O[m]+b-1;W++)_[j+F[W]]=U;var re=m;for(h=_[I+m];-1!==h;){var ne=_[0+h]===b&amp;&amp;_[z+h]===D;for(W=O[h]+1;ne&amp;&amp;W&lt;=O[h]+b-1;W++)_[j+F[W]]!==U&amp;&amp;(ne=0);ne?(O[h]=pm(m),_[k+m]+=_[k+h],_[k+h]=0,_[z+h]=-1,h=_[I+h],_[I+re]=h):(re=h,h=_[I+h])}}for(W=Y,N=Y;N&lt;J;N++)(w=-_[k+(m=F[N])])&lt;=0||(_[k+m]=w,M=_[q+m]+Z-w,-1!==_[R+(M=Math.min(M,c-$-w))]&amp;&amp;(L[_[R+M]]=m),_[I+m]=_[R+M],L[m]=-1,_[R+M]=m,H=Math.min(H,M),_[q+m]=M,F[W++]=m);_[k+d]=V,0==(_[0+d]=W-Y)&amp;&amp;(O[d]=-1,_[j+d]=0),0!==G&amp;&amp;(T=W)}for(m=0;m&lt;c;m++)O[m]=pm(O[m]);for(h=0;h&lt;=c;h++)_[R+h]=-1;for(h=c;h&gt;=0;h--)_[k+h]&gt;0||(_[I+h]=_[R+O[h]],_[R+O[h]]=h);for(g=c;g&gt;=0;g--)_[k+g]&lt;=0||-1!==O[g]&amp;&amp;(_[I+g]=_[R+O[g]],_[R+O[g]]=g);for(d=0,m=0;m&lt;=c;m++)-1===O[m]&amp;&amp;(d=lm(m,d,_,R,I,B,j));return B.splice(B.length-1,1),B};function i(e,t,r,n,i){if(e&lt;2||e+t&lt;0){for(var a=0;a&lt;i;a++)0!==r[n+a]&amp;&amp;(r[n+a]=1);e=2}return e}function a(e,t){return e!==t}}));function hm(e,t,r,n,i,a,o){var u,s,c,f=0;if(e&lt;=t||r[n+t]&lt;=r[i+e])return-1;r[i+e]=r[n+t];var l=r[a+e];if(r[a+e]=t,-1===l)f=1,c=e;else{for(f=2,c=l;c!==r[o+c];c=r[o+c]);for(u=l;u!==c;u=s)s=r[o+u],r[o+u]=c}return{jleaf:f,q:c}}var dm=Ee(&quot;csCounts&quot;,[&quot;transpose&quot;],(function(e){var t=e.transpose;return function(e,r,n,i){if(!e||!r||!n)return null;var a,o,u,s,c,f,l,p=e._size,m=p[0],h=p[1],d=4*h+(i?h+m+1:0),v=[],y=h,g=2*h,x=3*h,b=4*h,w=5*h+1;for(u=0;u&lt;d;u++)v[u]=-1;var N=[],D=t(e),E=D._index,A=D._ptr;for(u=0;u&lt;h;u++)for(N[o=n[u]]=-1===v[x+o]?1:0;-1!==o&amp;&amp;-1===v[x+o];o=r[o])v[x+o]=u;if(i){for(u=0;u&lt;h;u++)v[n[u]]=u;for(a=0;a&lt;m;a++){for(u=h,f=A[a],l=A[a+1],c=f;c&lt;l;c++)u=Math.min(u,v[E[c]]);v[w+a]=v[b+u],v[b+u]=a}}for(a=0;a&lt;h;a++)v[0+a]=a;for(u=0;u&lt;h;u++){for(-1!==r[o=n[u]]&amp;&amp;N[r[o]]--,s=i?v[b+u]:o;-1!==s;s=i?v[w+s]:-1)for(c=A[s];c&lt;A[s+1];c++){var S=hm(a=E[c],o,v,x,y,g,0);S.jleaf&gt;=1&amp;&amp;N[o]++,2===S.jleaf&amp;&amp;N[S.q]--}-1!==r[o]&amp;&amp;(v[0+o]=r[o])}for(o=0;o&lt;h;o++)-1!==r[o]&amp;&amp;(N[r[o]]+=N[o]);return N}})),vm=Ee(&quot;csSqr&quot;,[&quot;add&quot;,&quot;multiply&quot;,&quot;transpose&quot;],(function(e){var t=e.add,r=e.multiply,n=e.transpose,i=mm({add:t,multiply:r,transpose:n}),a=dm({transpose:n});return function(e,t,r){var n,o=t._ptr,u=t._size[1],s={};if(s.q=i(e,t),e&amp;&amp;!s.q)return null;if(r){var c=e?function(e,t,r,n){for(var i=e._values,a=e._index,o=e._ptr,u=e._size,s=e._datatype,c=u[0],f=u[1],l=null,p=[],m=[],h=0,d=0;d&lt;f;d++){m[d]=h;for(var v=r?r[d]:d,y=o[v],g=o[v+1],x=y;x&lt;g;x++){var b=a[x];p[h]=b,l&amp;&amp;(l[h]=i[x]),h++}}return m[f]=h,e.createSparseMatrix({values:l,index:p,ptr:m,size:[c,f],datatype:s})}(t,0,s.q):t;s.parent=function(e,t){if(!e)return null;var r,n,i=e._index,a=e._ptr,o=e._size,u=o[0],s=o[1],c=[],f=[],l=s;for(r=0;r&lt;u;r++)f[l+r]=-1;for(var p=0;p&lt;s;p++){c[p]=-1,f[0+p]=-1;for(var m=a[p],h=a[p+1],d=m;d&lt;h;d++){var v=i[d];for(r=f[l+v];-1!==r&amp;&amp;r&lt;p;r=n)n=f[0+r],f[0+r]=p,-1===n&amp;&amp;(c[r]=p);f[l+v]=p}}return c}(c);var f=function(e,t){if(!e)return null;var r,n=0,i=[],a=[],o=t,u=2*t;for(r=0;r&lt;t;r++)a[0+r]=-1;for(r=t-1;r&gt;=0;r--)-1!==e[r]&amp;&amp;(a[o+r]=a[0+e[r]],a[0+e[r]]=r);for(r=0;r&lt;t;r++)-1===e[r]&amp;&amp;(n=lm(r,n,a,0,o,i,u));return i}(s.parent,u);if(s.cp=a(c,s.parent,f,1),c&amp;&amp;s.parent&amp;&amp;s.cp&amp;&amp;function(e,t){var r=e._ptr,n=e._index,i=e._size,a=i[0],o=i[1];t.pinv=[],t.leftmost=[];var u,s,c,f,l,p=t.parent,m=t.pinv,h=t.leftmost,d=[],v=a,y=a+o,g=a+2*o;for(s=0;s&lt;o;s++)d[v+s]=-1,d[y+s]=-1,d[g+s]=0;for(u=0;u&lt;a;u++)h[u]=-1;for(s=o-1;s&gt;=0;s--)for(f=r[s],l=r[s+1],c=f;c&lt;l;c++)h[n[c]]=s;for(u=a-1;u&gt;=0;u--)m[u]=-1,-1!==(s=h[u])&amp;&amp;(0==d[g+s]++&amp;&amp;(d[y+s]=u),d[0+u]=d[v+s],d[v+s]=u);for(t.lnz=0,t.m2=a,s=0;s&lt;o;s++)if(u=d[v+s],t.lnz++,u&lt;0&amp;&amp;(u=t.m2++),m[u]=s,!(--g[s]&lt;=0)){t.lnz+=d[g+s];var x=p[s];-1!==x&amp;&amp;(0===d[g+x]&amp;&amp;(d[y+x]=d[y+s]),d[0+d[y+s]]=d[v+x],d[v+x]=d[0+u],d[g+x]+=d[g+s])}for(u=0;u&lt;a;u++)m[u]&lt;0&amp;&amp;(m[u]=s++);return!0}(c,s))for(s.unz=0,n=0;n&lt;u;n++)s.unz+=s.cp[n]}else s.unz=4*o[u]+u,s.lnz=s.unz;return s}}));function ym(e,t){return e[t]&lt;0}function gm(e,t){e[t]=pm(e[t])}function xm(e){return e&lt;0?pm(e):e}function bm(e,t,r,n,i){var a,o,u,s=t._index,c=t._ptr,f=t._size[1],l=0;for(n[0]=e;l&gt;=0;){e=n[l];var p=i?i[e]:e;ym(c,e)||(gm(c,e),n[f+l]=p&lt;0?0:xm(c[p]));var m=1;for(o=n[f+l],u=p&lt;0?0:xm(c[p+1]);o&lt;u;o++)if(!ym(c,a=s[o])){n[f+l]=o,n[++l]=a,m=0;break}m&amp;&amp;(l--,n[--r]=e)}return r}var wm=Ee(&quot;csSpsolve&quot;,[&quot;divideScalar&quot;,&quot;multiply&quot;,&quot;subtract&quot;],(function(e){var t=e.divideScalar,r=e.multiply,n=e.subtract;return function(e,i,a,o,u,s,c){var f,l,p,m,h=e._values,d=e._index,v=e._ptr,y=e._size[1],g=i._values,x=i._index,b=i._ptr,w=function(e,t,r,n,i){var a,o,u,s=e._ptr,c=e._size,f=t._index,l=t._ptr,p=c[1],m=p;for(o=l[r],u=l[r+1],a=o;a&lt;u;a++){var h=f[a];ym(s,h)||(m=bm(h,e,m,n,i))}for(a=m;a&lt;p;a++)gm(s,n[a]);return m}(e,i,a,o,s);for(f=w;f&lt;y;f++)u[o[f]]=0;for(l=b[a],p=b[a+1],f=l;f&lt;p;f++)u[x[f]]=g[f];for(var N=w;N&lt;y;N++){var D=o[N],E=s?s[D]:D;if(!(E&lt;0))for(l=v[E],p=v[E+1],u[D]=t(u[D],h[c?l:p-1]),f=c?l+1:l,m=c?p:p-1;f&lt;m;f++){var A=d[f];u[A]=n(u[A],r(h[f],u[D]))}}return w}})),Nm=Ee(&quot;csLu&quot;,[&quot;abs&quot;,&quot;divideScalar&quot;,&quot;multiply&quot;,&quot;subtract&quot;,&quot;larger&quot;,&quot;largerEq&quot;,&quot;SparseMatrix&quot;],(function(e){var t=e.abs,r=e.divideScalar,n=e.multiply,i=e.subtract,a=e.larger,o=e.largerEq,u=e.SparseMatrix,s=wm({divideScalar:r,multiply:n,subtract:i});return function(e,i,c){if(!e)return null;var f,l=e._size[1],p=100,m=100;i&amp;&amp;(f=i.q,p=i.lnz||p,m=i.unz||m);var h,d,v=[],y=[],g=[],x=new u({values:v,index:y,ptr:g,size:[l,l]}),b=[],w=[],N=[],D=new u({values:b,index:w,ptr:N,size:[l,l]}),E=[],A=[],S=[];for(h=0;h&lt;l;h++)A[h]=0,E[h]=-1,g[h+1]=0;p=0,m=0;for(var C=0;C&lt;l;C++){g[C]=p,N[C]=m;var M=f?f[C]:C,F=s(x,e,M,S,A,E,1),O=-1,T=-1;for(d=F;d&lt;l;d++)if(E[h=S[d]]&lt;0){var B=t(A[h]);a(B,T)&amp;&amp;(T=B,O=h)}else w[m]=E[h],b[m++]=A[h];if(-1===O||T&lt;=0)return null;E[M]&lt;0&amp;&amp;o(t(A[M]),n(T,c))&amp;&amp;(O=M);var _=A[O];for(w[m]=C,b[m++]=_,E[O]=C,y[p]=O,v[p++]=1,d=F;d&lt;l;d++)E[h=S[d]]&lt;0&amp;&amp;(y[p]=h,v[p++]=r(A[h],_)),A[h]=0}for(g[l]=p,N[l]=m,d=0;d&lt;p;d++)y[d]=E[y[d]];return v.splice(p,v.length-p),y.splice(p,y.length-p),b.splice(m,b.length-m),w.splice(m,w.length-m),{L:x,U:D,pinv:E}}})),Dm=Ee(&quot;slu&quot;,[&quot;typed&quot;,&quot;abs&quot;,&quot;add&quot;,&quot;multiply&quot;,&quot;transpose&quot;,&quot;divideScalar&quot;,&quot;subtract&quot;,&quot;larger&quot;,&quot;largerEq&quot;,&quot;SparseMatrix&quot;],(function(e){var t=e.typed,r=e.abs,n=e.add,i=e.multiply,a=e.transpose,o=e.divideScalar,u=e.subtract,s=e.larger,c=e.largerEq,f=e.SparseMatrix,l=vm({add:n,multiply:i,transpose:a}),p=Nm({abs:r,divideScalar:o,multiply:i,subtract:u,larger:s,largerEq:c,SparseMatrix:f});return t(&quot;slu&quot;,{&quot;SparseMatrix, number, number&quot;:function(e,t,r){if(!V(t)||t&lt;0||t&gt;3)throw new Error(&quot;Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]&quot;);if(r&lt;0||r&gt;1)throw new Error(&quot;Partial pivoting threshold must be a number from 0 to 1&quot;);var n=l(t,e,!1),i=p(e,n,r);return{L:i.L,U:i.U,p:i.pinv,q:n.q,toString:function(){return&quot;L: &quot;+this.L.toString()+&quot;\snU: &quot;+this.U.toString()+&quot;\snp: &quot;+this.p.toString()+(this.q?&quot;\snq: &quot;+this.q.toString():&quot;&quot;)+&quot;\sn&quot;}}}})}));function Em(e,t){var r,n=t.length,i=[];if(e)for(r=0;r&lt;n;r++)i[e[r]]=t[r];else for(r=0;r&lt;n;r++)i[r]=t[r];return i}var Am=&quot;lusolve&quot;,Sm=Ee(Am,[&quot;typed&quot;,&quot;matrix&quot;,&quot;lup&quot;,&quot;slu&quot;,&quot;usolve&quot;,&quot;lsolve&quot;,&quot;DenseMatrix&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.lup,i=e.slu,a=e.usolve,o=e.lsolve,u=ec({DenseMatrix:e.DenseMatrix});return t(Am,{&quot;Array, Array | Matrix&quot;:function(e,t){e=r(e);var i=n(e);return c(i.L,i.U,i.p,null,t).valueOf()},&quot;DenseMatrix, Array | Matrix&quot;:function(e,t){var r=n(e);return c(r.L,r.U,r.p,null,t)},&quot;SparseMatrix, Array | Matrix&quot;:function(e,t){var r=n(e);return c(r.L,r.U,r.p,null,t)},&quot;SparseMatrix, Array | Matrix, number, number&quot;:function(e,t,r,n){var a=i(e,r,n);return c(a.L,a.U,a.p,a.q,t)},&quot;Object, Array | Matrix&quot;:function(e,t){return c(e.L,e.U,e.p,e.q,t)}});function s(e){if(l(e))return e;if(f(e))return r(e);throw new TypeError(&quot;Invalid Matrix LU decomposition&quot;)}function c(e,t,r,n,i){e=s(e),t=s(t),r&amp;&amp;((i=u(e,i,!0))._data=Em(r,i._data));var c=o(e,i),f=a(t,c);return n&amp;&amp;(f._data=Em(n,f._data)),f}})),Cm=&quot;polynomialRoot&quot;,Mm=Ee(Cm,[&quot;typed&quot;,&quot;isZero&quot;,&quot;equalScalar&quot;,&quot;add&quot;,&quot;subtract&quot;,&quot;multiply&quot;,&quot;divide&quot;,&quot;sqrt&quot;,&quot;unaryMinus&quot;,&quot;cbrt&quot;,&quot;typeOf&quot;,&quot;im&quot;,&quot;re&quot;],(function(e){var t=e.typed,r=e.isZero,n=e.equalScalar,i=e.add,a=e.subtract,o=e.multiply,u=e.divide,s=e.sqrt,c=e.unaryMinus,f=e.cbrt,l=e.typeOf,p=e.im,m=e.re;return t(Cm,{&quot;number|Complex, ...number|Complex&quot;:function(e,t){for(var h=[e].concat(_a(t));h.length&gt;0&amp;&amp;r(h[h.length-1]);)h.pop();if(h.length&lt;2)throw new RangeError(&quot;Polynomial [&quot;.concat(e,&quot;, &quot;).concat(t,&quot;] must have a non-zero non-constant coefficient&quot;));switch(h.length){case 2:return[c(u(h[0],h[1]))];case 3:var d=la(h,3),v=d[0],y=d[1],g=d[2],x=o(2,g),b=o(y,y),w=o(4,g,v);if(n(b,w))return[u(c(y),x)];var N=s(a(b,w));return[u(a(N,y),x),u(a(c(N),y),x)];case 4:var D=la(h,4),E=D[0],A=D[1],S=D[2],C=D[3],M=c(o(3,C)),F=o(S,S),O=o(3,C,A),T=i(o(2,S,S,S),o(27,C,C,E)),B=o(9,C,S,A);if(n(F,O)&amp;&amp;n(T,B))return[u(S,M)];var _,k=a(F,O),I=a(T,B),R=i(o(18,C,S,A,E),o(S,S,A,A)),z=i(o(4,S,S,S,E),o(4,C,A,A,A),o(27,C,C,E,E));return n(R,z)?[u(a(o(4,C,S,A),i(o(9,C,C,E),o(S,S,S))),o(C,k)),u(a(o(9,C,E),o(S,A)),o(2,k))]:(_=n(F,O)?I:u(i(I,s(a(o(I,I),o(4,k,k,k)))),2),f(_,!0).toArray().map((function(e){return u(i(S,e,u(k,e)),M)})).map((function(e){return&quot;Complex&quot;===l(e)&amp;&amp;n(m(e),m(e)+p(e))?m(e):e})));default:throw new RangeError(&quot;only implemented for cubic or lower-order polynomials, not &quot;.concat(h))}}})})),Fm=Ee(&quot;Help&quot;,[&quot;parse&quot;],(function(e){var t=e.parse;function r(e){if(!(this instanceof r))throw new SyntaxError(&quot;Constructor must be called with the new operator&quot;);if(!e)throw new Error('Argument &quot;doc&quot; missing');this.doc=e}return r.prototype.type=&quot;Help&quot;,r.prototype.isHelp=!0,r.prototype.toString=function(){var e=this.doc||{},r=&quot;\sn&quot;;if(e.name&amp;&amp;(r+=&quot;Name: &quot;+e.name+&quot;\sn\sn&quot;),e.category&amp;&amp;(r+=&quot;Category: &quot;+e.category+&quot;\sn\sn&quot;),e.description&amp;&amp;(r+=&quot;Description:\sn    &quot;+e.description+&quot;\sn\sn&quot;),e.syntax&amp;&amp;(r+=&quot;Syntax:\sn    &quot;+e.syntax.join(&quot;\sn    &quot;)+&quot;\sn\sn&quot;),e.examples){r+=&quot;Examples:\sn&quot;;for(var n={},i=0;i&lt;e.examples.length;i++){var a=e.examples[i];r+=&quot;    &quot;+a+&quot;\sn&quot;;var o=void 0;try{o=t(a).compile().evaluate(n)}catch(e){o=e}void 0===o||x(o)||(r+=&quot;        &quot;+Vr(o,{precision:14})+&quot;\sn&quot;)}r+=&quot;\sn&quot;}return e.mayThrow&amp;&amp;e.mayThrow.length&amp;&amp;(r+=&quot;Throws: &quot;+e.mayThrow.join(&quot;, &quot;)+&quot;\sn\sn&quot;),e.seealso&amp;&amp;e.seealso.length&amp;&amp;(r+=&quot;See also: &quot;+e.seealso.join(&quot;, &quot;)+&quot;\sn&quot;),r},r.prototype.toJSON=function(){var e=he(this.doc);return e.mathjs=&quot;Help&quot;,e},r.fromJSON=function(e){var t={};return Object.keys(e).filter((function(e){return&quot;mathjs&quot;!==e})).forEach((function(r){t[r]=e[r]})),new r(t)},r.prototype.valueOf=r.prototype.toString,r}),{isClass:!0}),Om=Ee(&quot;Chain&quot;,[&quot;?on&quot;,&quot;math&quot;,&quot;typed&quot;],(function(e){var t=e.on,r=e.math,n=e.typed;function i(e){if(!(this instanceof i))throw new SyntaxError(&quot;Constructor must be called with the new operator&quot;);$(e)?this.value=e.value:this.value=e}function a(e,t){we(i.prototype,e,(function(){var e=t();if(&quot;function&quot;==typeof e)return o(e)}))}function o(e){return function(){if(0===arguments.length)return new i(e(this.value));for(var t=[this.value],r=0;r&lt;arguments.length;r++)t[r+1]=arguments[r];if(n.isTypedFunction(e)){var a=n.resolve(e,t);if(1===a.params.length)throw new Error(&quot;chain function &quot;+e.name+&quot; cannot match rest parameter between chain value and additional arguments.&quot;);return new i(a.implementation.apply(e,t))}return new i(e.apply(e,t))}}i.prototype.type=&quot;Chain&quot;,i.prototype.isChain=!0,i.prototype.done=function(){return this.value},i.prototype.valueOf=function(){return this.value},i.prototype.toString=function(){return Vr(this.value)},i.prototype.toJSON=function(){return{mathjs:&quot;Chain&quot;,value:this.value}},i.fromJSON=function(e){return new i(e.value)},i.createProxy=function(e,t){if(&quot;string&quot;==typeof e)s=e,&quot;function&quot;==typeof(c=t)&amp;&amp;(i.prototype[s]=o(c));else{var r=function(t){Ne(e,t)&amp;&amp;void 0===u[t]&amp;&amp;a(t,(function(){return e[t]}))};for(var n in e)r(n)}var s,c};var u={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return i.createProxy(r),t&amp;&amp;t(&quot;import&quot;,(function(e,t,r){r||a(e,t)})),i}),{isClass:!0}),Tm={name:&quot;e&quot;,category:&quot;Constants&quot;,syntax:[&quot;e&quot;],description:&quot;Euler's number, the base of the natural logarithm. Approximately equal to 2.71828&quot;,examples:[&quot;e&quot;,&quot;e ^ 2&quot;,&quot;exp(2)&quot;,&quot;log(e)&quot;],seealso:[&quot;exp&quot;]},Bm={name:&quot;pi&quot;,category:&quot;Constants&quot;,syntax:[&quot;pi&quot;],description:&quot;The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159&quot;,examples:[&quot;pi&quot;,&quot;sin(pi/2)&quot;],seealso:[&quot;tau&quot;]},_m={bignumber:{name:&quot;bignumber&quot;,category:&quot;Construction&quot;,syntax:[&quot;bignumber(x)&quot;],description:&quot;Create a big number from a number or string.&quot;,examples:[&quot;0.1 + 0.2&quot;,&quot;bignumber(0.1) + bignumber(0.2)&quot;,'bignumber(&quot;7.2&quot;)','bignumber(&quot;7.2e500&quot;)',&quot;bignumber([0.1, 0.2, 0.3])&quot;],seealso:[&quot;boolean&quot;,&quot;complex&quot;,&quot;fraction&quot;,&quot;index&quot;,&quot;matrix&quot;,&quot;string&quot;,&quot;unit&quot;]},boolean:{name:&quot;boolean&quot;,category:&quot;Construction&quot;,syntax:[&quot;x&quot;,&quot;boolean(x)&quot;],description:&quot;Convert a string or number into a boolean.&quot;,examples:[&quot;boolean(0)&quot;,&quot;boolean(1)&quot;,&quot;boolean(3)&quot;,'boolean(&quot;true&quot;)','boolean(&quot;false&quot;)',&quot;boolean([1, 0, 1, 1])&quot;],seealso:[&quot;bignumber&quot;,&quot;complex&quot;,&quot;index&quot;,&quot;matrix&quot;,&quot;number&quot;,&quot;string&quot;,&quot;unit&quot;]},complex:{name:&quot;complex&quot;,category:&quot;Construction&quot;,syntax:[&quot;complex()&quot;,&quot;complex(re, im)&quot;,&quot;complex(string)&quot;],description:&quot;Create a complex number.&quot;,examples:[&quot;complex()&quot;,&quot;complex(2, 3)&quot;,'complex(&quot;7 - 2i&quot;)'],seealso:[&quot;bignumber&quot;,&quot;boolean&quot;,&quot;index&quot;,&quot;matrix&quot;,&quot;number&quot;,&quot;string&quot;,&quot;unit&quot;]},createUnit:{name:&quot;createUnit&quot;,category:&quot;Construction&quot;,syntax:[&quot;createUnit(definitions)&quot;,&quot;createUnit(name, definition)&quot;],description:&quot;Create a user-defined unit and register it with the Unit type.&quot;,examples:['createUnit(&quot;foo&quot;)','createUnit(&quot;knot&quot;, {definition: &quot;0.514444444 m/s&quot;, aliases: [&quot;knots&quot;, &quot;kt&quot;, &quot;kts&quot;]})','createUnit(&quot;mph&quot;, &quot;1 mile/hour&quot;)'],seealso:[&quot;unit&quot;,&quot;splitUnit&quot;]},fraction:{name:&quot;fraction&quot;,category:&quot;Construction&quot;,syntax:[&quot;fraction(num)&quot;,&quot;fraction(matrix)&quot;,&quot;fraction(num,den)&quot;,&quot;fraction({n: num, d: den})&quot;],description:&quot;Create a fraction from a number or from integer numerator and denominator.&quot;,examples:[&quot;fraction(0.125)&quot;,&quot;fraction(1, 3) + fraction(2, 5)&quot;,&quot;fraction({n: 333, d: 53})&quot;,&quot;fraction([sqrt(9), sqrt(10), sqrt(11)])&quot;],seealso:[&quot;bignumber&quot;,&quot;boolean&quot;,&quot;complex&quot;,&quot;index&quot;,&quot;matrix&quot;,&quot;string&quot;,&quot;unit&quot;]},index:{name:&quot;index&quot;,category:&quot;Construction&quot;,syntax:[&quot;[start]&quot;,&quot;[start:end]&quot;,&quot;[start:step:end]&quot;,&quot;[start1, start 2, ...]&quot;,&quot;[start1:end1, start2:end2, ...]&quot;,&quot;[start1:step1:end1, start2:step2:end2, ...]&quot;],description:&quot;Create an index to get or replace a subset of a matrix&quot;,examples:[&quot;[1, 2, 3]&quot;,&quot;A = [1, 2, 3; 4, 5, 6]&quot;,&quot;A[1, :]&quot;,&quot;A[1, 2] = 50&quot;,&quot;A[1:2, 1:2] = ones(2, 2)&quot;],seealso:[&quot;bignumber&quot;,&quot;boolean&quot;,&quot;complex&quot;,&quot;matrix,&quot;,&quot;number&quot;,&quot;range&quot;,&quot;string&quot;,&quot;unit&quot;]},matrix:{name:&quot;matrix&quot;,category:&quot;Construction&quot;,syntax:[&quot;[]&quot;,&quot;[a1, b1, ...; a2, b2, ...]&quot;,&quot;matrix()&quot;,'matrix(&quot;dense&quot;)',&quot;matrix([...])&quot;],description:&quot;Create a matrix.&quot;,examples:[&quot;[]&quot;,&quot;[1, 2, 3]&quot;,&quot;[1, 2, 3; 4, 5, 6]&quot;,&quot;matrix()&quot;,&quot;matrix([3, 4])&quot;,'matrix([3, 4; 5, 6], &quot;sparse&quot;)','matrix([3, 4; 5, 6], &quot;sparse&quot;, &quot;number&quot;)'],seealso:[&quot;bignumber&quot;,&quot;boolean&quot;,&quot;complex&quot;,&quot;index&quot;,&quot;number&quot;,&quot;string&quot;,&quot;unit&quot;,&quot;sparse&quot;]},number:{name:&quot;number&quot;,category:&quot;Construction&quot;,syntax:[&quot;x&quot;,&quot;number(x)&quot;,&quot;number(unit, valuelessUnit)&quot;],description:&quot;Create a number or convert a string or boolean into a number.&quot;,examples:[&quot;2&quot;,&quot;2e3&quot;,&quot;4.05&quot;,&quot;number(2)&quot;,'number(&quot;7.2&quot;)',&quot;number(true)&quot;,&quot;number([true, false, true, true])&quot;,'number(unit(&quot;52cm&quot;), &quot;m&quot;)'],seealso:[&quot;bignumber&quot;,&quot;boolean&quot;,&quot;complex&quot;,&quot;fraction&quot;,&quot;index&quot;,&quot;matrix&quot;,&quot;string&quot;,&quot;unit&quot;]},sparse:{name:&quot;sparse&quot;,category:&quot;Construction&quot;,syntax:[&quot;sparse()&quot;,&quot;sparse([a1, b1, ...; a1, b2, ...])&quot;,'sparse([a1, b1, ...; a1, b2, ...], &quot;number&quot;)'],description:&quot;Create a sparse matrix.&quot;,examples:[&quot;sparse()&quot;,&quot;sparse([3, 4; 5, 6])&quot;,'sparse([3, 0; 5, 0], &quot;number&quot;)'],seealso:[&quot;bignumber&quot;,&quot;boolean&quot;,&quot;complex&quot;,&quot;index&quot;,&quot;number&quot;,&quot;string&quot;,&quot;unit&quot;,&quot;matrix&quot;]},splitUnit:{name:&quot;splitUnit&quot;,category:&quot;Construction&quot;,syntax:[&quot;splitUnit(unit: Unit, parts: Unit[])&quot;],description:&quot;Split a unit in an array of units whose sum is equal to the original unit.&quot;,examples:['splitUnit(1 m, [&quot;feet&quot;, &quot;inch&quot;])'],seealso:[&quot;unit&quot;,&quot;createUnit&quot;]},string:{name:&quot;string&quot;,category:&quot;Construction&quot;,syntax:['&quot;text&quot;',&quot;string(x)&quot;],description:&quot;Create a string or convert a value to a string&quot;,examples:['&quot;Hello World!&quot;',&quot;string(4.2)&quot;,&quot;string(3 + 2i)&quot;],seealso:[&quot;bignumber&quot;,&quot;boolean&quot;,&quot;complex&quot;,&quot;index&quot;,&quot;matrix&quot;,&quot;number&quot;,&quot;unit&quot;]},unit:{name:&quot;unit&quot;,category:&quot;Construction&quot;,syntax:[&quot;value unit&quot;,&quot;unit(value, unit)&quot;,&quot;unit(string)&quot;],description:&quot;Create a unit.&quot;,examples:[&quot;5.5 mm&quot;,&quot;3 inch&quot;,'unit(7.1, &quot;kilogram&quot;)','unit(&quot;23 deg&quot;)'],seealso:[&quot;bignumber&quot;,&quot;boolean&quot;,&quot;complex&quot;,&quot;index&quot;,&quot;matrix&quot;,&quot;number&quot;,&quot;string&quot;]},e:Tm,E:Tm,false:{name:&quot;false&quot;,category:&quot;Constants&quot;,syntax:[&quot;false&quot;],description:&quot;Boolean value false&quot;,examples:[&quot;false&quot;],seealso:[&quot;true&quot;]},i:{name:&quot;i&quot;,category:&quot;Constants&quot;,syntax:[&quot;i&quot;],description:&quot;Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.&quot;,examples:[&quot;i&quot;,&quot;i * i&quot;,&quot;sqrt(-1)&quot;],seealso:[]},Infinity:{name:&quot;Infinity&quot;,category:&quot;Constants&quot;,syntax:[&quot;Infinity&quot;],description:&quot;Infinity, a number which is larger than the maximum number that can be handled by a floating point number.&quot;,examples:[&quot;Infinity&quot;,&quot;1 / 0&quot;],seealso:[]},LN2:{name:&quot;LN2&quot;,category:&quot;Constants&quot;,syntax:[&quot;LN2&quot;],description:&quot;Returns the natural logarithm of 2, approximately equal to 0.693&quot;,examples:[&quot;LN2&quot;,&quot;log(2)&quot;],seealso:[]},LN10:{name:&quot;LN10&quot;,category:&quot;Constants&quot;,syntax:[&quot;LN10&quot;],description:&quot;Returns the natural logarithm of 10, approximately equal to 2.302&quot;,examples:[&quot;LN10&quot;,&quot;log(10)&quot;],seealso:[]},LOG2E:{name:&quot;LOG2E&quot;,category:&quot;Constants&quot;,syntax:[&quot;LOG2E&quot;],description:&quot;Returns the base-2 logarithm of E, approximately equal to 1.442&quot;,examples:[&quot;LOG2E&quot;,&quot;log(e, 2)&quot;],seealso:[]},LOG10E:{name:&quot;LOG10E&quot;,category:&quot;Constants&quot;,syntax:[&quot;LOG10E&quot;],description:&quot;Returns the base-10 logarithm of E, approximately equal to 0.434&quot;,examples:[&quot;LOG10E&quot;,&quot;log(e, 10)&quot;],seealso:[]},NaN:{name:&quot;NaN&quot;,category:&quot;Constants&quot;,syntax:[&quot;NaN&quot;],description:&quot;Not a number&quot;,examples:[&quot;NaN&quot;,&quot;0 / 0&quot;],seealso:[]},null:{name:&quot;null&quot;,category:&quot;Constants&quot;,syntax:[&quot;null&quot;],description:&quot;Value null&quot;,examples:[&quot;null&quot;],seealso:[&quot;true&quot;,&quot;false&quot;]},pi:Bm,PI:Bm,phi:{name:&quot;phi&quot;,category:&quot;Constants&quot;,syntax:[&quot;phi&quot;],description:&quot;Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...&quot;,examples:[&quot;phi&quot;],seealso:[]},SQRT1_2:{name:&quot;SQRT1_2&quot;,category:&quot;Constants&quot;,syntax:[&quot;SQRT1_2&quot;],description:&quot;Returns the square root of 1/2, approximately equal to 0.707&quot;,examples:[&quot;SQRT1_2&quot;,&quot;sqrt(1/2)&quot;],seealso:[]},SQRT2:{name:&quot;SQRT2&quot;,category:&quot;Constants&quot;,syntax:[&quot;SQRT2&quot;],description:&quot;Returns the square root of 2, approximately equal to 1.414&quot;,examples:[&quot;SQRT2&quot;,&quot;sqrt(2)&quot;],seealso:[]},tau:{name:&quot;tau&quot;,category:&quot;Constants&quot;,syntax:[&quot;tau&quot;],description:&quot;Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.&quot;,examples:[&quot;tau&quot;,&quot;2 * pi&quot;],seealso:[&quot;pi&quot;]},true:{name:&quot;true&quot;,category:&quot;Constants&quot;,syntax:[&quot;true&quot;],description:&quot;Boolean value true&quot;,examples:[&quot;true&quot;],seealso:[&quot;false&quot;]},version:{name:&quot;version&quot;,category:&quot;Constants&quot;,syntax:[&quot;version&quot;],description:&quot;A string with the version number of math.js&quot;,examples:[&quot;version&quot;],seealso:[]},speedOfLight:{description:&quot;Speed of light in vacuum&quot;,examples:[&quot;speedOfLight&quot;]},gravitationConstant:{description:&quot;Newtonian constant of gravitation&quot;,examples:[&quot;gravitationConstant&quot;]},planckConstant:{description:&quot;Planck constant&quot;,examples:[&quot;planckConstant&quot;]},reducedPlanckConstant:{description:&quot;Reduced Planck constant&quot;,examples:[&quot;reducedPlanckConstant&quot;]},magneticConstant:{description:&quot;Magnetic constant (vacuum permeability)&quot;,examples:[&quot;magneticConstant&quot;]},electricConstant:{description:&quot;Electric constant (vacuum permeability)&quot;,examples:[&quot;electricConstant&quot;]},vacuumImpedance:{description:&quot;Characteristic impedance of vacuum&quot;,examples:[&quot;vacuumImpedance&quot;]},coulomb:{description:&quot;Coulomb's constant&quot;,examples:[&quot;coulomb&quot;]},elementaryCharge:{description:&quot;Elementary charge&quot;,examples:[&quot;elementaryCharge&quot;]},bohrMagneton:{description:&quot;Borh magneton&quot;,examples:[&quot;bohrMagneton&quot;]},conductanceQuantum:{description:&quot;Conductance quantum&quot;,examples:[&quot;conductanceQuantum&quot;]},inverseConductanceQuantum:{description:&quot;Inverse conductance quantum&quot;,examples:[&quot;inverseConductanceQuantum&quot;]},magneticFluxQuantum:{description:&quot;Magnetic flux quantum&quot;,examples:[&quot;magneticFluxQuantum&quot;]},nuclearMagneton:{description:&quot;Nuclear magneton&quot;,examples:[&quot;nuclearMagneton&quot;]},klitzing:{description:&quot;Von Klitzing constant&quot;,examples:[&quot;klitzing&quot;]},bohrRadius:{description:&quot;Borh radius&quot;,examples:[&quot;bohrRadius&quot;]},classicalElectronRadius:{description:&quot;Classical electron radius&quot;,examples:[&quot;classicalElectronRadius&quot;]},electronMass:{description:&quot;Electron mass&quot;,examples:[&quot;electronMass&quot;]},fermiCoupling:{description:&quot;Fermi coupling constant&quot;,examples:[&quot;fermiCoupling&quot;]},fineStructure:{description:&quot;Fine-structure constant&quot;,examples:[&quot;fineStructure&quot;]},hartreeEnergy:{description:&quot;Hartree energy&quot;,examples:[&quot;hartreeEnergy&quot;]},protonMass:{description:&quot;Proton mass&quot;,examples:[&quot;protonMass&quot;]},deuteronMass:{description:&quot;Deuteron Mass&quot;,examples:[&quot;deuteronMass&quot;]},neutronMass:{description:&quot;Neutron mass&quot;,examples:[&quot;neutronMass&quot;]},quantumOfCirculation:{description:&quot;Quantum of circulation&quot;,examples:[&quot;quantumOfCirculation&quot;]},rydberg:{description:&quot;Rydberg constant&quot;,examples:[&quot;rydberg&quot;]},thomsonCrossSection:{description:&quot;Thomson cross section&quot;,examples:[&quot;thomsonCrossSection&quot;]},weakMixingAngle:{description:&quot;Weak mixing angle&quot;,examples:[&quot;weakMixingAngle&quot;]},efimovFactor:{description:&quot;Efimov factor&quot;,examples:[&quot;efimovFactor&quot;]},atomicMass:{description:&quot;Atomic mass constant&quot;,examples:[&quot;atomicMass&quot;]},avogadro:{description:&quot;Avogadro's number&quot;,examples:[&quot;avogadro&quot;]},boltzmann:{description:&quot;Boltzmann constant&quot;,examples:[&quot;boltzmann&quot;]},faraday:{description:&quot;Faraday constant&quot;,examples:[&quot;faraday&quot;]},firstRadiation:{description:&quot;First radiation constant&quot;,examples:[&quot;firstRadiation&quot;]},loschmidt:{description:&quot;Loschmidt constant at T=273.15 K and p=101.325 kPa&quot;,examples:[&quot;loschmidt&quot;]},gasConstant:{description:&quot;Gas constant&quot;,examples:[&quot;gasConstant&quot;]},molarPlanckConstant:{description:&quot;Molar Planck constant&quot;,examples:[&quot;molarPlanckConstant&quot;]},molarVolume:{description:&quot;Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa&quot;,examples:[&quot;molarVolume&quot;]},sackurTetrode:{description:&quot;Sackur-Tetrode constant at T=1 K and p=101.325 kPa&quot;,examples:[&quot;sackurTetrode&quot;]},secondRadiation:{description:&quot;Second radiation constant&quot;,examples:[&quot;secondRadiation&quot;]},stefanBoltzmann:{description:&quot;Stefan-Boltzmann constant&quot;,examples:[&quot;stefanBoltzmann&quot;]},wienDisplacement:{description:&quot;Wien displacement law constant&quot;,examples:[&quot;wienDisplacement&quot;]},molarMass:{description:&quot;Molar mass constant&quot;,examples:[&quot;molarMass&quot;]},molarMassC12:{description:&quot;Molar mass constant of carbon-12&quot;,examples:[&quot;molarMassC12&quot;]},gravity:{description:&quot;Standard acceleration of gravity (standard acceleration of free-fall on Earth)&quot;,examples:[&quot;gravity&quot;]},planckLength:{description:&quot;Planck length&quot;,examples:[&quot;planckLength&quot;]},planckMass:{description:&quot;Planck mass&quot;,examples:[&quot;planckMass&quot;]},planckTime:{description:&quot;Planck time&quot;,examples:[&quot;planckTime&quot;]},planckCharge:{description:&quot;Planck charge&quot;,examples:[&quot;planckCharge&quot;]},planckTemperature:{description:&quot;Planck temperature&quot;,examples:[&quot;planckTemperature&quot;]},derivative:{name:&quot;derivative&quot;,category:&quot;Algebra&quot;,syntax:[&quot;derivative(expr, variable)&quot;,&quot;derivative(expr, variable, {simplify: boolean})&quot;],description:&quot;Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.&quot;,examples:['derivative(&quot;2x^3&quot;, &quot;x&quot;)','derivative(&quot;2x^3&quot;, &quot;x&quot;, {simplify: false})','derivative(&quot;2x^2 + 3x + 4&quot;, &quot;x&quot;)','derivative(&quot;sin(2x)&quot;, &quot;x&quot;)','f = parse(&quot;x^2 + x&quot;)','x = parse(&quot;x&quot;)',&quot;df = derivative(f, x)&quot;,&quot;df.evaluate({x: 3})&quot;],seealso:[&quot;simplify&quot;,&quot;parse&quot;,&quot;evaluate&quot;]},lsolve:{name:&quot;lsolve&quot;,category:&quot;Algebra&quot;,syntax:[&quot;x=lsolve(L, b)&quot;],description:&quot;Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.&quot;,examples:[&quot;a = [-2, 3; 2, 1]&quot;,&quot;b = [11, 9]&quot;,&quot;x = lsolve(a, b)&quot;],seealso:[&quot;lsolveAll&quot;,&quot;lup&quot;,&quot;lusolve&quot;,&quot;usolve&quot;,&quot;matrix&quot;,&quot;sparse&quot;]},lsolveAll:{name:&quot;lsolveAll&quot;,category:&quot;Algebra&quot;,syntax:[&quot;x=lsolveAll(L, b)&quot;],description:&quot;Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.&quot;,examples:[&quot;a = [-2, 3; 2, 1]&quot;,&quot;b = [11, 9]&quot;,&quot;x = lsolve(a, b)&quot;],seealso:[&quot;lsolve&quot;,&quot;lup&quot;,&quot;lusolve&quot;,&quot;usolve&quot;,&quot;matrix&quot;,&quot;sparse&quot;]},lup:{name:&quot;lup&quot;,category:&quot;Algebra&quot;,syntax:[&quot;lup(m)&quot;],description:&quot;Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U&quot;,examples:[&quot;lup([[2, 1], [1, 4]])&quot;,&quot;lup(matrix([[2, 1], [1, 4]]))&quot;,&quot;lup(sparse([[2, 1], [1, 4]]))&quot;],seealso:[&quot;lusolve&quot;,&quot;lsolve&quot;,&quot;usolve&quot;,&quot;matrix&quot;,&quot;sparse&quot;,&quot;slu&quot;,&quot;qr&quot;]},lusolve:{name:&quot;lusolve&quot;,category:&quot;Algebra&quot;,syntax:[&quot;x=lusolve(A, b)&quot;,&quot;x=lusolve(lu, b)&quot;],description:&quot;Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.&quot;,examples:[&quot;a = [-2, 3; 2, 1]&quot;,&quot;b = [11, 9]&quot;,&quot;x = lusolve(a, b)&quot;],seealso:[&quot;lup&quot;,&quot;slu&quot;,&quot;lsolve&quot;,&quot;usolve&quot;,&quot;matrix&quot;,&quot;sparse&quot;]},leafCount:{name:&quot;leafCount&quot;,category:&quot;Algebra&quot;,syntax:[&quot;leafCount(expr)&quot;],description:&quot;Computes the number of leaves in the parse tree of the given expression&quot;,examples:['leafCount(&quot;e^(i*pi)-1&quot;)','leafCount(parse(&quot;{a: 22/7, b: 10^(1/2)}&quot;))'],seealso:[&quot;simplify&quot;]},polynomialRoot:{name:&quot;polynomialRoot&quot;,category:&quot;Algebra&quot;,syntax:[&quot;x=polynomialRoot(-6, 3)&quot;,&quot;x=polynomialRoot(4, -4, 1)&quot;,&quot;x=polynomialRoot(-8, 12, -6, 1)&quot;],description:&quot;Finds the roots of a univariate polynomial given by its coefficients starting from constant, linear, and so on, increasing in degree.&quot;,examples:[&quot;a = polynomialRoot(-6, 11, -6, 1)&quot;],seealso:[&quot;cbrt&quot;,&quot;sqrt&quot;]},resolve:{name:&quot;resolve&quot;,category:&quot;Algebra&quot;,syntax:[&quot;resolve(node, scope)&quot;],description:&quot;Recursively substitute variables in an expression tree.&quot;,examples:['resolve(parse(&quot;1 + x&quot;), { x: 7 })','resolve(parse(&quot;size(text)&quot;), { text: &quot;Hello World&quot; })','resolve(parse(&quot;x + y&quot;), { x: parse(&quot;3z&quot;) })','resolve(parse(&quot;3x&quot;), { x: parse(&quot;y+z&quot;), z: parse(&quot;w^y&quot;) })'],seealso:[&quot;simplify&quot;,&quot;evaluate&quot;],mayThrow:[&quot;ReferenceError&quot;]},simplify:{name:&quot;simplify&quot;,category:&quot;Algebra&quot;,syntax:[&quot;simplify(expr)&quot;,&quot;simplify(expr, rules)&quot;],description:&quot;Simplify an expression tree.&quot;,examples:['simplify(&quot;3 + 2 / 4&quot;)','simplify(&quot;2x + x&quot;)','f = parse(&quot;x * (x + 2 + x)&quot;)',&quot;simplified = simplify(f)&quot;,&quot;simplified.evaluate({x: 2})&quot;],seealso:[&quot;simplifyCore&quot;,&quot;derivative&quot;,&quot;evaluate&quot;,&quot;parse&quot;,&quot;rationalize&quot;,&quot;resolve&quot;]},simplifyConstant:{name:&quot;simplifyConstant&quot;,category:&quot;Algebra&quot;,syntax:[&quot;simplifyConstant(expr)&quot;,&quot;simplifyConstant(expr, options)&quot;],description:&quot;Replace constant subexpressions of node with their values.&quot;,examples:['simplifyConstant(&quot;(3-3)*x&quot;)','simplifyConstant(parse(&quot;z-cos(tau/8)&quot;))'],seealso:[&quot;simplify&quot;,&quot;simplifyCore&quot;,&quot;evaluate&quot;]},simplifyCore:{name:&quot;simplifyCore&quot;,category:&quot;Algebra&quot;,syntax:[&quot;simplifyCore(node)&quot;],description:&quot;Perform simple one-pass simplifications on an expression tree.&quot;,examples:['simplifyCore(parse(&quot;0*x&quot;))','simplifyCore(parse(&quot;(x+0)*2&quot;))'],seealso:[&quot;simplify&quot;,&quot;simplifyConstant&quot;,&quot;evaluate&quot;]},symbolicEqual:{name:&quot;symbolicEqual&quot;,category:&quot;Algebra&quot;,syntax:[&quot;symbolicEqual(expr1, expr2)&quot;,&quot;symbolicEqual(expr1, expr2, options)&quot;],description:&quot;Returns true if the difference of the expressions simplifies to 0&quot;,examples:['symbolicEqual(&quot;x*y&quot;,&quot;y*x&quot;)','symbolicEqual(&quot;abs(x^2)&quot;, &quot;x^2&quot;)','symbolicEqual(&quot;abs(x)&quot;, &quot;x&quot;, {context: {abs: {trivial: true}}})'],seealso:[&quot;simplify&quot;,&quot;evaluate&quot;]},rationalize:{name:&quot;rationalize&quot;,category:&quot;Algebra&quot;,syntax:[&quot;rationalize(expr)&quot;,&quot;rationalize(expr, scope)&quot;,&quot;rationalize(expr, scope, detailed)&quot;],description:&quot;Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.&quot;,examples:['rationalize(&quot;2x/y - y/(x+1)&quot;)','rationalize(&quot;2x/y - y/(x+1)&quot;, true)'],seealso:[&quot;simplify&quot;]},slu:{name:&quot;slu&quot;,category:&quot;Algebra&quot;,syntax:[&quot;slu(A, order, threshold)&quot;],description:&quot;Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U&quot;,examples:[&quot;slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)&quot;],seealso:[&quot;lusolve&quot;,&quot;lsolve&quot;,&quot;usolve&quot;,&quot;matrix&quot;,&quot;sparse&quot;,&quot;lup&quot;,&quot;qr&quot;]},usolve:{name:&quot;usolve&quot;,category:&quot;Algebra&quot;,syntax:[&quot;x=usolve(U, b)&quot;],description:&quot;Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.&quot;,examples:[&quot;x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])&quot;],seealso:[&quot;usolveAll&quot;,&quot;lup&quot;,&quot;lusolve&quot;,&quot;lsolve&quot;,&quot;matrix&quot;,&quot;sparse&quot;]},usolveAll:{name:&quot;usolveAll&quot;,category:&quot;Algebra&quot;,syntax:[&quot;x=usolve(U, b)&quot;],description:&quot;Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.&quot;,examples:[&quot;x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])&quot;],seealso:[&quot;usolve&quot;,&quot;lup&quot;,&quot;lusolve&quot;,&quot;lsolve&quot;,&quot;matrix&quot;,&quot;sparse&quot;]},qr:{name:&quot;qr&quot;,category:&quot;Algebra&quot;,syntax:[&quot;qr(A)&quot;],description:&quot;Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.&quot;,examples:[&quot;qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])&quot;],seealso:[&quot;lup&quot;,&quot;slu&quot;,&quot;matrix&quot;]},abs:{name:&quot;abs&quot;,category:&quot;Arithmetic&quot;,syntax:[&quot;abs(x)&quot;],description:&quot;Compute the absolute value.&quot;,examples:[&quot;abs(3.5)&quot;,&quot;abs(-4.2)&quot;],seealso:[&quot;sign&quot;]},add:{name:&quot;add&quot;,category:&quot;Operators&quot;,syntax:[&quot;x + y&quot;,&quot;add(x, y)&quot;],description:&quot;Add two values.&quot;,examples:[&quot;a = 2.1 + 3.6&quot;,&quot;a - 3.6&quot;,&quot;3 + 2i&quot;,&quot;3 cm + 2 inch&quot;,'&quot;2.3&quot; + &quot;4&quot;'],seealso:[&quot;subtract&quot;]},cbrt:{name:&quot;cbrt&quot;,category:&quot;Arithmetic&quot;,syntax:[&quot;cbrt(x)&quot;,&quot;cbrt(x, allRoots)&quot;],description:&quot;Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned&quot;,examples:[&quot;cbrt(64)&quot;,&quot;cube(4)&quot;,&quot;cbrt(-8)&quot;,&quot;cbrt(2 + 3i)&quot;,&quot;cbrt(8i)&quot;,&quot;cbrt(8i, true)&quot;,&quot;cbrt(27 m^3)&quot;],seealso:[&quot;square&quot;,&quot;sqrt&quot;,&quot;cube&quot;,&quot;multiply&quot;]},ceil:{name:&quot;ceil&quot;,category:&quot;Arithmetic&quot;,syntax:[&quot;ceil(x)&quot;],description:&quot;Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.&quot;,examples:[&quot;ceil(3.2)&quot;,&quot;ceil(3.8)&quot;,&quot;ceil(-4.2)&quot;],seealso:[&quot;floor&quot;,&quot;fix&quot;,&quot;round&quot;]},cube:{name:&quot;cube&quot;,category:&quot;Arithmetic&quot;,syntax:[&quot;cube(x)&quot;],description:&quot;Compute the cube of a value. The cube of x is x * x * x.&quot;,examples:[&quot;cube(2)&quot;,&quot;2^3&quot;,&quot;2 * 2 * 2&quot;],seealso:[&quot;multiply&quot;,&quot;square&quot;,&quot;pow&quot;]},divide:{name:&quot;divide&quot;,category:&quot;Operators&quot;,syntax:[&quot;x / y&quot;,&quot;divide(x, y)&quot;],description:&quot;Divide two values.&quot;,examples:[&quot;a = 2 / 3&quot;,&quot;a * 3&quot;,&quot;4.5 / 2&quot;,&quot;3 + 4 / 2&quot;,&quot;(3 + 4) / 2&quot;,&quot;18 km / 4.5&quot;],seealso:[&quot;multiply&quot;]},dotDivide:{name:&quot;dotDivide&quot;,category:&quot;Operators&quot;,syntax:[&quot;x ./ y&quot;,&quot;dotDivide(x, y)&quot;],description:&quot;Divide two values element wise.&quot;,examples:[&quot;a = [1, 2, 3; 4, 5, 6]&quot;,&quot;b = [2, 1, 1; 3, 2, 5]&quot;,&quot;a ./ b&quot;],seealso:[&quot;multiply&quot;,&quot;dotMultiply&quot;,&quot;divide&quot;]},dotMultiply:{name:&quot;dotMultiply&quot;,category:&quot;Operators&quot;,syntax:[&quot;x .* y&quot;,&quot;dotMultiply(x, y)&quot;],description:&quot;Multiply two values element wise.&quot;,examples:[&quot;a = [1, 2, 3; 4, 5, 6]&quot;,&quot;b = [2, 1, 1; 3, 2, 5]&quot;,&quot;a .* b&quot;],seealso:[&quot;multiply&quot;,&quot;divide&quot;,&quot;dotDivide&quot;]},dotPow:{name:&quot;dotPow&quot;,category:&quot;Operators&quot;,syntax:[&quot;x .^ y&quot;,&quot;dotPow(x, y)&quot;],description:&quot;Calculates the power of x to y element wise.&quot;,examples:[&quot;a = [1, 2, 3; 4, 5, 6]&quot;,&quot;a .^ 2&quot;],seealso:[&quot;pow&quot;]},exp:{name:&quot;exp&quot;,category:&quot;Arithmetic&quot;,syntax:[&quot;exp(x)&quot;],description:&quot;Calculate the exponent of a value.&quot;,examples:[&quot;exp(1.3)&quot;,&quot;e ^ 1.3&quot;,&quot;log(exp(1.3))&quot;,&quot;x = 2.4&quot;,&quot;(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula&quot;],seealso:[&quot;expm&quot;,&quot;expm1&quot;,&quot;pow&quot;,&quot;log&quot;]},expm:{name:&quot;expm&quot;,category:&quot;Arithmetic&quot;,syntax:[&quot;exp(x)&quot;],description:&quot;Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.&quot;,examples:[&quot;expm([[0,2],[0,0]])&quot;],seealso:[&quot;exp&quot;]},expm1:{name:&quot;expm1&quot;,category:&quot;Arithmetic&quot;,syntax:[&quot;expm1(x)&quot;],description:&quot;Calculate the value of subtracting 1 from the exponential value.&quot;,examples:[&quot;expm1(2)&quot;,&quot;pow(e, 2) - 1&quot;,&quot;log(expm1(2) + 1)&quot;],seealso:[&quot;exp&quot;,&quot;pow&quot;,&quot;log&quot;]},fix:{name:&quot;fix&quot;,category:&quot;Arithmetic&quot;,syntax:[&quot;fix(x)&quot;],description:&quot;Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.&quot;,examples:[&quot;fix(3.2)&quot;,&quot;fix(3.8)&quot;,&quot;fix(-4.2)&quot;,&quot;fix(-4.8)&quot;],seealso:[&quot;ceil&quot;,&quot;floor&quot;,&quot;round&quot;]},floor:{name:&quot;floor&quot;,category:&quot;Arithmetic&quot;,syntax:[&quot;floor(x)&quot;],description:&quot;Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.&quot;,examples:[&quot;floor(3.2)&quot;,&quot;floor(3.8)&quot;,&quot;floor(-4.2)&quot;],seealso:[&quot;ceil&quot;,&quot;fix&quot;,&quot;round&quot;]},gcd:{name:&quot;gcd&quot;,category:&quot;Arithmetic&quot;,syntax:[&quot;gcd(a, b)&quot;,&quot;gcd(a, b, c, ...)&quot;],description:&quot;Compute the greatest common divisor.&quot;,examples:[&quot;gcd(8, 12)&quot;,&quot;gcd(-4, 6)&quot;,&quot;gcd(25, 15, -10)&quot;],seealso:[&quot;lcm&quot;,&quot;xgcd&quot;]},hypot:{name:&quot;hypot&quot;,category:&quot;Arithmetic&quot;,syntax:[&quot;hypot(a, b, c, ...)&quot;,&quot;hypot([a, b, c, ...])&quot;],description:&quot;Calculate the hypotenusa of a list with values. &quot;,examples:[&quot;hypot(3, 4)&quot;,&quot;sqrt(3^2 + 4^2)&quot;,&quot;hypot(-2)&quot;,&quot;hypot([3, 4, 5])&quot;],seealso:[&quot;abs&quot;,&quot;norm&quot;]},lcm:{name:&quot;lcm&quot;,category:&quot;Arithmetic&quot;,syntax:[&quot;lcm(x, y)&quot;],description:&quot;Compute the least common multiple.&quot;,examples:[&quot;lcm(4, 6)&quot;,&quot;lcm(6, 21)&quot;,&quot;lcm(6, 21, 5)&quot;],seealso:[&quot;gcd&quot;]},log:{name:&quot;log&quot;,category:&quot;Arithmetic&quot;,syntax:[&quot;log(x)&quot;,&quot;log(x, base)&quot;],description:&quot;Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).&quot;,examples:[&quot;log(3.5)&quot;,&quot;a = log(2.4)&quot;,&quot;exp(a)&quot;,&quot;10 ^ 4&quot;,&quot;log(10000, 10)&quot;,&quot;log(10000) / log(10)&quot;,&quot;b = log(1024, 2)&quot;,&quot;2 ^ b&quot;],seealso:[&quot;exp&quot;,&quot;log1p&quot;,&quot;log2&quot;,&quot;log10&quot;]},log2:{name:&quot;log2&quot;,category:&quot;Arithmetic&quot;,syntax:[&quot;log2(x)&quot;],description:&quot;Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.&quot;,examples:[&quot;log2(0.03125)&quot;,&quot;log2(16)&quot;,&quot;log2(16) / log2(2)&quot;,&quot;pow(2, 4)&quot;],seealso:[&quot;exp&quot;,&quot;log1p&quot;,&quot;log&quot;,&quot;log10&quot;]},log1p:{name:&quot;log1p&quot;,category:&quot;Arithmetic&quot;,syntax:[&quot;log1p(x)&quot;,&quot;log1p(x, base)&quot;],description:&quot;Calculate the logarithm of a `value+1`&quot;,examples:[&quot;log1p(2.5)&quot;,&quot;exp(log1p(1.4))&quot;,&quot;pow(10, 4)&quot;,&quot;log1p(9999, 10)&quot;,&quot;log1p(9999) / log(10)&quot;],seealso:[&quot;exp&quot;,&quot;log&quot;,&quot;log2&quot;,&quot;log10&quot;]},log10:{name:&quot;log10&quot;,category:&quot;Arithmetic&quot;,syntax:[&quot;log10(x)&quot;],description:&quot;Compute the 10-base logarithm of a value.&quot;,examples:[&quot;log10(0.00001)&quot;,&quot;log10(10000)&quot;,&quot;10 ^ 4&quot;,&quot;log(10000) / log(10)&quot;,&quot;log(10000, 10)&quot;],seealso:[&quot;exp&quot;,&quot;log&quot;]},mod:{name:&quot;mod&quot;,category:&quot;Operators&quot;,syntax:[&quot;x % y&quot;,&quot;x mod y&quot;,&quot;mod(x, y)&quot;],description:&quot;Calculates the modulus, the remainder of an integer division.&quot;,examples:[&quot;7 % 3&quot;,&quot;11 % 2&quot;,&quot;10 mod 4&quot;,&quot;isOdd(x) = x % 2&quot;,&quot;isOdd(2)&quot;,&quot;isOdd(3)&quot;],seealso:[&quot;divide&quot;]},multiply:{name:&quot;multiply&quot;,category:&quot;Operators&quot;,syntax:[&quot;x * y&quot;,&quot;multiply(x, y)&quot;],description:&quot;multiply two values.&quot;,examples:[&quot;a = 2.1 * 3.4&quot;,&quot;a / 3.4&quot;,&quot;2 * 3 + 4&quot;,&quot;2 * (3 + 4)&quot;,&quot;3 * 2.1 km&quot;],seealso:[&quot;divide&quot;]},norm:{name:&quot;norm&quot;,category:&quot;Arithmetic&quot;,syntax:[&quot;norm(x)&quot;,&quot;norm(x, p)&quot;],description:&quot;Calculate the norm of a number, vector or matrix.&quot;,examples:[&quot;abs(-3.5)&quot;,&quot;norm(-3.5)&quot;,&quot;norm(3 - 4i)&quot;,&quot;norm([1, 2, -3], Infinity)&quot;,&quot;norm([1, 2, -3], -Infinity)&quot;,&quot;norm([3, 4], 2)&quot;,&quot;norm([[1, 2], [3, 4]], 1)&quot;,'norm([[1, 2], [3, 4]], &quot;inf&quot;)','norm([[1, 2], [3, 4]], &quot;fro&quot;)']},nthRoot:{name:&quot;nthRoot&quot;,category:&quot;Arithmetic&quot;,syntax:[&quot;nthRoot(a)&quot;,&quot;nthRoot(a, root)&quot;],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation &quot;x^root = A&quot;.',examples:[&quot;4 ^ 3&quot;,&quot;nthRoot(64, 3)&quot;,&quot;nthRoot(9, 2)&quot;,&quot;sqrt(9)&quot;],seealso:[&quot;nthRoots&quot;,&quot;pow&quot;,&quot;sqrt&quot;]},nthRoots:{name:&quot;nthRoots&quot;,category:&quot;Arithmetic&quot;,syntax:[&quot;nthRoots(A)&quot;,&quot;nthRoots(A, root)&quot;],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation &quot;x^root = A&quot;. This function returns an array of complex values.',examples:[&quot;nthRoots(1)&quot;,&quot;nthRoots(1, 3)&quot;],seealso:[&quot;sqrt&quot;,&quot;pow&quot;,&quot;nthRoot&quot;]},pow:{name:&quot;pow&quot;,category:&quot;Operators&quot;,syntax:[&quot;x ^ y&quot;,&quot;pow(x, y)&quot;],description:&quot;Calculates the power of x to y, x^y.&quot;,examples:[&quot;2^3&quot;,&quot;2*2*2&quot;,&quot;1 + e ^ (pi * i)&quot;,&quot;pow([[1, 2], [4, 3]], 2)&quot;,&quot;pow([[1, 2], [4, 3]], -1)&quot;],seealso:[&quot;multiply&quot;,&quot;nthRoot&quot;,&quot;nthRoots&quot;,&quot;sqrt&quot;]},round:{name:&quot;round&quot;,category:&quot;Arithmetic&quot;,syntax:[&quot;round(x)&quot;,&quot;round(x, n)&quot;],description:&quot;round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.&quot;,examples:[&quot;round(3.2)&quot;,&quot;round(3.8)&quot;,&quot;round(-4.2)&quot;,&quot;round(-4.8)&quot;,&quot;round(pi, 3)&quot;,&quot;round(123.45678, 2)&quot;],seealso:[&quot;ceil&quot;,&quot;floor&quot;,&quot;fix&quot;]},sign:{name:&quot;sign&quot;,category:&quot;Arithmetic&quot;,syntax:[&quot;sign(x)&quot;],description:&quot;Compute the sign of a value. The sign of a value x is 1 when x&gt;1, -1 when x&lt;0, and 0 when x=0.&quot;,examples:[&quot;sign(3.5)&quot;,&quot;sign(-4.2)&quot;,&quot;sign(0)&quot;],seealso:[&quot;abs&quot;]},sqrt:{name:&quot;sqrt&quot;,category:&quot;Arithmetic&quot;,syntax:[&quot;sqrt(x)&quot;],description:&quot;Compute the square root value. If x = y * y, then y is the square root of x.&quot;,examples:[&quot;sqrt(25)&quot;,&quot;5 * 5&quot;,&quot;sqrt(-1)&quot;],seealso:[&quot;square&quot;,&quot;sqrtm&quot;,&quot;multiply&quot;,&quot;nthRoot&quot;,&quot;nthRoots&quot;,&quot;pow&quot;]},sqrtm:{name:&quot;sqrtm&quot;,category:&quot;Arithmetic&quot;,syntax:[&quot;sqrtm(x)&quot;],description:&quot;Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.&quot;,examples:[&quot;sqrtm([[33, 24], [48, 57]])&quot;],seealso:[&quot;sqrt&quot;,&quot;abs&quot;,&quot;square&quot;,&quot;multiply&quot;]},square:{name:&quot;square&quot;,category:&quot;Arithmetic&quot;,syntax:[&quot;square(x)&quot;],description:&quot;Compute the square of a value. The square of x is x * x.&quot;,examples:[&quot;square(3)&quot;,&quot;sqrt(9)&quot;,&quot;3^2&quot;,&quot;3 * 3&quot;],seealso:[&quot;multiply&quot;,&quot;pow&quot;,&quot;sqrt&quot;,&quot;cube&quot;]},subtract:{name:&quot;subtract&quot;,category:&quot;Operators&quot;,syntax:[&quot;x - y&quot;,&quot;subtract(x, y)&quot;],description:&quot;subtract two values.&quot;,examples:[&quot;a = 5.3 - 2&quot;,&quot;a + 2&quot;,&quot;2/3 - 1/6&quot;,&quot;2 * 3 - 3&quot;,&quot;2.1 km - 500m&quot;],seealso:[&quot;add&quot;]},unaryMinus:{name:&quot;unaryMinus&quot;,category:&quot;Operators&quot;,syntax:[&quot;-x&quot;,&quot;unaryMinus(x)&quot;],description:&quot;Inverse the sign of a value. Converts booleans and strings to numbers.&quot;,examples:[&quot;-4.5&quot;,&quot;-(-5.6)&quot;,'-&quot;22&quot;'],seealso:[&quot;add&quot;,&quot;subtract&quot;,&quot;unaryPlus&quot;]},unaryPlus:{name:&quot;unaryPlus&quot;,category:&quot;Operators&quot;,syntax:[&quot;+x&quot;,&quot;unaryPlus(x)&quot;],description:&quot;Converts booleans and strings to numbers.&quot;,examples:[&quot;+true&quot;,'+&quot;2&quot;'],seealso:[&quot;add&quot;,&quot;subtract&quot;,&quot;unaryMinus&quot;]},xgcd:{name:&quot;xgcd&quot;,category:&quot;Arithmetic&quot;,syntax:[&quot;xgcd(a, b)&quot;],description:&quot;Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.&quot;,examples:[&quot;xgcd(8, 12)&quot;,&quot;gcd(8, 12)&quot;,&quot;xgcd(36163, 21199)&quot;],seealso:[&quot;gcd&quot;,&quot;lcm&quot;]},invmod:{name:&quot;invmod&quot;,category:&quot;Arithmetic&quot;,syntax:[&quot;invmod(a, b)&quot;],description:&quot;Calculate the (modular) multiplicative inverse of a modulo b. Solution to the equation ax ≣ 1 (mod b)&quot;,examples:[&quot;invmod(8, 12)&quot;,&quot;invmod(7, 13)&quot;,&quot;invmod(15151, 15122)&quot;],seealso:[&quot;gcd&quot;,&quot;xgcd&quot;]},bitAnd:{name:&quot;bitAnd&quot;,category:&quot;Bitwise&quot;,syntax:[&quot;x &amp; y&quot;,&quot;bitAnd(x, y)&quot;],description:&quot;Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0&quot;,examples:[&quot;5 &amp; 3&quot;,&quot;bitAnd(53, 131)&quot;,&quot;[1, 12, 31] &amp; 42&quot;],seealso:[&quot;bitNot&quot;,&quot;bitOr&quot;,&quot;bitXor&quot;,&quot;leftShift&quot;,&quot;rightArithShift&quot;,&quot;rightLogShift&quot;]},bitNot:{name:&quot;bitNot&quot;,category:&quot;Bitwise&quot;,syntax:[&quot;~x&quot;,&quot;bitNot(x)&quot;],description:&quot;Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.&quot;,examples:[&quot;~1&quot;,&quot;~2&quot;,&quot;bitNot([2, -3, 4])&quot;],seealso:[&quot;bitAnd&quot;,&quot;bitOr&quot;,&quot;bitXor&quot;,&quot;leftShift&quot;,&quot;rightArithShift&quot;,&quot;rightLogShift&quot;]},bitOr:{name:&quot;bitOr&quot;,category:&quot;Bitwise&quot;,syntax:[&quot;x | y&quot;,&quot;bitOr(x, y)&quot;],description:&quot;Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.&quot;,examples:[&quot;5 | 3&quot;,&quot;bitOr([1, 2, 3], 4)&quot;],seealso:[&quot;bitAnd&quot;,&quot;bitNot&quot;,&quot;bitXor&quot;,&quot;leftShift&quot;,&quot;rightArithShift&quot;,&quot;rightLogShift&quot;]},bitXor:{name:&quot;bitXor&quot;,category:&quot;Bitwise&quot;,syntax:[&quot;bitXor(x, y)&quot;],description:&quot;Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.&quot;,examples:[&quot;bitOr(1, 2)&quot;,&quot;bitXor([2, 3, 4], 4)&quot;],seealso:[&quot;bitAnd&quot;,&quot;bitNot&quot;,&quot;bitOr&quot;,&quot;leftShift&quot;,&quot;rightArithShift&quot;,&quot;rightLogShift&quot;]},leftShift:{name:&quot;leftShift&quot;,category:&quot;Bitwise&quot;,syntax:[&quot;x &lt;&lt; y&quot;,&quot;leftShift(x, y)&quot;],description:&quot;Bitwise left logical shift of a value x by y number of bits.&quot;,examples:[&quot;4 &lt;&lt; 1&quot;,&quot;8 &gt;&gt; 1&quot;],seealso:[&quot;bitAnd&quot;,&quot;bitNot&quot;,&quot;bitOr&quot;,&quot;bitXor&quot;,&quot;rightArithShift&quot;,&quot;rightLogShift&quot;]},rightArithShift:{name:&quot;rightArithShift&quot;,category:&quot;Bitwise&quot;,syntax:[&quot;x &gt;&gt; y&quot;,&quot;rightArithShift(x, y)&quot;],description:&quot;Bitwise right arithmetic shift of a value x by y number of bits.&quot;,examples:[&quot;8 &gt;&gt; 1&quot;,&quot;4 &lt;&lt; 1&quot;,&quot;-12 &gt;&gt; 2&quot;],seealso:[&quot;bitAnd&quot;,&quot;bitNot&quot;,&quot;bitOr&quot;,&quot;bitXor&quot;,&quot;leftShift&quot;,&quot;rightLogShift&quot;]},rightLogShift:{name:&quot;rightLogShift&quot;,category:&quot;Bitwise&quot;,syntax:[&quot;x &gt;&gt;&gt; y&quot;,&quot;rightLogShift(x, y)&quot;],description:&quot;Bitwise right logical shift of a value x by y number of bits.&quot;,examples:[&quot;8 &gt;&gt;&gt; 1&quot;,&quot;4 &lt;&lt; 1&quot;,&quot;-12 &gt;&gt;&gt; 2&quot;],seealso:[&quot;bitAnd&quot;,&quot;bitNot&quot;,&quot;bitOr&quot;,&quot;bitXor&quot;,&quot;leftShift&quot;,&quot;rightArithShift&quot;]},bellNumbers:{name:&quot;bellNumbers&quot;,category:&quot;Combinatorics&quot;,syntax:[&quot;bellNumbers(n)&quot;],description:&quot;The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n &gt;= 0.&quot;,examples:[&quot;bellNumbers(3)&quot;,&quot;bellNumbers(8)&quot;],seealso:[&quot;stirlingS2&quot;]},catalan:{name:&quot;catalan&quot;,category:&quot;Combinatorics&quot;,syntax:[&quot;catalan(n)&quot;],description:&quot;The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n &gt;= 0.&quot;,examples:[&quot;catalan(3)&quot;,&quot;catalan(8)&quot;],seealso:[&quot;bellNumbers&quot;]},composition:{name:&quot;composition&quot;,category:&quot;Combinatorics&quot;,syntax:[&quot;composition(n, k)&quot;],description:&quot;The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k &lt;= n.&quot;,examples:[&quot;composition(5, 3)&quot;],seealso:[&quot;combinations&quot;]},stirlingS2:{name:&quot;stirlingS2&quot;,category:&quot;Combinatorics&quot;,syntax:[&quot;stirlingS2(n, k)&quot;],description:&quot;he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k &lt;= n. If n = k or k = 1, then s(n,k) = 1.&quot;,examples:[&quot;stirlingS2(5, 3)&quot;],seealso:[&quot;bellNumbers&quot;]},config:{name:&quot;config&quot;,category:&quot;Core&quot;,syntax:[&quot;config()&quot;,&quot;config(options)&quot;],description:&quot;Get configuration or change configuration.&quot;,examples:[&quot;config()&quot;,&quot;1/3 + 1/4&quot;,'config({number: &quot;Fraction&quot;})',&quot;1/3 + 1/4&quot;],seealso:[]},import:{name:&quot;import&quot;,category:&quot;Core&quot;,syntax:[&quot;import(functions)&quot;,&quot;import(functions, options)&quot;],description:&quot;Import functions or constants from an object.&quot;,examples:[&quot;import({myFn: f(x)=x^2, myConstant: 32 })&quot;,&quot;myFn(2)&quot;,&quot;myConstant&quot;],seealso:[]},typed:{name:&quot;typed&quot;,category:&quot;Core&quot;,syntax:[&quot;typed(signatures)&quot;,&quot;typed(name, signatures)&quot;],description:&quot;Create a typed function.&quot;,examples:['double = typed({ &quot;number&quot;: f(x)=x+x, &quot;string&quot;: f(x)=concat(x,x) })',&quot;double(2)&quot;,'double(&quot;hello&quot;)'],seealso:[]},arg:{name:&quot;arg&quot;,category:&quot;Complex&quot;,syntax:[&quot;arg(x)&quot;],description:&quot;Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).&quot;,examples:[&quot;arg(2 + 2i)&quot;,&quot;atan2(3, 2)&quot;,&quot;arg(2 + 3i)&quot;],seealso:[&quot;re&quot;,&quot;im&quot;,&quot;conj&quot;,&quot;abs&quot;]},conj:{name:&quot;conj&quot;,category:&quot;Complex&quot;,syntax:[&quot;conj(x)&quot;],description:&quot;Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.&quot;,examples:[&quot;conj(2 + 3i)&quot;,&quot;conj(2 - 3i)&quot;,&quot;conj(-5.2i)&quot;],seealso:[&quot;re&quot;,&quot;im&quot;,&quot;abs&quot;,&quot;arg&quot;]},re:{name:&quot;re&quot;,category:&quot;Complex&quot;,syntax:[&quot;re(x)&quot;],description:&quot;Get the real part of a complex number.&quot;,examples:[&quot;re(2 + 3i)&quot;,&quot;im(2 + 3i)&quot;,&quot;re(-5.2i)&quot;,&quot;re(2.4)&quot;],seealso:[&quot;im&quot;,&quot;conj&quot;,&quot;abs&quot;,&quot;arg&quot;]},im:{name:&quot;im&quot;,category:&quot;Complex&quot;,syntax:[&quot;im(x)&quot;],description:&quot;Get the imaginary part of a complex number.&quot;,examples:[&quot;im(2 + 3i)&quot;,&quot;re(2 + 3i)&quot;,&quot;im(-5.2i)&quot;,&quot;im(2.4)&quot;],seealso:[&quot;re&quot;,&quot;conj&quot;,&quot;abs&quot;,&quot;arg&quot;]},evaluate:{name:&quot;evaluate&quot;,category:&quot;Expression&quot;,syntax:[&quot;evaluate(expression)&quot;,&quot;evaluate(expression, scope)&quot;,&quot;evaluate([expr1, expr2, expr3, ...])&quot;,&quot;evaluate([expr1, expr2, expr3, ...], scope)&quot;],description:&quot;Evaluate an expression or an array with expressions.&quot;,examples:['evaluate(&quot;2 + 3&quot;)','evaluate(&quot;sqrt(16)&quot;)','evaluate(&quot;2 inch to cm&quot;)','evaluate(&quot;sin(x * pi)&quot;, { &quot;x&quot;: 1/2 })','evaluate([&quot;width=2&quot;, &quot;height=4&quot;,&quot;width*height&quot;])'],seealso:[]},help:{name:&quot;help&quot;,category:&quot;Expression&quot;,syntax:[&quot;help(object)&quot;,&quot;help(string)&quot;],description:&quot;Display documentation on a function or data type.&quot;,examples:[&quot;help(sqrt)&quot;,'help(&quot;complex&quot;)'],seealso:[]},distance:{name:&quot;distance&quot;,category:&quot;Geometry&quot;,syntax:[&quot;distance([x1, y1], [x2, y2])&quot;,&quot;distance([[x1, y1], [x2, y2]])&quot;],description:&quot;Calculates the Euclidean distance between two points.&quot;,examples:[&quot;distance([0,0], [4,4])&quot;,&quot;distance([[0,0], [4,4]])&quot;],seealso:[]},intersect:{name:&quot;intersect&quot;,category:&quot;Geometry&quot;,syntax:[&quot;intersect(expr1, expr2, expr3, expr4)&quot;,&quot;intersect(expr1, expr2, expr3)&quot;],description:&quot;Computes the intersection point of lines and/or planes.&quot;,examples:[&quot;intersect([0, 0], [10, 10], [10, 0], [0, 10])&quot;,&quot;intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])&quot;],seealso:[]},and:{name:&quot;and&quot;,category:&quot;Logical&quot;,syntax:[&quot;x and y&quot;,&quot;and(x, y)&quot;],description:&quot;Logical and. Test whether two values are both defined with a nonzero/nonempty value.&quot;,examples:[&quot;true and false&quot;,&quot;true and true&quot;,&quot;2 and 4&quot;],seealso:[&quot;not&quot;,&quot;or&quot;,&quot;xor&quot;]},not:{name:&quot;not&quot;,category:&quot;Logical&quot;,syntax:[&quot;not x&quot;,&quot;not(x)&quot;],description:&quot;Logical not. Flips the boolean value of given argument.&quot;,examples:[&quot;not true&quot;,&quot;not false&quot;,&quot;not 2&quot;,&quot;not 0&quot;],seealso:[&quot;and&quot;,&quot;or&quot;,&quot;xor&quot;]},or:{name:&quot;or&quot;,category:&quot;Logical&quot;,syntax:[&quot;x or y&quot;,&quot;or(x, y)&quot;],description:&quot;Logical or. Test if at least one value is defined with a nonzero/nonempty value.&quot;,examples:[&quot;true or false&quot;,&quot;false or false&quot;,&quot;0 or 4&quot;],seealso:[&quot;not&quot;,&quot;and&quot;,&quot;xor&quot;]},xor:{name:&quot;xor&quot;,category:&quot;Logical&quot;,syntax:[&quot;x xor y&quot;,&quot;xor(x, y)&quot;],description:&quot;Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.&quot;,examples:[&quot;true xor false&quot;,&quot;false xor false&quot;,&quot;true xor true&quot;,&quot;0 xor 4&quot;],seealso:[&quot;not&quot;,&quot;and&quot;,&quot;or&quot;]},concat:{name:&quot;concat&quot;,category:&quot;Matrix&quot;,syntax:[&quot;concat(A, B, C, ...)&quot;,&quot;concat(A, B, C, ..., dim)&quot;],description:&quot;Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.&quot;,examples:[&quot;A = [1, 2; 5, 6]&quot;,&quot;B = [3, 4; 7, 8]&quot;,&quot;concat(A, B)&quot;,&quot;concat(A, B, 1)&quot;,&quot;concat(A, B, 2)&quot;],seealso:[&quot;det&quot;,&quot;diag&quot;,&quot;identity&quot;,&quot;inv&quot;,&quot;ones&quot;,&quot;range&quot;,&quot;size&quot;,&quot;squeeze&quot;,&quot;subset&quot;,&quot;trace&quot;,&quot;transpose&quot;,&quot;zeros&quot;]},count:{name:&quot;count&quot;,category:&quot;Matrix&quot;,syntax:[&quot;count(x)&quot;],description:&quot;Count the number of elements of a matrix, array or string.&quot;,examples:[&quot;a = [1, 2; 3, 4; 5, 6]&quot;,&quot;count(a)&quot;,&quot;size(a)&quot;,'count(&quot;hello world&quot;)'],seealso:[&quot;size&quot;]},cross:{name:&quot;cross&quot;,category:&quot;Matrix&quot;,syntax:[&quot;cross(A, B)&quot;],description:&quot;Calculate the cross product for two vectors in three dimensional space.&quot;,examples:[&quot;cross([1, 1, 0],  [0, 1, 1])&quot;,&quot;cross([3, -3, 1], [4, 9, 2])&quot;,&quot;cross([2, 3, 4],  [5, 6, 7])&quot;],seealso:[&quot;multiply&quot;,&quot;dot&quot;]},column:{name:&quot;column&quot;,category:&quot;Matrix&quot;,syntax:[&quot;column(x, index)&quot;],description:&quot;Return a column from a matrix or array.&quot;,examples:[&quot;A = [[1, 2], [3, 4]]&quot;,&quot;column(A, 1)&quot;,&quot;column(A, 2)&quot;],seealso:[&quot;row&quot;,&quot;matrixFromColumns&quot;]},ctranspose:{name:&quot;ctranspose&quot;,category:&quot;Matrix&quot;,syntax:[&quot;x'&quot;,&quot;ctranspose(x)&quot;],description:&quot;Complex Conjugate and Transpose a matrix&quot;,examples:[&quot;a = [1, 2, 3; 4, 5, 6]&quot;,&quot;a'&quot;,&quot;ctranspose(a)&quot;],seealso:[&quot;concat&quot;,&quot;det&quot;,&quot;diag&quot;,&quot;identity&quot;,&quot;inv&quot;,&quot;ones&quot;,&quot;range&quot;,&quot;size&quot;,&quot;squeeze&quot;,&quot;subset&quot;,&quot;trace&quot;,&quot;zeros&quot;]},det:{name:&quot;det&quot;,category:&quot;Matrix&quot;,syntax:[&quot;det(x)&quot;],description:&quot;Calculate the determinant of a matrix&quot;,examples:[&quot;det([1, 2; 3, 4])&quot;,&quot;det([-2, 2, 3; -1, 1, 3; 2, 0, -1])&quot;],seealso:[&quot;concat&quot;,&quot;diag&quot;,&quot;identity&quot;,&quot;inv&quot;,&quot;ones&quot;,&quot;range&quot;,&quot;size&quot;,&quot;squeeze&quot;,&quot;subset&quot;,&quot;trace&quot;,&quot;transpose&quot;,&quot;zeros&quot;]},diag:{name:&quot;diag&quot;,category:&quot;Matrix&quot;,syntax:[&quot;diag(x)&quot;,&quot;diag(x, k)&quot;],description:&quot;Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.&quot;,examples:[&quot;diag(1:3)&quot;,&quot;diag(1:3, 1)&quot;,&quot;a = [1, 2, 3; 4, 5, 6; 7, 8, 9]&quot;,&quot;diag(a)&quot;],seealso:[&quot;concat&quot;,&quot;det&quot;,&quot;identity&quot;,&quot;inv&quot;,&quot;ones&quot;,&quot;range&quot;,&quot;size&quot;,&quot;squeeze&quot;,&quot;subset&quot;,&quot;trace&quot;,&quot;transpose&quot;,&quot;zeros&quot;]},diff:{name:&quot;diff&quot;,category:&quot;Matrix&quot;,syntax:[&quot;diff(arr)&quot;,&quot;diff(arr, dim)&quot;],description:[&quot;Create a new matrix or array with the difference of the passed matrix or array.&quot;,&quot;Dim parameter is optional and used to indicant the dimension of the array/matrix to apply the difference&quot;,&quot;If no dimension parameter is passed it is assumed as dimension 0&quot;,&quot;Dimension is zero-based in javascript and one-based in the parser&quot;,&quot;Arrays must be 'rectangular' meaning arrays like [1, 2]&quot;,&quot;If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays&quot;],examples:[&quot;A = [1, 2, 4, 7, 0]&quot;,&quot;diff(A)&quot;,&quot;diff(A, 1)&quot;,&quot;B = [[1, 2], [3, 4]]&quot;,&quot;diff(B)&quot;,&quot;diff(B, 1)&quot;,&quot;diff(B, 2)&quot;,&quot;diff(B, bignumber(2))&quot;,&quot;diff([[1, 2], matrix([3, 4])], 2)&quot;],seealso:[&quot;subtract&quot;,&quot;partitionSelect&quot;]},dot:{name:&quot;dot&quot;,category:&quot;Matrix&quot;,syntax:[&quot;dot(A, B)&quot;,&quot;A * B&quot;],description:&quot;Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn&quot;,examples:[&quot;dot([2, 4, 1], [2, 2, 3])&quot;,&quot;[2, 4, 1] * [2, 2, 3]&quot;],seealso:[&quot;multiply&quot;,&quot;cross&quot;]},getMatrixDataType:{name:&quot;getMatrixDataType&quot;,category:&quot;Matrix&quot;,syntax:[&quot;getMatrixDataType(x)&quot;],description:'Find the data type of all elements in a matrix or array, for example &quot;number&quot; if all items are a number and &quot;Complex&quot; if all values are complex numbers. If a matrix contains more than one data type, it will return &quot;mixed&quot;.',examples:[&quot;getMatrixDataType([1, 2, 3])&quot;,&quot;getMatrixDataType([[5 cm], [2 inch]])&quot;,'getMatrixDataType([1, &quot;text&quot;])',&quot;getMatrixDataType([1, bignumber(4)])&quot;],seealso:[&quot;matrix&quot;,&quot;sparse&quot;,&quot;typeOf&quot;]},identity:{name:&quot;identity&quot;,category:&quot;Matrix&quot;,syntax:[&quot;identity(n)&quot;,&quot;identity(m, n)&quot;,&quot;identity([m, n])&quot;],description:&quot;Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.&quot;,examples:[&quot;identity(3)&quot;,&quot;identity(3, 5)&quot;,&quot;a = [1, 2, 3; 4, 5, 6]&quot;,&quot;identity(size(a))&quot;],seealso:[&quot;concat&quot;,&quot;det&quot;,&quot;diag&quot;,&quot;inv&quot;,&quot;ones&quot;,&quot;range&quot;,&quot;size&quot;,&quot;squeeze&quot;,&quot;subset&quot;,&quot;trace&quot;,&quot;transpose&quot;,&quot;zeros&quot;]},filter:{name:&quot;filter&quot;,category:&quot;Matrix&quot;,syntax:[&quot;filter(x, test)&quot;],description:&quot;Filter items in a matrix.&quot;,examples:[&quot;isPositive(x) = x &gt; 0&quot;,&quot;filter([6, -2, -1, 4, 3], isPositive)&quot;,&quot;filter([6, -2, 0, 1, 0], x != 0)&quot;],seealso:[&quot;sort&quot;,&quot;map&quot;,&quot;forEach&quot;]},flatten:{name:&quot;flatten&quot;,category:&quot;Matrix&quot;,syntax:[&quot;flatten(x)&quot;],description:&quot;Flatten a multi dimensional matrix into a single dimensional matrix.&quot;,examples:[&quot;a = [1, 2, 3; 4, 5, 6]&quot;,&quot;size(a)&quot;,&quot;b = flatten(a)&quot;,&quot;size(b)&quot;],seealso:[&quot;concat&quot;,&quot;resize&quot;,&quot;size&quot;,&quot;squeeze&quot;]},forEach:{name:&quot;forEach&quot;,category:&quot;Matrix&quot;,syntax:[&quot;forEach(x, callback)&quot;],description:&quot;Iterates over all elements of a matrix/array, and executes the given callback function.&quot;,examples:[&quot;numberOfPets = {}&quot;,&quot;addPet(n) = numberOfPets[n] = (numberOfPets[n] ? numberOfPets[n]:0 ) + 1;&quot;,'forEach([&quot;Dog&quot;,&quot;Cat&quot;,&quot;Cat&quot;], addPet)',&quot;numberOfPets&quot;],seealso:[&quot;map&quot;,&quot;sort&quot;,&quot;filter&quot;]},inv:{name:&quot;inv&quot;,category:&quot;Matrix&quot;,syntax:[&quot;inv(x)&quot;],description:&quot;Calculate the inverse of a matrix&quot;,examples:[&quot;inv([1, 2; 3, 4])&quot;,&quot;inv(4)&quot;,&quot;1 / 4&quot;],seealso:[&quot;concat&quot;,&quot;det&quot;,&quot;diag&quot;,&quot;identity&quot;,&quot;ones&quot;,&quot;range&quot;,&quot;size&quot;,&quot;squeeze&quot;,&quot;subset&quot;,&quot;trace&quot;,&quot;transpose&quot;,&quot;zeros&quot;]},pinv:{name:&quot;pinv&quot;,category:&quot;Matrix&quot;,syntax:[&quot;pinv(x)&quot;],description:&quot;Calculate the Moore–Penrose inverse of a matrix&quot;,examples:[&quot;pinv([1, 2; 3, 4])&quot;,&quot;pinv([[1, 0], [0, 1], [0, 1]])&quot;,&quot;pinv(4)&quot;],seealso:[&quot;inv&quot;]},eigs:{name:&quot;eigs&quot;,category:&quot;Matrix&quot;,syntax:[&quot;eigs(x)&quot;],description:&quot;Calculate the eigenvalues and eigenvectors of a real symmetric matrix&quot;,examples:[&quot;eigs([[5, 2.3], [2.3, 1]])&quot;],seealso:[&quot;inv&quot;]},kron:{name:&quot;kron&quot;,category:&quot;Matrix&quot;,syntax:[&quot;kron(x, y)&quot;],description:&quot;Calculates the kronecker product of 2 matrices or vectors.&quot;,examples:[&quot;kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])&quot;,&quot;kron([1,1], [2,3,4])&quot;],seealso:[&quot;multiply&quot;,&quot;dot&quot;,&quot;cross&quot;]},matrixFromFunction:{name:&quot;matrixFromFunction&quot;,category:&quot;Matrix&quot;,syntax:[&quot;matrixFromFunction(size, fn)&quot;,&quot;matrixFromFunction(size, fn, format)&quot;,&quot;matrixFromFunction(size, fn, format, datatype)&quot;,&quot;matrixFromFunction(size, format, fn)&quot;,&quot;matrixFromFunction(size, format, datatype, fn)&quot;],description:&quot;Create a matrix by evaluating a generating function at each index.&quot;,examples:[&quot;f(I) = I[1] - I[2]&quot;,&quot;matrixFromFunction([3,3], f)&quot;,&quot;g(I) = I[1] - I[2] == 1 ? 4 : 0&quot;,'matrixFromFunction([100, 100], &quot;sparse&quot;, g)',&quot;matrixFromFunction([5], random)&quot;],seealso:[&quot;matrix&quot;,&quot;matrixFromRows&quot;,&quot;matrixFromColumns&quot;,&quot;zeros&quot;]},matrixFromRows:{name:&quot;matrixFromRows&quot;,category:&quot;Matrix&quot;,syntax:[&quot;matrixFromRows(...arr)&quot;,&quot;matrixFromRows(row1, row2)&quot;,&quot;matrixFromRows(row1, row2, row3)&quot;],description:&quot;Create a dense matrix from vectors as individual rows.&quot;,examples:[&quot;matrixFromRows([1, 2, 3], [[4],[5],[6]])&quot;],seealso:[&quot;matrix&quot;,&quot;matrixFromColumns&quot;,&quot;matrixFromFunction&quot;,&quot;zeros&quot;]},matrixFromColumns:{name:&quot;matrixFromColumns&quot;,category:&quot;Matrix&quot;,syntax:[&quot;matrixFromColumns(...arr)&quot;,&quot;matrixFromColumns(row1, row2)&quot;,&quot;matrixFromColumns(row1, row2, row3)&quot;],description:&quot;Create a dense matrix from vectors as individual columns.&quot;,examples:[&quot;matrixFromColumns([1, 2, 3], [[4],[5],[6]])&quot;],seealso:[&quot;matrix&quot;,&quot;matrixFromRows&quot;,&quot;matrixFromFunction&quot;,&quot;zeros&quot;]},map:{name:&quot;map&quot;,category:&quot;Matrix&quot;,syntax:[&quot;map(x, callback)&quot;],description:&quot;Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array.&quot;,examples:[&quot;map([1, 2, 3], square)&quot;],seealso:[&quot;filter&quot;,&quot;forEach&quot;]},ones:{name:&quot;ones&quot;,category:&quot;Matrix&quot;,syntax:[&quot;ones(m)&quot;,&quot;ones(m, n)&quot;,&quot;ones(m, n, p, ...)&quot;,&quot;ones([m])&quot;,&quot;ones([m, n])&quot;,&quot;ones([m, n, p, ...])&quot;],description:&quot;Create a matrix containing ones.&quot;,examples:[&quot;ones(3)&quot;,&quot;ones(3, 5)&quot;,&quot;ones([2,3]) * 4.5&quot;,&quot;a = [1, 2, 3; 4, 5, 6]&quot;,&quot;ones(size(a))&quot;],seealso:[&quot;concat&quot;,&quot;det&quot;,&quot;diag&quot;,&quot;identity&quot;,&quot;inv&quot;,&quot;range&quot;,&quot;size&quot;,&quot;squeeze&quot;,&quot;subset&quot;,&quot;trace&quot;,&quot;transpose&quot;,&quot;zeros&quot;]},partitionSelect:{name:&quot;partitionSelect&quot;,category:&quot;Matrix&quot;,syntax:[&quot;partitionSelect(x, k)&quot;,&quot;partitionSelect(x, k, compare)&quot;],description:&quot;Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.&quot;,examples:[&quot;partitionSelect([5, 10, 1], 2)&quot;,'partitionSelect([&quot;C&quot;, &quot;B&quot;, &quot;A&quot;, &quot;D&quot;], 1, compareText)',&quot;arr = [5, 2, 1]&quot;,&quot;partitionSelect(arr, 0) # returns 1, arr is now: [1, 2, 5]&quot;,&quot;arr&quot;,&quot;partitionSelect(arr, 1, 'desc') # returns 2, arr is now: [5, 2, 1]&quot;,&quot;arr&quot;],seealso:[&quot;sort&quot;]},range:{name:&quot;range&quot;,category:&quot;Type&quot;,syntax:[&quot;start:end&quot;,&quot;start:step:end&quot;,&quot;range(start, end)&quot;,&quot;range(start, end, step)&quot;,&quot;range(string)&quot;],description:&quot;Create a range. Lower bound of the range is included, upper bound is excluded.&quot;,examples:[&quot;1:5&quot;,&quot;3:-1:-3&quot;,&quot;range(3, 7)&quot;,&quot;range(0, 12, 2)&quot;,'range(&quot;4:10&quot;)',&quot;range(1m, 1m, 3m)&quot;,&quot;a = [1, 2, 3, 4; 5, 6, 7, 8]&quot;,&quot;a[1:2, 1:2]&quot;],seealso:[&quot;concat&quot;,&quot;det&quot;,&quot;diag&quot;,&quot;identity&quot;,&quot;inv&quot;,&quot;ones&quot;,&quot;size&quot;,&quot;squeeze&quot;,&quot;subset&quot;,&quot;trace&quot;,&quot;transpose&quot;,&quot;zeros&quot;]},resize:{name:&quot;resize&quot;,category:&quot;Matrix&quot;,syntax:[&quot;resize(x, size)&quot;,&quot;resize(x, size, defaultValue)&quot;],description:&quot;Resize a matrix.&quot;,examples:[&quot;resize([1,2,3,4,5], [3])&quot;,&quot;resize([1,2,3], [5])&quot;,&quot;resize([1,2,3], [5], -1)&quot;,&quot;resize(2, [2, 3])&quot;,'resize(&quot;hello&quot;, [8], &quot;!&quot;)'],seealso:[&quot;size&quot;,&quot;subset&quot;,&quot;squeeze&quot;,&quot;reshape&quot;]},reshape:{name:&quot;reshape&quot;,category:&quot;Matrix&quot;,syntax:[&quot;reshape(x, sizes)&quot;],description:&quot;Reshape a multi dimensional array to fit the specified dimensions.&quot;,examples:[&quot;reshape([1, 2, 3, 4, 5, 6], [2, 3])&quot;,&quot;reshape([[1, 2], [3, 4]], [1, 4])&quot;,&quot;reshape([[1, 2], [3, 4]], [4])&quot;,&quot;reshape([1, 2, 3, 4], [-1, 2])&quot;],seealso:[&quot;size&quot;,&quot;squeeze&quot;,&quot;resize&quot;]},rotate:{name:&quot;rotate&quot;,category:&quot;Matrix&quot;,syntax:[&quot;rotate(w, theta)&quot;,&quot;rotate(w, theta, v)&quot;],description:&quot;Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.&quot;,examples:[&quot;rotate([1, 0], pi / 2)&quot;,'rotate(matrix([1, 0]), unit(&quot;35deg&quot;))','rotate([1, 0, 0], unit(&quot;90deg&quot;), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit(&quot;90deg&quot;), matrix([0, 0, 1]))'],seealso:[&quot;matrix&quot;,&quot;rotationMatrix&quot;]},rotationMatrix:{name:&quot;rotationMatrix&quot;,category:&quot;Matrix&quot;,syntax:[&quot;rotationMatrix(theta)&quot;,&quot;rotationMatrix(theta, v)&quot;,&quot;rotationMatrix(theta, v, format)&quot;],description:&quot;Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.&quot;,examples:[&quot;rotationMatrix(pi / 2)&quot;,'rotationMatrix(unit(&quot;45deg&quot;), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), &quot;sparse&quot;)'],seealso:[&quot;cos&quot;,&quot;sin&quot;]},row:{name:&quot;row&quot;,category:&quot;Matrix&quot;,syntax:[&quot;row(x, index)&quot;],description:&quot;Return a row from a matrix or array.&quot;,examples:[&quot;A = [[1, 2], [3, 4]]&quot;,&quot;row(A, 1)&quot;,&quot;row(A, 2)&quot;],seealso:[&quot;column&quot;,&quot;matrixFromRows&quot;]},size:{name:&quot;size&quot;,category:&quot;Matrix&quot;,syntax:[&quot;size(x)&quot;],description:&quot;Calculate the size of a matrix.&quot;,examples:[&quot;size(2.3)&quot;,'size(&quot;hello world&quot;)',&quot;a = [1, 2; 3, 4; 5, 6]&quot;,&quot;size(a)&quot;,&quot;size(1:6)&quot;],seealso:[&quot;concat&quot;,&quot;count&quot;,&quot;det&quot;,&quot;diag&quot;,&quot;identity&quot;,&quot;inv&quot;,&quot;ones&quot;,&quot;range&quot;,&quot;squeeze&quot;,&quot;subset&quot;,&quot;trace&quot;,&quot;transpose&quot;,&quot;zeros&quot;]},sort:{name:&quot;sort&quot;,category:&quot;Matrix&quot;,syntax:[&quot;sort(x)&quot;,&quot;sort(x, compare)&quot;],description:'Sort the items in a matrix. Compare can be a string &quot;asc&quot;, &quot;desc&quot;, &quot;natural&quot;, or a custom sort function.',examples:[&quot;sort([5, 10, 1])&quot;,'sort([&quot;C&quot;, &quot;B&quot;, &quot;A&quot;, &quot;D&quot;], &quot;natural&quot;)',&quot;sortByLength(a, b) = size(a)[1] - size(b)[1]&quot;,'sort([&quot;Langdon&quot;, &quot;Tom&quot;, &quot;Sara&quot;], sortByLength)','sort([&quot;10&quot;, &quot;1&quot;, &quot;2&quot;], &quot;natural&quot;)'],seealso:[&quot;map&quot;,&quot;filter&quot;,&quot;forEach&quot;]},squeeze:{name:&quot;squeeze&quot;,category:&quot;Matrix&quot;,syntax:[&quot;squeeze(x)&quot;],description:&quot;Remove inner and outer singleton dimensions from a matrix.&quot;,examples:[&quot;a = zeros(3,2,1)&quot;,&quot;size(squeeze(a))&quot;,&quot;b = zeros(1,1,3)&quot;,&quot;size(squeeze(b))&quot;],seealso:[&quot;concat&quot;,&quot;det&quot;,&quot;diag&quot;,&quot;identity&quot;,&quot;inv&quot;,&quot;ones&quot;,&quot;range&quot;,&quot;size&quot;,&quot;subset&quot;,&quot;trace&quot;,&quot;transpose&quot;,&quot;zeros&quot;]},subset:{name:&quot;subset&quot;,category:&quot;Matrix&quot;,syntax:[&quot;value(index)&quot;,&quot;value(index) = replacement&quot;,&quot;subset(value, [index])&quot;,&quot;subset(value, [index], replacement)&quot;],description:&quot;Get or set a subset of the entries of a matrix or characters of a string. Indexes are one-based. There should be one index specification for each dimension of the target. Each specification can be a single index, a list of indices, or a range in colon notation `l:u`. In a range, both the lower bound l and upper bound u are included; and if a bound is omitted it defaults to the most extreme valid value. The cartesian product of the indices specified in each dimension determines the target of the operation.&quot;,examples:[&quot;d = [1, 2; 3, 4]&quot;,&quot;e = []&quot;,&quot;e[1, 1:2] = [5, 6]&quot;,&quot;e[2, :] = [7, 8]&quot;,&quot;f = d * e&quot;,&quot;f[2, 1]&quot;,&quot;f[:, 1]&quot;,&quot;f[[1,2], [1,3]] = [9, 10; 11, 12]&quot;,&quot;f&quot;],seealso:[&quot;concat&quot;,&quot;det&quot;,&quot;diag&quot;,&quot;identity&quot;,&quot;inv&quot;,&quot;ones&quot;,&quot;range&quot;,&quot;size&quot;,&quot;squeeze&quot;,&quot;trace&quot;,&quot;transpose&quot;,&quot;zeros&quot;]},trace:{name:&quot;trace&quot;,category:&quot;Matrix&quot;,syntax:[&quot;trace(A)&quot;],description:&quot;Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.&quot;,examples:[&quot;A = [1, 2, 3; -1, 2, 3; 2, 0, 3]&quot;,&quot;trace(A)&quot;],seealso:[&quot;concat&quot;,&quot;det&quot;,&quot;diag&quot;,&quot;identity&quot;,&quot;inv&quot;,&quot;ones&quot;,&quot;range&quot;,&quot;size&quot;,&quot;squeeze&quot;,&quot;subset&quot;,&quot;transpose&quot;,&quot;zeros&quot;]},transpose:{name:&quot;transpose&quot;,category:&quot;Matrix&quot;,syntax:[&quot;x'&quot;,&quot;transpose(x)&quot;],description:&quot;Transpose a matrix&quot;,examples:[&quot;a = [1, 2, 3; 4, 5, 6]&quot;,&quot;a'&quot;,&quot;transpose(a)&quot;],seealso:[&quot;concat&quot;,&quot;det&quot;,&quot;diag&quot;,&quot;identity&quot;,&quot;inv&quot;,&quot;ones&quot;,&quot;range&quot;,&quot;size&quot;,&quot;squeeze&quot;,&quot;subset&quot;,&quot;trace&quot;,&quot;zeros&quot;]},zeros:{name:&quot;zeros&quot;,category:&quot;Matrix&quot;,syntax:[&quot;zeros(m)&quot;,&quot;zeros(m, n)&quot;,&quot;zeros(m, n, p, ...)&quot;,&quot;zeros([m])&quot;,&quot;zeros([m, n])&quot;,&quot;zeros([m, n, p, ...])&quot;],description:&quot;Create a matrix containing zeros.&quot;,examples:[&quot;zeros(3)&quot;,&quot;zeros(3, 5)&quot;,&quot;a = [1, 2, 3; 4, 5, 6]&quot;,&quot;zeros(size(a))&quot;],seealso:[&quot;concat&quot;,&quot;det&quot;,&quot;diag&quot;,&quot;identity&quot;,&quot;inv&quot;,&quot;ones&quot;,&quot;range&quot;,&quot;size&quot;,&quot;squeeze&quot;,&quot;subset&quot;,&quot;trace&quot;,&quot;transpose&quot;]},fft:{name:&quot;fft&quot;,category:&quot;Matrix&quot;,syntax:[&quot;fft(x)&quot;],description:&quot;Calculate N-dimensional fourier transform&quot;,examples:[&quot;fft([[1, 0], [1, 0]])&quot;],seealso:[&quot;ifft&quot;]},ifft:{name:&quot;ifft&quot;,category:&quot;Matrix&quot;,syntax:[&quot;ifft(x)&quot;],description:&quot;Calculate N-dimensional inverse fourier transform&quot;,examples:[&quot;ifft([[2, 2], [0, 0]])&quot;],seealso:[&quot;fft&quot;]},sylvester:{name:&quot;sylvester&quot;,category:&quot;Algebra&quot;,syntax:[&quot;sylvester(A,B,C)&quot;],description:&quot;Solves the real-valued Sylvester equation AX+XB=C for X&quot;,examples:[&quot;sylvester([[-1, -2], [1, 1]], [[-2, 1], [-1, 2]], [[-3, 2], [3, 0]])&quot;,&quot;A = [[-1, -2], [1, 1]]; B = [[2, -1], [1, -2]]; C = [[-3, 2], [3, 0]]&quot;,&quot;sylvester(A, B, C)&quot;],seealso:[&quot;schur&quot;,&quot;lyap&quot;]},schur:{name:&quot;schur&quot;,category:&quot;Algebra&quot;,syntax:[&quot;schur(A)&quot;],description:&quot;Performs a real Schur decomposition of the real matrix A = UTU'&quot;,examples:[&quot;schur([[1, 0], [-4, 3]])&quot;,&quot;A = [[1, 0], [-4, 3]]&quot;,&quot;schur(A)&quot;],seealso:[&quot;lyap&quot;,&quot;sylvester&quot;]},lyap:{name:&quot;lyap&quot;,category:&quot;Algebra&quot;,syntax:[&quot;lyap(A,Q)&quot;],description:&quot;Solves the Continuous-time Lyapunov equation AP+PA'+Q=0 for P&quot;,examples:[&quot;lyap([[-2, 0], [1, -4]], [[3, 1], [1, 3]])&quot;,&quot;A = [[-2, 0], [1, -4]]&quot;,&quot;Q = [[3, 1], [1, 3]]&quot;,&quot;lyap(A,Q)&quot;],seealso:[&quot;schur&quot;,&quot;sylvester&quot;]},solveODE:{name:&quot;solveODE&quot;,category:&quot;Numeric&quot;,syntax:[&quot;solveODE(func, tspan, y0)&quot;,&quot;solveODE(func, tspan, y0, options)&quot;],description:&quot;Numerical Integration of Ordinary Differential Equations.&quot;,examples:[&quot;f(t,y) = y&quot;,&quot;tspan = [0, 4]&quot;,&quot;solveODE(f, tspan, 1)&quot;,&quot;solveODE(f, tspan, [1, 2])&quot;,'solveODE(f, tspan, 1, { method:&quot;RK23&quot;, maxStep:0.1 })'],seealso:[&quot;derivative&quot;,&quot;simplifyCore&quot;]},combinations:{name:&quot;combinations&quot;,category:&quot;Probability&quot;,syntax:[&quot;combinations(n, k)&quot;],description:&quot;Compute the number of combinations of n items taken k at a time&quot;,examples:[&quot;combinations(7, 5)&quot;],seealso:[&quot;combinationsWithRep&quot;,&quot;permutations&quot;,&quot;factorial&quot;]},combinationsWithRep:{name:&quot;combinationsWithRep&quot;,category:&quot;Probability&quot;,syntax:[&quot;combinationsWithRep(n, k)&quot;],description:&quot;Compute the number of combinations of n items taken k at a time with replacements.&quot;,examples:[&quot;combinationsWithRep(7, 5)&quot;],seealso:[&quot;combinations&quot;,&quot;permutations&quot;,&quot;factorial&quot;]},factorial:{name:&quot;factorial&quot;,category:&quot;Probability&quot;,syntax:[&quot;n!&quot;,&quot;factorial(n)&quot;],description:&quot;Compute the factorial of a value&quot;,examples:[&quot;5!&quot;,&quot;5 * 4 * 3 * 2 * 1&quot;,&quot;3!&quot;],seealso:[&quot;combinations&quot;,&quot;combinationsWithRep&quot;,&quot;permutations&quot;,&quot;gamma&quot;]},gamma:{name:&quot;gamma&quot;,category:&quot;Probability&quot;,syntax:[&quot;gamma(n)&quot;],description:&quot;Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.&quot;,examples:[&quot;gamma(4)&quot;,&quot;3!&quot;,&quot;gamma(1/2)&quot;,&quot;sqrt(pi)&quot;],seealso:[&quot;factorial&quot;]},kldivergence:{name:&quot;kldivergence&quot;,category:&quot;Probability&quot;,syntax:[&quot;kldivergence(x, y)&quot;],description:&quot;Calculate the Kullback-Leibler (KL) divergence  between two distributions.&quot;,examples:[&quot;kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])&quot;],seealso:[]},lgamma:{name:&quot;lgamma&quot;,category:&quot;Probability&quot;,syntax:[&quot;lgamma(n)&quot;],description:&quot;Logarithm of the gamma function for real, positive numbers and complex numbers, using Lanczos approximation for numbers and Stirling series for complex numbers.&quot;,examples:[&quot;lgamma(4)&quot;,&quot;lgamma(1/2)&quot;,&quot;lgamma(i)&quot;,&quot;lgamma(complex(1.1, 2))&quot;],seealso:[&quot;gamma&quot;]},multinomial:{name:&quot;multinomial&quot;,category:&quot;Probability&quot;,syntax:[&quot;multinomial(A)&quot;],description:&quot;Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai &gt; 0.&quot;,examples:[&quot;multinomial([1, 2, 1])&quot;],seealso:[&quot;combinations&quot;,&quot;factorial&quot;]},permutations:{name:&quot;permutations&quot;,category:&quot;Probability&quot;,syntax:[&quot;permutations(n)&quot;,&quot;permutations(n, k)&quot;],description:&quot;Compute the number of permutations of n items taken k at a time&quot;,examples:[&quot;permutations(5)&quot;,&quot;permutations(5, 3)&quot;],seealso:[&quot;combinations&quot;,&quot;combinationsWithRep&quot;,&quot;factorial&quot;]},pickRandom:{name:&quot;pickRandom&quot;,category:&quot;Probability&quot;,syntax:[&quot;pickRandom(array)&quot;,&quot;pickRandom(array, number)&quot;,&quot;pickRandom(array, weights)&quot;,&quot;pickRandom(array, number, weights)&quot;,&quot;pickRandom(array, weights, number)&quot;],description:&quot;Pick a random entry from a given array.&quot;,examples:[&quot;pickRandom(0:10)&quot;,&quot;pickRandom([1, 3, 1, 6])&quot;,&quot;pickRandom([1, 3, 1, 6], 2)&quot;,&quot;pickRandom([1, 3, 1, 6], [2, 3, 2, 1])&quot;,&quot;pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])&quot;,&quot;pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)&quot;],seealso:[&quot;random&quot;,&quot;randomInt&quot;]},random:{name:&quot;random&quot;,category:&quot;Probability&quot;,syntax:[&quot;random()&quot;,&quot;random(max)&quot;,&quot;random(min, max)&quot;,&quot;random(size)&quot;,&quot;random(size, max)&quot;,&quot;random(size, min, max)&quot;],description:&quot;Return a random number.&quot;,examples:[&quot;random()&quot;,&quot;random(10, 20)&quot;,&quot;random([2, 3])&quot;],seealso:[&quot;pickRandom&quot;,&quot;randomInt&quot;]},randomInt:{name:&quot;randomInt&quot;,category:&quot;Probability&quot;,syntax:[&quot;randomInt(max)&quot;,&quot;randomInt(min, max)&quot;,&quot;randomInt(size)&quot;,&quot;randomInt(size, max)&quot;,&quot;randomInt(size, min, max)&quot;],description:&quot;Return a random integer number&quot;,examples:[&quot;randomInt(10, 20)&quot;,&quot;randomInt([2, 3], 10)&quot;],seealso:[&quot;pickRandom&quot;,&quot;random&quot;]},compare:{name:&quot;compare&quot;,category:&quot;Relational&quot;,syntax:[&quot;compare(x, y)&quot;],description:&quot;Compare two values. Returns 1 when x &gt; y, -1 when x &lt; y, and 0 when x == y.&quot;,examples:[&quot;compare(2, 3)&quot;,&quot;compare(3, 2)&quot;,&quot;compare(2, 2)&quot;,&quot;compare(5cm, 40mm)&quot;,&quot;compare(2, [1, 2, 3])&quot;],seealso:[&quot;equal&quot;,&quot;unequal&quot;,&quot;smaller&quot;,&quot;smallerEq&quot;,&quot;largerEq&quot;,&quot;compareNatural&quot;,&quot;compareText&quot;]},compareNatural:{name:&quot;compareNatural&quot;,category:&quot;Relational&quot;,syntax:[&quot;compareNatural(x, y)&quot;],description:&quot;Compare two values of any type in a deterministic, natural way. Returns 1 when x &gt; y, -1 when x &lt; y, and 0 when x == y.&quot;,examples:[&quot;compareNatural(2, 3)&quot;,&quot;compareNatural(3, 2)&quot;,&quot;compareNatural(2, 2)&quot;,&quot;compareNatural(5cm, 40mm)&quot;,'compareNatural(&quot;2&quot;, &quot;10&quot;)',&quot;compareNatural(2 + 3i, 2 + 4i)&quot;,&quot;compareNatural([1, 2, 4], [1, 2, 3])&quot;,&quot;compareNatural([1, 5], [1, 2, 3])&quot;,&quot;compareNatural([1, 2], [1, 2])&quot;,&quot;compareNatural({a: 2}, {a: 4})&quot;],seealso:[&quot;equal&quot;,&quot;unequal&quot;,&quot;smaller&quot;,&quot;smallerEq&quot;,&quot;largerEq&quot;,&quot;compare&quot;,&quot;compareText&quot;]},compareText:{name:&quot;compareText&quot;,category:&quot;Relational&quot;,syntax:[&quot;compareText(x, y)&quot;],description:&quot;Compare two strings lexically. Comparison is case sensitive. Returns 1 when x &gt; y, -1 when x &lt; y, and 0 when x == y.&quot;,examples:['compareText(&quot;B&quot;, &quot;A&quot;)','compareText(&quot;A&quot;, &quot;B&quot;)','compareText(&quot;A&quot;, &quot;A&quot;)','compareText(&quot;2&quot;, &quot;10&quot;)','compare(&quot;2&quot;, &quot;10&quot;)',&quot;compare(2, 10)&quot;,'compareNatural(&quot;2&quot;, &quot;10&quot;)','compareText(&quot;B&quot;, [&quot;A&quot;, &quot;B&quot;, &quot;C&quot;])'],seealso:[&quot;compare&quot;,&quot;compareNatural&quot;]},deepEqual:{name:&quot;deepEqual&quot;,category:&quot;Relational&quot;,syntax:[&quot;deepEqual(x, y)&quot;],description:&quot;Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.&quot;,examples:[&quot;deepEqual([1,3,4], [1,3,4])&quot;,&quot;deepEqual([1,3,4], [1,3])&quot;],seealso:[&quot;equal&quot;,&quot;unequal&quot;,&quot;smaller&quot;,&quot;larger&quot;,&quot;smallerEq&quot;,&quot;largerEq&quot;,&quot;compare&quot;]},equal:{name:&quot;equal&quot;,category:&quot;Relational&quot;,syntax:[&quot;x == y&quot;,&quot;equal(x, y)&quot;],description:&quot;Check equality of two values. Returns true if the values are equal, and false if not.&quot;,examples:[&quot;2+2 == 3&quot;,&quot;2+2 == 4&quot;,&quot;a = 3.2&quot;,&quot;b = 6-2.8&quot;,&quot;a == b&quot;,&quot;50cm == 0.5m&quot;],seealso:[&quot;unequal&quot;,&quot;smaller&quot;,&quot;larger&quot;,&quot;smallerEq&quot;,&quot;largerEq&quot;,&quot;compare&quot;,&quot;deepEqual&quot;,&quot;equalText&quot;]},equalText:{name:&quot;equalText&quot;,category:&quot;Relational&quot;,syntax:[&quot;equalText(x, y)&quot;],description:&quot;Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.&quot;,examples:['equalText(&quot;Hello&quot;, &quot;Hello&quot;)','equalText(&quot;a&quot;, &quot;A&quot;)','equal(&quot;2e3&quot;, &quot;2000&quot;)','equalText(&quot;2e3&quot;, &quot;2000&quot;)','equalText(&quot;B&quot;, [&quot;A&quot;, &quot;B&quot;, &quot;C&quot;])'],seealso:[&quot;compare&quot;,&quot;compareNatural&quot;,&quot;compareText&quot;,&quot;equal&quot;]},larger:{name:&quot;larger&quot;,category:&quot;Relational&quot;,syntax:[&quot;x &gt; y&quot;,&quot;larger(x, y)&quot;],description:&quot;Check if value x is larger than y. Returns true if x is larger than y, and false if not.&quot;,examples:[&quot;2 &gt; 3&quot;,&quot;5 &gt; 2*2&quot;,&quot;a = 3.3&quot;,&quot;b = 6-2.8&quot;,&quot;(a &gt; b)&quot;,&quot;(b &lt; a)&quot;,&quot;5 cm &gt; 2 inch&quot;],seealso:[&quot;equal&quot;,&quot;unequal&quot;,&quot;smaller&quot;,&quot;smallerEq&quot;,&quot;largerEq&quot;,&quot;compare&quot;]},largerEq:{name:&quot;largerEq&quot;,category:&quot;Relational&quot;,syntax:[&quot;x &gt;= y&quot;,&quot;largerEq(x, y)&quot;],description:&quot;Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.&quot;,examples:[&quot;2 &gt;= 1+1&quot;,&quot;2 &gt; 1+1&quot;,&quot;a = 3.2&quot;,&quot;b = 6-2.8&quot;,&quot;(a &gt;= b)&quot;],seealso:[&quot;equal&quot;,&quot;unequal&quot;,&quot;smallerEq&quot;,&quot;smaller&quot;,&quot;compare&quot;]},smaller:{name:&quot;smaller&quot;,category:&quot;Relational&quot;,syntax:[&quot;x &lt; y&quot;,&quot;smaller(x, y)&quot;],description:&quot;Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not.&quot;,examples:[&quot;2 &lt; 3&quot;,&quot;5 &lt; 2*2&quot;,&quot;a = 3.3&quot;,&quot;b = 6-2.8&quot;,&quot;(a &lt; b)&quot;,&quot;5 cm &lt; 2 inch&quot;],seealso:[&quot;equal&quot;,&quot;unequal&quot;,&quot;larger&quot;,&quot;smallerEq&quot;,&quot;largerEq&quot;,&quot;compare&quot;]},smallerEq:{name:&quot;smallerEq&quot;,category:&quot;Relational&quot;,syntax:[&quot;x &lt;= y&quot;,&quot;smallerEq(x, y)&quot;],description:&quot;Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.&quot;,examples:[&quot;2 &lt;= 1+1&quot;,&quot;2 &lt; 1+1&quot;,&quot;a = 3.2&quot;,&quot;b = 6-2.8&quot;,&quot;(a &lt;= b)&quot;],seealso:[&quot;equal&quot;,&quot;unequal&quot;,&quot;larger&quot;,&quot;smaller&quot;,&quot;largerEq&quot;,&quot;compare&quot;]},unequal:{name:&quot;unequal&quot;,category:&quot;Relational&quot;,syntax:[&quot;x != y&quot;,&quot;unequal(x, y)&quot;],description:&quot;Check unequality of two values. Returns true if the values are unequal, and false if they are equal.&quot;,examples:[&quot;2+2 != 3&quot;,&quot;2+2 != 4&quot;,&quot;a = 3.2&quot;,&quot;b = 6-2.8&quot;,&quot;a != b&quot;,&quot;50cm != 0.5m&quot;,&quot;5 cm != 2 inch&quot;],seealso:[&quot;equal&quot;,&quot;smaller&quot;,&quot;larger&quot;,&quot;smallerEq&quot;,&quot;largerEq&quot;,&quot;compare&quot;,&quot;deepEqual&quot;]},setCartesian:{name:&quot;setCartesian&quot;,category:&quot;Set&quot;,syntax:[&quot;setCartesian(set1, set2)&quot;],description:&quot;Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.&quot;,examples:[&quot;setCartesian([1, 2], [3, 4])&quot;],seealso:[&quot;setUnion&quot;,&quot;setIntersect&quot;,&quot;setDifference&quot;,&quot;setPowerset&quot;]},setDifference:{name:&quot;setDifference&quot;,category:&quot;Set&quot;,syntax:[&quot;setDifference(set1, set2)&quot;],description:&quot;Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.&quot;,examples:[&quot;setDifference([1, 2, 3, 4], [3, 4, 5, 6])&quot;,&quot;setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])&quot;],seealso:[&quot;setUnion&quot;,&quot;setIntersect&quot;,&quot;setSymDifference&quot;]},setDistinct:{name:&quot;setDistinct&quot;,category:&quot;Set&quot;,syntax:[&quot;setDistinct(set)&quot;],description:&quot;Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.&quot;,examples:[&quot;setDistinct([1, 1, 1, 2, 2, 3])&quot;],seealso:[&quot;setMultiplicity&quot;]},setIntersect:{name:&quot;setIntersect&quot;,category:&quot;Set&quot;,syntax:[&quot;setIntersect(set1, set2)&quot;],description:&quot;Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.&quot;,examples:[&quot;setIntersect([1, 2, 3, 4], [3, 4, 5, 6])&quot;,&quot;setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])&quot;],seealso:[&quot;setUnion&quot;,&quot;setDifference&quot;]},setIsSubset:{name:&quot;setIsSubset&quot;,category:&quot;Set&quot;,syntax:[&quot;setIsSubset(set1, set2)&quot;],description:&quot;Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.&quot;,examples:[&quot;setIsSubset([1, 2], [3, 4, 5, 6])&quot;,&quot;setIsSubset([3, 4], [3, 4, 5, 6])&quot;],seealso:[&quot;setUnion&quot;,&quot;setIntersect&quot;,&quot;setDifference&quot;]},setMultiplicity:{name:&quot;setMultiplicity&quot;,category:&quot;Set&quot;,syntax:[&quot;setMultiplicity(element, set)&quot;],description:&quot;Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.&quot;,examples:[&quot;setMultiplicity(1, [1, 2, 2, 4])&quot;,&quot;setMultiplicity(2, [1, 2, 2, 4])&quot;],seealso:[&quot;setDistinct&quot;,&quot;setSize&quot;]},setPowerset:{name:&quot;setPowerset&quot;,category:&quot;Set&quot;,syntax:[&quot;setPowerset(set)&quot;],description:&quot;Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.&quot;,examples:[&quot;setPowerset([1, 2, 3])&quot;],seealso:[&quot;setCartesian&quot;]},setSize:{name:&quot;setSize&quot;,category:&quot;Set&quot;,syntax:[&quot;setSize(set)&quot;,&quot;setSize(set, unique)&quot;],description:'Count the number of elements of a (multi)set. When the second parameter &quot;unique&quot; is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:[&quot;setSize([1, 2, 2, 4])&quot;,&quot;setSize([1, 2, 2, 4], true)&quot;],seealso:[&quot;setUnion&quot;,&quot;setIntersect&quot;,&quot;setDifference&quot;]},setSymDifference:{name:&quot;setSymDifference&quot;,category:&quot;Set&quot;,syntax:[&quot;setSymDifference(set1, set2)&quot;],description:&quot;Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.&quot;,examples:[&quot;setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])&quot;,&quot;setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])&quot;],seealso:[&quot;setUnion&quot;,&quot;setIntersect&quot;,&quot;setDifference&quot;]},setUnion:{name:&quot;setUnion&quot;,category:&quot;Set&quot;,syntax:[&quot;setUnion(set1, set2)&quot;],description:&quot;Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.&quot;,examples:[&quot;setUnion([1, 2, 3, 4], [3, 4, 5, 6])&quot;,&quot;setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])&quot;],seealso:[&quot;setIntersect&quot;,&quot;setDifference&quot;]},zpk2tf:{name:&quot;zpk2tf&quot;,category:&quot;Signal&quot;,syntax:[&quot;zpk2tf(z, p, k)&quot;],description:&quot;Compute the transfer function of a zero-pole-gain model.&quot;,examples:[&quot;zpk2tf([1, 2], [-1, -2], 1)&quot;,&quot;zpk2tf([1, 2], [-1, -2])&quot;,&quot;zpk2tf([1 - 3i, 2 + 2i], [-1, -2])&quot;],seealso:[]},freqz:{name:&quot;freqz&quot;,category:&quot;Signal&quot;,syntax:[&quot;freqz(b, a)&quot;,&quot;freqz(b, a, w)&quot;],description:&quot;Calculates the frequency response of a filter given its numerator and denominator coefficients.&quot;,examples:[&quot;freqz([1, 2], [1, 2, 3])&quot;,&quot;freqz([1, 2], [1, 2, 3], [0, 1])&quot;,&quot;freqz([1, 2], [1, 2, 3], 512)&quot;],seealso:[]},erf:{name:&quot;erf&quot;,category:&quot;Special&quot;,syntax:[&quot;erf(x)&quot;],description:&quot;Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x&quot;,examples:[&quot;erf(0.2)&quot;,&quot;erf(-0.5)&quot;,&quot;erf(4)&quot;],seealso:[]},cumsum:{name:&quot;cumsum&quot;,category:&quot;Statistics&quot;,syntax:[&quot;cumsum(a, b, c, ...)&quot;,&quot;cumsum(A)&quot;],description:&quot;Compute the cumulative sum of all values.&quot;,examples:[&quot;cumsum(2, 3, 4, 1)&quot;,&quot;cumsum([2, 3, 4, 1])&quot;,&quot;cumsum([1, 2; 3, 4])&quot;,&quot;cumsum([1, 2; 3, 4], 1)&quot;,&quot;cumsum([1, 2; 3, 4], 2)&quot;],seealso:[&quot;max&quot;,&quot;mean&quot;,&quot;median&quot;,&quot;min&quot;,&quot;prod&quot;,&quot;std&quot;,&quot;sum&quot;,&quot;variance&quot;]},mad:{name:&quot;mad&quot;,category:&quot;Statistics&quot;,syntax:[&quot;mad(a, b, c, ...)&quot;,&quot;mad(A)&quot;],description:&quot;Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.&quot;,examples:[&quot;mad(10, 20, 30)&quot;,&quot;mad([1, 2, 3])&quot;],seealso:[&quot;mean&quot;,&quot;median&quot;,&quot;std&quot;,&quot;abs&quot;]},max:{name:&quot;max&quot;,category:&quot;Statistics&quot;,syntax:[&quot;max(a, b, c, ...)&quot;,&quot;max(A)&quot;,&quot;max(A, dimension)&quot;],description:&quot;Compute the maximum value of a list of values.&quot;,examples:[&quot;max(2, 3, 4, 1)&quot;,&quot;max([2, 3, 4, 1])&quot;,&quot;max([2, 5; 4, 3])&quot;,&quot;max([2, 5; 4, 3], 1)&quot;,&quot;max([2, 5; 4, 3], 2)&quot;,&quot;max(2.7, 7.1, -4.5, 2.0, 4.1)&quot;,&quot;min(2.7, 7.1, -4.5, 2.0, 4.1)&quot;],seealso:[&quot;mean&quot;,&quot;median&quot;,&quot;min&quot;,&quot;prod&quot;,&quot;std&quot;,&quot;sum&quot;,&quot;variance&quot;]},mean:{name:&quot;mean&quot;,category:&quot;Statistics&quot;,syntax:[&quot;mean(a, b, c, ...)&quot;,&quot;mean(A)&quot;,&quot;mean(A, dimension)&quot;],description:&quot;Compute the arithmetic mean of a list of values.&quot;,examples:[&quot;mean(2, 3, 4, 1)&quot;,&quot;mean([2, 3, 4, 1])&quot;,&quot;mean([2, 5; 4, 3])&quot;,&quot;mean([2, 5; 4, 3], 1)&quot;,&quot;mean([2, 5; 4, 3], 2)&quot;,&quot;mean([1.0, 2.7, 3.2, 4.0])&quot;],seealso:[&quot;max&quot;,&quot;median&quot;,&quot;min&quot;,&quot;prod&quot;,&quot;std&quot;,&quot;sum&quot;,&quot;variance&quot;]},median:{name:&quot;median&quot;,category:&quot;Statistics&quot;,syntax:[&quot;median(a, b, c, ...)&quot;,&quot;median(A)&quot;],description:&quot;Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.&quot;,examples:[&quot;median(5, 2, 7)&quot;,&quot;median([3, -1, 5, 7])&quot;],seealso:[&quot;max&quot;,&quot;mean&quot;,&quot;min&quot;,&quot;prod&quot;,&quot;std&quot;,&quot;sum&quot;,&quot;variance&quot;,&quot;quantileSeq&quot;]},min:{name:&quot;min&quot;,category:&quot;Statistics&quot;,syntax:[&quot;min(a, b, c, ...)&quot;,&quot;min(A)&quot;,&quot;min(A, dimension)&quot;],description:&quot;Compute the minimum value of a list of values.&quot;,examples:[&quot;min(2, 3, 4, 1)&quot;,&quot;min([2, 3, 4, 1])&quot;,&quot;min([2, 5; 4, 3])&quot;,&quot;min([2, 5; 4, 3], 1)&quot;,&quot;min([2, 5; 4, 3], 2)&quot;,&quot;min(2.7, 7.1, -4.5, 2.0, 4.1)&quot;,&quot;max(2.7, 7.1, -4.5, 2.0, 4.1)&quot;],seealso:[&quot;max&quot;,&quot;mean&quot;,&quot;median&quot;,&quot;prod&quot;,&quot;std&quot;,&quot;sum&quot;,&quot;variance&quot;]},mode:{name:&quot;mode&quot;,category:&quot;Statistics&quot;,syntax:[&quot;mode(a, b, c, ...)&quot;,&quot;mode(A)&quot;,&quot;mode(A, a, b, B, c, ...)&quot;],description:&quot;Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.&quot;,examples:[&quot;mode(2, 1, 4, 3, 1)&quot;,&quot;mode([1, 2.7, 3.2, 4, 2.7])&quot;,&quot;mode(1, 4, 6, 1, 6)&quot;],seealso:[&quot;max&quot;,&quot;mean&quot;,&quot;min&quot;,&quot;median&quot;,&quot;prod&quot;,&quot;std&quot;,&quot;sum&quot;,&quot;variance&quot;]},prod:{name:&quot;prod&quot;,category:&quot;Statistics&quot;,syntax:[&quot;prod(a, b, c, ...)&quot;,&quot;prod(A)&quot;],description:&quot;Compute the product of all values.&quot;,examples:[&quot;prod(2, 3, 4)&quot;,&quot;prod([2, 3, 4])&quot;,&quot;prod([2, 5; 4, 3])&quot;],seealso:[&quot;max&quot;,&quot;mean&quot;,&quot;min&quot;,&quot;median&quot;,&quot;min&quot;,&quot;std&quot;,&quot;sum&quot;,&quot;variance&quot;]},quantileSeq:{name:&quot;quantileSeq&quot;,category:&quot;Statistics&quot;,syntax:[&quot;quantileSeq(A, prob[, sorted])&quot;,&quot;quantileSeq(A, [prob1, prob2, ...][, sorted])&quot;,&quot;quantileSeq(A, N[, sorted])&quot;],description:&quot;Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probablity are: Number, BigNumber. \sn\snIn case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.&quot;,examples:[&quot;quantileSeq([3, -1, 5, 7], 0.5)&quot;,&quot;quantileSeq([3, -1, 5, 7], [1/3, 2/3])&quot;,&quot;quantileSeq([3, -1, 5, 7], 2)&quot;,&quot;quantileSeq([-1, 3, 5, 7], 0.5, true)&quot;],seealso:[&quot;mean&quot;,&quot;median&quot;,&quot;min&quot;,&quot;max&quot;,&quot;prod&quot;,&quot;std&quot;,&quot;sum&quot;,&quot;variance&quot;]},std:{name:&quot;std&quot;,category:&quot;Statistics&quot;,syntax:[&quot;std(a, b, c, ...)&quot;,&quot;std(A)&quot;,&quot;std(A, dimension)&quot;,&quot;std(A, normalization)&quot;,&quot;std(A, dimension, normalization)&quot;],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be &quot;unbiased&quot; (default), &quot;uncorrected&quot;, or &quot;biased&quot;.',examples:[&quot;std(2, 4, 6)&quot;,&quot;std([2, 4, 6, 8])&quot;,'std([2, 4, 6, 8], &quot;uncorrected&quot;)','std([2, 4, 6, 8], &quot;biased&quot;)',&quot;std([1, 2, 3; 4, 5, 6])&quot;],seealso:[&quot;max&quot;,&quot;mean&quot;,&quot;min&quot;,&quot;median&quot;,&quot;prod&quot;,&quot;sum&quot;,&quot;variance&quot;]},sum:{name:&quot;sum&quot;,category:&quot;Statistics&quot;,syntax:[&quot;sum(a, b, c, ...)&quot;,&quot;sum(A)&quot;,&quot;sum(A, dimension)&quot;],description:&quot;Compute the sum of all values.&quot;,examples:[&quot;sum(2, 3, 4, 1)&quot;,&quot;sum([2, 3, 4, 1])&quot;,&quot;sum([2, 5; 4, 3])&quot;],seealso:[&quot;max&quot;,&quot;mean&quot;,&quot;median&quot;,&quot;min&quot;,&quot;prod&quot;,&quot;std&quot;,&quot;sum&quot;,&quot;variance&quot;]},variance:{name:&quot;variance&quot;,category:&quot;Statistics&quot;,syntax:[&quot;variance(a, b, c, ...)&quot;,&quot;variance(A)&quot;,&quot;variance(A, dimension)&quot;,&quot;variance(A, normalization)&quot;,&quot;variance(A, dimension, normalization)&quot;],description:'Compute the variance of all values. Optional parameter normalization can be &quot;unbiased&quot; (default), &quot;uncorrected&quot;, or &quot;biased&quot;.',examples:[&quot;variance(2, 4, 6)&quot;,&quot;variance([2, 4, 6, 8])&quot;,'variance([2, 4, 6, 8], &quot;uncorrected&quot;)','variance([2, 4, 6, 8], &quot;biased&quot;)',&quot;variance([1, 2, 3; 4, 5, 6])&quot;],seealso:[&quot;max&quot;,&quot;mean&quot;,&quot;min&quot;,&quot;median&quot;,&quot;min&quot;,&quot;prod&quot;,&quot;std&quot;,&quot;sum&quot;]},acos:{name:&quot;acos&quot;,category:&quot;Trigonometry&quot;,syntax:[&quot;acos(x)&quot;],description:&quot;Compute the inverse cosine of a value in radians.&quot;,examples:[&quot;acos(0.5)&quot;,&quot;acos(cos(2.3))&quot;],seealso:[&quot;cos&quot;,&quot;atan&quot;,&quot;asin&quot;]},acosh:{name:&quot;acosh&quot;,category:&quot;Trigonometry&quot;,syntax:[&quot;acosh(x)&quot;],description:&quot;Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.&quot;,examples:[&quot;acosh(1.5)&quot;],seealso:[&quot;cosh&quot;,&quot;asinh&quot;,&quot;atanh&quot;]},acot:{name:&quot;acot&quot;,category:&quot;Trigonometry&quot;,syntax:[&quot;acot(x)&quot;],description:&quot;Calculate the inverse cotangent of a value.&quot;,examples:[&quot;acot(0.5)&quot;,&quot;acot(cot(0.5))&quot;,&quot;acot(2)&quot;],seealso:[&quot;cot&quot;,&quot;atan&quot;]},acoth:{name:&quot;acoth&quot;,category:&quot;Trigonometry&quot;,syntax:[&quot;acoth(x)&quot;],description:&quot;Calculate the hyperbolic arccotangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.&quot;,examples:[&quot;acoth(2)&quot;,&quot;acoth(0.5)&quot;],seealso:[&quot;acsch&quot;,&quot;asech&quot;]},acsc:{name:&quot;acsc&quot;,category:&quot;Trigonometry&quot;,syntax:[&quot;acsc(x)&quot;],description:&quot;Calculate the inverse cotangent of a value.&quot;,examples:[&quot;acsc(2)&quot;,&quot;acsc(csc(0.5))&quot;,&quot;acsc(0.5)&quot;],seealso:[&quot;csc&quot;,&quot;asin&quot;,&quot;asec&quot;]},acsch:{name:&quot;acsch&quot;,category:&quot;Trigonometry&quot;,syntax:[&quot;acsch(x)&quot;],description:&quot;Calculate the hyperbolic arccosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.&quot;,examples:[&quot;acsch(0.5)&quot;],seealso:[&quot;asech&quot;,&quot;acoth&quot;]},asec:{name:&quot;asec&quot;,category:&quot;Trigonometry&quot;,syntax:[&quot;asec(x)&quot;],description:&quot;Calculate the inverse secant of a value.&quot;,examples:[&quot;asec(0.5)&quot;,&quot;asec(sec(0.5))&quot;,&quot;asec(2)&quot;],seealso:[&quot;acos&quot;,&quot;acot&quot;,&quot;acsc&quot;]},asech:{name:&quot;asech&quot;,category:&quot;Trigonometry&quot;,syntax:[&quot;asech(x)&quot;],description:&quot;Calculate the inverse secant of a value.&quot;,examples:[&quot;asech(0.5)&quot;],seealso:[&quot;acsch&quot;,&quot;acoth&quot;]},asin:{name:&quot;asin&quot;,category:&quot;Trigonometry&quot;,syntax:[&quot;asin(x)&quot;],description:&quot;Compute the inverse sine of a value in radians.&quot;,examples:[&quot;asin(0.5)&quot;,&quot;asin(sin(0.5))&quot;],seealso:[&quot;sin&quot;,&quot;acos&quot;,&quot;atan&quot;]},asinh:{name:&quot;asinh&quot;,category:&quot;Trigonometry&quot;,syntax:[&quot;asinh(x)&quot;],description:&quot;Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.&quot;,examples:[&quot;asinh(0.5)&quot;],seealso:[&quot;acosh&quot;,&quot;atanh&quot;]},atan:{name:&quot;atan&quot;,category:&quot;Trigonometry&quot;,syntax:[&quot;atan(x)&quot;],description:&quot;Compute the inverse tangent of a value in radians.&quot;,examples:[&quot;atan(0.5)&quot;,&quot;atan(tan(0.5))&quot;],seealso:[&quot;tan&quot;,&quot;acos&quot;,&quot;asin&quot;]},atanh:{name:&quot;atanh&quot;,category:&quot;Trigonometry&quot;,syntax:[&quot;atanh(x)&quot;],description:&quot;Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.&quot;,examples:[&quot;atanh(0.5)&quot;],seealso:[&quot;acosh&quot;,&quot;asinh&quot;]},atan2:{name:&quot;atan2&quot;,category:&quot;Trigonometry&quot;,syntax:[&quot;atan2(y, x)&quot;],description:&quot;Computes the principal value of the arc tangent of y/x in radians.&quot;,examples:[&quot;atan2(2, 2) / pi&quot;,&quot;angle = 60 deg in rad&quot;,&quot;x = cos(angle)&quot;,&quot;y = sin(angle)&quot;,&quot;atan2(y, x)&quot;],seealso:[&quot;sin&quot;,&quot;cos&quot;,&quot;tan&quot;]},cos:{name:&quot;cos&quot;,category:&quot;Trigonometry&quot;,syntax:[&quot;cos(x)&quot;],description:&quot;Compute the cosine of x in radians.&quot;,examples:[&quot;cos(2)&quot;,&quot;cos(pi / 4) ^ 2&quot;,&quot;cos(180 deg)&quot;,&quot;cos(60 deg)&quot;,&quot;sin(0.2)^2 + cos(0.2)^2&quot;],seealso:[&quot;acos&quot;,&quot;sin&quot;,&quot;tan&quot;]},cosh:{name:&quot;cosh&quot;,category:&quot;Trigonometry&quot;,syntax:[&quot;cosh(x)&quot;],description:&quot;Compute the hyperbolic cosine of x in radians.&quot;,examples:[&quot;cosh(0.5)&quot;],seealso:[&quot;sinh&quot;,&quot;tanh&quot;,&quot;coth&quot;]},cot:{name:&quot;cot&quot;,category:&quot;Trigonometry&quot;,syntax:[&quot;cot(x)&quot;],description:&quot;Compute the cotangent of x in radians. Defined as 1/tan(x)&quot;,examples:[&quot;cot(2)&quot;,&quot;1 / tan(2)&quot;],seealso:[&quot;sec&quot;,&quot;csc&quot;,&quot;tan&quot;]},coth:{name:&quot;coth&quot;,category:&quot;Trigonometry&quot;,syntax:[&quot;coth(x)&quot;],description:&quot;Compute the hyperbolic cotangent of x in radians.&quot;,examples:[&quot;coth(2)&quot;,&quot;1 / tanh(2)&quot;],seealso:[&quot;sech&quot;,&quot;csch&quot;,&quot;tanh&quot;]},csc:{name:&quot;csc&quot;,category:&quot;Trigonometry&quot;,syntax:[&quot;csc(x)&quot;],description:&quot;Compute the cosecant of x in radians. Defined as 1/sin(x)&quot;,examples:[&quot;csc(2)&quot;,&quot;1 / sin(2)&quot;],seealso:[&quot;sec&quot;,&quot;cot&quot;,&quot;sin&quot;]},csch:{name:&quot;csch&quot;,category:&quot;Trigonometry&quot;,syntax:[&quot;csch(x)&quot;],description:&quot;Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)&quot;,examples:[&quot;csch(2)&quot;,&quot;1 / sinh(2)&quot;],seealso:[&quot;sech&quot;,&quot;coth&quot;,&quot;sinh&quot;]},sec:{name:&quot;sec&quot;,category:&quot;Trigonometry&quot;,syntax:[&quot;sec(x)&quot;],description:&quot;Compute the secant of x in radians. Defined as 1/cos(x)&quot;,examples:[&quot;sec(2)&quot;,&quot;1 / cos(2)&quot;],seealso:[&quot;cot&quot;,&quot;csc&quot;,&quot;cos&quot;]},sech:{name:&quot;sech&quot;,category:&quot;Trigonometry&quot;,syntax:[&quot;sech(x)&quot;],description:&quot;Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)&quot;,examples:[&quot;sech(2)&quot;,&quot;1 / cosh(2)&quot;],seealso:[&quot;coth&quot;,&quot;csch&quot;,&quot;cosh&quot;]},sin:{name:&quot;sin&quot;,category:&quot;Trigonometry&quot;,syntax:[&quot;sin(x)&quot;],description:&quot;Compute the sine of x in radians.&quot;,examples:[&quot;sin(2)&quot;,&quot;sin(pi / 4) ^ 2&quot;,&quot;sin(90 deg)&quot;,&quot;sin(30 deg)&quot;,&quot;sin(0.2)^2 + cos(0.2)^2&quot;],seealso:[&quot;asin&quot;,&quot;cos&quot;,&quot;tan&quot;]},sinh:{name:&quot;sinh&quot;,category:&quot;Trigonometry&quot;,syntax:[&quot;sinh(x)&quot;],description:&quot;Compute the hyperbolic sine of x in radians.&quot;,examples:[&quot;sinh(0.5)&quot;],seealso:[&quot;cosh&quot;,&quot;tanh&quot;]},tan:{name:&quot;tan&quot;,category:&quot;Trigonometry&quot;,syntax:[&quot;tan(x)&quot;],description:&quot;Compute the tangent of x in radians.&quot;,examples:[&quot;tan(0.5)&quot;,&quot;sin(0.5) / cos(0.5)&quot;,&quot;tan(pi / 4)&quot;,&quot;tan(45 deg)&quot;],seealso:[&quot;atan&quot;,&quot;sin&quot;,&quot;cos&quot;]},tanh:{name:&quot;tanh&quot;,category:&quot;Trigonometry&quot;,syntax:[&quot;tanh(x)&quot;],description:&quot;Compute the hyperbolic tangent of x in radians.&quot;,examples:[&quot;tanh(0.5)&quot;,&quot;sinh(0.5) / cosh(0.5)&quot;],seealso:[&quot;sinh&quot;,&quot;cosh&quot;]},to:{name:&quot;to&quot;,category:&quot;Units&quot;,syntax:[&quot;x to unit&quot;,&quot;to(x, unit)&quot;],description:&quot;Change the unit of a value.&quot;,examples:[&quot;5 inch to cm&quot;,&quot;3.2kg to g&quot;,&quot;16 bytes in bits&quot;],seealso:[]},clone:{name:&quot;clone&quot;,category:&quot;Utils&quot;,syntax:[&quot;clone(x)&quot;],description:&quot;Clone a variable. Creates a copy of primitive variables,and a deep copy of matrices&quot;,examples:[&quot;clone(3.5)&quot;,&quot;clone(2 - 4i)&quot;,&quot;clone(45 deg)&quot;,&quot;clone([1, 2; 3, 4])&quot;,'clone(&quot;hello world&quot;)'],seealso:[]},format:{name:&quot;format&quot;,category:&quot;Utils&quot;,syntax:[&quot;format(value)&quot;,&quot;format(value, precision)&quot;],description:&quot;Format a value of any type as string.&quot;,examples:[&quot;format(2.3)&quot;,&quot;format(3 - 4i)&quot;,&quot;format([])&quot;,&quot;format(pi, 3)&quot;],seealso:[&quot;print&quot;]},bin:{name:&quot;bin&quot;,category:&quot;Utils&quot;,syntax:[&quot;bin(value)&quot;],description:&quot;Format a number as binary&quot;,examples:[&quot;bin(2)&quot;],seealso:[&quot;oct&quot;,&quot;hex&quot;]},oct:{name:&quot;oct&quot;,category:&quot;Utils&quot;,syntax:[&quot;oct(value)&quot;],description:&quot;Format a number as octal&quot;,examples:[&quot;oct(56)&quot;],seealso:[&quot;bin&quot;,&quot;hex&quot;]},hex:{name:&quot;hex&quot;,category:&quot;Utils&quot;,syntax:[&quot;hex(value)&quot;],description:&quot;Format a number as hexadecimal&quot;,examples:[&quot;hex(240)&quot;],seealso:[&quot;bin&quot;,&quot;oct&quot;]},isNaN:{name:&quot;isNaN&quot;,category:&quot;Utils&quot;,syntax:[&quot;isNaN(x)&quot;],description:&quot;Test whether a value is NaN (not a number)&quot;,examples:[&quot;isNaN(2)&quot;,&quot;isNaN(0 / 0)&quot;,&quot;isNaN(NaN)&quot;,&quot;isNaN(Infinity)&quot;],seealso:[&quot;isNegative&quot;,&quot;isNumeric&quot;,&quot;isPositive&quot;,&quot;isZero&quot;]},isInteger:{name:&quot;isInteger&quot;,category:&quot;Utils&quot;,syntax:[&quot;isInteger(x)&quot;],description:&quot;Test whether a value is an integer number.&quot;,examples:[&quot;isInteger(2)&quot;,&quot;isInteger(3.5)&quot;,&quot;isInteger([3, 0.5, -2])&quot;],seealso:[&quot;isNegative&quot;,&quot;isNumeric&quot;,&quot;isPositive&quot;,&quot;isZero&quot;]},isNegative:{name:&quot;isNegative&quot;,category:&quot;Utils&quot;,syntax:[&quot;isNegative(x)&quot;],description:&quot;Test whether a value is negative: smaller than zero.&quot;,examples:[&quot;isNegative(2)&quot;,&quot;isNegative(0)&quot;,&quot;isNegative(-4)&quot;,&quot;isNegative([3, 0.5, -2])&quot;],seealso:[&quot;isInteger&quot;,&quot;isNumeric&quot;,&quot;isPositive&quot;,&quot;isZero&quot;]},isNumeric:{name:&quot;isNumeric&quot;,category:&quot;Utils&quot;,syntax:[&quot;isNumeric(x)&quot;],description:&quot;Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.&quot;,examples:[&quot;isNumeric(2)&quot;,'isNumeric(&quot;2&quot;)','hasNumericValue(&quot;2&quot;)',&quot;isNumeric(0)&quot;,&quot;isNumeric(bignumber(500))&quot;,&quot;isNumeric(fraction(0.125))&quot;,&quot;isNumeric(2 + 3i)&quot;,'isNumeric([2.3, &quot;foo&quot;, false])'],seealso:[&quot;isInteger&quot;,&quot;isZero&quot;,&quot;isNegative&quot;,&quot;isPositive&quot;,&quot;isNaN&quot;,&quot;hasNumericValue&quot;]},hasNumericValue:{name:&quot;hasNumericValue&quot;,category:&quot;Utils&quot;,syntax:[&quot;hasNumericValue(x)&quot;],description:&quot;Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.&quot;,examples:[&quot;hasNumericValue(2)&quot;,'hasNumericValue(&quot;2&quot;)','isNumeric(&quot;2&quot;)',&quot;hasNumericValue(0)&quot;,&quot;hasNumericValue(bignumber(500))&quot;,&quot;hasNumericValue(fraction(0.125))&quot;,&quot;hasNumericValue(2 + 3i)&quot;,'hasNumericValue([2.3, &quot;foo&quot;, false])'],seealso:[&quot;isInteger&quot;,&quot;isZero&quot;,&quot;isNegative&quot;,&quot;isPositive&quot;,&quot;isNaN&quot;,&quot;isNumeric&quot;]},isPositive:{name:&quot;isPositive&quot;,category:&quot;Utils&quot;,syntax:[&quot;isPositive(x)&quot;],description:&quot;Test whether a value is positive: larger than zero.&quot;,examples:[&quot;isPositive(2)&quot;,&quot;isPositive(0)&quot;,&quot;isPositive(-4)&quot;,&quot;isPositive([3, 0.5, -2])&quot;],seealso:[&quot;isInteger&quot;,&quot;isNumeric&quot;,&quot;isNegative&quot;,&quot;isZero&quot;]},isPrime:{name:&quot;isPrime&quot;,category:&quot;Utils&quot;,syntax:[&quot;isPrime(x)&quot;],description:&quot;Test whether a value is prime: has no divisors other than itself and one.&quot;,examples:[&quot;isPrime(3)&quot;,&quot;isPrime(-2)&quot;,&quot;isPrime([2, 17, 100])&quot;],seealso:[&quot;isInteger&quot;,&quot;isNumeric&quot;,&quot;isNegative&quot;,&quot;isZero&quot;]},isZero:{name:&quot;isZero&quot;,category:&quot;Utils&quot;,syntax:[&quot;isZero(x)&quot;],description:&quot;Test whether a value is zero.&quot;,examples:[&quot;isZero(2)&quot;,&quot;isZero(0)&quot;,&quot;isZero(-4)&quot;,&quot;isZero([3, 0, -2, 0])&quot;],seealso:[&quot;isInteger&quot;,&quot;isNumeric&quot;,&quot;isNegative&quot;,&quot;isPositive&quot;]},print:{name:&quot;print&quot;,category:&quot;Utils&quot;,syntax:[&quot;print(template, values)&quot;,&quot;print(template, values, precision)&quot;],description:&quot;Interpolate values into a string template.&quot;,examples:['print(&quot;Lucy is $age years old&quot;, {age: 5})','print(&quot;The value of pi is $pi&quot;, {pi: pi}, 3)','print(&quot;Hello, $user.name!&quot;, {user: {name: &quot;John&quot;}})','print(&quot;Values: $0, $1, $2&quot;, [6, 9, 4])'],seealso:[&quot;format&quot;]},typeOf:{name:&quot;typeOf&quot;,category:&quot;Utils&quot;,syntax:[&quot;typeOf(x)&quot;],description:&quot;Get the type of a variable.&quot;,examples:[&quot;typeOf(3.5)&quot;,&quot;typeOf(2 - 4i)&quot;,&quot;typeOf(45 deg)&quot;,'typeOf(&quot;hello world&quot;)'],seealso:[&quot;getMatrixDataType&quot;]},numeric:{name:&quot;numeric&quot;,category:&quot;Utils&quot;,syntax:[&quot;numeric(x)&quot;],description:&quot;Convert a numeric input to a specific numeric type: number, BigNumber, or Fraction.&quot;,examples:['numeric(&quot;4&quot;)','numeric(&quot;4&quot;, &quot;number&quot;)','numeric(&quot;4&quot;, &quot;BigNumber&quot;)','numeric(&quot;4&quot;, &quot;Fraction&quot;)','numeric(4, &quot;Fraction&quot;)','numeric(fraction(2, 5), &quot;number&quot;)'],seealso:[&quot;number&quot;,&quot;fraction&quot;,&quot;bignumber&quot;,&quot;string&quot;,&quot;format&quot;]}},km=&quot;help&quot;,Im=Ee(km,[&quot;typed&quot;,&quot;mathWithTransform&quot;,&quot;Help&quot;],(function(e){var t=e.typed,r=e.mathWithTransform,n=e.Help;return t(km,{any:function(e){var t,i=e;if(&quot;string&quot;!=typeof e)for(t in r)if(Ne(r,t)&amp;&amp;e===r[t]){i=t;break}var a=Te(_m,i);if(!a){var o=&quot;function&quot;==typeof i?i.name:i;throw new Error('No documentation found on &quot;'+o+'&quot;')}return new n(a)}})})),Rm=&quot;chain&quot;,zm=Ee(Rm,[&quot;typed&quot;,&quot;Chain&quot;],(function(e){var t=e.typed,r=e.Chain;return t(Rm,{&quot;&quot;:function(){return new r},any:function(e){return new r(e)}})})),qm=Ee(&quot;det&quot;,[&quot;typed&quot;,&quot;matrix&quot;,&quot;subtract&quot;,&quot;multiply&quot;,&quot;divideScalar&quot;,&quot;isZero&quot;,&quot;unaryMinus&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.subtract,i=e.multiply,a=e.divideScalar,o=e.isZero,u=e.unaryMinus;return t(&quot;det&quot;,{any:function(e){return he(e)},&quot;Array | Matrix&quot;:function(e){var t;switch((t=l(e)?e.size():Array.isArray(e)?(e=r(e)).size():[]).length){case 0:return he(e);case 1:if(1===t[0])return he(e.valueOf()[0]);if(0===t[0])return 1;throw new RangeError(&quot;Matrix must be square (size: &quot;+Vr(t)+&quot;)&quot;);case 2:var s=t[0],c=t[1];if(s===c)return function(e,t,r){if(1===t)return he(e[0][0]);if(2===t)return n(i(e[0][0],e[1][1]),i(e[1][0],e[0][1]));for(var s=!1,c=new Array(t).fill(0).map((function(e,t){return t})),f=0;f&lt;t;f++){var l=c[f];if(o(e[l][f])){var p=void 0;for(p=f+1;p&lt;t;p++)if(!o(e[c[p]][f])){l=c[p],c[p]=c[f],c[f]=l,s=!s;break}if(p===t)return e[l][f]}for(var m=e[l][f],h=0===f?1:e[c[f-1]][f-1],d=f+1;d&lt;t;d++)for(var v=c[d],y=f+1;y&lt;t;y++)e[v][y]=a(n(i(e[v][y],m),i(e[v][f],e[l][y])),h)}var g=e[c[t-1]][t-1];return s?u(g):g}(e.clone().valueOf(),s);if(0===c)return 1;throw new RangeError(&quot;Matrix must be square (size: &quot;+Vr(t)+&quot;)&quot;);default:throw new RangeError(&quot;Matrix must be two dimensional (size: &quot;+Vr(t)+&quot;)&quot;)}}})})),jm=Ee(&quot;inv&quot;,[&quot;typed&quot;,&quot;matrix&quot;,&quot;divideScalar&quot;,&quot;addScalar&quot;,&quot;multiply&quot;,&quot;unaryMinus&quot;,&quot;det&quot;,&quot;identity&quot;,&quot;abs&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.divideScalar,i=e.addScalar,a=e.multiply,o=e.unaryMinus,u=e.det,s=e.identity,c=e.abs;return t(&quot;inv&quot;,{&quot;Array | Matrix&quot;:function(e){var t=l(e)?e.size():Kr(e);switch(t.length){case 1:if(1===t[0])return l(e)?r([n(1,e.valueOf()[0])]):[n(1,e[0])];throw new RangeError(&quot;Matrix must be square (size: &quot;+Vr(t)+&quot;)&quot;);case 2:var i=t[0],a=t[1];if(i===a)return l(e)?r(f(e.valueOf(),i,a),e.storage()):f(e,i,a);throw new RangeError(&quot;Matrix must be square (size: &quot;+Vr(t)+&quot;)&quot;);default:throw new RangeError(&quot;Matrix must be two dimensional (size: &quot;+Vr(t)+&quot;)&quot;)}},any:function(e){return n(1,e)}});function f(e,t,r){var f,l,p,m,h;if(1===t){if(0===(m=e[0][0]))throw Error(&quot;Cannot calculate inverse, determinant is zero&quot;);return[[n(1,m)]]}if(2===t){var d=u(e);if(0===d)throw Error(&quot;Cannot calculate inverse, determinant is zero&quot;);return[[n(e[1][1],d),n(o(e[0][1]),d)],[n(o(e[1][0]),d),n(e[0][0],d)]]}var v=e.concat();for(f=0;f&lt;t;f++)v[f]=v[f].concat();for(var y=s(t).valueOf(),g=0;g&lt;r;g++){var x=c(v[g][g]),b=g;for(f=g+1;f&lt;t;)c(v[f][g])&gt;x&amp;&amp;(x=c(v[f][g]),b=f),f++;if(0===x)throw Error(&quot;Cannot calculate inverse, determinant is zero&quot;);(f=b)!==g&amp;&amp;(h=v[g],v[g]=v[f],v[f]=h,h=y[g],y[g]=y[f],y[f]=h);var w=v[g],N=y[g];for(f=0;f&lt;t;f++){var D=v[f],E=y[f];if(f!==g){if(0!==D[g]){for(p=n(o(D[g]),w[g]),l=g;l&lt;r;l++)D[l]=i(D[l],a(p,w[l]));for(l=0;l&lt;r;l++)E[l]=i(E[l],a(p,N[l]))}}else{for(p=w[g],l=g;l&lt;r;l++)D[l]=n(D[l],p);for(l=0;l&lt;r;l++)E[l]=n(E[l],p)}}}return y}})),Pm=&quot;pinv&quot;,Lm=Ee(Pm,[&quot;typed&quot;,&quot;matrix&quot;,&quot;inv&quot;,&quot;deepEqual&quot;,&quot;equal&quot;,&quot;dotDivide&quot;,&quot;dot&quot;,&quot;ctranspose&quot;,&quot;divideScalar&quot;,&quot;multiply&quot;,&quot;add&quot;,&quot;Complex&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.inv,i=e.deepEqual,a=e.equal,o=e.dotDivide,u=e.dot,s=e.ctranspose,c=e.divideScalar,f=e.multiply,p=e.add,m=e.Complex;return t(Pm,{&quot;Array | Matrix&quot;:function(e){var t=l(e)?e.size():Kr(e);switch(t.length){case 1:return v(e)?s(e):1===t[0]?n(e):o(s(e),u(e,e));case 2:if(v(e))return s(e);var i=t[0],a=t[1];if(i===a)try{return n(e)}catch(e){if(!(e instanceof Error&amp;&amp;e.message.match(/Cannot calculate inverse, determinant is zero/)))throw e}return l(e)?r(h(e.valueOf(),i,a),e.storage()):h(e,i,a);default:throw new RangeError(&quot;Matrix must be two dimensional (size: &quot;+Vr(t)+&quot;)&quot;)}},any:function(e){return a(e,0)?he(e):c(1,e)}});function h(e,t,r){var i=function(e,t,r){var n=function(e,t,r){for(var n=he(e),i=0,a=0;a&lt;t;a++){if(r&lt;=i)return n;for(var u=a;d(n[u][i]);)if(t===++u&amp;&amp;(u=a,r===++i))return n;var s=[n[a],n[u]];n[u]=s[0],n[a]=s[1];for(var c=n[a][i],l=0;l&lt;r;l++)n[a][l]=o(n[a][l],c);for(var m=0;m&lt;t;m++)if(m!==a){c=n[m][i];for(var h=0;h&lt;r;h++)n[m][h]=p(n[m][h],f(-1,f(c,n[a][h])))}i++}return n}(e,t,r);return{C:e.map((function(e,r){return e.filter((function(e,r){return r&lt;t&amp;&amp;!d(u(n[r],n[r]))}))})),F:n.filter((function(e,t){return!d(u(n[t],n[t]))}))}}(e,t,r),a=i.C,c=i.F,l=f(n(f(s(a),a)),s(a)),m=f(s(c),n(f(c,s(c))));return f(m,l)}function d(e){return a(p(e,m(1,1)),p(0,m(1,1)))}function v(e){return i(p(e,m(1,1)),p(f(e,0),m(1,1)))}}));function Um(e,t){var r=&quot;undefined&quot;!=typeof Symbol&amp;&amp;e[Symbol.iterator]||e[&quot;@@iterator&quot;];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if(&quot;string&quot;==typeof e)return $m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return&quot;Object&quot;===r&amp;&amp;e.constructor&amp;&amp;(r=e.constructor.name),&quot;Map&quot;===r||&quot;Set&quot;===r?Array.from(e):&quot;Arguments&quot;===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$m(e,t):void 0}}(e))||t&amp;&amp;e&amp;&amp;&quot;number&quot;==typeof e.length){r&amp;&amp;(e=r);var n=0,i=function(){};return{s:i,n:function(){return n&gt;=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError(&quot;Invalid attempt to iterate non-iterable instance.\snIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.&quot;)}var a,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw a}}}}function $m(e,t){(null==t||t&gt;e.length)&amp;&amp;(t=e.length);for(var r=0,n=new Array(t);r&lt;t;r++)n[r]=e[r];return n}var Hm=Ee(&quot;eigs&quot;,[&quot;config&quot;,&quot;typed&quot;,&quot;matrix&quot;,&quot;addScalar&quot;,&quot;equal&quot;,&quot;subtract&quot;,&quot;abs&quot;,&quot;atan&quot;,&quot;cos&quot;,&quot;sin&quot;,&quot;multiplyScalar&quot;,&quot;divideScalar&quot;,&quot;inv&quot;,&quot;bignumber&quot;,&quot;multiply&quot;,&quot;add&quot;,&quot;larger&quot;,&quot;column&quot;,&quot;flatten&quot;,&quot;number&quot;,&quot;complex&quot;,&quot;sqrt&quot;,&quot;diag&quot;,&quot;qr&quot;,&quot;usolve&quot;,&quot;usolveAll&quot;,&quot;im&quot;,&quot;re&quot;,&quot;smaller&quot;,&quot;matrixFromColumns&quot;,&quot;dot&quot;],(function(e){var t=e.config,r=e.typed,n=e.matrix,s=e.addScalar,c=e.subtract,f=e.equal,l=e.abs,p=e.atan,m=e.cos,h=e.sin,d=e.multiplyScalar,v=e.divideScalar,y=e.inv,g=e.bignumber,x=e.multiply,b=e.add,w=e.larger,N=e.column,D=e.flatten,E=e.number,A=e.complex,S=e.sqrt,C=e.diag,M=e.qr,F=e.usolve,O=e.usolveAll,T=e.im,B=e.re,_=e.smaller,k=e.matrixFromColumns,I=e.dot,R=function(e){var t=e.config,r=e.addScalar,n=e.subtract,i=e.abs,a=e.atan,o=e.cos,u=e.sin,s=e.multiplyScalar,c=e.inv,f=e.bignumber,l=e.multiply,p=e.add;function m(e,t,r,n){for(var i=e.length,a=Math.cos(t),o=Math.sin(t),u=b(i,0),s=b(i,0),c=0;c&lt;i;c++)u[c]=a*e[c][r]-o*e[c][n],s[c]=o*e[c][r]+a*e[c][n];for(var f=0;f&lt;i;f++)e[f][r]=u[f],e[f][n]=s[f];return e}function h(e,t,i,a){for(var c=e.length,l=o(t),p=u(t),m=b(c,f(0)),h=b(c,f(0)),d=0;d&lt;c;d++)m[d]=n(s(l,e[d][i]),s(p,e[d][a])),h[d]=r(s(p,e[d][i]),s(l,e[d][a]));for(var v=0;v&lt;c;v++)e[v][i]=m[v],e[v][a]=h[v];return e}function d(e,t,i,a){for(var c=e.length,m=f(o(t)),h=f(u(t)),d=s(m,m),v=s(h,h),y=b(c,f(0)),g=b(c,f(0)),x=l(f(2),m,h,e[i][a]),w=r(n(s(d,e[i][i]),x),s(v,e[a][a])),N=p(s(v,e[i][i]),x,s(d,e[a][a])),D=0;D&lt;c;D++)y[D]=n(s(m,e[i][D]),s(h,e[a][D])),g[D]=r(s(h,e[i][D]),s(m,e[a][D]));e[i][i]=w,e[a][a]=N,e[i][a]=f(0),e[a][i]=f(0);for(var E=0;E&lt;c;E++)E!==i&amp;&amp;E!==a&amp;&amp;(e[i][E]=y[E],e[E][i]=y[E],e[a][E]=g[E],e[E][a]=g[E]);return e}function v(e,t,r,n){for(var i=e.length,a=Math.cos(t),o=Math.sin(t),u=a*a,s=o*o,c=b(i,0),f=b(i,0),l=u*e[r][r]-2*a*o*e[r][n]+s*e[n][n],p=s*e[r][r]+2*a*o*e[r][n]+u*e[n][n],m=0;m&lt;i;m++)c[m]=a*e[r][m]-o*e[n][m],f[m]=o*e[r][m]+a*e[n][m];e[r][r]=l,e[n][n]=p,e[r][n]=0,e[n][r]=0;for(var h=0;h&lt;i;h++)h!==r&amp;&amp;h!==n&amp;&amp;(e[r][h]=c[h],e[h][r]=c[h],e[n][h]=f[h],e[h][n]=f[h]);return e}function y(e){for(var t=e.length,r=0,n=[0,1],i=0;i&lt;t;i++)for(var a=i+1;a&lt;t;a++)Math.abs(r)&lt;Math.abs(e[i][a])&amp;&amp;(r=Math.abs(e[i][a]),n=[i,a]);return[n,r]}function g(e){for(var t=e.length,r=0,n=[0,1],a=0;a&lt;t;a++)for(var o=a+1;o&lt;t;o++)i(r)&lt;i(e[a][o])&amp;&amp;(r=i(e[a][o]),n=[a,o]);return[n,r]}function x(e,t){for(var r=e.length,n=Array(r),a=Array(r),o=0;o&lt;r;o++)a[o]=Array(r);for(var u=0;u&lt;r;u++){for(var s=0,c=e[0],f=0;f&lt;e.length;f++)i(e[f])&lt;i(c)&amp;&amp;(c=e[s=f]);n[u]=e.splice(s,1)[0];for(var l=0;l&lt;r;l++)a[l][u]=t[l][s],t[l].splice(s,1)}return{values:n,vectors:a}}function b(e,t){for(var r=new Array(e),n=0;n&lt;e;n++)r[n]=t;return r}return function(e,r){var o=arguments.length&gt;2&amp;&amp;void 0!==arguments[2]?arguments[2]:t.epsilon,u=arguments.length&gt;3?arguments[3]:void 0;if(&quot;number&quot;===u)return function(e,r){for(var n,i=e.length,a=Math.abs(r/i),o=new Array(i),u=0;u&lt;i;u++)o[u]=b(i,0),o[u][u]=1;for(var s,c,f,l,p=y(e);Math.abs(p[1])&gt;=Math.abs(a);){var h=p[0][0],d=p[0][1];e=v(e,(s=e[h][h],c=e[d][d],f=e[h][d],l=void 0,l=c-s,n=Math.abs(l)&lt;=t.epsilon?Math.PI/4:.5*Math.atan(2*f/(c-s))),h,d),o=m(o,n,h,d),p=y(e)}for(var g=b(i,0),w=0;w&lt;i;w++)g[w]=e[w][w];return x(he(g),he(o))}(e,o);if(&quot;BigNumber&quot;===u)return function(e,r){for(var o,u=e.length,p=i(r/u),m=new Array(u),v=0;v&lt;u;v++)m[v]=b(u,0),m[v][v]=1;for(var y,w,N,D,E=g(e);i(E[1])&gt;=i(p);){var A=E[0][0],S=E[0][1];e=d(e,(y=e[A][A],w=e[S][S],N=e[A][S],D=void 0,D=n(w,y),o=i(D)&lt;=t.epsilon?f(-1).acos().div(4):s(.5,a(l(2,N,c(D))))),A,S),m=h(m,o,A,S),E=g(e)}for(var C=b(u,0),M=0;M&lt;u;M++)C[M]=e[M][M];return x(he(C),he(m))}(e,o);throw TypeError(&quot;Unsupported data type: &quot;+u)}}({config:t,addScalar:s,subtract:c,column:N,flatten:D,equal:f,abs:l,atan:p,cos:m,sin:h,multiplyScalar:d,inv:y,bignumber:g,complex:A,multiply:x,add:b}),z=function(e){var t=e.addScalar,r=e.subtract,n=e.flatten,i=e.multiply,a=e.multiplyScalar,o=e.divideScalar,u=e.sqrt,s=e.abs,c=e.bignumber,f=e.diag,l=e.inv,p=e.qr,m=e.usolve,h=e.usolveAll,d=e.equal,v=e.complex,y=e.larger,g=e.smaller,x=e.matrixFromColumns,b=e.dot;function w(e,t,n,i,a,o,u,f){var l=&quot;BigNumber&quot;===f,p=&quot;Complex&quot;===f,m=l?c(0):p?v(0):0,h=l?c(1):p?v(1):1;if(g(s(n),u))return[[h,m],[m,h]];if(y(s(r(a,o)),u))return[[r(a,i),r(o,i)],[n,n]];var d=r(e,a),x=r(t,a),b=r(n,a),w=r(i,a);return g(s(x),u)?[[d,h],[b,m]]:[[x,m],[w,h]]}function N(e,t){for(var r=0;r&lt;e.length;r++){var n;(n=e[r]).push.apply(n,_a(Array(t-e[r].length).fill(0)))}for(var i=e.length;i&lt;t;i++)e.push(Array(t).fill(0)),e[i][i]=1;return e}function D(e,t,r){for(var n=0;n&lt;e.length;n++)if(r(e[n],t))return n;return-1}function E(e,t,r,n,i){for(var a,o=&quot;BigNumber&quot;===i?c(1e3):1e3,u=0;a=A(t,r,i),a=m(e,a),!y(C(a),o);)if(++u&gt;=5)return null;for(u=0;;){var s=m(e,a);if(g(C(S(a,[s])),n))break;if(++u&gt;=10)return null;a=M(s)}return a}function A(e,t,r){var n=&quot;BigNumber&quot;===r,i=&quot;Complex&quot;===r,a=Array(e).fill(0).map((function(e){return 2*Math.random()-1}));return n&amp;&amp;(a=a.map((function(e){return c(e)}))),i&amp;&amp;(a=a.map((function(e){return v(e)}))),M(a=S(a,t),r)}function S(e,t){var n,a=Um(t);try{for(a.s();!(n=a.n()).done;){var u=n.value;e=r(e,i(o(b(u,e),b(u,u)),u))}}catch(e){a.e(e)}finally{a.f()}return e}function C(e){return s(u(b(e,e)))}function M(e,t){var r=&quot;Complex&quot;===t,n=&quot;BigNumber&quot;===t?c(1):r?v(1):1;return i(o(n,C(e)),e)}return function(e,m,b,A,S){void 0===S&amp;&amp;(S=!0);var C=function(e,r,n,i,u){var l,p=&quot;BigNumber&quot;===i,m=&quot;Complex&quot;===i,h=p?c(0):0,x=p?c(1):m?v(1):1,b=p?c(1):1,w=p?c(10):2,N=a(w,w);u&amp;&amp;(l=Array(r).fill(x));for(var D=!1;!D;){D=!0;for(var E=0;E&lt;r;E++){for(var A=h,S=h,C=0;C&lt;r;C++)if(E!==C){var M=s(e[E][C]);A=t(A,M),S=t(S,M)}if(!d(A,0)&amp;&amp;!d(S,0)){for(var F=b,O=A,T=o(S,w),B=a(S,w);g(O,T);)O=a(O,N),F=a(F,w);for(;y(O,B);)O=o(O,N),F=o(F,w);if(g(o(t(O,S),F),a(t(A,S),.95))){D=!1;for(var _=o(1,F),k=0;k&lt;r;k++)E!==k&amp;&amp;(e[E][k]=a(e[E][k],F),e[k][E]=a(e[k][E],_));u&amp;&amp;(l[E]=a(l[E],F))}}}}return f(l)}(e,m,0,A,S);!function(e,n,i,u,f,l){var p=&quot;BigNumber&quot;===u,m=&quot;Complex&quot;===u,h=p?c(0):m?v(0):0;p&amp;&amp;(i=c(i));for(var d=0;d&lt;n-2;d++){for(var y=0,x=h,b=d+1;b&lt;n;b++){var w=e[b][d];g(s(x),s(w))&amp;&amp;(x=w,y=b)}if(!g(s(x),i)){if(y!==d+1){var N=e[y];e[y]=e[d+1],e[d+1]=N;for(var D=0;D&lt;n;D++){var E=e[D][y];e[D][y]=e[D][d+1],e[D][d+1]=E}if(f){var A=l[y];l[y]=l[d+1],l[d+1]=A}}for(var S=d+2;S&lt;n;S++){var C=o(e[S][d],x);if(0!==C){for(var M=0;M&lt;n;M++)e[S][M]=r(e[S][M],a(C,e[d+1][M]));for(var F=0;F&lt;n;F++)e[F][d+1]=t(e[F][d+1],a(C,e[F][S]));if(f)for(var O=0;O&lt;n;O++)l[S][O]=r(l[S][O],a(C,l[d+1][O]))}}}}}(e,m,b,A,S,C);var M,F=function(e,n,o,l,m){var h=&quot;BigNumber&quot;===l,d=&quot;Complex&quot;===l,y=h?c(1):d?v(1):1;h&amp;&amp;(o=c(o));for(var x,b,D,E,A,S,C,M,F=he(e),O=[],T=n,B=[],_=m?f(Array(n).fill(y)):void 0,k=m?f(Array(T).fill(y)):void 0,I=0;I&lt;=100;){I+=1;for(var R=0;R&lt;T;R++)F[R][R]=r(F[R][R],0);var z=p(F),q=z.Q,j=z.R;F=i(j,q);for(var P=0;P&lt;T;P++)F[P][P]=t(F[P][P],0);if(m&amp;&amp;(k=i(k,q)),1===T||g(s(F[T-1][T-2]),o)){I=0,O.push(F[T-1][T-1]),m&amp;&amp;(B.unshift([[1]]),N(k,n),_=i(_,k),T&gt;1&amp;&amp;(k=f(Array(T-1).fill(y)))),T-=1,F.pop();for(var L=0;L&lt;T;L++)F[L].pop()}else if(2===T||g(s(F[T-2][T-3]),o)){I=0;var U=(x=F[T-2][T-2],b=F[T-2][T-1],D=F[T-1][T-2],E=F[T-1][T-1],A=void 0,S=void 0,C=void 0,M=void 0,A=t(x,E),S=r(a(x,E),a(b,D)),C=a(A,.5),M=a(u(r(a(A,A),a(4,S))),.5),[t(C,M),r(C,M)]);O.push.apply(O,_a(U)),m&amp;&amp;(B.unshift(w(F[T-2][T-2],F[T-2][T-1],F[T-1][T-2],F[T-1][T-1],U[0],U[1],o,l)),N(k,n),_=i(_,k),T&gt;2&amp;&amp;(k=f(Array(T-2).fill(y)))),T-=2,F.pop(),F.pop();for(var $=0;$&lt;T;$++)F[$].pop(),F[$].pop()}if(0===T)break}if(O.sort((function(e,t){return+r(s(e),s(t))})),I&gt;100){var H=Error(&quot;The eigenvalues failed to converge. Only found these eigenvalues: &quot;+O.join(&quot;, &quot;));throw H.values=O,H.vectors=[],H}var G=m?i(_,function(e,t){for(var r=[],n=0;n&lt;t;n++)r[n]=Array(t).fill(0);var i,a=0,o=Um(e);try{for(o.s();!(i=o.n()).done;){for(var u=i.value,s=u.length,c=0;c&lt;s;c++)for(var f=0;f&lt;s;f++)r[a+c][a+f]=u[c][f];a+=s}}catch(e){o.e(e)}finally{o.f()}return r}(B,n)):void 0;return{values:O,C:G}}(e,m,b,A,S),O=F.values,T=F.C;return S&amp;&amp;(M=function(e,t,a,o,u,s,p){var m,y=l(a),g=i(y,e,a),x=&quot;BigNumber&quot;===p,b=&quot;Complex&quot;===p,w=x?c(0):b?v(0):0,N=x?c(1):b?v(1):1,A=[],S=[],C=Um(u);try{for(C.s();!(m=C.n()).done;){var M=m.value,F=D(A,M,d);-1===F?(A.push(M),S.push(1)):S[F]+=1}}catch(z){C.e(z)}finally{C.f()}for(var O=[],T=A.length,B=Array(t).fill(w),_=f(Array(t).fill(N)),k=[],I=function(){var e=A[R],u=r(g,i(e,_)),c=h(u,B);for(c.shift();c.length&lt;S[R];){var f=E(u,t,c,s,p);if(null==f){k.push(e);break}c.push(f)}var m=i(l(o),a);c=c.map((function(e){return i(m,e)})),O.push.apply(O,_a(c.map((function(e){return n(e)}))))},R=0;R&lt;T;R++)I();if(0!==k.length){var z=new Error(&quot;Failed to find eigenvectors for the following eigenvalues: &quot;+k.join(&quot;, &quot;));throw z.values=u,z.vectors=O,z}return O}(e,m,T,C,O,b,A),M=x.apply(void 0,_a(M))),{values:O,vectors:M}}}({config:t,addScalar:s,subtract:c,multiply:x,multiplyScalar:d,flatten:D,divideScalar:v,sqrt:S,abs:l,bignumber:g,diag:C,qr:M,inv:y,usolve:F,usolveAll:O,equal:f,complex:A,larger:w,smaller:_,matrixFromColumns:k,dot:I});return r(&quot;eigs&quot;,{Array:function(e){return q(n(e))},&quot;Array, number|BigNumber&quot;:function(e,t){return q(n(e),t)},Matrix:function(e){var t=q(e),r=t.values,i=t.vectors;return{values:n(r),vectors:n(i)}},&quot;Matrix, number|BigNumber&quot;:function(e,t){var r=q(e,t),i=r.values,a=r.vectors;return{values:n(i),vectors:n(a)}}});function q(e,r){void 0===r&amp;&amp;(r=t.epsilon);var n=e.size();if(2!==n.length||n[0]!==n[1])throw new RangeError(&quot;Matrix must be square (size: &quot;+Vr(n)+&quot;)&quot;);var i=e.toArray(),a=n[0];if(function(e,t,r){for(var n=0;n&lt;t;n++)for(var i=0;i&lt;t;i++)if(w(g(l(T(e[n][i]))),r))return!1;return!0}(i,a,r)&amp;&amp;(function(e,t){for(var r=0;r&lt;t;r++)for(var n=0;n&lt;t;n++)e[r][n]=B(e[r][n])}(i,a),function(e,t,r){for(var n=0;n&lt;t;n++)for(var i=n;i&lt;t;i++)if(w(g(l(c(e[n][i],e[i][n]))),r))return!1;return!0}(i,a,r))){var o=j(e,i,a);return R(i,a,r,o)}var u=j(e,i,a);return z(i,a,r,u)}function j(e,t,r){var n=e.datatype();if(&quot;number&quot;===n||&quot;BigNumber&quot;===n||&quot;Complex&quot;===n)return n;for(var s=!1,c=!1,f=!1,l=0;l&lt;r;l++)for(var p=0;p&lt;r;p++){var m=t[l][p];if(i(m)||u(m))s=!0;else if(a(m))c=!0;else{if(!o(m))throw TypeError(&quot;Unsupported type in Matrix: &quot;+H(m));f=!0}}if(c&amp;&amp;f&amp;&amp;console.warn(&quot;Complex BigNumbers not supported, this operation will lose precission.&quot;),f){for(var h=0;h&lt;r;h++)for(var d=0;d&lt;r;d++)t[h][d]=A(t[h][d]);return&quot;Complex&quot;}if(c){for(var v=0;v&lt;r;v++)for(var y=0;y&lt;r;y++)t[v][y]=g(t[v][y]);return&quot;BigNumber&quot;}if(s){for(var x=0;x&lt;r;x++)for(var b=0;b&lt;r;b++)t[x][b]=E(t[x][b]);return&quot;number&quot;}throw TypeError(&quot;Matrix contains unsupported types only.&quot;)}})),Gm=&quot;expm&quot;,Vm=Ee(Gm,[&quot;typed&quot;,&quot;abs&quot;,&quot;add&quot;,&quot;identity&quot;,&quot;inv&quot;,&quot;multiply&quot;],(function(e){var t=e.typed,r=e.abs,n=e.add,i=e.identity,a=e.inv,o=e.multiply;return t(Gm,{Matrix:function(e){var t=e.size();if(2!==t.length||t[0]!==t[1])throw new RangeError(&quot;Matrix must be square (size: &quot;+Vr(t)+&quot;)&quot;);for(var s=t[0],c=function(e){for(var t=e.size()[0],n=0,i=0;i&lt;t;i++){for(var a=0,o=0;o&lt;t;o++)a+=r(e.get([i,o]));n=Math.max(a,n)}return n}(e),f=function(e,t){for(var r=0;r&lt;30;r++)for(var n=0;n&lt;=r;n++){var i=r-n;if(u(e,n,i)&lt;1e-15)return{q:n,j:i}}throw new Error(&quot;Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)&quot;)}(c),l=f.q,p=f.j,m=o(e,Math.pow(2,-p)),d=i(s),v=i(s),y=1,g=m,x=-1,b=1;b&lt;=l;b++)b&gt;1&amp;&amp;(g=o(g,m),x=-x),d=n(d,o(y=y*(l-b+1)/((2*l-b+1)*b),g)),v=n(v,o(y*x,g));for(var w=o(a(v),d),N=0;N&lt;p;N++)w=o(w,w);return h(e)?e.createSparseMatrix(w):w}});function u(e,t,r){for(var n=1,i=2;i&lt;=t;i++)n*=i;for(var a=n,o=t+1;o&lt;=2*t;o++)a*=o;var u=a*(2*t+1);return 8*Math.pow(e/Math.pow(2,r),2*t)*n*n/(a*u)}})),Zm=&quot;sqrtm&quot;,Wm=Ee(Zm,[&quot;typed&quot;,&quot;abs&quot;,&quot;add&quot;,&quot;multiply&quot;,&quot;map&quot;,&quot;sqrt&quot;,&quot;subtract&quot;,&quot;inv&quot;,&quot;size&quot;,&quot;max&quot;,&quot;identity&quot;],(function(e){var t=e.typed,r=e.abs,n=e.add,i=e.multiply,a=e.map,o=e.sqrt,u=e.subtract,s=e.inv,c=e.size,f=e.max,p=e.identity,m=1e-6;function h(e){var t,a=0,o=e,l=p(c(e));do{var h=o;if(o=i(.5,n(h,s(l))),l=i(.5,n(l,s(h))),(t=f(r(u(o,h))))&gt;m&amp;&amp;++a&gt;1e3)throw new Error(&quot;computing square root of matrix: iterative method could not converge&quot;)}while(t&gt;m);return o}return t(Zm,{&quot;Array | Matrix&quot;:function(e){var t=l(e)?e.size():Kr(e);switch(t.length){case 1:if(1===t[0])return a(e,o);throw new RangeError(&quot;Matrix must be square (size: &quot;+Vr(t)+&quot;)&quot;);case 2:if(t[0]===t[1])return h(e);throw new RangeError(&quot;Matrix must be square (size: &quot;+Vr(t)+&quot;)&quot;);default:throw new RangeError(&quot;Matrix must be at most two dimensional (size: &quot;+Vr(t)+&quot;)&quot;)}}})})),Ym=&quot;sylvester&quot;,Jm=Ee(Ym,[&quot;typed&quot;,&quot;schur&quot;,&quot;matrixFromColumns&quot;,&quot;matrix&quot;,&quot;multiply&quot;,&quot;range&quot;,&quot;concat&quot;,&quot;transpose&quot;,&quot;index&quot;,&quot;subset&quot;,&quot;add&quot;,&quot;subtract&quot;,&quot;identity&quot;,&quot;lusolve&quot;,&quot;abs&quot;],(function(e){var t=e.typed,r=e.schur,n=e.matrixFromColumns,i=e.matrix,a=e.multiply,o=e.range,u=e.concat,s=e.transpose,c=e.index,f=e.subset,l=e.add,p=e.subtract,m=e.identity,h=e.lusolve,d=e.abs;return t(Ym,{&quot;Matrix, Matrix, Matrix&quot;:v,&quot;Array, Matrix, Matrix&quot;:function(e,t,r){return v(i(e),t,r)},&quot;Array, Array, Matrix&quot;:function(e,t,r){return v(i(e),i(t),r)},&quot;Array, Matrix, Array&quot;:function(e,t,r){return v(i(e),t,i(r))},&quot;Matrix, Array, Matrix&quot;:function(e,t,r){return v(e,i(t),r)},&quot;Matrix, Array, Array&quot;:function(e,t,r){return v(e,i(t),i(r))},&quot;Matrix, Matrix, Array&quot;:function(e,t,r){return v(e,t,i(r))},&quot;Array, Array, Array&quot;:function(e,t,r){return v(i(e),i(t),i(r)).toArray()}});function v(e,t,v){for(var y=t.size()[0],g=e.size()[0],x=r(e),b=x.T,w=x.U,N=r(a(-1,t)),D=N.T,E=N.U,A=a(a(s(w),v),E),S=o(0,g),C=[],M=function(e,t){return u(e,t,1)},F=function(e,t){return u(e,t,0)},O=0;O&lt;y;O++)if(O&lt;y-1&amp;&amp;d(f(D,c(O+1,O)))&gt;1e-5){for(var T=F(f(A,c(S,O)),f(A,c(S,O+1))),B=0;B&lt;O;B++)T=l(T,F(a(C[B],f(D,c(B,O))),a(C[B],f(D,c(B,O+1)))));var _=a(m(g),a(-1,f(D,c(O,O)))),k=a(m(g),a(-1,f(D,c(O+1,O)))),I=a(m(g),a(-1,f(D,c(O,O+1)))),R=a(m(g),a(-1,f(D,c(O+1,O+1)))),z=F(M(l(b,_),k),M(I,l(b,R))),q=h(z,T);C[O]=q.subset(c(o(0,g),0)),C[O+1]=q.subset(c(o(g,2*g),0)),O++}else{for(var j=f(A,c(S,O)),P=0;P&lt;O;P++)j=l(j,a(C[P],f(D,c(P,O))));var L=f(D,c(O,O)),U=p(b,a(L,m(g)));C[O]=h(U,j)}var $=i(n.apply(void 0,C));return a(w,a($,s(E)))}})),Xm=&quot;schur&quot;,Qm=Ee(Xm,[&quot;typed&quot;,&quot;matrix&quot;,&quot;identity&quot;,&quot;multiply&quot;,&quot;qr&quot;,&quot;norm&quot;,&quot;subtract&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.identity,i=e.multiply,a=e.qr,o=e.norm,u=e.subtract;return t(Xm,{Array:function(e){var t=s(r(e));return{U:t.U.valueOf(),T:t.T.valueOf()}},Matrix:function(e){return s(e)}});function s(e){var t,r=e.size()[0],s=e,c=n(r),f=0;do{t=s;var l=a(s),p=l.Q,m=l.R;if(s=i(m,p),c=i(c,p),f++&gt;100)break}while(o(u(s,t))&gt;1e-4);return{U:c,T:s}}})),Km=&quot;lyap&quot;,eh=Ee(Km,[&quot;typed&quot;,&quot;matrix&quot;,&quot;sylvester&quot;,&quot;multiply&quot;,&quot;transpose&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.sylvester,i=e.multiply,a=e.transpose;return t(Km,{&quot;Matrix, Matrix&quot;:function(e,t){return n(e,a(e),i(-1,t))},&quot;Array, Matrix&quot;:function(e,t){return n(r(e),a(r(e)),i(-1,t))},&quot;Matrix, Array&quot;:function(e,t){return n(e,a(r(e)),r(i(-1,t)))},&quot;Array, Array&quot;:function(e,t){return n(r(e),a(r(e)),r(i(-1,t))).toArray()}})})),th=Ee(&quot;divide&quot;,[&quot;typed&quot;,&quot;matrix&quot;,&quot;multiply&quot;,&quot;equalScalar&quot;,&quot;divideScalar&quot;,&quot;inv&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.multiply,i=e.equalScalar,a=e.divideScalar,o=e.inv,u=pa({typed:t,equalScalar:i}),s=ha({typed:t});return t(&quot;divide&quot;,ve({&quot;Array | Matrix, Array | Matrix&quot;:function(e,t){return n(e,o(t))},&quot;DenseMatrix, any&quot;:function(e,t){return s(e,t,a,!1)},&quot;SparseMatrix, any&quot;:function(e,t){return u(e,t,a,!1)},&quot;Array, any&quot;:function(e,t){return s(r(e),t,a,!1).valueOf()},&quot;any, Array | Matrix&quot;:function(e,t){return n(e,o(t))}},a.signatures))})),rh=&quot;distance&quot;,nh=Ee(rh,[&quot;typed&quot;,&quot;addScalar&quot;,&quot;subtract&quot;,&quot;divideScalar&quot;,&quot;multiplyScalar&quot;,&quot;deepEqual&quot;,&quot;sqrt&quot;,&quot;abs&quot;],(function(e){var t=e.typed,r=e.addScalar,n=e.subtract,i=e.multiplyScalar,o=e.divideScalar,u=e.deepEqual,s=e.sqrt,c=e.abs;return t(rh,{&quot;Array, Array, Array&quot;:function(e,t,r){if(2===e.length&amp;&amp;2===t.length&amp;&amp;2===r.length){if(!l(e))throw new TypeError(&quot;Array with 2 numbers or BigNumbers expected for first argument&quot;);if(!l(t))throw new TypeError(&quot;Array with 2 numbers or BigNumbers expected for second argument&quot;);if(!l(r))throw new TypeError(&quot;Array with 2 numbers or BigNumbers expected for third argument&quot;);if(u(t,r))throw new TypeError(&quot;LinePoint1 should not be same with LinePoint2&quot;);var a=n(r[1],t[1]),o=n(t[0],r[0]),s=n(i(r[0],t[1]),i(t[0],r[1]));return v(e[0],e[1],a,o,s)}throw new TypeError(&quot;Invalid Arguments: Try again&quot;)},&quot;Object, Object, Object&quot;:function(e,t,r){if(2===Object.keys(e).length&amp;&amp;2===Object.keys(t).length&amp;&amp;2===Object.keys(r).length){if(!l(e))throw new TypeError(&quot;Values of pointX and pointY should be numbers or BigNumbers&quot;);if(!l(t))throw new TypeError(&quot;Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers&quot;);if(!l(r))throw new TypeError(&quot;Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers&quot;);if(u(d(t),d(r)))throw new TypeError(&quot;LinePoint1 should not be same with LinePoint2&quot;);if(&quot;pointX&quot;in e&amp;&amp;&quot;pointY&quot;in e&amp;&amp;&quot;lineOnePtX&quot;in t&amp;&amp;&quot;lineOnePtY&quot;in t&amp;&amp;&quot;lineTwoPtX&quot;in r&amp;&amp;&quot;lineTwoPtY&quot;in r){var a=n(r.lineTwoPtY,t.lineOnePtY),o=n(t.lineOnePtX,r.lineTwoPtX),s=n(i(r.lineTwoPtX,t.lineOnePtY),i(t.lineOnePtX,r.lineTwoPtY));return v(e.pointX,e.pointY,a,o,s)}throw new TypeError(&quot;Key names do not match&quot;)}throw new TypeError(&quot;Invalid Arguments: Try again&quot;)},&quot;Array, Array&quot;:function(e,t){if(2===e.length&amp;&amp;3===t.length){if(!l(e))throw new TypeError(&quot;Array with 2 numbers or BigNumbers expected for first argument&quot;);if(!p(t))throw new TypeError(&quot;Array with 3 numbers or BigNumbers expected for second argument&quot;);return v(e[0],e[1],t[0],t[1],t[2])}if(3===e.length&amp;&amp;6===t.length){if(!p(e))throw new TypeError(&quot;Array with 3 numbers or BigNumbers expected for first argument&quot;);if(!h(t))throw new TypeError(&quot;Array with 6 numbers or BigNumbers expected for second argument&quot;);return y(e[0],e[1],e[2],t[0],t[1],t[2],t[3],t[4],t[5])}if(e.length===t.length&amp;&amp;e.length&gt;0){if(!m(e))throw new TypeError(&quot;All values of an array should be numbers or BigNumbers&quot;);if(!m(t))throw new TypeError(&quot;All values of an array should be numbers or BigNumbers&quot;);return g(e,t)}throw new TypeError(&quot;Invalid Arguments: Try again&quot;)},&quot;Object, Object&quot;:function(e,t){if(2===Object.keys(e).length&amp;&amp;3===Object.keys(t).length){if(!l(e))throw new TypeError(&quot;Values of pointX and pointY should be numbers or BigNumbers&quot;);if(!p(t))throw new TypeError(&quot;Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers&quot;);if(&quot;pointX&quot;in e&amp;&amp;&quot;pointY&quot;in e&amp;&amp;&quot;xCoeffLine&quot;in t&amp;&amp;&quot;yCoeffLine&quot;in t&amp;&amp;&quot;constant&quot;in t)return v(e.pointX,e.pointY,t.xCoeffLine,t.yCoeffLine,t.constant);throw new TypeError(&quot;Key names do not match&quot;)}if(3===Object.keys(e).length&amp;&amp;6===Object.keys(t).length){if(!p(e))throw new TypeError(&quot;Values of pointX, pointY and pointZ should be numbers or BigNumbers&quot;);if(!h(t))throw new TypeError(&quot;Values of x0, y0, z0, a, b and c should be numbers or BigNumbers&quot;);if(&quot;pointX&quot;in e&amp;&amp;&quot;pointY&quot;in e&amp;&amp;&quot;x0&quot;in t&amp;&amp;&quot;y0&quot;in t&amp;&amp;&quot;z0&quot;in t&amp;&amp;&quot;a&quot;in t&amp;&amp;&quot;b&quot;in t&amp;&amp;&quot;c&quot;in t)return y(e.pointX,e.pointY,e.pointZ,t.x0,t.y0,t.z0,t.a,t.b,t.c);throw new TypeError(&quot;Key names do not match&quot;)}if(2===Object.keys(e).length&amp;&amp;2===Object.keys(t).length){if(!l(e))throw new TypeError(&quot;Values of pointOneX and pointOneY should be numbers or BigNumbers&quot;);if(!l(t))throw new TypeError(&quot;Values of pointTwoX and pointTwoY should be numbers or BigNumbers&quot;);if(&quot;pointOneX&quot;in e&amp;&amp;&quot;pointOneY&quot;in e&amp;&amp;&quot;pointTwoX&quot;in t&amp;&amp;&quot;pointTwoY&quot;in t)return g([e.pointOneX,e.pointOneY],[t.pointTwoX,t.pointTwoY]);throw new TypeError(&quot;Key names do not match&quot;)}if(3===Object.keys(e).length&amp;&amp;3===Object.keys(t).length){if(!p(e))throw new TypeError(&quot;Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers&quot;);if(!p(t))throw new TypeError(&quot;Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers&quot;);if(&quot;pointOneX&quot;in e&amp;&amp;&quot;pointOneY&quot;in e&amp;&amp;&quot;pointOneZ&quot;in e&amp;&amp;&quot;pointTwoX&quot;in t&amp;&amp;&quot;pointTwoY&quot;in t&amp;&amp;&quot;pointTwoZ&quot;in t)return g([e.pointOneX,e.pointOneY,e.pointOneZ],[t.pointTwoX,t.pointTwoY,t.pointTwoZ]);throw new TypeError(&quot;Key names do not match&quot;)}throw new TypeError(&quot;Invalid Arguments: Try again&quot;)},Array:function(e){if(!function(e){if(2===e[0].length&amp;&amp;f(e[0][0])&amp;&amp;f(e[0][1])){if(e.some((function(e){return 2!==e.length||!f(e[0])||!f(e[1])})))return!1}else{if(!(3===e[0].length&amp;&amp;f(e[0][0])&amp;&amp;f(e[0][1])&amp;&amp;f(e[0][2])))return!1;if(e.some((function(e){return 3!==e.length||!f(e[0])||!f(e[1])||!f(e[2])})))return!1}return!0}(e))throw new TypeError(&quot;Incorrect array format entered for pairwise distance calculation&quot;);return function(e){for(var t=[],r=[],n=[],i=0;i&lt;e.length-1;i++)for(var a=i+1;a&lt;e.length;a++)2===e[0].length?(r=[e[i][0],e[i][1]],n=[e[a][0],e[a][1]]):3===e[0].length&amp;&amp;(r=[e[i][0],e[i][1],e[i][2]],n=[e[a][0],e[a][1],e[a][2]]),t.push(g(r,n));return t}(e)}});function f(e){return&quot;number&quot;==typeof e||a(e)}function l(e){return e.constructor!==Array&amp;&amp;(e=d(e)),f(e[0])&amp;&amp;f(e[1])}function p(e){return e.constructor!==Array&amp;&amp;(e=d(e)),f(e[0])&amp;&amp;f(e[1])&amp;&amp;f(e[2])}function m(e){return Array.isArray(e)||(e=d(e)),e.every(f)}function h(e){return e.constructor!==Array&amp;&amp;(e=d(e)),f(e[0])&amp;&amp;f(e[1])&amp;&amp;f(e[2])&amp;&amp;f(e[3])&amp;&amp;f(e[4])&amp;&amp;f(e[5])}function d(e){for(var t=Object.keys(e),r=[],n=0;n&lt;t.length;n++)r.push(e[t[n]]);return r}function v(e,t,n,a,u){var f=c(r(r(i(n,e),i(a,t)),u)),l=s(r(i(n,n),i(a,a)));return o(f,l)}function y(e,t,a,u,c,f,l,p,m){var h=[n(i(n(c,t),m),i(n(f,a),p)),n(i(n(f,a),l),i(n(u,e),m)),n(i(n(u,e),p),i(n(c,t),l))];h=s(r(r(i(h[0],h[0]),i(h[1],h[1])),i(h[2],h[2])));var d=s(r(r(i(l,l),i(p,p)),i(m,m)));return o(h,d)}function g(e,t){for(var a=e.length,o=0,u=0,c=0;c&lt;a;c++)u=n(e[c],t[c]),o=r(i(u,u),o);return s(o)}})),ih=Ee(&quot;intersect&quot;,[&quot;typed&quot;,&quot;config&quot;,&quot;abs&quot;,&quot;add&quot;,&quot;addScalar&quot;,&quot;matrix&quot;,&quot;multiply&quot;,&quot;multiplyScalar&quot;,&quot;divideScalar&quot;,&quot;subtract&quot;,&quot;smaller&quot;,&quot;equalScalar&quot;,&quot;flatten&quot;,&quot;isZero&quot;,&quot;isNumeric&quot;],(function(e){var t=e.typed,r=e.config,n=e.abs,i=e.add,a=e.addScalar,o=e.matrix,u=e.multiply,s=e.multiplyScalar,c=e.divideScalar,f=e.subtract,l=e.smaller,p=e.equalScalar,m=e.flatten,h=e.isZero,d=e.isNumeric;return t(&quot;intersect&quot;,{&quot;Array, Array, Array&quot;:v,&quot;Array, Array, Array, Array&quot;:y,&quot;Matrix, Matrix, Matrix&quot;:function(e,t,r){var n=v(e.valueOf(),t.valueOf(),r.valueOf());return null===n?null:o(n)},&quot;Matrix, Matrix, Matrix, Matrix&quot;:function(e,t,r,n){var i=y(e.valueOf(),t.valueOf(),r.valueOf(),n.valueOf());return null===i?null:o(i)}});function v(e,t,r){if(e=g(e),t=g(t),r=g(r),!b(e))throw new TypeError(&quot;Array with 3 numbers or BigNumbers expected for first argument&quot;);if(!b(t))throw new TypeError(&quot;Array with 3 numbers or BigNumbers expected for second argument&quot;);if(!function(e){return 4===e.length&amp;&amp;d(e[0])&amp;&amp;d(e[1])&amp;&amp;d(e[2])&amp;&amp;d(e[3])}(r))throw new TypeError(&quot;Array with 4 numbers expected as third argument&quot;);return function(e,t,r,n,i,o,u,l,p,m){var h=s(e,u),d=s(n,u),v=s(t,l),y=s(i,l),g=s(r,p),x=s(o,p),b=f(f(f(m,h),v),g),w=f(f(f(a(a(d,y),x),h),v),g),N=c(b,w);return[a(e,s(N,f(n,e))),a(t,s(N,f(i,t))),a(r,s(N,f(o,r)))]}(e[0],e[1],e[2],t[0],t[1],t[2],r[0],r[1],r[2],r[3])}function y(e,t,o,m){if(e=g(e),t=g(t),o=g(o),m=g(m),2===e.length){if(!x(e))throw new TypeError(&quot;Array with 2 numbers or BigNumbers expected for first argument&quot;);if(!x(t))throw new TypeError(&quot;Array with 2 numbers or BigNumbers expected for second argument&quot;);if(!x(o))throw new TypeError(&quot;Array with 2 numbers or BigNumbers expected for third argument&quot;);if(!x(m))throw new TypeError(&quot;Array with 2 numbers or BigNumbers expected for fourth argument&quot;);return function(e,t,o,p){var m=e,d=o,v=f(m,t),y=f(d,p),g=f(s(v[0],y[1]),s(y[0],v[1]));if(h(g))return null;if(l(n(g),r.epsilon))return null;var x=s(y[0],m[1]),b=s(y[1],m[0]),w=s(y[0],d[1]),N=s(y[1],d[0]),D=c(a(f(f(x,b),w),N),g);return i(u(v,D),m)}(e,t,o,m)}if(3===e.length){if(!b(e))throw new TypeError(&quot;Array with 3 numbers or BigNumbers expected for first argument&quot;);if(!b(t))throw new TypeError(&quot;Array with 3 numbers or BigNumbers expected for second argument&quot;);if(!b(o))throw new TypeError(&quot;Array with 3 numbers or BigNumbers expected for third argument&quot;);if(!b(m))throw new TypeError(&quot;Array with 3 numbers or BigNumbers expected for fourth argument&quot;);return function(e,t,r,n,i,o,u,l,m,d,v,y){var g=w(e,u,d,u,t,l,v,l,r,m,y,m),x=w(d,u,n,e,v,l,i,t,y,m,o,r),b=w(e,u,n,e,t,l,i,t,r,m,o,r),N=w(d,u,d,u,v,l,v,l,y,m,y,m),D=w(n,e,n,e,i,t,i,t,o,r,o,r),E=f(s(g,x),s(b,N)),A=f(s(D,N),s(x,x));if(h(A))return null;var S=c(E,A),C=c(a(g,s(S,x)),N),M=a(e,s(S,f(n,e))),F=a(t,s(S,f(i,t))),O=a(r,s(S,f(o,r))),T=a(u,s(C,f(d,u))),B=a(l,s(C,f(v,l))),_=a(m,s(C,f(y,m)));return p(M,T)&amp;&amp;p(F,B)&amp;&amp;p(O,_)?[M,F,O]:null}(e[0],e[1],e[2],t[0],t[1],t[2],o[0],o[1],o[2],m[0],m[1],m[2])}throw new TypeError(&quot;Arrays with two or thee dimensional points expected&quot;)}function g(e){return 1===e.length?e[0]:e.length&gt;1&amp;&amp;Array.isArray(e[0])&amp;&amp;e.every((function(e){return Array.isArray(e)&amp;&amp;1===e.length}))?m(e):e}function x(e){return 2===e.length&amp;&amp;d(e[0])&amp;&amp;d(e[1])}function b(e){return 3===e.length&amp;&amp;d(e[0])&amp;&amp;d(e[1])&amp;&amp;d(e[2])}function w(e,t,r,n,i,o,u,c,l,p,m,h){var d=s(f(e,t),f(r,n)),v=s(f(i,o),f(u,c)),y=s(f(l,p),f(m,h));return a(a(d,v),y)}})),ah=Ee(&quot;sum&quot;,[&quot;typed&quot;,&quot;config&quot;,&quot;add&quot;,&quot;numeric&quot;],(function(e){var t=e.typed,r=e.config,n=e.add,i=e.numeric;return t(&quot;sum&quot;,{&quot;Array | Matrix&quot;:a,&quot;Array | Matrix, number | BigNumber&quot;:function(e,t){try{return kn(e,t,n)}catch(e){throw Es(e,&quot;sum&quot;)}},&quot;...&quot;:function(e){if(Tn(e))throw new TypeError(&quot;Scalar values expected in function sum&quot;);return a(e)}});function a(e){var t;return Bn(e,(function(e){try{t=void 0===t?e:n(t,e)}catch(t){throw Es(t,&quot;sum&quot;,e)}})),void 0===t&amp;&amp;(t=i(0,r.number)),&quot;string&quot;==typeof t&amp;&amp;(t=i(t,r.number)),t}})),oh=&quot;cumsum&quot;,uh=Ee(oh,[&quot;typed&quot;,&quot;add&quot;,&quot;unaryPlus&quot;],(function(e){var t=e.typed,r=e.add,n=e.unaryPlus;return t(oh,{Array:i,Matrix:function(e){return e.create(i(e.valueOf()))},&quot;Array, number | BigNumber&quot;:o,&quot;Matrix, number | BigNumber&quot;:function(e,t){return e.create(o(e.valueOf(),t))},&quot;...&quot;:function(e){if(Tn(e))throw new TypeError(&quot;All values expected to be scalar in function cumsum&quot;);return i(e)}});function i(e){try{return a(e)}catch(e){throw Es(e,oh)}}function a(e){if(0===e.length)return[];for(var t=[n(e[0])],i=1;i&lt;e.length;++i)t.push(r(t[i-1],e[i]));return t}function o(e,t){var r=Kr(e);if(t&lt;0||t&gt;=r.length)throw new Qr(t,r.length);try{return u(e,t)}catch(e){throw Es(e,oh)}}function u(e,t){var r,n,i;if(t&lt;=0){var o=e[0][0];if(Array.isArray(o)){for(i=On(e),n=[],r=0;r&lt;i.length;r++)n[r]=u(i[r],t-1);return n}return a(e)}for(n=[],r=0;r&lt;e.length;r++)n[r]=u(e[r],t-1);return n}})),sh=&quot;mean&quot;,ch=Ee(sh,[&quot;typed&quot;,&quot;add&quot;,&quot;divide&quot;],(function(e){var t=e.typed,r=e.add,n=e.divide;return t(sh,{&quot;Array | Matrix&quot;:i,&quot;Array | Matrix, number | BigNumber&quot;:function(e,t){try{var i=kn(e,t,r),a=Array.isArray(e)?Kr(e):e.size();return n(i,a[t])}catch(e){throw Es(e,&quot;mean&quot;)}},&quot;...&quot;:function(e){if(Tn(e))throw new TypeError(&quot;Scalar values expected in function mean&quot;);return i(e)}});function i(e){var t,i=0;if(Bn(e,(function(e){try{t=void 0===t?e:r(t,e),i++}catch(t){throw Es(t,&quot;mean&quot;,e)}})),0===i)throw new Error(&quot;Cannot calculate the mean of an empty array&quot;);return n(t,i)}})),fh=&quot;median&quot;,lh=Ee(fh,[&quot;typed&quot;,&quot;add&quot;,&quot;divide&quot;,&quot;compare&quot;,&quot;partitionSelect&quot;],(function(e){var t=e.typed,r=e.add,n=e.divide,i=e.compare,a=e.partitionSelect;function o(e){try{var t=(e=mn(e.valueOf())).length;if(0===t)throw new Error(&quot;Cannot calculate median of an empty array&quot;);if(t%2==0){for(var r=t/2-1,n=a(e,r+1),o=e[r],c=0;c&lt;r;++c)i(e[c],o)&gt;0&amp;&amp;(o=e[c]);return s(o,n)}var f=a(e,(t-1)/2);return u(f)}catch(e){throw Es(e,&quot;median&quot;)}}var u=t({&quot;number | BigNumber | Complex | Unit&quot;:function(e){return e}}),s=t({&quot;number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit&quot;:function(e,t){return n(r(e,t),2)}});return t(fh,{&quot;Array | Matrix&quot;:o,&quot;Array | Matrix, number | BigNumber&quot;:function(e,t){throw new Error(&quot;median(A, dim) is not yet supported&quot;)},&quot;...&quot;:function(e){if(Tn(e))throw new TypeError(&quot;Scalar values expected in function median&quot;);return o(e)}})})),ph=Ee(&quot;mad&quot;,[&quot;typed&quot;,&quot;abs&quot;,&quot;map&quot;,&quot;median&quot;,&quot;subtract&quot;],(function(e){var t=e.typed,r=e.abs,n=e.map,i=e.median,a=e.subtract;return t(&quot;mad&quot;,{&quot;Array | Matrix&quot;:o,&quot;...&quot;:function(e){return o(e)}});function o(e){if(0===(e=mn(e.valueOf())).length)throw new Error(&quot;Cannot calculate median absolute deviation (mad) of an empty array&quot;);try{var t=i(e);return i(n(e,(function(e){return r(a(e,t))})))}catch(e){throw e instanceof TypeError&amp;&amp;-1!==e.message.indexOf(&quot;median&quot;)?new TypeError(e.message.replace(&quot;median&quot;,&quot;mad&quot;)):Es(e,&quot;mad&quot;)}}})),mh=&quot;unbiased&quot;,hh=&quot;variance&quot;,dh=Ee(hh,[&quot;typed&quot;,&quot;add&quot;,&quot;subtract&quot;,&quot;multiply&quot;,&quot;divide&quot;,&quot;apply&quot;,&quot;isNaN&quot;],(function(e){var t=e.typed,r=e.add,n=e.subtract,i=e.multiply,o=e.divide,u=e.apply,s=e.isNaN;return t(hh,{&quot;Array | Matrix&quot;:function(e){return c(e,mh)},&quot;Array | Matrix, string&quot;:c,&quot;Array | Matrix, number | BigNumber&quot;:function(e,t){return f(e,t,mh)},&quot;Array | Matrix, number | BigNumber, string&quot;:f,&quot;...&quot;:function(e){return c(e,mh)}});function c(e,t){var u,c=0;if(0===e.length)throw new SyntaxError(&quot;Function variance requires one or more parameters (0 provided)&quot;);if(Bn(e,(function(e){try{u=void 0===u?e:r(u,e),c++}catch(t){throw Es(t,&quot;variance&quot;,e)}})),0===c)throw new Error(&quot;Cannot calculate variance of an empty array&quot;);var f=o(u,c);if(u=void 0,Bn(e,(function(e){var t=n(e,f);u=void 0===u?i(t,t):r(u,i(t,t))})),s(u))return u;switch(t){case&quot;uncorrected&quot;:return o(u,c);case&quot;biased&quot;:return o(u,c+1);case&quot;unbiased&quot;:var l=a(u)?u.mul(0):0;return 1===c?l:o(u,c-1);default:throw new Error('Unknown normalization &quot;'+t+'&quot;. Choose &quot;unbiased&quot; (default), &quot;uncorrected&quot;, or &quot;biased&quot;.')}}function f(e,t,r){try{if(0===e.length)throw new SyntaxError(&quot;Function variance requires one or more parameters (0 provided)&quot;);return u(e,t,(function(e){return c(e,r)}))}catch(e){throw Es(e,&quot;variance&quot;)}}})),vh=Ee(&quot;quantileSeq&quot;,[&quot;typed&quot;,&quot;add&quot;,&quot;multiply&quot;,&quot;partitionSelect&quot;,&quot;compare&quot;],(function(e){var t=e.typed,r=e.add,n=e.multiply,o=e.partitionSelect,u=e.compare;function s(e,t,a){var s=mn(e),f=s.length;if(0===f)throw new Error(&quot;Cannot calculate quantile of an empty sequence&quot;);if(i(t)){var l=t*(f-1),p=l%1;if(0===p){var m=a?s[l]:o(s,l);return c(m),m}var h,d,v=Math.floor(l);if(a)h=s[v],d=s[v+1];else{d=o(s,v+1),h=s[v];for(var y=0;y&lt;v;++y)u(s[y],h)&gt;0&amp;&amp;(h=s[y])}return c(h),c(d),r(n(h,1-p),n(d,p))}var g=t.times(f-1);if(g.isInteger()){g=g.toNumber();var x=a?s[g]:o(s,g);return c(x),x}var b,w,N=g.floor(),D=g.minus(N),E=N.toNumber();if(a)b=s[E],w=s[E+1];else{w=o(s,E+1),b=s[E];for(var A=0;A&lt;E;++A)u(s[A],b)&gt;0&amp;&amp;(b=s[A])}c(b),c(w);var S=new D.constructor(1);return r(n(b,S.minus(D)),n(w,D))}var c=t({&quot;number | BigNumber | Unit&quot;:function(e){return e}});return function(e,t,r){var n,o,u;if(arguments.length&lt;2||arguments.length&gt;3)throw new SyntaxError(&quot;Function quantileSeq requires two or three parameters&quot;);if(p(e)){if(&quot;boolean&quot;==typeof(r=r||!1)){if(o=e.valueOf(),i(t)){if(t&lt;0)throw new Error(&quot;N/prob must be non-negative&quot;);if(t&lt;=1)return s(o,t,r);if(t&gt;1){if(!V(t))throw new Error(&quot;N must be a positive integer&quot;);var c=t+1;n=new Array(t);for(var f=0;f&lt;t;)n[f]=s(o,++f/c,r);return n}}if(a(t)){var l=t.constructor;if(t.isNegative())throw new Error(&quot;N/prob must be non-negative&quot;);if(u=new l(1),t.lte(u))return new l(s(o,t,r));if(t.gt(u)){if(!t.isInteger())throw new Error(&quot;N must be a positive integer&quot;);var m=t.toNumber();if(m&gt;4294967295)throw new Error(&quot;N must be less than or equal to 2^32-1, as that is the maximum length of an Array&quot;);var h=new l(m+1);n=new Array(m);for(var d=0;d&lt;m;)n[d]=new l(s(o,new l(++d).div(h),r));return n}}if(p(t)){var v=t.valueOf();n=new Array(v.length);for(var y=0;y&lt;n.length;++y){var g=v[y];if(i(g)){if(g&lt;0||g&gt;1)throw new Error(&quot;Probability must be between 0 and 1, inclusive&quot;)}else{if(!a(g))throw new TypeError(&quot;Unexpected type of argument in function quantileSeq&quot;);if(u=new g.constructor(1),g.isNegative()||g.gt(u))throw new Error(&quot;Probability must be between 0 and 1, inclusive&quot;)}n[y]=s(o,g,r)}return n}throw new TypeError(&quot;Unexpected type of argument in function quantileSeq&quot;)}throw new TypeError(&quot;Unexpected type of argument in function quantileSeq&quot;)}throw new TypeError(&quot;Unexpected type of argument in function quantileSeq&quot;)}})),yh=Ee(&quot;std&quot;,[&quot;typed&quot;,&quot;map&quot;,&quot;sqrt&quot;,&quot;variance&quot;],(function(e){var t=e.typed,r=e.map,n=e.sqrt,i=e.variance;return t(&quot;std&quot;,{&quot;Array | Matrix&quot;:a,&quot;Array | Matrix, string&quot;:a,&quot;Array | Matrix, number | BigNumber&quot;:a,&quot;Array | Matrix, number | BigNumber, string&quot;:a,&quot;...&quot;:function(e){return a(e)}});function a(e,t){if(0===e.length)throw new SyntaxError(&quot;Function std requires one or more parameters (0 provided)&quot;);try{var a=i.apply(null,arguments);return p(a)?r(a,n):n(a)}catch(e){throw e instanceof TypeError&amp;&amp;-1!==e.message.indexOf(&quot; variance&quot;)?new TypeError(e.message.replace(&quot; variance&quot;,&quot; std&quot;)):e}}}));function gh(e,t){if(t&lt;e)return 1;if(t===e)return t;var r=t+e&gt;&gt;1;return gh(e,r)*gh(r+1,t)}function xh(e,t){if(!V(e)||e&lt;0)throw new TypeError(&quot;Positive integer value expected in function combinations&quot;);if(!V(t)||t&lt;0)throw new TypeError(&quot;Positive integer value expected in function combinations&quot;);if(t&gt;e)throw new TypeError(&quot;k must be less than or equal to n&quot;);for(var r=e-t,n=1,i=2,a=t&lt;r?t:r,o=t&lt;r?r+1:t+1;o&lt;=e;++o)for(n*=o;i&lt;=a&amp;&amp;n%i==0;)n/=i,++i;return i&lt;=a&amp;&amp;(n/=gh(i,a)),n}xh.signature=&quot;number, number&quot;;var bh=&quot;combinations&quot;,wh=Ee(bh,[&quot;typed&quot;],(function(e){return(0,e.typed)(bh,{&quot;number, number&quot;:xh,&quot;BigNumber, BigNumber&quot;:function(e,t){var r,n,i=e.constructor,a=e.minus(t),o=new i(1);if(!Nh(e)||!Nh(t))throw new TypeError(&quot;Positive integer value expected in function combinations&quot;);if(t.gt(e))throw new TypeError(&quot;k must be less than n in function combinations&quot;);if(r=o,t.lt(a))for(n=o;n.lte(a);n=n.plus(o))r=r.times(t.plus(n)).dividedBy(n);else for(n=o;n.lte(t);n=n.plus(o))r=r.times(a.plus(n)).dividedBy(n);return r}})}));function Nh(e){return e.isInteger()&amp;&amp;e.gte(0)}var Dh=&quot;combinationsWithRep&quot;,Eh=Ee(Dh,[&quot;typed&quot;],(function(e){return(0,e.typed)(Dh,{&quot;number, number&quot;:function(e,t){if(!V(e)||e&lt;0)throw new TypeError(&quot;Positive integer value expected in function combinationsWithRep&quot;);if(!V(t)||t&lt;0)throw new TypeError(&quot;Positive integer value expected in function combinationsWithRep&quot;);if(e&lt;1)throw new TypeError(&quot;k must be less than or equal to n + k - 1&quot;);return t&lt;e-1?gh(e,e+t-1)/gh(1,t):gh(t+1,e+t-1)/gh(1,e-1)},&quot;BigNumber, BigNumber&quot;:function(e,t){var r,n,i=new(0,e.constructor)(1),a=e.minus(i);if(!Ah(e)||!Ah(t))throw new TypeError(&quot;Positive integer value expected in function combinationsWithRep&quot;);if(e.lt(i))throw new TypeError(&quot;k must be less than or equal to n + k - 1 in function combinationsWithRep&quot;);if(r=i,t.lt(a))for(n=i;n.lte(a);n=n.plus(i))r=r.times(t.plus(n)).dividedBy(n);else for(n=i;n.lte(t);n=n.plus(i))r=r.times(a.plus(n)).dividedBy(n);return r}})}));function Ah(e){return e.isInteger()&amp;&amp;e.gte(0)}function Sh(e){var t;if(V(e))return e&lt;=0?isFinite(e)?1/0:NaN:e&gt;171?1/0:gh(1,e-1);if(e&lt;.5)return Math.PI/(Math.sin(Math.PI*e)*Sh(1-e));if(e&gt;=171.35)return 1/0;if(e&gt;85){var r=e*e,n=r*e,i=n*e,a=i*e;return Math.sqrt(2*Math.PI/e)*Math.pow(e/Math.E,e)*(1+1/(12*e)+1/(288*r)-139/(51840*n)-571/(2488320*i)+163879/(209018880*a)+5246819/(75246796800*a*e))}--e,t=Mh[0];for(var o=1;o&lt;Mh.length;++o)t+=Mh[o]/(e+o);var u=e+Ch+.5;return Math.sqrt(2*Math.PI)*Math.pow(u,e+.5)*Math.exp(-u)*t}Sh.signature=&quot;number&quot;;var Ch=4.7421875,Mh=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],Fh=.9189385332046728,Oh=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function Th(e){if(e&lt;0)return NaN;if(0===e)return 1/0;if(!isFinite(e))return e;if(e&lt;.5)return Math.log(Math.PI/Math.sin(Math.PI*e))-Th(1-e);for(var t=5+(e-=1)+.5,r=Oh[0],n=6;n&gt;=1;n--)r+=Oh[n]/(e+n);return Fh+(e+.5)*Math.log(t)-t+Math.log(r)}Th.signature=&quot;number&quot;;var Bh=&quot;gamma&quot;,_h=Ee(Bh,[&quot;typed&quot;,&quot;config&quot;,&quot;multiplyScalar&quot;,&quot;pow&quot;,&quot;BigNumber&quot;,&quot;Complex&quot;],(function(e){var t=e.typed,r=e.config,n=(e.multiplyScalar,e.pow,e.BigNumber),i=e.Complex;return t(Bh,{number:Sh,Complex:function e(t){if(0===t.im)return Sh(t.re);if(t.re&lt;.5){var r=new i(1-t.re,-t.im),n=new i(Math.PI*t.re,Math.PI*t.im);return new i(Math.PI).div(n.sin()).div(e(r))}t=new i(t.re-1,t.im);for(var a=new i(Mh[0],0),o=1;o&lt;Mh.length;++o){var u=new i(Mh[o],0);a=a.add(u.div(t.add(o)))}var s=new i(t.re+Ch+.5,t.im),c=Math.sqrt(2*Math.PI),f=s.pow(t.add(.5)),l=s.neg().exp();return a.mul(c).mul(f).mul(l)},BigNumber:function(e){if(e.isInteger())return e.isNegative()||e.isZero()?new n(1/0):a(e.minus(1));if(!e.isFinite())return new n(e.isNegative()?NaN:1/0);throw new Error(&quot;Integer BigNumber expected&quot;)}});function a(e){if(e&lt;8)return new n([1,1,2,6,24,120,720,5040][e]);var t=r.precision+(0|Math.log(e.toNumber())),i=n.clone({precision:t});if(e%2==1)return e.times(a(new n(e-1)));for(var o=e,u=new i(e),s=e.toNumber();o&gt;2;)s+=o-=2,u=u.times(s);return new n(u.toPrecision(n.precision))}})),kh=&quot;lgamma&quot;,Ih=Ee(kh,[&quot;Complex&quot;,&quot;typed&quot;],(function(e){var t=e.Complex,r=e.typed,n=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return r(kh,{number:Th,Complex:function e(r){if(r.isNaN())return new t(NaN,NaN);if(0===r.im)return new t(Th(r.re),0);if(r.re&gt;=7||Math.abs(r.im)&gt;=7)return i(r);if(r.re&lt;=.1){var n=(s=6.283185307179586,(!0^((c=r.im)&gt;0||!(c&lt;0)&amp;&amp;1/c==1/0)?-s:s)*Math.floor(.5*r.re+.25)),o=r.mul(Math.PI).sin().log(),u=e(new t(1-r.re,-r.im));return new t(1.1447298858494002,n).sub(o).sub(u)}return r.im&gt;=0?a(r):a(r.conjugate()).conjugate();var s,c},BigNumber:function(){throw new Error(&quot;mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber&quot;)}});function i(e){for(var r=e.sub(.5).mul(e.log()).sub(e).add(Fh),i=new t(1,0).div(e),a=i.div(e),o=n[0],u=n[1],s=2*a.re,c=a.re*a.re+a.im*a.im,f=2;f&lt;8;f++){var l=u;u=-c*o+n[f],o=s*o+l}var p=i.mul(a.mul(o).add(u));return r.add(p)}function a(e){var r=0,n=0,a=e;for(e=e.add(1);e.re&lt;=7;){var o=(a=a.mul(e)).im&lt;0?1:0;0!==o&amp;&amp;0===n&amp;&amp;r++,n=o,e=e.add(1)}return i(e).sub(a.log()).sub(new t(0,2*r*Math.PI*1))}})),Rh=&quot;factorial&quot;,zh=Ee(Rh,[&quot;typed&quot;,&quot;gamma&quot;],(function(e){var t=e.typed,r=e.gamma;return t(Rh,{number:function(e){if(e&lt;0)throw new Error(&quot;Value must be non-negative&quot;);return r(e+1)},BigNumber:function(e){if(e.isNegative())throw new Error(&quot;Value must be non-negative&quot;);return r(e.plus(1))},&quot;Array | Matrix&quot;:t.referToSelf((function(e){return function(t){return _n(t,e)}}))})})),qh=&quot;kldivergence&quot;,jh=Ee(qh,[&quot;typed&quot;,&quot;matrix&quot;,&quot;divide&quot;,&quot;sum&quot;,&quot;multiply&quot;,&quot;map&quot;,&quot;dotDivide&quot;,&quot;log&quot;,&quot;isNumeric&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.divide,i=e.sum,a=e.multiply,o=e.map,u=e.dotDivide,s=e.log,c=e.isNumeric;return t(qh,{&quot;Array, Array&quot;:function(e,t){return f(r(e),r(t))},&quot;Matrix, Array&quot;:function(e,t){return f(e,r(t))},&quot;Array, Matrix&quot;:function(e,t){return f(r(e),t)},&quot;Matrix, Matrix&quot;:function(e,t){return f(e,t)}});function f(e,t){var r=t.size().length,f=e.size().length;if(r&gt;1)throw new Error(&quot;first object must be one dimensional&quot;);if(f&gt;1)throw new Error(&quot;second object must be one dimensional&quot;);if(r!==f)throw new Error(&quot;Length of two vectors must be equal&quot;);if(0===i(e))throw new Error(&quot;Sum of elements in first object must be non zero&quot;);if(0===i(t))throw new Error(&quot;Sum of elements in second object must be non zero&quot;);var l=n(e,i(e)),p=n(t,i(t)),m=i(a(l,o(u(l,p),(function(e){return s(e)}))));return c(m)?m:Number.NaN}})),Ph=&quot;multinomial&quot;,Lh=Ee(Ph,[&quot;typed&quot;,&quot;add&quot;,&quot;divide&quot;,&quot;multiply&quot;,&quot;factorial&quot;,&quot;isInteger&quot;,&quot;isPositive&quot;],(function(e){var t=e.typed,r=e.add,n=e.divide,i=e.multiply,a=e.factorial,o=e.isInteger,u=e.isPositive;return t(Ph,{&quot;Array | Matrix&quot;:function(e){var t=0,s=1;return Bn(e,(function(e){if(!o(e)||!u(e))throw new TypeError(&quot;Positive integer value expected in function multinomial&quot;);t=r(t,e),s=i(s,a(e))})),n(a(t),s)}})})),Uh=&quot;permutations&quot;,$h=Ee(Uh,[&quot;typed&quot;,&quot;factorial&quot;],(function(e){var t=e.typed,r=e.factorial;return t(Uh,{&quot;number | BigNumber&quot;:r,&quot;number, number&quot;:function(e,t){if(!V(e)||e&lt;0)throw new TypeError(&quot;Positive integer value expected in function permutations&quot;);if(!V(t)||t&lt;0)throw new TypeError(&quot;Positive integer value expected in function permutations&quot;);if(t&gt;e)throw new TypeError(&quot;second argument k must be less than or equal to first argument n&quot;);return gh(e-t+1,e)},&quot;BigNumber, BigNumber&quot;:function(e,t){var r,n;if(!Hh(e)||!Hh(t))throw new TypeError(&quot;Positive integer value expected in function permutations&quot;);if(t.gt(e))throw new TypeError(&quot;second argument k must be less than or equal to first argument n&quot;);for(r=e.mul(0).add(1),n=e.minus(t).plus(1);n.lte(e);n=n.plus(1))r=r.times(n);return r}})}));function Hh(e){return e.isInteger()&amp;&amp;e.gte(0)}r(3843);var Gh=r(6377),Vh=Gh(Date.now());function Zh(e){var t,r;return t=null===(r=e)?Vh:Gh(String(r)),function(){return t()}}var Wh=&quot;pickRandom&quot;,Yh=Ee(Wh,[&quot;typed&quot;,&quot;config&quot;,&quot;?on&quot;],(function(e){var t=e.typed,r=e.config,n=e.on,a=Zh(r.randomSeed);return n&amp;&amp;n(&quot;config&quot;,(function(e,t){e.randomSeed!==t.randomSeed&amp;&amp;(a=Zh(e.randomSeed))})),t(Wh,{&quot;Array | Matrix&quot;:function(e){return o(e,{})},&quot;Array | Matrix, Object&quot;:function(e,t){return o(e,t)},&quot;Array | Matrix, number&quot;:function(e,t){return o(e,{number:t})},&quot;Array | Matrix, Array | Matrix&quot;:function(e,t){return o(e,{weights:t})},&quot;Array | Matrix, Array | Matrix, number&quot;:function(e,t,r){return o(e,{number:r,weights:t})},&quot;Array | Matrix, number, Array | Matrix&quot;:function(e,t,r){return o(e,{number:t,weights:r})}});function o(e,t){var r=t.number,n=t.weights,o=t.elementWise,u=void 0===o||o,s=void 0===r;s&amp;&amp;(r=1);var c=l(e)?e.create:l(n)?n.create:null;e=e.valueOf(),n&amp;&amp;(n=n.valueOf()),!0===u&amp;&amp;(e=mn(e),n=mn(n));var f=0;if(void 0!==n){if(n.length!==e.length)throw new Error(&quot;Weights must have the same length as possibles&quot;);for(var p=0,m=n.length;p&lt;m;p++){if(!i(n[p])||n[p]&lt;0)throw new Error(&quot;Weights must be an array of positive numbers&quot;);f+=n[p]}}for(var h,d=e.length,v=[];v.length&lt;r;){if(void 0===n)h=e[Math.floor(a()*d)];else for(var y=a()*f,g=0,x=e.length;g&lt;x;g++)if((y-=n[g])&lt;0){h=e[g];break}v.push(h)}return s?v[0]:c?c(v):v}}));function Jh(e,t){var r=[];if((e=e.slice(0)).length&gt;1)for(var n=0,i=e.shift();n&lt;i;n++)r.push(Jh(e,t));else for(var a=0,o=e.shift();a&lt;o;a++)r.push(t());return r}var Xh=&quot;random&quot;,Qh=Ee(Xh,[&quot;typed&quot;,&quot;config&quot;,&quot;?on&quot;],(function(e){var t=e.typed,r=e.config,n=e.on,i=Zh(r.randomSeed);return n&amp;&amp;n(&quot;config&quot;,(function(e,t){e.randomSeed!==t.randomSeed&amp;&amp;(i=Zh(e.randomSeed))})),t(Xh,{&quot;&quot;:function(){return o(0,1)},number:function(e){return o(0,e)},&quot;number, number&quot;:function(e,t){return o(e,t)},&quot;Array | Matrix&quot;:function(e){return a(e,0,1)},&quot;Array | Matrix, number&quot;:function(e,t){return a(e,0,t)},&quot;Array | Matrix, number, number&quot;:function(e,t,r){return a(e,t,r)}});function a(e,t,r){var n=Jh(e.valueOf(),(function(){return o(t,r)}));return l(e)?e.create(n):n}function o(e,t){return e+i()*(t-e)}})),Kh=&quot;randomInt&quot;,ed=Ee(Kh,[&quot;typed&quot;,&quot;config&quot;,&quot;?on&quot;],(function(e){var t=e.typed,r=e.config,n=e.on,i=Zh(r.randomSeed);return n&amp;&amp;n(&quot;config&quot;,(function(e,t){e.randomSeed!==t.randomSeed&amp;&amp;(i=Zh(e.randomSeed))})),t(Kh,{&quot;&quot;:function(){return o(0,1)},number:function(e){return o(0,e)},&quot;number, number&quot;:function(e,t){return o(e,t)},&quot;Array | Matrix&quot;:function(e){return a(e,0,1)},&quot;Array | Matrix, number&quot;:function(e,t){return a(e,0,t)},&quot;Array | Matrix, number, number&quot;:function(e,t,r){return a(e,t,r)}});function a(e,t,r){var n=Jh(e.valueOf(),(function(){return o(t,r)}));return l(e)?e.create(n):n}function o(e,t){return Math.floor(e+i()*(t-e))}})),td=&quot;stirlingS2&quot;,rd=Ee(td,[&quot;typed&quot;,&quot;addScalar&quot;,&quot;subtract&quot;,&quot;multiplyScalar&quot;,&quot;divideScalar&quot;,&quot;pow&quot;,&quot;factorial&quot;,&quot;combinations&quot;,&quot;isNegative&quot;,&quot;isInteger&quot;,&quot;number&quot;,&quot;?bignumber&quot;,&quot;larger&quot;],(function(e){var t=e.typed,r=e.addScalar,n=(e.subtract,e.multiplyScalar),a=(e.divideScalar,e.pow,e.factorial,e.combinations,e.isNegative),o=e.isInteger,u=e.number,s=e.bignumber,c=e.larger,f=[],l=[];return t(td,{&quot;number | BigNumber, number | BigNumber&quot;:function(e,t){if(!o(e)||a(e)||!o(t)||a(t))throw new TypeError(&quot;Non-negative integer value expected in function stirlingS2&quot;);if(c(t,e))throw new TypeError(&quot;k must be less than or equal to n in function stirlingS2&quot;);var p=!(i(e)&amp;&amp;i(t)),m=p?l:f,h=p?s:u,d=u(e),v=u(t);if(m[d]&amp;&amp;m[d].length&gt;v)return m[d][v];for(var y=0;y&lt;=d;++y)if(m[y]||(m[y]=[h(0===y?1:0)]),0!==y)for(var g=m[y],x=m[y-1],b=g.length;b&lt;=y&amp;&amp;b&lt;=v;++b)g[b]=b===y?1:r(n(h(b),x[b]),x[b-1]);return m[d][v]}})})),nd=&quot;bellNumbers&quot;,id=Ee(nd,[&quot;typed&quot;,&quot;addScalar&quot;,&quot;isNegative&quot;,&quot;isInteger&quot;,&quot;stirlingS2&quot;],(function(e){var t=e.typed,r=e.addScalar,n=e.isNegative,i=e.isInteger,a=e.stirlingS2;return t(nd,{&quot;number | BigNumber&quot;:function(e){if(!i(e)||n(e))throw new TypeError(&quot;Non-negative integer value expected in function bellNumbers&quot;);for(var t=0,o=0;o&lt;=e;o++)t=r(t,a(e,o));return t}})})),ad=&quot;catalan&quot;,od=Ee(ad,[&quot;typed&quot;,&quot;addScalar&quot;,&quot;divideScalar&quot;,&quot;multiplyScalar&quot;,&quot;combinations&quot;,&quot;isNegative&quot;,&quot;isInteger&quot;],(function(e){var t=e.typed,r=e.addScalar,n=e.divideScalar,i=e.multiplyScalar,a=e.combinations,o=e.isNegative,u=e.isInteger;return t(ad,{&quot;number | BigNumber&quot;:function(e){if(!u(e)||o(e))throw new TypeError(&quot;Non-negative integer value expected in function catalan&quot;);return n(a(i(e,2),e),r(e,1))}})})),ud=&quot;composition&quot;,sd=Ee(ud,[&quot;typed&quot;,&quot;addScalar&quot;,&quot;combinations&quot;,&quot;isNegative&quot;,&quot;isPositive&quot;,&quot;isInteger&quot;,&quot;larger&quot;],(function(e){var t=e.typed,r=e.addScalar,n=e.combinations,i=e.isPositive,a=(e.isNegative,e.isInteger),o=e.larger;return t(ud,{&quot;number | BigNumber, number | BigNumber&quot;:function(e,t){if(!(a(e)&amp;&amp;i(e)&amp;&amp;a(t)&amp;&amp;i(t)))throw new TypeError(&quot;Positive integer value expected in function composition&quot;);if(o(t,e))throw new TypeError(&quot;k must be less than or equal to n in function composition&quot;);return n(r(e,-1),r(t,-1))}})})),cd=&quot;leafCount&quot;,fd=Ee(cd,[&quot;parse&quot;,&quot;typed&quot;],(function(e){function t(e){var r=0;return e.forEach((function(e){r+=t(e)})),r||1}return e.parse,(0,e.typed)(cd,{Node:function(e){return t(e)}})}));function ld(e){return T(e)||q(e)&amp;&amp;e.isUnary()&amp;&amp;T(e.args[0])}function pd(e){return!!T(e)||!(!k(e)&amp;&amp;!q(e)||!e.args.every(pd))||!(!j(e)||!pd(e.content))}function md(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&amp;&amp;(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hd(e){for(var t=1;t&lt;arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?md(Object(r),!0).forEach((function(t){Ba(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):md(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r(2481);var dd=Ee(&quot;simplifyUtil&quot;,[&quot;FunctionNode&quot;,&quot;OperatorNode&quot;,&quot;SymbolNode&quot;],(function(e){var t=e.FunctionNode,r=e.OperatorNode,n=e.SymbolNode,i=!0,a=!1,o=&quot;defaultF&quot;,u={add:{trivial:i,total:i,commutative:i,associative:i},unaryPlus:{trivial:i,total:i,commutative:i,associative:i},subtract:{trivial:a,total:i,commutative:a,associative:a},multiply:{trivial:i,total:i,commutative:i,associative:i},divide:{trivial:a,total:i,commutative:a,associative:a},paren:{trivial:i,total:i,commutative:i,associative:a},defaultF:{trivial:a,total:i,commutative:a,associative:a}};function s(e,t){var r=arguments.length&gt;2&amp;&amp;void 0!==arguments[2]?arguments[2]:u,n=o;if(&quot;string&quot;==typeof e?n=e:q(e)?n=e.fn.toString():k(e)?n=e.name:j(e)&amp;&amp;(n=&quot;paren&quot;),Ne(r,n)){var i=r[n];if(Ne(i,t))return i[t];if(Ne(u,n))return u[n][t]}if(Ne(r,o)){var a=r[o];return Ne(a,t)?a[t]:u[o][t]}if(Ne(u,n)){var s=u[n];if(Ne(s,t))return s[t]}return u[o][t]}function c(e){return s(e,&quot;associative&quot;,arguments.length&gt;1&amp;&amp;void 0!==arguments[1]?arguments[1]:u)}function f(e,t){var r,n=[];return c(e,t)?(r=e.op,function e(t){for(var i=0;i&lt;t.args.length;i++){var a=t.args[i];q(a)&amp;&amp;r===a.op?e(a):n.push(a)}}(e),n):e.args}function l(e){return q(e)?function(t){try{return new r(e.op,e.fn,t,e.implicit)}catch(e){return console.error(e),[]}}:function(r){return new t(new n(e.name),r)}}return{createMakeNodeFunction:l,hasProperty:s,isCommutative:function(e){return s(e,&quot;commutative&quot;,arguments.length&gt;1&amp;&amp;void 0!==arguments[1]?arguments[1]:u)},isAssociative:c,mergeContext:function(e,t){var r=hd({},e);for(var n in t)Ne(e,n)?r[n]=hd(hd({},t[n]),e[n]):r[n]=t[n];return r},flatten:function e(t,r){if(!t.args||0===t.args.length)return t;t.args=f(t,r);for(var n=0;n&lt;t.args.length;n++)e(t.args[n],r)},allChildren:f,unflattenr:function e(t,r){if(t.args&amp;&amp;0!==t.args.length){for(var n=l(t),i=t.args.length,a=0;a&lt;i;a++)e(t.args[a],r);if(i&gt;2&amp;&amp;c(t,r)){for(var o=t.args.pop();t.args.length&gt;0;)o=n([t.args.pop(),o]);t.args=o.args}}},unflattenl:function e(t,r){if(t.args&amp;&amp;0!==t.args.length){for(var n=l(t),i=t.args.length,a=0;a&lt;i;a++)e(t.args[a],r);if(i&gt;2&amp;&amp;c(t,r)){for(var o=t.args.shift();t.args.length&gt;0;)o=n([o,t.args.shift()]);t.args=o.args}}},defaultContext:u,realContext:{divide:{total:a},log:{total:a}},positiveContext:{subtract:{total:a},abs:{trivial:i},log:{total:i}}}})),vd=Ee(&quot;simplify&quot;,[&quot;config&quot;,&quot;typed&quot;,&quot;parse&quot;,&quot;add&quot;,&quot;subtract&quot;,&quot;multiply&quot;,&quot;divide&quot;,&quot;pow&quot;,&quot;isZero&quot;,&quot;equal&quot;,&quot;resolve&quot;,&quot;simplifyConstant&quot;,&quot;simplifyCore&quot;,&quot;?fraction&quot;,&quot;?bignumber&quot;,&quot;mathWithTransform&quot;,&quot;matrix&quot;,&quot;AccessorNode&quot;,&quot;ArrayNode&quot;,&quot;ConstantNode&quot;,&quot;FunctionNode&quot;,&quot;IndexNode&quot;,&quot;ObjectNode&quot;,&quot;OperatorNode&quot;,&quot;ParenthesisNode&quot;,&quot;SymbolNode&quot;],(function(e){e.config;var r=e.typed,n=e.parse,i=(e.add,e.subtract,e.multiply,e.divide,e.pow,e.isZero,e.equal),a=e.resolve,o=e.simplifyConstant,u=e.simplifyCore,s=(e.fraction,e.bignumber,e.mathWithTransform,e.matrix,e.AccessorNode),c=e.ArrayNode,f=e.ConstantNode,l=e.FunctionNode,p=e.IndexNode,m=e.ObjectNode,h=e.OperatorNode,d=e.ParenthesisNode,v=e.SymbolNode,y=dd({FunctionNode:l,OperatorNode:h,SymbolNode:v}),g=y.hasProperty,x=y.isCommutative,b=y.isAssociative,w=y.mergeContext,N=y.flatten,D=y.unflattenr,E=y.unflattenl,A=y.createMakeNodeFunction,S=y.defaultContext,C=y.realContext,M=y.positiveContext;r.addConversion({from:&quot;Object&quot;,to:&quot;Map&quot;,convert:Ue});var F=r(&quot;simplify&quot;,{Node:R,&quot;Node, Map&quot;:function(e,t){return R(e,!1,t)},&quot;Node, Map, Object&quot;:function(e,t,r){return R(e,!1,t,r)},&quot;Node, Array&quot;:R,&quot;Node, Array, Map&quot;:R,&quot;Node, Array, Map, Object&quot;:R});function O(e){return e.transform((function(e,t,r){return j(e)?O(e.content):e}))}r.removeConversion({from:&quot;Object&quot;,to:&quot;Map&quot;,convert:Ue}),F.defaultContext=S,F.realContext=C,F.positiveContext=M;var B={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};function _(e,t){var r={};if(e.s){var i=e.s.split(&quot;-&gt;&quot;);if(2!==i.length)throw SyntaxError(&quot;Could not parse rule: &quot;+e.s);r.l=i[0],r.r=i[1]}else r.l=e.l,r.r=e.r;r.l=O(n(r.l)),r.r=O(n(r.r));for(var a=0,o=[&quot;imposeContext&quot;,&quot;repeat&quot;,&quot;assuming&quot;];a&lt;o.length;a++){var u=o[a];u in e&amp;&amp;(r[u]=e[u])}if(e.evaluate&amp;&amp;(r.evaluate=n(e.evaluate)),b(r.l,t)){var s,c=!x(r.l,t);c&amp;&amp;(s=I());var f=A(r.l),l=I();r.expanded={},r.expanded.l=f([r.l,l]),N(r.expanded.l,t),D(r.expanded.l,t),r.expanded.r=f([r.r,l]),c&amp;&amp;(r.expandedNC1={},r.expandedNC1.l=f([s,r.l]),r.expandedNC1.r=f([s,r.r]),r.expandedNC2={},r.expandedNC2.l=f([s,r.expanded.l]),r.expandedNC2.r=f([s,r.expanded.r]))}return r}F.rules=[u,{l:&quot;log(e)&quot;,r:&quot;1&quot;},{s:&quot;n-n1 -&gt; n+-n1&quot;,assuming:{subtract:{total:!0}}},{s:&quot;n-n -&gt; 0&quot;,assuming:{subtract:{total:!1}}},{s:&quot;-(cl*v) -&gt; v * (-cl)&quot;,assuming:{multiply:{commutative:!0},subtract:{total:!0}}},{s:&quot;-(cl*v) -&gt; (-cl) * v&quot;,assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{s:&quot;-(v*cl) -&gt; v * (-cl)&quot;,assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{l:&quot;-(n1/n2)&quot;,r:&quot;-n1/n2&quot;},{l:&quot;-v&quot;,r:&quot;v * (-1)&quot;},{l:&quot;(n1 + n2)*(-1)&quot;,r:&quot;n1*(-1) + n2*(-1)&quot;,repeat:!0},{l:&quot;n/n1^n2&quot;,r:&quot;n*n1^-n2&quot;},{l:&quot;n/n1&quot;,r:&quot;n*n1^-1&quot;},{s:&quot;(n1*n2)^n3 -&gt; n1^n3 * n2^n3&quot;,assuming:{multiply:{commutative:!0}}},{s:&quot;(n1*n2)^(-1) -&gt; n2^(-1) * n1^(-1)&quot;,assuming:{multiply:{commutative:!1}}},{s:&quot;(n ^ n1) ^ n2 -&gt; n ^ (n1 * n2)&quot;,assuming:{divide:{total:!0}}},{l:&quot; vd   * ( vd   * n1 + n2)&quot;,r:&quot;vd^2       * n1 +  vd   * n2&quot;},{s:&quot; vd   * (vd^n4 * n1 + n2)   -&gt;  vd^(1+n4)  * n1 +  vd   * n2&quot;,assuming:{divide:{total:!0}}},{s:&quot;vd^n3 * ( vd   * n1 + n2)   -&gt;  vd^(n3+1)  * n1 + vd^n3 * n2&quot;,assuming:{divide:{total:!0}}},{s:&quot;vd^n3 * (vd^n4 * n1 + n2)   -&gt;  vd^(n3+n4) * n1 + vd^n3 * n2&quot;,assuming:{divide:{total:!0}}},{l:&quot;n*n&quot;,r:&quot;n^2&quot;},{s:&quot;n * n^n1 -&gt; n^(n1+1)&quot;,assuming:{divide:{total:!0}}},{s:&quot;n^n1 * n^n2 -&gt; n^(n1+n2)&quot;,assuming:{divide:{total:!0}}},o,{s:&quot;n+n -&gt; 2*n&quot;,assuming:{add:{total:!0}}},{l:&quot;n+-n&quot;,r:&quot;0&quot;},{l:&quot;vd*n + vd&quot;,r:&quot;vd*(n+1)&quot;},{l:&quot;n3*n1 + n3*n2&quot;,r:&quot;n3*(n1+n2)&quot;},{l:&quot;n3^(-n4)*n1 +   n3  * n2&quot;,r:&quot;n3^(-n4)*(n1 + n3^(n4+1) *n2)&quot;},{l:&quot;n3^(-n4)*n1 + n3^n5 * n2&quot;,r:&quot;n3^(-n4)*(n1 + n3^(n4+n5)*n2)&quot;},{s:&quot;n*vd + vd -&gt; (n+1)*vd&quot;,assuming:{multiply:{commutative:!1}}},{s:&quot;vd + n*vd -&gt; (1+n)*vd&quot;,assuming:{multiply:{commutative:!1}}},{s:&quot;n1*n3 + n2*n3 -&gt; (n1+n2)*n3&quot;,assuming:{multiply:{commutative:!1}}},{s:&quot;n^n1 * n -&gt; n^(n1+1)&quot;,assuming:{divide:{total:!0},multiply:{commutative:!1}}},{s:&quot;n1*n3^(-n4) + n2 * n3    -&gt; (n1 + n2*n3^(n4 +  1))*n3^(-n4)&quot;,assuming:{multiply:{commutative:!1}}},{s:&quot;n1*n3^(-n4) + n2 * n3^n5 -&gt; (n1 + n2*n3^(n4 + n5))*n3^(-n4)&quot;,assuming:{multiply:{commutative:!1}}},{l:&quot;n*cd + cd&quot;,r:&quot;(n+1)*cd&quot;},{s:&quot;cd*n + cd -&gt; cd*(n+1)&quot;,assuming:{multiply:{commutative:!1}}},{s:&quot;cd + cd*n -&gt; cd*(1+n)&quot;,assuming:{multiply:{commutative:!1}}},o,{s:&quot;(-n)*n1 -&gt; -(n*n1)&quot;,assuming:{subtract:{total:!0}}},{s:&quot;n1*(-n) -&gt; -(n1*n)&quot;,assuming:{subtract:{total:!0},multiply:{commutative:!1}}},{s:&quot;ce+ve -&gt; ve+ce&quot;,assuming:{add:{commutative:!0}},imposeContext:{add:{commutative:!1}}},{s:&quot;vd*cd -&gt; cd*vd&quot;,assuming:{multiply:{commutative:!0}},imposeContext:{multiply:{commutative:!1}}},{l:&quot;n+-n1&quot;,r:&quot;n-n1&quot;},{l:&quot;n+-(n1)&quot;,r:&quot;n-(n1)&quot;},{s:&quot;n*(n1^-1) -&gt; n/n1&quot;,assuming:{multiply:{commutative:!0}}},{s:&quot;n*n1^-n2 -&gt; n/n1^n2&quot;,assuming:{multiply:{commutative:!0}}},{s:&quot;n^-1 -&gt; 1/n&quot;,assuming:{multiply:{commutative:!0}}},{l:&quot;n^1&quot;,r:&quot;n&quot;},{s:&quot;n*(n1/n2) -&gt; (n*n1)/n2&quot;,assuming:{multiply:{associative:!0}}},{s:&quot;n-(n1+n2) -&gt; n-n1-n2&quot;,assuming:{addition:{associative:!0,commutative:!0}}},{l:&quot;1*n&quot;,r:&quot;n&quot;,imposeContext:{multiply:{commutative:!0}}},{s:&quot;n1/(n2/n3) -&gt; (n1*n3)/n2&quot;,assuming:{multiply:{associative:!0}}},{l:&quot;n1/(-n2)&quot;,r:&quot;-n1/n2&quot;}];var k=0;function I(){return new v(&quot;_p&quot;+k++)}function R(e,r){var n=arguments.length&gt;2&amp;&amp;void 0!==arguments[2]?arguments[2]:Le(),i=arguments.length&gt;3&amp;&amp;void 0!==arguments[3]?arguments[3]:{},o=i.consoleDebug;r=function(e,r){for(var n=[],i=0;i&lt;e.length;i++){var a=e[i],o=void 0,u=t(a);switch(u){case&quot;string&quot;:a={s:a};case&quot;object&quot;:o=_(a,r);break;case&quot;function&quot;:o=a;break;default:throw TypeError(&quot;Unsupported type of rule: &quot;+u)}n.push(o)}return n}(r||F.rules,i.context);for(var u=a(e,n),s={},c=(u=O(u)).toString({parenthesis:&quot;all&quot;});!s[c];){s[c]=!0,k=0;var f=c;o&amp;&amp;console.log(&quot;Working on: &quot;,c);for(var l=0;l&lt;r.length;l++){var p=&quot;&quot;;if(&quot;function&quot;==typeof r[l]?(u=r[l](u,i),o&amp;&amp;(p=r[l].name)):(N(u,i.context),u=q(u,r[l],i.context),o&amp;&amp;(p=&quot;&quot;.concat(r[l].l.toString(),&quot; -&gt; &quot;).concat(r[l].r.toString()))),o){var m=u.toString({parenthesis:&quot;all&quot;});m!==f&amp;&amp;(console.log(&quot;Applying&quot;,p,&quot;produced&quot;,m),f=m)}E(u,i.context)}c=u.toString({parenthesis:&quot;all&quot;})}return u}function z(e,t,r){var n=e;if(e)for(var i=0;i&lt;e.length;++i){var a=q(e[i],t,r);a!==e[i]&amp;&amp;(n===e&amp;&amp;(n=e.slice()),n[i]=a)}return n}function q(e,t,r){if(t.assuming)for(var n in t.assuming)for(var i in t.assuming[n])if(g(n,i,r)!==t.assuming[n][i])return e;var a=w(t.imposeContext,r),o=e;if(o instanceof h||o instanceof l){var u=z(o.args,t,r);u!==o.args&amp;&amp;((o=o.clone()).args=u)}else if(o instanceof d){if(o.content){var f=q(o.content,t,r);f!==o.content&amp;&amp;(o=new d(f))}}else if(o instanceof c){var v=z(o.items,t,r);v!==o.items&amp;&amp;(o=new c(v))}else if(o instanceof s){var y=o.object;o.object&amp;&amp;(y=q(o.object,t,r));var x=o.index;o.index&amp;&amp;(x=q(o.index,t,r)),y===o.object&amp;&amp;x===o.index||(o=new s(y,x))}else if(o instanceof p){var b=z(o.dimensions,t,r);b!==o.dimensions&amp;&amp;(o=new p(b))}else if(o instanceof m){var N=!1,D={};for(var E in o.properties)D[E]=q(o.properties[E],t,r),D[E]!==o.properties[E]&amp;&amp;(N=!0);N&amp;&amp;(o=new m(D))}var A=t.r,S=$(t.l,o,a)[0];if(!S&amp;&amp;t.expanded&amp;&amp;(A=t.expanded.r,S=$(t.expanded.l,o,a)[0]),!S&amp;&amp;t.expandedNC1&amp;&amp;(A=t.expandedNC1.r,(S=$(t.expandedNC1.l,o,a)[0])||(A=t.expandedNC2.r,S=$(t.expandedNC2.l,o,a)[0])),S){var C=o.implicit;o=A.clone(),C&amp;&amp;&quot;implicit&quot;in A&amp;&amp;(o.implicit=!0),o=o.transform((function(e){return e.isSymbolNode&amp;&amp;Ne(S.placeholders,e.name)?S.placeholders[e.name].clone():e}))}return t.repeat&amp;&amp;o!==e&amp;&amp;(o=q(o,t,r)),o}function P(e,t){var r={placeholders:{}};if(!e.placeholders&amp;&amp;!t.placeholders)return r;if(!e.placeholders)return t;if(!t.placeholders)return e;for(var n in e.placeholders)if(Ne(e.placeholders,n)&amp;&amp;(r.placeholders[n]=e.placeholders[n],Ne(t.placeholders,n)&amp;&amp;!H(e.placeholders[n],t.placeholders[n])))return null;for(var i in t.placeholders)Ne(t.placeholders,i)&amp;&amp;(r.placeholders[i]=t.placeholders[i]);return r}function L(e,t){var r,n=[];if(0===e.length||0===t.length)return n;for(var i=0;i&lt;e.length;i++)for(var a=0;a&lt;t.length;a++)(r=P(e[i],t[a]))&amp;&amp;n.push(r);return n}function $(e,t,r,n){var a=[{placeholders:{}}];if(e instanceof h&amp;&amp;t instanceof h||e instanceof l&amp;&amp;t instanceof l){if(e instanceof h){if(e.op!==t.op||e.fn!==t.fn)return[]}else if(e instanceof l&amp;&amp;e.name!==t.name)return[];if(!(1===t.args.length&amp;&amp;1===e.args.length||!b(t,r)&amp;&amp;t.args.length===e.args.length||n)){if(t.args.length&gt;=2&amp;&amp;2===e.args.length){for(var o=function(e,t){var r,n,i=[],a=A(e);if(x(e,t))for(var o=0;o&lt;e.args.length;o++)(n=e.args.slice(0)).splice(o,1),r=1===n.length?n[0]:a(n),i.push(a([e.args[o],r]));else for(var u=1;u&lt;e.args.length;u++){var s=e.args[0];u&gt;1&amp;&amp;(s=a(e.args.slice(0,u))),r=1===(n=e.args.slice(u)).length?n[0]:a(n),i.push(a([s,r]))}return i}(t,r),u=[],s=0;s&lt;o.length;s++){var c=$(e,o[s],r,!0);u=u.concat(c)}return u}if(e.args.length&gt;2)throw Error(&quot;Unexpected non-binary associative function: &quot;+e.toString());return[]}for(var p=[],m=0;m&lt;e.args.length;m++){var d=$(e.args[m],t.args[m],r);if(0===d.length)break;p.push(d)}if(p.length!==e.args.length){if(!x(t,r)||1===e.args.length)return[];if(e.args.length&gt;2)throw new Error(&quot;permuting &gt;2 commutative non-associative rule arguments not yet implemented&quot;);var y=$(e.args[0],t.args[1],r);if(0===y.length)return[];var g=$(e.args[1],t.args[0],r);if(0===g.length)return[];p=[y,g]}a=function(e){if(0===e.length)return e;for(var t=e.reduce(L),r=[],n={},i=0;i&lt;t.length;i++){var a=JSON.stringify(t[i]);n[a]||(n[a]=!0,r.push(t[i]))}return r}(p)}else if(e instanceof v){if(0===e.name.length)throw new Error(&quot;Symbol in rule has 0 length...!?&quot;);if(B[e.name]){if(e.name!==t.name)return[]}else switch(e.name[1]&gt;=&quot;a&quot;&amp;&amp;e.name[1]&lt;=&quot;z&quot;?e.name.substring(0,2):e.name[0]){case&quot;n&quot;:case&quot;_p&quot;:a[0].placeholders[e.name]=t;break;case&quot;c&quot;:case&quot;cl&quot;:if(!T(t))return[];a[0].placeholders[e.name]=t;break;case&quot;v&quot;:if(T(t))return[];a[0].placeholders[e.name]=t;break;case&quot;vl&quot;:if(!U(t))return[];a[0].placeholders[e.name]=t;break;case&quot;cd&quot;:if(!ld(t))return[];a[0].placeholders[e.name]=t;break;case&quot;vd&quot;:if(ld(t))return[];a[0].placeholders[e.name]=t;break;case&quot;ce&quot;:if(!pd(t))return[];a[0].placeholders[e.name]=t;break;case&quot;ve&quot;:if(pd(t))return[];a[0].placeholders[e.name]=t;break;default:throw new Error(&quot;Invalid symbol in rule: &quot;+e.name)}}else{if(!(e instanceof f))return[];if(!i(e.value,t.value))return[]}return a}function H(e,t){if(e instanceof f&amp;&amp;t instanceof f){if(!i(e.value,t.value))return!1}else if(e instanceof v&amp;&amp;t instanceof v){if(e.name!==t.name)return!1}else{if(!(e instanceof h&amp;&amp;t instanceof h||e instanceof l&amp;&amp;t instanceof l))return!1;if(e instanceof h){if(e.op!==t.op||e.fn!==t.fn)return!1}else if(e instanceof l&amp;&amp;e.name!==t.name)return!1;if(e.args.length!==t.args.length)return!1;for(var r=0;r&lt;e.args.length;r++)if(!H(e.args[r],t.args[r]))return!1}return!0}return F}));function yd(e,t){var r=&quot;undefined&quot;!=typeof Symbol&amp;&amp;e[Symbol.iterator]||e[&quot;@@iterator&quot;];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if(&quot;string&quot;==typeof e)return gd(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return&quot;Object&quot;===r&amp;&amp;e.constructor&amp;&amp;(r=e.constructor.name),&quot;Map&quot;===r||&quot;Set&quot;===r?Array.from(e):&quot;Arguments&quot;===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gd(e,t):void 0}}(e))||t&amp;&amp;e&amp;&amp;&quot;number&quot;==typeof e.length){r&amp;&amp;(e=r);var n=0,i=function(){};return{s:i,n:function(){return n&gt;=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError(&quot;Invalid attempt to iterate non-iterable instance.\snIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.&quot;)}var a,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw a}}}}function gd(e,t){(null==t||t&gt;e.length)&amp;&amp;(t=e.length);for(var r=0,n=new Array(t);r&lt;t;r++)n[r]=e[r];return n}var xd=Ee(&quot;simplifyConstant&quot;,[&quot;typed&quot;,&quot;config&quot;,&quot;mathWithTransform&quot;,&quot;matrix&quot;,&quot;?fraction&quot;,&quot;?bignumber&quot;,&quot;AccessorNode&quot;,&quot;ArrayNode&quot;,&quot;ConstantNode&quot;,&quot;FunctionNode&quot;,&quot;IndexNode&quot;,&quot;ObjectNode&quot;,&quot;OperatorNode&quot;,&quot;SymbolNode&quot;],(function(e){var r=e.typed,n=e.config,i=e.mathWithTransform,a=e.matrix,o=e.fraction,s=e.bignumber,c=e.AccessorNode,f=e.ArrayNode,p=e.ConstantNode,m=e.FunctionNode,h=e.IndexNode,d=e.ObjectNode,v=e.OperatorNode,y=e.SymbolNode,g=dd({FunctionNode:m,OperatorNode:v,SymbolNode:y}),x=g.isCommutative,b=g.isAssociative,w=g.allChildren,N=g.createMakeNodeFunction,D=r(&quot;simplifyConstant&quot;,{Node:function(e){return M(k(e,{}))},&quot;Node, Object&quot;:function(e,t){return M(k(e,t))}});function E(e){return u(e)?e.valueOf():e instanceof Array?e.map(E):l(e)?a(E(e.valueOf())):e}function A(e,t,r){try{return i[e].apply(null,t)}catch(n){return t=t.map(E),O(i[e].apply(null,t),r)}}var S=r({Fraction:function(e){var t,r=e.s*e.n;return t=r&lt;0?new v(&quot;-&quot;,&quot;unaryMinus&quot;,[new p(-r)]):new p(r),1===e.d?t:new v(&quot;/&quot;,&quot;divide&quot;,[t,new p(e.d)])},number:function(e){return e&lt;0?B(new p(-e)):new p(e)},BigNumber:function(e){return e&lt;0?B(new p(-e)):new p(e)},Complex:function(e){throw new Error(&quot;Cannot convert Complex number to Node&quot;)},string:function(e){return new p(e)},Matrix:function(e){return new f(e.valueOf().map((function(e){return S(e)})))}});function M(e){return R(e)?e:S(e)}function F(e,t){if(t&amp;&amp;!1!==t.exactFractions&amp;&amp;isFinite(e)&amp;&amp;o){var r=o(e),n=t&amp;&amp;&quot;number&quot;==typeof t.fractionsLimit?t.fractionsLimit:1/0;if(r.valueOf()===e&amp;&amp;r.n&lt;n&amp;&amp;r.d&lt;n)return r}return e}var O=r({&quot;string, Object&quot;:function(e,t){return&quot;BigNumber&quot;===n.number?(void 0===s&amp;&amp;Ru(),s(e)):&quot;Fraction&quot;===n.number?(void 0===o&amp;&amp;zu(),o(e)):F(parseFloat(e),t)},&quot;Fraction, Object&quot;:function(e,t){return e},&quot;BigNumber, Object&quot;:function(e,t){return e},&quot;number, Object&quot;:function(e,t){return F(e,t)},&quot;Complex, Object&quot;:function(e,t){return 0!==e.im?e:F(e.re,t)},&quot;Matrix, Object&quot;:function(e,t){return a(F(e.valueOf()))},&quot;Array, Object&quot;:function(e,t){return e.map(F)}});function B(e){return new v(&quot;-&quot;,&quot;unaryMinus&quot;,[e])}function _(e,t,r,n){var i=t.shift(),a=t.reduce((function(t,i){if(!R(i)){var a=t.pop();if(R(a))return[a,i];try{return t.push(A(e,[a,i],n)),t}catch(e){t.push(a)}}t.push(M(t.pop()));var o=1===t.length?t[0]:r(t);return[r([o,M(i)])]}),[i]);return 1===a.length?a[0]:r([a[0],S(a[1])])}function k(e,r){switch(e.type){case&quot;SymbolNode&quot;:return e;case&quot;ConstantNode&quot;:switch(t(e.value)){case&quot;number&quot;:return O(e.value,r);case&quot;string&quot;:return e.value;default:if(!isNaN(e.value))return O(e.value,r)}return e;case&quot;FunctionNode&quot;:if(i[e.name]&amp;&amp;i[e.name].rawArgs)return e;if(-1===[&quot;add&quot;,&quot;multiply&quot;].indexOf(e.name)){var n=e.args.map((function(e){return k(e,r)}));if(!n.some(R))try{return A(e.name,n,r)}catch(e){}if(&quot;size&quot;===e.name&amp;&amp;1===n.length&amp;&amp;C(n[0])){for(var o=[],u=n[0];C(u);)o.push(u.items.length),u=u.items[0];return a(o)}return new m(e.name,n.map(M))}case&quot;OperatorNode&quot;:var s,v,y=e.fn.toString(),g=N(e);if(q(e)&amp;&amp;e.isUnary())v=R((s=[k(e.args[0],r)])[0])?g(s):A(y,s,r);else if(b(e,r.context))if(s=(s=w(e,r.context)).map((function(e){return k(e,r)})),x(y,r.context)){for(var E=[],S=[],F=0;F&lt;s.length;F++)R(s[F])?S.push(s[F]):E.push(s[F]);E.length&gt;1?(v=_(y,E,g,r),S.unshift(v),v=_(y,S,g,r)):v=_(y,s,g,r)}else v=_(y,s,g,r);else v=_(y,s=e.args.map((function(e){return k(e,r)})),g,r);return v;case&quot;ParenthesisNode&quot;:return k(e.content,r);case&quot;AccessorNode&quot;:return function(e,t,r){if(!I(t))return new c(M(e),M(t));if(C(e)||l(e)){for(var n=Array.from(t.dimensions);n.length&gt;0;)if(T(n[0])&amp;&amp;&quot;string&quot;!=typeof n[0].value){var i=O(n.shift().value,r);C(e)?e=e.items[i-1]:(e=e.valueOf()[i-1])instanceof Array&amp;&amp;(e=a(e))}else{if(!(n.length&gt;1&amp;&amp;T(n[1])&amp;&amp;&quot;string&quot;!=typeof n[1].value))break;var o,u=O(n[1].value,r),s=[],m=C(e)?e.items:e.valueOf(),d=yd(m);try{for(d.s();!(o=d.n()).done;){var v=o.value;if(C(v))s.push(v.items[u-1]);else{if(!l(e))break;s.push(v[u-1])}}}catch(e){d.e(e)}finally{d.f()}if(s.length!==m.length)break;e=C(e)?new f(s):a(s),n.splice(1,1)}return n.length===t.dimensions.length?new c(M(e),t):n.length&gt;0?(t=new h(n),new c(M(e),t)):e}if(z(e)&amp;&amp;1===t.dimensions.length&amp;&amp;T(t.dimensions[0])){var y=t.dimensions[0].value;return y in e.properties?e.properties[y]:new p}return new c(M(e),t)}(k(e.object,r),k(e.index,r),r);case&quot;ArrayNode&quot;:var B=e.items.map((function(e){return k(e,r)}));return B.some(R)?new f(B.map(M)):a(B);case&quot;IndexNode&quot;:return new h(e.dimensions.map((function(e){return D(e,r)})));case&quot;ObjectNode&quot;:var j={};for(var P in e.properties)j[P]=D(e.properties[P],r);return new d(j);default:throw new Error(&quot;Unimplemented node type in simplifyConstant: &quot;.concat(e.type))}}return D})),bd=&quot;simplifyCore&quot;,wd=Ee(bd,[&quot;typed&quot;,&quot;parse&quot;,&quot;equal&quot;,&quot;isZero&quot;,&quot;add&quot;,&quot;subtract&quot;,&quot;multiply&quot;,&quot;divide&quot;,&quot;pow&quot;,&quot;AccessorNode&quot;,&quot;ArrayNode&quot;,&quot;ConstantNode&quot;,&quot;FunctionNode&quot;,&quot;IndexNode&quot;,&quot;ObjectNode&quot;,&quot;OperatorNode&quot;,&quot;ParenthesisNode&quot;,&quot;SymbolNode&quot;],(function(e){var t=e.typed,r=(e.parse,e.equal),n=e.isZero,i=(e.add,e.subtract,e.multiply,e.divide,e.pow,e.AccessorNode),a=e.ArrayNode,o=e.ConstantNode,u=e.FunctionNode,s=e.IndexNode,c=e.ObjectNode,f=e.OperatorNode,l=(e.ParenthesisNode,e.SymbolNode),p=new o(0),m=new o(1),h=new o(!0),d=new o(!1);function v(e){return q(e)&amp;&amp;[&quot;and&quot;,&quot;not&quot;,&quot;or&quot;].includes(e.op)}var y=dd({FunctionNode:u,OperatorNode:f,SymbolNode:l}),g=y.hasProperty,x=y.isCommutative;function b(e){var t=arguments.length&gt;1&amp;&amp;void 0!==arguments[1]?arguments[1]:{},o=t?t.context:void 0;if(g(e,&quot;trivial&quot;,o)){if(k(e)&amp;&amp;1===e.args.length)return b(e.args[0],t);var l=!1,y=0;if(e.forEach((function(e){1==++y&amp;&amp;(l=b(e,t))})),1===y)return l}var w=e;if(k(w)){var N=function(e){var t,r=&quot;OperatorNode:&quot;+e,n=function(e,t){var r=&quot;undefined&quot;!=typeof Symbol&amp;&amp;e[Symbol.iterator]||e[&quot;@@iterator&quot;];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if(&quot;string&quot;==typeof e)return mp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return&quot;Object&quot;===r&amp;&amp;e.constructor&amp;&amp;(r=e.constructor.name),&quot;Map&quot;===r||&quot;Set&quot;===r?Array.from(e):&quot;Arguments&quot;===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mp(e,t):void 0}}(e))||t&amp;&amp;e&amp;&amp;&quot;number&quot;==typeof e.length){r&amp;&amp;(e=r);var n=0,i=function(){};return{s:i,n:function(){return n&gt;=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError(&quot;Invalid attempt to iterate non-iterable instance.\snIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.&quot;)}var a,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw a}}}}(hp);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(r in i)return i[r].op}}catch(e){n.e(e)}finally{n.f()}return null}(w.name);if(!N)return new u(b(w.fn),w.args.map((function(e){return b(e,t)})));if(w.args.length&gt;2&amp;&amp;g(w,&quot;associative&quot;,o))for(;w.args.length&gt;2;){var D=w.args.pop(),E=w.args.pop();w.args.push(new f(N,w.name,[D,E]))}w=new f(N,w.name,w.args)}if(q(w)&amp;&amp;w.isUnary()){var A=b(w.args[0],t);if(&quot;~&quot;===w.op&amp;&amp;q(A)&amp;&amp;A.isUnary()&amp;&amp;&quot;~&quot;===A.op)return A.args[0];if(&quot;not&quot;===w.op&amp;&amp;q(A)&amp;&amp;A.isUnary()&amp;&amp;&quot;not&quot;===A.op&amp;&amp;v(A.args[0]))return A.args[0];var M=!0;if(&quot;-&quot;===w.op&amp;&amp;q(A)&amp;&amp;(A.isBinary()&amp;&amp;&quot;subtract&quot;===A.fn&amp;&amp;(w=new f(&quot;-&quot;,&quot;subtract&quot;,[A.args[1],A.args[0]]),M=!1),A.isUnary()&amp;&amp;&quot;-&quot;===A.op))return A.args[0];if(M)return new f(w.op,w.fn,[A])}if(q(w)&amp;&amp;w.isBinary()){var F=b(w.args[0],t),O=b(w.args[1],t);if(&quot;+&quot;===w.op){if(T(F)&amp;&amp;n(F.value))return O;if(T(O)&amp;&amp;n(O.value))return F;q(O)&amp;&amp;O.isUnary()&amp;&amp;&quot;-&quot;===O.op&amp;&amp;(O=O.args[0],w=new f(&quot;-&quot;,&quot;subtract&quot;,[F,O]))}if(&quot;-&quot;===w.op)return q(O)&amp;&amp;O.isUnary()&amp;&amp;&quot;-&quot;===O.op?b(new f(&quot;+&quot;,&quot;add&quot;,[F,O.args[0]]),t):T(F)&amp;&amp;n(F.value)?b(new f(&quot;-&quot;,&quot;unaryMinus&quot;,[O])):T(O)&amp;&amp;n(O.value)?F:new f(w.op,w.fn,[F,O]);if(&quot;*&quot;===w.op){if(T(F)){if(n(F.value))return p;if(r(F.value,1))return O}if(T(O)){if(n(O.value))return p;if(r(O.value,1))return F;if(x(w,o))return new f(w.op,w.fn,[O,F],w.implicit)}return new f(w.op,w.fn,[F,O],w.implicit)}if(&quot;/&quot;===w.op)return T(F)&amp;&amp;n(F.value)?p:T(O)&amp;&amp;r(O.value,1)?F:new f(w.op,w.fn,[F,O]);if(&quot;^&quot;===w.op&amp;&amp;T(O)){if(n(O.value))return m;if(r(O.value,1))return F}if(&quot;and&quot;===w.op){if(T(F)){if(!F.value)return d;if(v(O))return O}if(T(O)){if(!O.value)return d;if(v(F))return F}}if(&quot;or&quot;===w.op){if(T(F)){if(F.value)return h;if(v(O))return O}if(T(O)){if(O.value)return h;if(v(F))return F}}return new f(w.op,w.fn,[F,O])}if(q(w))return new f(w.op,w.fn,w.args.map((function(e){return b(e,t)})));if(C(w))return new a(w.items.map((function(e){return b(e,t)})));if(S(w))return new i(b(w.object,t),b(w.index,t));if(I(w))return new s(w.dimensions.map((function(e){return b(e,t)})));if(z(w)){var B={};for(var _ in w.properties)B[_]=b(w.properties[_],t);return new c(B)}return w}return t(bd,{Node:b,&quot;Node,Object&quot;:b})})),Nd=Ee(&quot;resolve&quot;,[&quot;typed&quot;,&quot;parse&quot;,&quot;ConstantNode&quot;,&quot;FunctionNode&quot;,&quot;OperatorNode&quot;,&quot;ParenthesisNode&quot;],(function(e){var t=e.typed,r=e.parse,n=e.ConstantNode,i=e.FunctionNode,a=e.OperatorNode,o=e.ParenthesisNode;function u(e,t){var s=arguments.length&gt;2&amp;&amp;void 0!==arguments[2]?arguments[2]:new Set;if(!t)return e;if(U(e)){if(s.has(e.name)){var c=Array.from(s).join(&quot;, &quot;);throw new ReferenceError(&quot;recursive loop of variable definitions among {&quot;.concat(c,&quot;}&quot;))}var f=t.get(e.name);if(R(f)){var l=new Set(s);return l.add(e.name),u(f,t,l)}return&quot;number&quot;==typeof f?r(String(f)):void 0!==f?new n(f):e}if(q(e)){var p=e.args.map((function(e){return u(e,t,s)}));return new a(e.op,e.fn,p,e.implicit)}if(j(e))return new o(u(e.content,t,s));if(k(e)){var m=e.args.map((function(e){return u(e,t,s)}));return new i(e.name,m)}return e.map((function(e){return u(e,t,s)}))}return t(&quot;resolve&quot;,{Node:u,&quot;Node, Map | null | undefined&quot;:u,&quot;Node, Object&quot;:function(e,t){return u(e,Ue(t))},&quot;Array | Matrix&quot;:t.referToSelf((function(e){return function(t){return t.map((function(t){return e(t)}))}})),&quot;Array | Matrix, null | undefined&quot;:t.referToSelf((function(e){return function(t){return t.map((function(t){return e(t)}))}})),&quot;Array, Object&quot;:t.referTo(&quot;Array,Map&quot;,(function(e){return function(t,r){return e(t,Ue(r))}})),&quot;Matrix, Object&quot;:t.referTo(&quot;Matrix,Map&quot;,(function(e){return function(t,r){return e(t,Ue(r))}})),&quot;Array | Matrix, Map&quot;:t.referToSelf((function(e){return function(t,r){return t.map((function(t){return e(t,r)}))}}))})})),Dd=&quot;symbolicEqual&quot;,Ed=Ee(Dd,[&quot;parse&quot;,&quot;simplify&quot;,&quot;typed&quot;,&quot;OperatorNode&quot;],(function(e){e.parse;var t=e.simplify,r=e.typed,n=e.OperatorNode;function i(e,r){var i=arguments.length&gt;2&amp;&amp;void 0!==arguments[2]?arguments[2]:{},a=new n(&quot;-&quot;,&quot;subtract&quot;,[e,r]),o=t(a,{},i);return T(o)&amp;&amp;!o.value}return r(Dd,{&quot;Node, Node&quot;:i,&quot;Node, Node, Object&quot;:i})})),Ad=&quot;derivative&quot;,Sd=Ee(Ad,[&quot;typed&quot;,&quot;config&quot;,&quot;parse&quot;,&quot;simplify&quot;,&quot;equal&quot;,&quot;isZero&quot;,&quot;numeric&quot;,&quot;ConstantNode&quot;,&quot;FunctionNode&quot;,&quot;OperatorNode&quot;,&quot;ParenthesisNode&quot;,&quot;SymbolNode&quot;],(function(e){var t=e.typed,r=e.config,n=e.parse,i=e.simplify,a=e.equal,o=e.isZero,u=e.numeric,s=e.ConstantNode,c=e.FunctionNode,f=e.OperatorNode,l=e.ParenthesisNode,p=e.SymbolNode;function m(e,t){var r=arguments.length&gt;2&amp;&amp;void 0!==arguments[2]?arguments[2]:{simplify:!0},n={};v(n,e,t.name);var a=y(e,n);return r.simplify?i(a):a}t.addConversion({from:&quot;identifier&quot;,to:&quot;SymbolNode&quot;,convert:n});var h=t(Ad,{&quot;Node, SymbolNode&quot;:m,&quot;Node, SymbolNode, Object&quot;:m});t.removeConversion({from:&quot;identifier&quot;,to:&quot;SymbolNode&quot;,convert:n}),h._simplify=!0,h.toTex=function(e){return d.apply(null,e.args)};var d=t(&quot;_derivTex&quot;,{&quot;Node, SymbolNode&quot;:function(e,t){return T(e)&amp;&amp;&quot;string&quot;===H(e.value)?d(n(e.value).toString(),t.toString(),1):d(e.toTex(),t.toString(),1)},&quot;Node, ConstantNode&quot;:function(e,t){if(&quot;string&quot;===H(t.value))return d(e,n(t.value));throw new Error(&quot;The second parameter to 'derivative' is a non-string constant&quot;)},&quot;Node, SymbolNode, ConstantNode&quot;:function(e,t,r){return d(e.toString(),t.name,r.value)},&quot;string, string, number&quot;:function(e,t,r){return(1===r?&quot;{d\s\sover d&quot;+t+&quot;}&quot;:&quot;{d^{&quot;+r+&quot;}\s\sover d&quot;+t+&quot;^{&quot;+r+&quot;}}&quot;)+&quot;\s\sleft[&quot;.concat(e,&quot;\s\sright]&quot;)}}),v=t(&quot;constTag&quot;,{&quot;Object, ConstantNode, string&quot;:function(e,t){return e[t]=!0,!0},&quot;Object, SymbolNode, string&quot;:function(e,t,r){return t.name!==r&amp;&amp;(e[t]=!0,!0)},&quot;Object, ParenthesisNode, string&quot;:function(e,t,r){return v(e,t.content,r)},&quot;Object, FunctionAssignmentNode, string&quot;:function(e,t,r){return-1===t.params.indexOf(r)?(e[t]=!0,!0):v(e,t.expr,r)},&quot;Object, FunctionNode | OperatorNode, string&quot;:function(e,t,r){if(t.args.length&gt;0){for(var n=v(e,t.args[0],r),i=1;i&lt;t.args.length;++i)n=v(e,t.args[i],r)&amp;&amp;n;if(n)return e[t]=!0,!0}return!1}}),y=t(&quot;_derivative&quot;,{&quot;ConstantNode, Object&quot;:function(e){return g(0)},&quot;SymbolNode, Object&quot;:function(e,t){return void 0!==t[e]?g(0):g(1)},&quot;ParenthesisNode, Object&quot;:function(e,t){return new l(y(e.content,t))},&quot;FunctionAssignmentNode, Object&quot;:function(e,t){return void 0!==t[e]?g(0):y(e.expr,t)},&quot;FunctionNode, Object&quot;:function(e,t){if(1!==e.args.length&amp;&amp;function(e){if(&quot;log&quot;!==e.name&amp;&amp;&quot;nthRoot&quot;!==e.name&amp;&amp;&quot;pow&quot;!==e.name||2!==e.args.length){for(var t=0;t&lt;e.args.length;++t)e.args[t]=g(0);throw e.compile().evaluate(),new Error(&quot;Expected TypeError, but none found&quot;)}}(e),void 0!==t[e])return g(0);var r,n,i,a,o=e.args[0],u=!1,s=!1;switch(e.name){case&quot;cbrt&quot;:u=!0,n=new f(&quot;*&quot;,&quot;multiply&quot;,[g(3),new f(&quot;^&quot;,&quot;pow&quot;,[o,new f(&quot;/&quot;,&quot;divide&quot;,[g(2),g(3)])])]);break;case&quot;sqrt&quot;:case&quot;nthRoot&quot;:if(1===e.args.length)u=!0,n=new f(&quot;*&quot;,&quot;multiply&quot;,[g(2),new c(&quot;sqrt&quot;,[o])]);else if(2===e.args.length)return t[r=new f(&quot;/&quot;,&quot;divide&quot;,[g(1),e.args[1]])]=t[e.args[1]],y(new f(&quot;^&quot;,&quot;pow&quot;,[o,r]),t);break;case&quot;log10&quot;:r=g(10);case&quot;log&quot;:if(r||1!==e.args.length){if(1===e.args.length&amp;&amp;r||2===e.args.length&amp;&amp;void 0!==t[e.args[1]])n=new f(&quot;*&quot;,&quot;multiply&quot;,[o.clone(),new c(&quot;log&quot;,[r||e.args[1]])]),u=!0;else if(2===e.args.length)return y(new f(&quot;/&quot;,&quot;divide&quot;,[new c(&quot;log&quot;,[o]),new c(&quot;log&quot;,[e.args[1]])]),t)}else n=o.clone(),u=!0;break;case&quot;pow&quot;:return t[r]=t[e.args[1]],y(new f(&quot;^&quot;,&quot;pow&quot;,[o,e.args[1]]),t);case&quot;exp&quot;:n=new c(&quot;exp&quot;,[o.clone()]);break;case&quot;sin&quot;:n=new c(&quot;cos&quot;,[o.clone()]);break;case&quot;cos&quot;:n=new f(&quot;-&quot;,&quot;unaryMinus&quot;,[new c(&quot;sin&quot;,[o.clone()])]);break;case&quot;tan&quot;:n=new f(&quot;^&quot;,&quot;pow&quot;,[new c(&quot;sec&quot;,[o.clone()]),g(2)]);break;case&quot;sec&quot;:n=new f(&quot;*&quot;,&quot;multiply&quot;,[e,new c(&quot;tan&quot;,[o.clone()])]);break;case&quot;csc&quot;:s=!0,n=new f(&quot;*&quot;,&quot;multiply&quot;,[e,new c(&quot;cot&quot;,[o.clone()])]);break;case&quot;cot&quot;:s=!0,n=new f(&quot;^&quot;,&quot;pow&quot;,[new c(&quot;csc&quot;,[o.clone()]),g(2)]);break;case&quot;asin&quot;:u=!0,n=new c(&quot;sqrt&quot;,[new f(&quot;-&quot;,&quot;subtract&quot;,[g(1),new f(&quot;^&quot;,&quot;pow&quot;,[o.clone(),g(2)])])]);break;case&quot;acos&quot;:u=!0,s=!0,n=new c(&quot;sqrt&quot;,[new f(&quot;-&quot;,&quot;subtract&quot;,[g(1),new f(&quot;^&quot;,&quot;pow&quot;,[o.clone(),g(2)])])]);break;case&quot;atan&quot;:u=!0,n=new f(&quot;+&quot;,&quot;add&quot;,[new f(&quot;^&quot;,&quot;pow&quot;,[o.clone(),g(2)]),g(1)]);break;case&quot;asec&quot;:u=!0,n=new f(&quot;*&quot;,&quot;multiply&quot;,[new c(&quot;abs&quot;,[o.clone()]),new c(&quot;sqrt&quot;,[new f(&quot;-&quot;,&quot;subtract&quot;,[new f(&quot;^&quot;,&quot;pow&quot;,[o.clone(),g(2)]),g(1)])])]);break;case&quot;acsc&quot;:u=!0,s=!0,n=new f(&quot;*&quot;,&quot;multiply&quot;,[new c(&quot;abs&quot;,[o.clone()]),new c(&quot;sqrt&quot;,[new f(&quot;-&quot;,&quot;subtract&quot;,[new f(&quot;^&quot;,&quot;pow&quot;,[o.clone(),g(2)]),g(1)])])]);break;case&quot;acot&quot;:u=!0,s=!0,n=new f(&quot;+&quot;,&quot;add&quot;,[new f(&quot;^&quot;,&quot;pow&quot;,[o.clone(),g(2)]),g(1)]);break;case&quot;sinh&quot;:n=new c(&quot;cosh&quot;,[o.clone()]);break;case&quot;cosh&quot;:n=new c(&quot;sinh&quot;,[o.clone()]);break;case&quot;tanh&quot;:n=new f(&quot;^&quot;,&quot;pow&quot;,[new c(&quot;sech&quot;,[o.clone()]),g(2)]);break;case&quot;sech&quot;:s=!0,n=new f(&quot;*&quot;,&quot;multiply&quot;,[e,new c(&quot;tanh&quot;,[o.clone()])]);break;case&quot;csch&quot;:s=!0,n=new f(&quot;*&quot;,&quot;multiply&quot;,[e,new c(&quot;coth&quot;,[o.clone()])]);break;case&quot;coth&quot;:s=!0,n=new f(&quot;^&quot;,&quot;pow&quot;,[new c(&quot;csch&quot;,[o.clone()]),g(2)]);break;case&quot;asinh&quot;:u=!0,n=new c(&quot;sqrt&quot;,[new f(&quot;+&quot;,&quot;add&quot;,[new f(&quot;^&quot;,&quot;pow&quot;,[o.clone(),g(2)]),g(1)])]);break;case&quot;acosh&quot;:u=!0,n=new c(&quot;sqrt&quot;,[new f(&quot;-&quot;,&quot;subtract&quot;,[new f(&quot;^&quot;,&quot;pow&quot;,[o.clone(),g(2)]),g(1)])]);break;case&quot;atanh&quot;:u=!0,n=new f(&quot;-&quot;,&quot;subtract&quot;,[g(1),new f(&quot;^&quot;,&quot;pow&quot;,[o.clone(),g(2)])]);break;case&quot;asech&quot;:u=!0,s=!0,n=new f(&quot;*&quot;,&quot;multiply&quot;,[o.clone(),new c(&quot;sqrt&quot;,[new f(&quot;-&quot;,&quot;subtract&quot;,[g(1),new f(&quot;^&quot;,&quot;pow&quot;,[o.clone(),g(2)])])])]);break;case&quot;acsch&quot;:u=!0,s=!0,n=new f(&quot;*&quot;,&quot;multiply&quot;,[new c(&quot;abs&quot;,[o.clone()]),new c(&quot;sqrt&quot;,[new f(&quot;+&quot;,&quot;add&quot;,[new f(&quot;^&quot;,&quot;pow&quot;,[o.clone(),g(2)]),g(1)])])]);break;case&quot;acoth&quot;:u=!0,s=!0,n=new f(&quot;-&quot;,&quot;subtract&quot;,[g(1),new f(&quot;^&quot;,&quot;pow&quot;,[o.clone(),g(2)])]);break;case&quot;abs&quot;:n=new f(&quot;/&quot;,&quot;divide&quot;,[new c(new p(&quot;abs&quot;),[o.clone()]),o.clone()]);break;default:throw new Error('Function &quot;'+e.name+'&quot; is not supported by derivative, or a wrong number of arguments is passed')}u?(i=&quot;/&quot;,a=&quot;divide&quot;):(i=&quot;*&quot;,a=&quot;multiply&quot;);var l=y(o,t);return s&amp;&amp;(l=new f(&quot;-&quot;,&quot;unaryMinus&quot;,[l])),new f(i,a,[l,n])},&quot;OperatorNode, Object&quot;:function(e,t){if(void 0!==t[e])return g(0);if(&quot;+&quot;===e.op)return new f(e.op,e.fn,e.args.map((function(e){return y(e,t)})));if(&quot;-&quot;===e.op){if(e.isUnary())return new f(e.op,e.fn,[y(e.args[0],t)]);if(e.isBinary())return new f(e.op,e.fn,[y(e.args[0],t),y(e.args[1],t)])}if(&quot;*&quot;===e.op){var r=e.args.filter((function(e){return void 0!==t[e]}));if(r.length&gt;0){var n=e.args.filter((function(e){return void 0===t[e]})),i=1===n.length?n[0]:new f(&quot;*&quot;,&quot;multiply&quot;,n),u=r.concat(y(i,t));return new f(&quot;*&quot;,&quot;multiply&quot;,u)}return new f(&quot;+&quot;,&quot;add&quot;,e.args.map((function(r){return new f(&quot;*&quot;,&quot;multiply&quot;,e.args.map((function(e){return e===r?y(e,t):e.clone()})))})))}if(&quot;/&quot;===e.op&amp;&amp;e.isBinary()){var s=e.args[0],l=e.args[1];return void 0!==t[l]?new f(&quot;/&quot;,&quot;divide&quot;,[y(s,t),l]):void 0!==t[s]?new f(&quot;*&quot;,&quot;multiply&quot;,[new f(&quot;-&quot;,&quot;unaryMinus&quot;,[s]),new f(&quot;/&quot;,&quot;divide&quot;,[y(l,t),new f(&quot;^&quot;,&quot;pow&quot;,[l.clone(),g(2)])])]):new f(&quot;/&quot;,&quot;divide&quot;,[new f(&quot;-&quot;,&quot;subtract&quot;,[new f(&quot;*&quot;,&quot;multiply&quot;,[y(s,t),l.clone()]),new f(&quot;*&quot;,&quot;multiply&quot;,[s.clone(),y(l,t)])]),new f(&quot;^&quot;,&quot;pow&quot;,[l.clone(),g(2)])])}if(&quot;^&quot;===e.op&amp;&amp;e.isBinary()){var p=e.args[0],m=e.args[1];if(void 0!==t[p])return T(p)&amp;&amp;(o(p.value)||a(p.value,1))?g(0):new f(&quot;*&quot;,&quot;multiply&quot;,[e,new f(&quot;*&quot;,&quot;multiply&quot;,[new c(&quot;log&quot;,[p.clone()]),y(m.clone(),t)])]);if(void 0!==t[m]){if(T(m)){if(o(m.value))return g(0);if(a(m.value,1))return y(p,t)}var h=new f(&quot;^&quot;,&quot;pow&quot;,[p.clone(),new f(&quot;-&quot;,&quot;subtract&quot;,[m,g(1)])]);return new f(&quot;*&quot;,&quot;multiply&quot;,[m.clone(),new f(&quot;*&quot;,&quot;multiply&quot;,[y(p,t),h])])}return new f(&quot;*&quot;,&quot;multiply&quot;,[new f(&quot;^&quot;,&quot;pow&quot;,[p.clone(),m.clone()]),new f(&quot;+&quot;,&quot;add&quot;,[new f(&quot;*&quot;,&quot;multiply&quot;,[y(p,t),new f(&quot;/&quot;,&quot;divide&quot;,[m.clone(),p.clone()])]),new f(&quot;*&quot;,&quot;multiply&quot;,[y(m,t),new c(&quot;log&quot;,[p.clone()])])])])}throw new Error('Operator &quot;'+e.op+'&quot; is not supported by derivative, or a wrong number of arguments is passed')}});function g(e,t){return new s(u(e,t||r.number))}return h})),Cd=&quot;rationalize&quot;,Md=Ee(Cd,[&quot;config&quot;,&quot;typed&quot;,&quot;equal&quot;,&quot;isZero&quot;,&quot;add&quot;,&quot;subtract&quot;,&quot;multiply&quot;,&quot;divide&quot;,&quot;pow&quot;,&quot;parse&quot;,&quot;simplifyConstant&quot;,&quot;simplifyCore&quot;,&quot;simplify&quot;,&quot;?bignumber&quot;,&quot;?fraction&quot;,&quot;mathWithTransform&quot;,&quot;matrix&quot;,&quot;AccessorNode&quot;,&quot;ArrayNode&quot;,&quot;ConstantNode&quot;,&quot;FunctionNode&quot;,&quot;IndexNode&quot;,&quot;ObjectNode&quot;,&quot;OperatorNode&quot;,&quot;SymbolNode&quot;,&quot;ParenthesisNode&quot;],(function(e){e.config;var t=e.typed,r=(e.equal,e.isZero,e.add,e.subtract,e.multiply,e.divide,e.pow,e.parse,e.simplifyConstant),n=e.simplifyCore,i=e.simplify,a=(e.fraction,e.bignumber,e.mathWithTransform,e.matrix,e.AccessorNode,e.ArrayNode,e.ConstantNode),o=(e.FunctionNode,e.IndexNode,e.ObjectNode,e.OperatorNode),u=e.SymbolNode;function s(e){var t=arguments.length&gt;1&amp;&amp;void 0!==arguments[1]?arguments[1]:{},a=arguments.length&gt;2&amp;&amp;void 0!==arguments[2]&amp;&amp;arguments[2],o=function(){var e=[n,{l:&quot;n+n&quot;,r:&quot;2*n&quot;},{l:&quot;n+-n&quot;,r:&quot;0&quot;},r,{l:&quot;n*(n1^-1)&quot;,r:&quot;n/n1&quot;},{l:&quot;n*n1^-n2&quot;,r:&quot;n/n1^n2&quot;},{l:&quot;n1^-1&quot;,r:&quot;1/n1&quot;},{l:&quot;n*(n1/n2)&quot;,r:&quot;(n*n1)/n2&quot;},{l:&quot;1*n&quot;,r:&quot;n&quot;}],t=[{l:&quot;(-n1)/(-n2)&quot;,r:&quot;n1/n2&quot;},{l:&quot;(-n1)*(-n2)&quot;,r:&quot;n1*n2&quot;},{l:&quot;n1--n2&quot;,r:&quot;n1+n2&quot;},{l:&quot;n1-n2&quot;,r:&quot;n1+(-n2)&quot;},{l:&quot;(n1+n2)*n3&quot;,r:&quot;(n1*n3 + n2*n3)&quot;},{l:&quot;n1*(n2+n3)&quot;,r:&quot;(n1*n2+n1*n3)&quot;},{l:&quot;c1*n + c2*n&quot;,r:&quot;(c1+c2)*n&quot;},{l:&quot;c1*n + n&quot;,r:&quot;(c1+1)*n&quot;},{l:&quot;c1*n - c2*n&quot;,r:&quot;(c1-c2)*n&quot;},{l:&quot;c1*n - n&quot;,r:&quot;(c1-1)*n&quot;},{l:&quot;v/c&quot;,r:&quot;(1/c)*v&quot;},{l:&quot;v/-c&quot;,r:&quot;-(1/c)*v&quot;},{l:&quot;-v*-c&quot;,r:&quot;c*v&quot;},{l:&quot;-v*c&quot;,r:&quot;-c*v&quot;},{l:&quot;v*-c&quot;,r:&quot;-c*v&quot;},{l:&quot;v*c&quot;,r:&quot;c*v&quot;},{l:&quot;-(-n1*n2)&quot;,r:&quot;(n1*n2)&quot;},{l:&quot;-(n1*n2)&quot;,r:&quot;(-n1*n2)&quot;},{l:&quot;-(-n1+n2)&quot;,r:&quot;(n1-n2)&quot;},{l:&quot;-(n1+n2)&quot;,r:&quot;(-n1-n2)&quot;},{l:&quot;(n1^n2)^n3&quot;,r:&quot;(n1^(n2*n3))&quot;},{l:&quot;-(-n1/n2)&quot;,r:&quot;(n1/n2)&quot;},{l:&quot;-(n1/n2)&quot;,r:&quot;(-n1/n2)&quot;}],i=[{l:&quot;(n1/(n2/n3))&quot;,r:&quot;((n1*n3)/n2)&quot;},{l:&quot;(n1/n2/n3)&quot;,r:&quot;(n1/(n2*n3))&quot;}],a={};return a.firstRules=e.concat(t,i),a.distrDivRules=[{l:&quot;(n1/n2 + n3/n4)&quot;,r:&quot;((n1*n4 + n3*n2)/(n2*n4))&quot;},{l:&quot;(n1/n2 + n3)&quot;,r:&quot;((n1 + n3*n2)/n2)&quot;},{l:&quot;(n1 + n2/n3)&quot;,r:&quot;((n1*n3 + n2)/n3)&quot;}],a.sucDivRules=i,a.firstRulesAgain=e.concat(t),a.finalRules=[n,{l:&quot;n*-n&quot;,r:&quot;-n^2&quot;},{l:&quot;n*n&quot;,r:&quot;n^2&quot;},r,{l:&quot;n*-n^n1&quot;,r:&quot;-n^(n1+1)&quot;},{l:&quot;n*n^n1&quot;,r:&quot;n^(n1+1)&quot;},{l:&quot;n^n1*-n^n2&quot;,r:&quot;-n^(n1+n2)&quot;},{l:&quot;n^n1*n^n2&quot;,r:&quot;n^(n1+n2)&quot;},{l:&quot;n^n1*-n&quot;,r:&quot;-n^(n1+1)&quot;},{l:&quot;n^n1*n&quot;,r:&quot;n^(n1+1)&quot;},{l:&quot;n^n1/-n&quot;,r:&quot;-n^(n1-1)&quot;},{l:&quot;n^n1/n&quot;,r:&quot;n^(n1-1)&quot;},{l:&quot;n/-n^n1&quot;,r:&quot;-n^(1-n1)&quot;},{l:&quot;n/n^n1&quot;,r:&quot;n^(1-n1)&quot;},{l:&quot;n^n1/-n^n2&quot;,r:&quot;n^(n1-n2)&quot;},{l:&quot;n^n1/n^n2&quot;,r:&quot;n^(n1-n2)&quot;},{l:&quot;n1+(-n2*n3)&quot;,r:&quot;n1-n2*n3&quot;},{l:&quot;v*(-c)&quot;,r:&quot;-c*v&quot;},{l:&quot;n1+-n2&quot;,r:&quot;n1-n2&quot;},{l:&quot;v*c&quot;,r:&quot;c*v&quot;},{l:&quot;(n1^n2)^n3&quot;,r:&quot;(n1^(n2*n3))&quot;}],a}(),u=function(e,t,r,n){var a=[],o=i(e,n,t,{exactFractions:!1}),u=&quot;+-*&quot;+((r=!!r)?&quot;/&quot;:&quot;&quot;);!function e(t){var r=t.type;if(&quot;FunctionNode&quot;===r)throw new Error(&quot;There is an unsolved function call&quot;);if(&quot;OperatorNode&quot;===r)if(&quot;^&quot;===t.op){if(&quot;ConstantNode&quot;!==t.args[1].type||!V(parseFloat(t.args[1].value)))throw new Error(&quot;There is a non-integer exponent&quot;);e(t.args[0])}else{if(-1===u.indexOf(t.op))throw new Error(&quot;Operator &quot;+t.op+&quot; invalid in polynomial expression&quot;);for(var n=0;n&lt;t.args.length;n++)e(t.args[n])}else if(&quot;SymbolNode&quot;===r){var i=t.name;-1===a.indexOf(i)&amp;&amp;a.push(i)}else if(&quot;ParenthesisNode&quot;===r)e(t.content);else if(&quot;ConstantNode&quot;!==r)throw new Error(&quot;type &quot;+r+&quot; is not allowed in polynomial expression&quot;)}(o);var s={};return s.expression=o,s.variables=a,s}(e,t,!0,o.firstRules),s=u.variables.length,l={exactFractions:!1},p={exactFractions:!0};if(e=u.expression,s&gt;=1){var m,h;e=c(e);var d,v=!0,y=!1;for(e=i(e,o.firstRules,{},l);h=v?o.distrDivRules:o.sucDivRules,v=!v,(d=(e=i(e,h,{},p)).toString())!==m;)y=!0,m=d;y&amp;&amp;(e=i(e,o.firstRulesAgain,{},l)),e=i(e,o.finalRules,{},l)}var g=[],x={};return&quot;OperatorNode&quot;===e.type&amp;&amp;e.isBinary()&amp;&amp;&quot;/&quot;===e.op?(1===s&amp;&amp;(e.args[0]=f(e.args[0],g),e.args[1]=f(e.args[1])),a&amp;&amp;(x.numerator=e.args[0],x.denominator=e.args[1])):(1===s&amp;&amp;(e=f(e,g)),a&amp;&amp;(x.numerator=e,x.denominator=null)),a?(x.coefficients=g,x.variables=u.variables,x.expression=e,x):e}return e.ParenthesisNode,t(Cd,{Node:s,&quot;Node, boolean&quot;:function(e,t){return s(e,{},t)},&quot;Node, Object&quot;:s,&quot;Node, Object, boolean&quot;:s});function c(e,t,r){var n=e.type,i=arguments.length&gt;1;if(&quot;OperatorNode&quot;===n&amp;&amp;e.isBinary()){var u,s=!1;if(&quot;^&quot;===e.op&amp;&amp;(&quot;ParenthesisNode&quot;!==e.args[0].type&amp;&amp;&quot;OperatorNode&quot;!==e.args[0].type||&quot;ConstantNode&quot;!==e.args[1].type||(s=(u=parseFloat(e.args[1].value))&gt;=2&amp;&amp;V(u))),s){if(u&gt;2){var f=e.args[0],l=new o(&quot;^&quot;,&quot;pow&quot;,[e.args[0].cloneDeep(),new a(u-1)]);e=new o(&quot;*&quot;,&quot;multiply&quot;,[f,l])}else e=new o(&quot;*&quot;,&quot;multiply&quot;,[e.args[0],e.args[0].cloneDeep()]);i&amp;&amp;(&quot;content&quot;===r?t.content=e:t.args[r]=e)}}if(&quot;ParenthesisNode&quot;===n)c(e.content,e,&quot;content&quot;);else if(&quot;ConstantNode&quot;!==n&amp;&amp;&quot;SymbolNode&quot;!==n)for(var p=0;p&lt;e.args.length;p++)c(e.args[p],e,p);if(!i)return e}function f(e,t){void 0===t&amp;&amp;(t=[]),t[0]=0;var r=0,n=&quot;&quot;;!function e(i,a,o){var u=i.type;if(&quot;FunctionNode&quot;===u)throw new Error(&quot;There is an unsolved function call&quot;);if(&quot;OperatorNode&quot;===u){if(-1===&quot;+-*^&quot;.indexOf(i.op))throw new Error(&quot;Operator &quot;+i.op+&quot; invalid&quot;);if(null!==a){if((&quot;unaryMinus&quot;===i.fn||&quot;pow&quot;===i.fn)&amp;&amp;&quot;add&quot;!==a.fn&amp;&amp;&quot;subtract&quot;!==a.fn&amp;&amp;&quot;multiply&quot;!==a.fn)throw new Error(&quot;Invalid &quot;+i.op+&quot; placing&quot;);if((&quot;subtract&quot;===i.fn||&quot;add&quot;===i.fn||&quot;multiply&quot;===i.fn)&amp;&amp;&quot;add&quot;!==a.fn&amp;&amp;&quot;subtract&quot;!==a.fn)throw new Error(&quot;Invalid &quot;+i.op+&quot; placing&quot;);if((&quot;subtract&quot;===i.fn||&quot;add&quot;===i.fn||&quot;unaryMinus&quot;===i.fn)&amp;&amp;0!==o.noFil)throw new Error(&quot;Invalid &quot;+i.op+&quot; placing&quot;)}&quot;^&quot;!==i.op&amp;&amp;&quot;*&quot;!==i.op||(o.fire=i.op);for(var s=0;s&lt;i.args.length;s++)&quot;unaryMinus&quot;===i.fn&amp;&amp;(o.oper=&quot;-&quot;),&quot;+&quot;!==i.op&amp;&amp;&quot;subtract&quot;!==i.fn||(o.fire=&quot;&quot;,o.cte=1,o.oper=0===s?&quot;+&quot;:i.op),o.noFil=s,e(i.args[s],i,o)}else if(&quot;SymbolNode&quot;===u){if(i.name!==n&amp;&amp;&quot;&quot;!==n)throw new Error(&quot;There is more than one variable&quot;);if(n=i.name,null===a)return void(t[1]=1);if(&quot;^&quot;===a.op&amp;&amp;0!==o.noFil)throw new Error(&quot;In power the variable should be the first parameter&quot;);if(&quot;*&quot;===a.op&amp;&amp;1!==o.noFil)throw new Error(&quot;In multiply the variable should be the second parameter&quot;);&quot;&quot;!==o.fire&amp;&amp;&quot;*&quot;!==o.fire||(r&lt;1&amp;&amp;(t[1]=0),t[1]+=o.cte*(&quot;+&quot;===o.oper?1:-1),r=Math.max(1,r))}else{if(&quot;ConstantNode&quot;!==u)throw new Error(&quot;Type &quot;+u+&quot; is not allowed&quot;);var c=parseFloat(i.value);if(null===a)return void(t[0]=c);if(&quot;^&quot;===a.op){if(1!==o.noFil)throw new Error(&quot;Constant cannot be powered&quot;);if(!V(c)||c&lt;=0)throw new Error(&quot;Non-integer exponent is not allowed&quot;);for(var f=r+1;f&lt;c;f++)t[f]=0;return c&gt;r&amp;&amp;(t[c]=0),t[c]+=o.cte*(&quot;+&quot;===o.oper?1:-1),void(r=Math.max(c,r))}o.cte=c,&quot;&quot;===o.fire&amp;&amp;(t[0]+=o.cte*(&quot;+&quot;===o.oper?1:-1))}}(e,null,{cte:1,oper:&quot;+&quot;,fire:&quot;&quot;});for(var i,s=!0,c=r=t.length-1;c&gt;=0;c--)if(0!==t[c]){var f=new a(s?t[c]:Math.abs(t[c])),l=t[c]&lt;0?&quot;-&quot;:&quot;+&quot;;if(c&gt;0){var p=new u(n);if(c&gt;1){var m=new a(c);p=new o(&quot;^&quot;,&quot;pow&quot;,[p,m])}f=-1===t[c]&amp;&amp;s?new o(&quot;-&quot;,&quot;unaryMinus&quot;,[p]):1===Math.abs(t[c])?p:new o(&quot;*&quot;,&quot;multiply&quot;,[f,p])}i=s?f:&quot;+&quot;===l?new o(&quot;+&quot;,&quot;add&quot;,[i,f]):new o(&quot;-&quot;,&quot;subtract&quot;,[i,f]),s=!1}return s?new a(0):i}})),Fd=&quot;zpk2tf&quot;,Od=Ee(Fd,[&quot;typed&quot;,&quot;add&quot;,&quot;multiply&quot;,&quot;Complex&quot;,&quot;number&quot;],(function(e){var t=e.typed,r=e.add,n=e.multiply,i=e.Complex,a=e.number;return t(Fd,{&quot;Array,Array,number&quot;:function(e,t,r){return o(e,t,r)},&quot;Array,Array&quot;:function(e,t){return o(e,t,1)},&quot;Matrix,Matrix,number&quot;:function(e,t,r){return o(e.valueOf(),t.valueOf(),r)},&quot;Matrix,Matrix&quot;:function(e,t){return o(e.valueOf(),t.valueOf(),1)}});function o(e,t,r){e.some((function(e){return&quot;BigNumber&quot;===e.type}))&amp;&amp;(e=e.map((function(e){return a(e)}))),t.some((function(e){return&quot;BigNumber&quot;===e.type}))&amp;&amp;(t=t.map((function(e){return a(e)})));for(var o=[i(1,0)],s=[i(1,0)],c=0;c&lt;e.length;c++){var f=e[c];&quot;number&quot;==typeof f&amp;&amp;(f=i(f,0)),o=u(o,[i(1,0),i(-f.re,-f.im)])}for(var l=0;l&lt;t.length;l++){var p=t[l];&quot;number&quot;==typeof p&amp;&amp;(p=i(p,0)),s=u(s,[i(1,0),i(-p.re,-p.im)])}for(var m=0;m&lt;o.length;m++)o[m]=n(o[m],r);return[o,s]}function u(e,t){for(var a=[],o=0;o&lt;e.length+t.length-1;o++){a[o]=i(0,0);for(var u=0;u&lt;e.length;u++)o-u&gt;=0&amp;&amp;o-u&lt;t.length&amp;&amp;(a[o]=r(a[o],n(e[u],t[o-u])))}return a}})),Td=&quot;freqz&quot;,Bd=Ee(Td,[&quot;typed&quot;,&quot;add&quot;,&quot;multiply&quot;,&quot;Complex&quot;,&quot;divide&quot;,&quot;matrix&quot;],(function(e){var t=e.typed,r=e.add,n=e.multiply,i=e.Complex,a=e.divide,o=e.matrix;return t(Td,{&quot;Array, Array&quot;:function(e,t){return u(e,t,s(512))},&quot;Array, Array, Array&quot;:function(e,t,r){return u(e,t,r)},&quot;Array, Array, number&quot;:function(e,t,r){if(r&lt;0)throw new Error(&quot;w must be a positive number&quot;);return u(e,t,s(r))},&quot;Matrix, Matrix&quot;:function(e,t){var r=s(512),n=u(e.valueOf(),t.valueOf(),r),i=n.w,a=n.h;return{w:o(i),h:o(a)}},&quot;Matrix, Matrix, Matrix&quot;:function(e,t,r){var n=u(e.valueOf(),t.valueOf(),r.valueOf()).h;return{h:o(n),w:o(r)}},&quot;Matrix, Matrix, number&quot;:function(e,t,r){if(r&lt;0)throw new Error(&quot;w must be a positive number&quot;);var n=s(r),i=u(e.valueOf(),t.valueOf(),n).h;return{h:o(i),w:o(n)}}});function u(e,t,o){for(var u=[],s=[],c=0;c&lt;o.length;c++){for(var f=i(0,0),l=i(0,0),p=0;p&lt;e.length;p++)f=r(f,n(e[p],i(Math.cos(-p*o[c]),Math.sin(-p*o[c]))));for(var m=0;m&lt;t.length;m++)l=r(l,n(t[m],i(Math.cos(-m*o[c]),Math.sin(-m*o[c]))));u.push(f),s.push(l)}for(var h=[],d=0;d&lt;u.length;d++)h.push(a(u[d],s[d]));return{h,w:o}}function s(e){for(var t=[],r=0;r&lt;e;r++)t.push(r/e*Math.PI);return t}})),_d=Ee(&quot;reviver&quot;,[&quot;classes&quot;],(function(e){var t=e.classes;return function(e,r){var n=t[r&amp;&amp;r.mathjs];return n&amp;&amp;&quot;function&quot;==typeof n.fromJSON?n.fromJSON(r):r}})),kd=Ee(&quot;replacer&quot;,[],(function(){return function(e,t){return&quot;number&quot;!=typeof t||isFinite(t)&amp;&amp;!isNaN(t)?t:{mathjs:&quot;number&quot;,value:String(t)}}})),Id=Math.PI,Rd=2*Math.PI,zd=Math.E,qd=Ee(&quot;true&quot;,[],(function(){return!0})),jd=Ee(&quot;false&quot;,[],(function(){return!1})),Pd=Ee(&quot;null&quot;,[],(function(){return null})),Ld=nv(&quot;Infinity&quot;,[&quot;config&quot;,&quot;?BigNumber&quot;],(function(e){var t=e.config,r=e.BigNumber;return&quot;BigNumber&quot;===t.number?new r(1/0):1/0})),Ud=nv(&quot;NaN&quot;,[&quot;config&quot;,&quot;?BigNumber&quot;],(function(e){var t=e.config,r=e.BigNumber;return&quot;BigNumber&quot;===t.number?new r(NaN):NaN})),$d=nv(&quot;pi&quot;,[&quot;config&quot;,&quot;?BigNumber&quot;],(function(e){var t=e.config,r=e.BigNumber;return&quot;BigNumber&quot;===t.number?cf(r):Id})),Hd=nv(&quot;tau&quot;,[&quot;config&quot;,&quot;?BigNumber&quot;],(function(e){var t=e.config,r=e.BigNumber;return&quot;BigNumber&quot;===t.number?ff(r):Rd})),Gd=nv(&quot;e&quot;,[&quot;config&quot;,&quot;?BigNumber&quot;],(function(e){var t=e.config,r=e.BigNumber;return&quot;BigNumber&quot;===t.number?uf(r):zd})),Vd=nv(&quot;phi&quot;,[&quot;config&quot;,&quot;?BigNumber&quot;],(function(e){var t=e.config,r=e.BigNumber;return&quot;BigNumber&quot;===t.number?sf(r):1.618033988749895})),Zd=nv(&quot;LN2&quot;,[&quot;config&quot;,&quot;?BigNumber&quot;],(function(e){var t=e.config,r=e.BigNumber;return&quot;BigNumber&quot;===t.number?new r(2).ln():Math.LN2})),Wd=nv(&quot;LN10&quot;,[&quot;config&quot;,&quot;?BigNumber&quot;],(function(e){var t=e.config,r=e.BigNumber;return&quot;BigNumber&quot;===t.number?new r(10).ln():Math.LN10})),Yd=nv(&quot;LOG2E&quot;,[&quot;config&quot;,&quot;?BigNumber&quot;],(function(e){var t=e.config,r=e.BigNumber;return&quot;BigNumber&quot;===t.number?new r(1).div(new r(2).ln()):Math.LOG2E})),Jd=nv(&quot;LOG10E&quot;,[&quot;config&quot;,&quot;?BigNumber&quot;],(function(e){var t=e.config,r=e.BigNumber;return&quot;BigNumber&quot;===t.number?new r(1).div(new r(10).ln()):Math.LOG10E})),Xd=nv(&quot;SQRT1_2&quot;,[&quot;config&quot;,&quot;?BigNumber&quot;],(function(e){var t=e.config,r=e.BigNumber;return&quot;BigNumber&quot;===t.number?new r(&quot;0.5&quot;).sqrt():Math.SQRT1_2})),Qd=nv(&quot;SQRT2&quot;,[&quot;config&quot;,&quot;?BigNumber&quot;],(function(e){var t=e.config,r=e.BigNumber;return&quot;BigNumber&quot;===t.number?new r(2).sqrt():Math.SQRT2})),Kd=nv(&quot;i&quot;,[&quot;Complex&quot;],(function(e){return e.Complex.I})),ev=Ee(&quot;PI&quot;,[&quot;pi&quot;],(function(e){return e.pi})),tv=Ee(&quot;E&quot;,[&quot;e&quot;],(function(e){return e.e})),rv=Ee(&quot;version&quot;,[],(function(){return&quot;11.9.1&quot;}));function nv(e,t,r){return Ee(e,t,r,{recreateOnConfigChange:!0})}var iv=ey(&quot;speedOfLight&quot;,&quot;299792458&quot;,&quot;m s^-1&quot;),av=ey(&quot;gravitationConstant&quot;,&quot;6.67430e-11&quot;,&quot;m^3 kg^-1 s^-2&quot;),ov=ey(&quot;planckConstant&quot;,&quot;6.62607015e-34&quot;,&quot;J s&quot;),uv=ey(&quot;reducedPlanckConstant&quot;,&quot;1.0545718176461565e-34&quot;,&quot;J s&quot;),sv=ey(&quot;magneticConstant&quot;,&quot;1.25663706212e-6&quot;,&quot;N A^-2&quot;),cv=ey(&quot;electricConstant&quot;,&quot;8.8541878128e-12&quot;,&quot;F m^-1&quot;),fv=ey(&quot;vacuumImpedance&quot;,&quot;376.730313667&quot;,&quot;ohm&quot;),lv=ey(&quot;coulomb&quot;,&quot;8.987551792261171e9&quot;,&quot;N m^2 C^-2&quot;),pv=ey(&quot;elementaryCharge&quot;,&quot;1.602176634e-19&quot;,&quot;C&quot;),mv=ey(&quot;bohrMagneton&quot;,&quot;9.2740100783e-24&quot;,&quot;J T^-1&quot;),hv=ey(&quot;conductanceQuantum&quot;,&quot;7.748091729863649e-5&quot;,&quot;S&quot;),dv=ey(&quot;inverseConductanceQuantum&quot;,&quot;12906.403729652257&quot;,&quot;ohm&quot;),vv=ey(&quot;magneticFluxQuantum&quot;,&quot;2.0678338484619295e-15&quot;,&quot;Wb&quot;),yv=ey(&quot;nuclearMagneton&quot;,&quot;5.0507837461e-27&quot;,&quot;J T^-1&quot;),gv=ey(&quot;klitzing&quot;,&quot;25812.807459304513&quot;,&quot;ohm&quot;),xv=ey(&quot;bohrRadius&quot;,&quot;5.29177210903e-11&quot;,&quot;m&quot;),bv=ey(&quot;classicalElectronRadius&quot;,&quot;2.8179403262e-15&quot;,&quot;m&quot;),wv=ey(&quot;electronMass&quot;,&quot;9.1093837015e-31&quot;,&quot;kg&quot;),Nv=ey(&quot;fermiCoupling&quot;,&quot;1.1663787e-5&quot;,&quot;GeV^-2&quot;),Dv=ty(&quot;fineStructure&quot;,.0072973525693),Ev=ey(&quot;hartreeEnergy&quot;,&quot;4.3597447222071e-18&quot;,&quot;J&quot;),Av=ey(&quot;protonMass&quot;,&quot;1.67262192369e-27&quot;,&quot;kg&quot;),Sv=ey(&quot;deuteronMass&quot;,&quot;3.3435830926e-27&quot;,&quot;kg&quot;),Cv=ey(&quot;neutronMass&quot;,&quot;1.6749271613e-27&quot;,&quot;kg&quot;),Mv=ey(&quot;quantumOfCirculation&quot;,&quot;3.6369475516e-4&quot;,&quot;m^2 s^-1&quot;),Fv=ey(&quot;rydberg&quot;,&quot;10973731.568160&quot;,&quot;m^-1&quot;),Ov=ey(&quot;thomsonCrossSection&quot;,&quot;6.6524587321e-29&quot;,&quot;m^2&quot;),Tv=ty(&quot;weakMixingAngle&quot;,.2229),Bv=ty(&quot;efimovFactor&quot;,22.7),_v=ey(&quot;atomicMass&quot;,&quot;1.66053906660e-27&quot;,&quot;kg&quot;),kv=ey(&quot;avogadro&quot;,&quot;6.02214076e23&quot;,&quot;mol^-1&quot;),Iv=ey(&quot;boltzmann&quot;,&quot;1.380649e-23&quot;,&quot;J K^-1&quot;),Rv=ey(&quot;faraday&quot;,&quot;96485.33212331001&quot;,&quot;C mol^-1&quot;),zv=ey(&quot;firstRadiation&quot;,&quot;3.7417718521927573e-16&quot;,&quot;W m^2&quot;),qv=ey(&quot;loschmidt&quot;,&quot;2.686780111798444e25&quot;,&quot;m^-3&quot;),jv=ey(&quot;gasConstant&quot;,&quot;8.31446261815324&quot;,&quot;J K^-1 mol^-1&quot;),Pv=ey(&quot;molarPlanckConstant&quot;,&quot;3.990312712893431e-10&quot;,&quot;J s mol^-1&quot;),Lv=ey(&quot;molarVolume&quot;,&quot;0.022413969545014137&quot;,&quot;m^3 mol^-1&quot;),Uv=ty(&quot;sackurTetrode&quot;,-1.16487052358),$v=ey(&quot;secondRadiation&quot;,&quot;0.014387768775039337&quot;,&quot;m K&quot;),Hv=ey(&quot;stefanBoltzmann&quot;,&quot;5.67037441918443e-8&quot;,&quot;W m^-2 K^-4&quot;),Gv=ey(&quot;wienDisplacement&quot;,&quot;2.897771955e-3&quot;,&quot;m K&quot;),Vv=ey(&quot;molarMass&quot;,&quot;0.99999999965e-3&quot;,&quot;kg mol^-1&quot;),Zv=ey(&quot;molarMassC12&quot;,&quot;11.9999999958e-3&quot;,&quot;kg mol^-1&quot;),Wv=ey(&quot;gravity&quot;,&quot;9.80665&quot;,&quot;m s^-2&quot;),Yv=ey(&quot;planckLength&quot;,&quot;1.616255e-35&quot;,&quot;m&quot;),Jv=ey(&quot;planckMass&quot;,&quot;2.176435e-8&quot;,&quot;kg&quot;),Xv=ey(&quot;planckTime&quot;,&quot;5.391245e-44&quot;,&quot;s&quot;),Qv=ey(&quot;planckCharge&quot;,&quot;1.87554603778e-18&quot;,&quot;C&quot;),Kv=ey(&quot;planckTemperature&quot;,&quot;1.416785e+32&quot;,&quot;K&quot;);function ey(e,t,r){return Ee(e,[&quot;config&quot;,&quot;Unit&quot;,&quot;BigNumber&quot;],(function(e){var n=e.config,i=e.Unit,a=e.BigNumber,o=new i(&quot;BigNumber&quot;===n.number?new a(t):parseFloat(t),r);return o.fixPrefix=!0,o}))}function ty(e,t){return Ee(e,[&quot;config&quot;,&quot;BigNumber&quot;],(function(e){var r=e.config,n=e.BigNumber;return&quot;BigNumber&quot;===r.number?new n(t):t}))}var ry=Ee(&quot;apply&quot;,[&quot;typed&quot;,&quot;isInteger&quot;],(function(e){var t=e.typed,r=e.isInteger,n=na({typed:t,isInteger:r});return t(&quot;apply&quot;,{&quot;...any&quot;:function(e){var t=e[1];i(t)?e[1]=t-1:a(t)&amp;&amp;(e[1]=t.minus(1));try{return n.apply(null,e)}catch(e){throw up(e)}}})}),{isTransformFunction:!0}),ny=Ee(&quot;column&quot;,[&quot;typed&quot;,&quot;Index&quot;,&quot;matrix&quot;,&quot;range&quot;],(function(e){var t=e.typed,r=e.Index,n=e.matrix,a=e.range,o=fu({typed:t,Index:r,matrix:n,range:a});return t(&quot;column&quot;,{&quot;...any&quot;:function(e){var t=e.length-1,r=e[t];i(r)&amp;&amp;(e[t]=r-1);try{return o.apply(null,e)}catch(e){throw up(e)}}})}),{isTransformFunction:!0});function iy(e,t,r){var n=e.filter((function(e){return U(e)&amp;&amp;!(e.name in t)&amp;&amp;!r.has(e.name)}))[0];if(!n)throw new Error('No undefined variable found in inline expression &quot;'+e+'&quot;');var i=n.name,a=Xp(r),o=e.compile();return function(e){return a.set(i,e),o.evaluate(a)}}var ay=Ee(&quot;filter&quot;,[&quot;typed&quot;],(function(e){var t=e.typed;function r(e,t,r){var i,a;return e[0]&amp;&amp;(i=e[0].compile().evaluate(r)),e[1]&amp;&amp;(a=U(e[1])||_(e[1])?e[1].compile().evaluate(r):iy(e[1],t,r)),n(i,a)}r.rawArgs=!0;var n=t(&quot;filter&quot;,{&quot;Array, function&quot;:oy,&quot;Matrix, function&quot;:function(e,t){return e.create(oy(e.toArray(),t))},&quot;Array, RegExp&quot;:yn,&quot;Matrix, RegExp&quot;:function(e,t){return e.create(yn(e.toArray(),t))}});return r}),{isTransformFunction:!0});function oy(e,t){return vn(e,(function(e,r,n){return yu(t,e,[r+1],n,&quot;filter&quot;)}))}var uy=Ee(&quot;forEach&quot;,[&quot;typed&quot;],(function(e){var t=e.typed;function r(e,t,r){var i,a;return e[0]&amp;&amp;(i=e[0].compile().evaluate(r)),e[1]&amp;&amp;(a=U(e[1])||_(e[1])?e[1].compile().evaluate(r):iy(e[1],t,r)),n(i,a)}r.rawArgs=!0;var n=t(&quot;forEach&quot;,{&quot;Array | Matrix, function&quot;:function(e,t){!function r(n,i){if(!Array.isArray(n))return yu(t,n,i,e,&quot;forEach&quot;);dn(n,(function(e,t){r(e,i.concat(t+1))}))}(e.valueOf(),[])}});return r}),{isTransformFunction:!0}),sy=Ee(&quot;index&quot;,[&quot;Index&quot;],(function(e){var t=e.Index;return function(){for(var e=[],r=0,n=arguments.length;r&lt;n;r++){var o=arguments[r];if(d(o))o.start--,o.end-=o.step&gt;0?0:2;else if(o&amp;&amp;!0===o.isSet)o=o.map((function(e){return e-1}));else if(f(o)||l(o))o=o.map((function(e){return e-1}));else if(i(o))o--;else if(a(o))o=o.toNumber()-1;else if(&quot;string&quot;!=typeof o)throw new TypeError(&quot;Dimension must be an Array, Matrix, number, string, or Range&quot;);e[r]=o}var u=new t;return t.apply(u,e),u}}),{isTransformFunction:!0}),cy=Ee(&quot;map&quot;,[&quot;typed&quot;],(function(e){var t=e.typed;function r(e,t,r){var i,a;return e[0]&amp;&amp;(i=e[0].compile().evaluate(r)),e[1]&amp;&amp;(a=U(e[1])||_(e[1])?e[1].compile().evaluate(r):iy(e[1],t,r)),n(i,a)}r.rawArgs=!0;var n=t(&quot;map&quot;,{&quot;Array, function&quot;:function(e,t){return fy(e,t,e)},&quot;Matrix, function&quot;:function(e,t){return e.create(fy(e.valueOf(),t,e))}});return r}),{isTransformFunction:!0});function fy(e,t,r){return function e(n,i){return Array.isArray(n)?hn(n,(function(t,r){return e(t,i.concat(r+1))})):yu(t,n,i,r,&quot;map&quot;)}(e,[])}function ly(e){if(2===e.length&amp;&amp;p(e[0])){var t=(e=e.slice())[1];i(t)?e[1]=t-1:a(t)&amp;&amp;(e[1]=t.minus(1))}return e}var py=Ee(&quot;max&quot;,[&quot;typed&quot;,&quot;config&quot;,&quot;numeric&quot;,&quot;larger&quot;],(function(e){var t=e.typed,r=e.config,n=e.numeric,i=e.larger,a=Kc({typed:t,config:r,numeric:n,larger:i});return t(&quot;max&quot;,{&quot;...any&quot;:function(e){e=ly(e);try{return a.apply(null,e)}catch(e){throw up(e)}}})}),{isTransformFunction:!0}),my=Ee(&quot;mean&quot;,[&quot;typed&quot;,&quot;add&quot;,&quot;divide&quot;],(function(e){var t=e.typed,r=e.add,n=e.divide,i=ch({typed:t,add:r,divide:n});return t(&quot;mean&quot;,{&quot;...any&quot;:function(e){e=ly(e);try{return i.apply(null,e)}catch(e){throw up(e)}}})}),{isTransformFunction:!0}),hy=Ee(&quot;min&quot;,[&quot;typed&quot;,&quot;config&quot;,&quot;numeric&quot;,&quot;smaller&quot;],(function(e){var t=e.typed,r=e.config,n=e.numeric,i=e.smaller,a=ef({typed:t,config:r,numeric:n,smaller:i});return t(&quot;min&quot;,{&quot;...any&quot;:function(e){e=ly(e);try{return a.apply(null,e)}catch(e){throw up(e)}}})}),{isTransformFunction:!0}),dy=Ee(&quot;range&quot;,[&quot;typed&quot;,&quot;config&quot;,&quot;?matrix&quot;,&quot;?bignumber&quot;,&quot;smaller&quot;,&quot;smallerEq&quot;,&quot;larger&quot;,&quot;largerEq&quot;,&quot;add&quot;,&quot;isPositive&quot;],(function(e){var t=e.typed,r=e.config,n=e.matrix,i=e.bignumber,a=e.smaller,o=e.smallerEq,u=e.larger,s=e.largerEq,c=e.add,f=e.isPositive,l=Pu({typed:t,config:r,matrix:n,bignumber:i,smaller:a,smallerEq:o,larger:u,largerEq:s,add:c,isPositive:f});return t(&quot;range&quot;,{&quot;...any&quot;:function(e){return&quot;boolean&quot;!=typeof e[e.length-1]&amp;&amp;e.push(!0),l.apply(null,e)}})}),{isTransformFunction:!0}),vy=Ee(&quot;row&quot;,[&quot;typed&quot;,&quot;Index&quot;,&quot;matrix&quot;,&quot;range&quot;],(function(e){var t=e.typed,r=e.Index,n=e.matrix,a=e.range,o=Wu({typed:t,Index:r,matrix:n,range:a});return t(&quot;row&quot;,{&quot;...any&quot;:function(e){var t=e.length-1,r=e[t];i(r)&amp;&amp;(e[t]=r-1);try{return o.apply(null,e)}catch(e){throw up(e)}}})}),{isTransformFunction:!0}),yy=Ee(&quot;subset&quot;,[&quot;typed&quot;,&quot;matrix&quot;],(function(e){var t=e.typed,r=e.matrix,n=es({typed:t,matrix:r});return t(&quot;subset&quot;,{&quot;...any&quot;:function(e){try{return n.apply(null,e)}catch(e){throw up(e)}}})}),{isTransformFunction:!0}),gy=Ee(&quot;concat&quot;,[&quot;typed&quot;,&quot;matrix&quot;,&quot;isInteger&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.isInteger,o=uu({typed:t,matrix:r,isInteger:n});return t(&quot;concat&quot;,{&quot;...any&quot;:function(e){var t=e.length-1,r=e[t];i(r)?e[t]=r-1:a(r)&amp;&amp;(e[t]=r.minus(1));try{return o.apply(null,e)}catch(e){throw up(e)}}})}),{isTransformFunction:!0}),xy=&quot;diff&quot;,by=Ee(xy,[&quot;typed&quot;,&quot;matrix&quot;,&quot;subtract&quot;,&quot;number&quot;,&quot;bignumber&quot;],(function(e){var t=e.typed,r=e.matrix,n=e.subtract,i=e.number,a=e.bignumber,o=ku({typed:t,matrix:r,subtract:n,number:i,bignumber:a});return t(xy,{&quot;...any&quot;:function(e){e=ly(e);try{return o.apply(null,e)}catch(e){throw up(e)}}})}),{isTransformFunction:!0}),wy=Ee(&quot;std&quot;,[&quot;typed&quot;,&quot;map&quot;,&quot;sqrt&quot;,&quot;variance&quot;],(function(e){var t=e.typed,r=e.map,n=e.sqrt,i=e.variance,a=yh({typed:t,map:r,sqrt:n,variance:i});return t(&quot;std&quot;,{&quot;...any&quot;:function(e){e=ly(e);try{return a.apply(null,e)}catch(e){throw up(e)}}})}),{isTransformFunction:!0}),Ny=Ee(&quot;sum&quot;,[&quot;typed&quot;,&quot;config&quot;,&quot;add&quot;,&quot;numeric&quot;],(function(e){var t=e.typed,r=e.config,n=e.add,i=e.numeric,a=ah({typed:t,config:r,add:n,numeric:i});return t(&quot;sum&quot;,{&quot;...any&quot;:function(e){e=ly(e);try{return a.apply(null,e)}catch(e){throw up(e)}}})}),{isTransformFunction:!0}),Dy=&quot;cumsum&quot;,Ey=Ee(Dy,[&quot;typed&quot;,&quot;add&quot;,&quot;unaryPlus&quot;],(function(e){var t=e.typed,r=e.add,n=e.unaryPlus,o=uh({typed:t,add:r,unaryPlus:n});return t(Dy,{&quot;...any&quot;:function(e){if(2===e.length&amp;&amp;p(e[0])){var t=e[1];i(t)?e[1]=t-1:a(t)&amp;&amp;(e[1]=t.minus(1))}try{return o.apply(null,e)}catch(e){throw up(e)}}})}),{isTransformFunction:!0}),Ay=&quot;variance&quot;,Sy=Ee(Ay,[&quot;typed&quot;,&quot;add&quot;,&quot;subtract&quot;,&quot;multiply&quot;,&quot;divide&quot;,&quot;apply&quot;,&quot;isNaN&quot;],(function(e){var t=e.typed,r=e.add,n=e.subtract,i=e.multiply,a=e.divide,o=e.apply,u=e.isNaN,s=dh({typed:t,add:r,subtract:n,multiply:i,divide:a,apply:o,isNaN:u});return t(Ay,{&quot;...any&quot;:function(e){e=ly(e);try{return s.apply(null,e)}catch(e){throw up(e)}}})}),{isTransformFunction:!0}),Cy=(r(4812),r(4279));var My={epsilon:1e-12,matrix:&quot;Matrix&quot;,number:&quot;number&quot;,precision:64,predictable:!1,randomSeed:null},Fy=[&quot;Matrix&quot;,&quot;Array&quot;],Oy=[&quot;number&quot;,&quot;BigNumber&quot;,&quot;Fraction&quot;];function Ty(e,t){function r(r){if(r){var n=de(e,he);By(r,&quot;matrix&quot;,Fy),By(r,&quot;number&quot;,Oy),ye(e,r);var i=de(e,he),a=de(r,he);return t(&quot;config&quot;,i,n,a),i}return de(e,he)}return r.MATRIX_OPTIONS=Fy,r.NUMBER_OPTIONS=Oy,Object.keys(My).forEach((function(t){Object.defineProperty(r,t,{get:function(){return e[t]},enumerable:!0,configurable:!0})})),r}function By(e,t,r){var n,i;void 0!==e[t]&amp;&amp;(n=r,i=e[t],-1===n.indexOf(i))&amp;&amp;console.warn('Warning: Unknown value &quot;'+e[t]+'&quot; for configuration option &quot;'+t+'&quot;. Available options: '+r.map((function(e){return JSON.stringify(e)})).join(&quot;, &quot;)+&quot;.&quot;)}const _y=function e(r,n){var B=of({},My,n);if(&quot;function&quot;!=typeof Object.create)throw new Error(&quot;ES5 not supported by this JavaScript engine. Please load the es5-shim and es5-sham library for compatibility.&quot;);var H,V,Z=(H={isNumber:i,isComplex:o,isBigNumber:a,isFraction:u,isUnit:s,isString:c,isArray:f,isMatrix:l,isCollection:p,isDenseMatrix:m,isSparseMatrix:h,isRange:d,isIndex:v,isBoolean:y,isResultSet:g,isHelp:x,isFunction:b,isDate:w,isRegExp:N,isObject:D,isNull:E,isUndefined:A,isAccessorNode:S,isArrayNode:C,isAssignmentNode:M,isBlockNode:F,isConditionalNode:O,isConstantNode:T,isFunctionAssignmentNode:_,isFunctionNode:k,isIndexNode:I,isNode:R,isObjectNode:z,isOperatorNode:q,isParenthesisNode:j,isRangeNode:P,isRelationalNode:L,isSymbolNode:U,isChain:$},V=new Cy,H.on=V.on.bind(V),H.off=V.off.bind(V),H.once=V.once.bind(V),H.emit=V.emit.bind(V),H);Z.config=Ty(B,Z.emit),Z.expression={transform:{},mathWithTransform:{config:Z.config}};var W={};function Y(){for(var e=arguments.length,t=new Array(e),r=0;r&lt;e;r++)t[r]=arguments[r];return Z.typed.apply(Z.typed,t)}Y.isTypedFunction=G.isTypedFunction;var J=function(e,r,n,i){function c(t,r,a){var o;if(a.wrap&amp;&amp;&quot;function&quot;==typeof r&amp;&amp;(r=function(e){var t=function(){for(var t=[],r=0,i=arguments.length;r&lt;i;r++){var a=arguments[r];t[r]=a&amp;&amp;a.valueOf()}return e.apply(n,t)};return e.transform&amp;&amp;(t.transform=e.transform),t}(r)),&quot;function&quot;==typeof(o=r)&amp;&amp;&quot;string&quot;==typeof o.signature&amp;&amp;(r=e(t,Ba({},r.signature,r))),e.isTypedFunction(n[t])&amp;&amp;e.isTypedFunction(r))return r=a.override?e(t,r.signatures):e(n[t],r),n[t]=r,delete i[t],f(t,r),void n.emit(&quot;import&quot;,t,(function(){return r}));if(void 0===n[t]||a.override)return n[t]=r,delete i[t],f(t,r),void n.emit(&quot;import&quot;,t,(function(){return r}));if(!a.silent)throw new Error('Cannot import &quot;'+t+'&quot;: already exists')}function f(e,t){t&amp;&amp;&quot;function&quot;==typeof t.transform?(n.expression.transform[e]=t.transform,h(e)&amp;&amp;(n.expression.mathWithTransform[e]=t.transform)):(delete n.expression.transform[e],h(e)&amp;&amp;(n.expression.mathWithTransform[e]=t))}function p(e){delete n.expression.transform[e],h(e)?n.expression.mathWithTransform[e]=n[e]:delete n.expression.mathWithTransform[e]}function m(t,r){var a=arguments.length&gt;2&amp;&amp;void 0!==arguments[2]?arguments[2]:t.fn;if(Nn(a,&quot;.&quot;))throw new Error(&quot;Factory name should not contain a nested path. Name: &quot;+JSON.stringify(a));var o=v(t)?n.expression.transform:n,u=a in n.expression.transform,s=Ne(o,a)?o[a]:void 0,c=function(){var i={};t.dependencies.map(Se).forEach((function(e){if(Nn(e,&quot;.&quot;))throw new Error(&quot;Factory dependency should not contain a nested path. Name: &quot;+JSON.stringify(e));&quot;math&quot;===e?i.math=n:&quot;mathWithTransform&quot;===e?i.mathWithTransform=n.expression.mathWithTransform:&quot;classes&quot;===e?i.classes=n:i[e]=n[e]}));var o=t(i);if(o&amp;&amp;&quot;function&quot;==typeof o.transform)throw new Error('Transforms cannot be attached to factory functions. Please create a separate function for it with exports.path=&quot;expression.transform&quot;');if(void 0===s||r.override)return o;if(e.isTypedFunction(s)&amp;&amp;e.isTypedFunction(o))return e(s,o);if(r.silent)return s;throw new Error('Cannot import &quot;'+a+'&quot;: already exists')};t.meta&amp;&amp;!1===t.meta.lazy?(o[a]=c(),s&amp;&amp;u?p(a):(v(t)||d(t))&amp;&amp;we(n.expression.mathWithTransform,a,(function(){return o[a]}))):(we(o,a,c),s&amp;&amp;u?p(a):(v(t)||d(t))&amp;&amp;we(n.expression.mathWithTransform,a,(function(){return o[a]}))),i[a]=t,n.emit(&quot;import&quot;,a,c)}function h(e){return!Ne(y,e)}function d(e){return!(-1!==e.fn.indexOf(&quot;.&quot;)||Ne(y,e.fn)||e.meta&amp;&amp;e.meta.isClass)}function v(e){return void 0!==e&amp;&amp;void 0!==e.meta&amp;&amp;!0===e.meta.isTransformFunction||!1}var y={expression:!0,type:!0,docs:!0,error:!0,json:!0,chain:!0};return function(e,r){var n=arguments.length;if(1!==n&amp;&amp;2!==n)throw new Pa(&quot;import&quot;,n,1,2);r||(r={});var i,f={};for(var p in function e(n,i,a){if(Array.isArray(i))i.forEach((function(t){return e(n,t)}));else if(&quot;object&quot;===t(i))for(var o in i)Ne(i,o)&amp;&amp;e(n,i[o],o);else if(Ae(i)||void 0!==a){var u=Ae(i)?v(i)?i.fn+&quot;.transform&quot;:i.fn:a;if(Ne(n,u)&amp;&amp;n[u]!==i&amp;&amp;!r.silent)throw new Error('Cannot import &quot;'+u+'&quot; twice');n[u]=i}else if(!r.silent)throw new TypeError(&quot;Factory, Object, or Array expected&quot;)}(f,e),f)if(Ne(f,p)){var h=f[p];if(Ae(h))m(h,r);else if(&quot;function&quot;==typeof(i=h)||&quot;number&quot;==typeof i||&quot;string&quot;==typeof i||&quot;boolean&quot;==typeof i||null===i||s(i)||o(i)||a(i)||u(i)||l(i)||Array.isArray(i))c(p,h,r);else if(!r.silent)throw new TypeError(&quot;Factory, Object, or Array expected&quot;)}}}(Y,0,Z,W);return Z.import=J,Z.on(&quot;config&quot;,(function(){De(W).forEach((function(e){e&amp;&amp;e.meta&amp;&amp;e.meta.recreateOnConfigChange&amp;&amp;J(e,{override:!0})}))})),Z.create=e.bind(null,r),Z.factory=Ee,Z.import(De(xe(r))),Z.ArgumentsError=Pa,Z.DimensionError=Xr,Z.IndexError=Qr,Z}(e)})(),n.default})()));\n//# sourceMappingURL=math.js.map\n\n/* JavaScript CODE ENDS HERE */\n//}}}</div>
<div tiddler="mathjsEvaluator-Plugin.js" modifier="Okido" created="202307131717" modified="202308010904" tags="mathjsevaluator systemConfig mathjsinstall pushtiddler" changecount="1">/***\n|Name |mathjsEvaluator-Plugin.js |\n|Version |0.0.7 |\n|Version library | |\n|Description |Evaluate mathematical functions in [[TiddlyWikiClassic]] |\n|Source |mathjsEvaluator-Source |\n|Documentation | |\n|Author |Okido |\n|Original author | |\n|License |See below under license |\n|Core version | |\n|Plugin type |systemConfig |\n|Status |EXPERIMENTAL - SUBJECT TO CHANGE |\n|Build date - time |01-08-2023 - 11:04, build with [[pluginBuilder-Plugin.js]] |\n\n!!!Documentation\n&lt;&lt;&lt;\nThis plugin uses the [[mathjs-Plugin.js]] to evaluate mathematical expressions and return the result.\n&lt;&lt;&lt;\n!!!Usage\n&lt;&lt;&lt;\nA macro with following content returns a value. The true at the end returns the expression too, false just returns the value.\n{{{\n  &lt;&lt;mathjsevaluator &quot;sin(90 deg) * 5&quot; true&gt;&gt;\n}}}\n  &lt;&lt;mathjsevaluator &quot;sin(90 deg) * 5&quot; true&gt;&gt;\n{{{\n  &lt;&lt;mathjsevaluator &quot;sin(45 deg)^2 * 16&quot; false&gt;&gt;\n}}}\n  &lt;&lt;mathjsevaluator &quot;sin(45 deg)^2 * 16&quot; false&gt;&gt;\n  \nThe separator between expression and value is by default &quot; gives &quot;.\nIf you prefer to have &quot; = &quot; as a separator or anything else create a systemConfig tiddler with following code in it and the separator between &quot; &quot;:\n{{{\n  config.macros.mathjsevaluator.separator = &quot; = &quot;\n}}}\n&lt;&lt;&lt;\n!!!Configuration\n&lt;&lt;&lt;\nThis plugin depends on the [[mathjs-Plugin.js]].\n&lt;&lt;&lt;\n!!!Revisions\n&lt;&lt;&lt;\n\n&lt;&lt;&lt;\n!!!License\n&lt;&lt;&lt;\n!!License for the TiddlyWikiClassic plugin code\nMIT License\n\nCopyright (c) 2023 Okido\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the &quot;Software&quot;), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n&lt;&lt;&lt;\n!!!Code\n***/\n//{{{\n/* JavaScript CODE STARTS HERE */\n/* Minified with Terser.js - 01-08-2023 */\n&quot;object&quot;!=typeof config.macros.mathjsevaluator?config.macros.mathjsevaluator={}:config.macros.mathjsevaluator,config.macros.mathjsevaluator.separator=&quot; gives &quot;,config.macros.mathjsevaluator.handler=function(a,o,t,r,e,s){const c=()=&gt;&quot;true&quot;===t[1],m=a=&gt;math.evaluate(a),i=t[0];let n=c()?`${i}${config.macros.mathjsevaluator.separator}${m(i)}`:`${m(i)}`;wikify(n,a)};\n/* JavaScript CODE ENDS HERE */\n//}}}</div>
<div tiddler="z-chkUsePreForStorage-Plugin.js" modifier="Okido" created="202308021158" modified="202308021225" tags="chkusepreforstorage systemConfig mathjaxinstall mathjsinstall mathjsinstallplayground mathjaxinstallplayground pushtiddler" changecount="5" foldedrows="[]" acerow="62" acecolumn="0">/***\n|Name |z-chkUsePreForStorage-Plugin.js |\n|Version |0.0.1 |\n|Version library |0.0.1 |\n|Description |Make sure minified code is properly encoded when saving with [[NW.js]] |\n|Source |chkUsePreForStorage-Source |\n|Documentation | |\n|Author |Okido |\n|Original author | |\n|License |See below under license |\n|Core version | |\n|Plugin type |systemConfig |\n|Status |EXPERIMENTAL - SUBJECT TO CHANGE |\n|Build date - time |02-08-2023 - 14:07, build with [[pluginBuilder-Plugin.js]] |\n\n!!!Documentation\n&lt;&lt;&lt;\nThis plugin sets config.options.chkUsePreForStorage to false.\nIt prevents that minified code is malformed when saving in a [[NW.js]] environment.\nThis problem is known since 23-07-2020 but has no active follow up yet.\n&lt;&lt;&lt;\n!!!Usage\n&lt;&lt;&lt;\n\n&lt;&lt;&lt;\n!!!Configuration\n&lt;&lt;&lt;\n\n&lt;&lt;&lt;\n!!!Revisions\n&lt;&lt;&lt;\n\n&lt;&lt;&lt;\n!!!License\n&lt;&lt;&lt;\n!!License for the TiddlyWikiClassic plugin code\nMIT License\n\nCopyright (c) 2023 Okido\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the &quot;Software&quot;), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n&lt;&lt;&lt;\n!!!Code\n***/\n//{{{\n/* JavaScript CODE STARTS HERE */\nconfig.options.chkUsePreForStorage = false\n/* JavaScript CODE ENDS HERE */\n//}}}</div>
</div>
<!--POST-STOREAREA-->
<!--POST-BODY-START-->

<!--POST-BODY-END-->
<script id="jsArea" type="text/javascript">
//<![CDATA[

//
// Please note:
//
// * This code is designed to be readable but for compactness it only includes brief comments. You can see fuller comments
//   in the project repository at https://github.com/TiddlyWiki/tiddlywiki
//
// * You should never need to modify this source code directly. TiddlyWiki is carefully designed to allow deep customisation
//   without changing the core code. Please consult the development group at http://groups.google.com/group/TiddlyWikiDev
//
// JSLint directives
/*global jQuery:false, version:false */
/*jslint bitwise:true, browser:true, confusion:true, eqeq:true, evil:true, forin:true, maxerr:100, plusplus:true, regexp:true, sloppy:true, sub:true, undef:true, unparam:true, vars:true, white:true */

//--
//-- Global tw object (window.tw) exposing available methods and structures for developers
//--

window.tw = {
	io: {},
	textUtils: {}
};

//--
//-- Configuration repository
//--

// Miscellaneous options
var config = {
	numRssItems: 20, // Number of items in the RSS feed
	animDuration: 400, // Duration of UI animations in milliseconds
	cascadeFast: 20, // Speed for cascade animations (higher == slower)
	cascadeSlow: 60, // Speed for EasterEgg cascade animations
	cascadeDepth: 5, // Depth of cascade animation
	locale: "en" // W3C language tag
};

// Hashmap of alternative parsers for the wikifier
config.parsers = {};

config.adaptors = {};
config.defaultAdaptor = null;

// defines the order of the backstage tasks
config.backstageTasks = ["save", "importTask", "tweak", "upgrade", "plugins"];
// map by names from config.backstageTasks, defines their content (see Lingo.js and Backstage.js)
config.tasks = {};

config.annotations = {};

// Custom fields to be automatically added to new tiddlers
config.defaultCustomFields = {};

config.messages = {
	messageClose: {},
	dates: {},
	tiddlerPopup: {}
};

// Options that can be set in the options panel and/or cookies
config.options = {
	chkAnimate: true,
	chkAutoSave: false,
	chkCaseSensitiveSearch: false,
	chkConfirmDelete: true,
	chkDisplayInstrumentation: false,
	chkForceMinorUpdate: false,
	chkGenerateAnRssFeed: false,
	chkHttpReadOnly: true,
	chkIncrementalSearch: true,
	chkInsertTabs: false,
	chkOpenInNewWindow: true,
	chkPreventAsyncSaving: true,
	chkRegExpSearch: false,
	chkRemoveExtraMarkers: false, // #162
	chkSaveBackups: true,
	chkSaveEmptyTemplate: false,
	chkToggleLinks: false,
	chkUsePreForStorage: true, // Whether to use <pre> format for storage
	txtBackupFolder: "",
	txtEditorFocus: "text",
	txtFileSystemCharSet: "UTF-8",
	txtMainTab: "tabTimeline",
	txtMaxEditRows: "30",
	txtMoreTab: "moreTabAll",
	txtTheme: ""
};
config.optionsDesc = {};

config.optionsSource = {};

// Default tiddler templates
var DEFAULT_VIEW_TEMPLATE = 1;
var DEFAULT_EDIT_TEMPLATE = 2;
config.tiddlerTemplates = {
	1: "ViewTemplate",
	2: "EditTemplate"
};

// More messages (rather a legacy layout that should not really be like this)
config.views = {
	wikified: {
		tag: {}
	},
	editor: {
		tagChooser: {}
	}
};

config.extensions = {};

// Macros; each has a 'handler' member that is inserted later
config.macros = {
	today: {},
	version: {},
	search: { sizeTextbox: 15 },
	tiddler: {},
	tag: {},
	tags: {},
	tagging: {},
	timeline: {},
	allTags: {},
	list: {
		all: {},
		missing: {},
		orphans: {},
		shadowed: {},
		touched: {},
		filter: {}
	},
	closeAll: {},
	permaview: {},
	saveChanges: {},
	slider: {},
	option: {},
	options: {},
	newTiddler: {},
	newJournal: {},
	tabs: {},
	gradient: {},
	message: {},
	view: { defaultView: "text" },
	edit: {},
	tagChooser: {},
	toolbar: {},
	plugins: {},
	refreshDisplay: {},
	importTiddlers: {},
	upgrade: {
		source: "https://classic.tiddlywiki.com/upgrade/",
		backupExtension: "pre.core.upgrade"
	},
	sync: {},
	annotations: {}
};

// Commands supported by the toolbar macro
config.commands = {
	closeTiddler: {},
	closeOthers: {},
	editTiddler: {},
	saveTiddler: { hideReadOnly: true },
	cancelTiddler: {},
	deleteTiddler: { hideReadOnly: true },
	permalink: {},
	references: { type: "popup" },
	jump: { type: "popup" },
	syncing: { type: "popup" },
	fields: { type: "popup" }
};

// Control of macro parameter evaluation
config.evaluateMacroParameters = "all";

// Basic regular expressions
var isBadSafari = !((new RegExp("[\u0150\u0170]", "g")).test("\u0150")); //# see 52678d4 and #22  ..remove at all?
config.textPrimitives = {
	upperLetter: "[A-Z\u00c0-\u00de\u0150\u0170]",
	lowerLetter: "[a-z0-9_\\-\u00df-\u00ff\u0151\u0171]",
	anyLetter:   "[A-Za-z0-9_\\-\u00c0-\u00de\u00df-\u00ff\u0150\u0170\u0151\u0171]",
	anyLetterStrict: "[A-Za-z0-9\u00c0-\u00de\u00df-\u00ff\u0150\u0170\u0151\u0171]"
};
// Moved navigator dependent code out of Config.js into a separate module. Helps with https://github.com/TiddlyWiki/tiddlywiki/issues/22
if(isBadSafari) {
	config.textPrimitives = {
		upperLetter: "[A-Z\u00c0-\u00de]",
		lowerLetter: "[a-z0-9_\\-\u00df-\u00ff]",
		anyLetter:   "[A-Za-z0-9_\\-\u00c0-\u00de\u00df-\u00ff]",
		anyLetterStrict: "[A-Za-z0-9\u00c0-\u00de\u00df-\u00ff]"
	};
}
config.textPrimitives.sliceSeparator = "::";
config.textPrimitives.sectionSeparator = "##";
config.textPrimitives.urlPattern =
	"(?:file|http|https|mailto|ftp|irc|news|data):[^\\s'\"]+(?:/|\\b|\\[|\\])"; // #132
config.textPrimitives.unWikiLink = "~";
config.textPrimitives.wikiLink = "(?:(?:" + config.textPrimitives.upperLetter + "+" +
	config.textPrimitives.lowerLetter + "+" +
	config.textPrimitives.upperLetter +
	config.textPrimitives.anyLetter + "*)|(?:" +
	config.textPrimitives.upperLetter + "{2,}" +
	config.textPrimitives.lowerLetter + "+))";

config.textPrimitives.cssLookahead = "(?:(" + config.textPrimitives.anyLetter +
	"+)\\(([^\\)\\|\\n]+)(?:\\):))|(?:(" + config.textPrimitives.anyLetter + "+):([^;\\|\\n]+);)";
config.textPrimitives.cssLookaheadRegExp = new RegExp(config.textPrimitives.cssLookahead, "mg");

config.textPrimitives.brackettedLink = "\\[\\[([^\\]]+)\\]\\]";
config.textPrimitives.titledBrackettedLink = "\\[\\[([^\\[\\]\\|]+)\\|([^\\[\\]\\|]+)\\]\\]";
config.textPrimitives.tiddlerForcedLinkRegExp =
	new RegExp("(?:" + config.textPrimitives.titledBrackettedLink + ")|(?:" +
	config.textPrimitives.brackettedLink + ")|(?:" +
	config.textPrimitives.urlPattern + ")", "mg");
config.textPrimitives.tiddlerAnyLinkRegExp =
	new RegExp("(" + config.textPrimitives.wikiLink + ")|(?:" +
	config.textPrimitives.titledBrackettedLink + ")|(?:" +
	config.textPrimitives.brackettedLink + ")|(?:" +
	config.textPrimitives.urlPattern + ")", "mg");

config.glyphs = {
	currBrowser: null,
	browsers: [],
	codes: {}
};

//--
//-- Shadow tiddlers
//--

config.shadowTiddlers = {
	StyleSheet: "",
	MarkupPreHead: "",
	MarkupPostHead: "",
	MarkupPreBody: "",
	MarkupPostBody: "",
	TabTimeline: '<<timeline>>',
	TabAll: '<<list all>>',
	TabTags: '<<allTags excludeLists>>',
	TabMoreMissing: '<<list missing>>',
	TabMoreOrphans: '<<list orphans>>',
	TabMoreShadowed: '<<list shadowed>>',
	AdvancedOptions: '<<options>>',
	PluginManager: '<<plugins>>',
	SystemSettings: '',
	ToolbarCommands: '|~ViewToolbar|closeTiddler closeOthers +editTiddler > fields permalink references jump|\n' +
		'|~EditToolbar|+saveTiddler -cancelTiddler deleteTiddler|', // #160
	WindowTitle: '<<tiddler SiteTitle>> - <<tiddler SiteSubtitle>>'
};

// Browser detection... In a very few places, there's nothing else for it but to know what browser we're using.
config.userAgent = navigator.userAgent.toLowerCase();
config.browser = {
	isIE: config.userAgent.indexOf("msie") != -1 && config.userAgent.indexOf("opera") == -1,
	isGecko: navigator.product == "Gecko" && config.userAgent.indexOf("WebKit") == -1,
	// config.browser.ieVersion[1], if it exists, will be the IE version string, eg "6.0"
	ieVersion: /MSIE (\d{1,2}.\d)/i.exec(config.userAgent),
	isSafari: config.userAgent.indexOf("applewebkit") != -1,
	isBadSafari: !((new RegExp("[\u0150\u0170]", "g")).test("\u0150")),
	// config.browser.firefoxDate[1], if it exists, will be Firefox release date as "YYYYMMDD"
	firefoxDate: /gecko\/(\d{8})/i.exec(config.userAgent),
	isOpera: config.userAgent.indexOf("opera") != -1,
	isChrome: config.userAgent.indexOf('chrome') > -1,
	isLinux: config.userAgent.indexOf("linux") != -1,
	isUnix: config.userAgent.indexOf("x11") != -1,
	isMac: config.userAgent.indexOf("mac") != -1,
	isWindows: config.userAgent.indexOf("win") != -1
};

merge(config.glyphs, {
	browsers: [
		function() { return config.browser.isIE },
		function() { return true }
	],
	codes: {
		downTriangle: ["\u25BC", "\u25BE"],
		downArrow: ["\u2193", "\u2193"],
		bentArrowLeft: ["\u2190", "\u21A9"],
		bentArrowRight: ["\u2192", "\u21AA"]
	}
});

//--
//-- Translateable strings
//--

// Strings in "double quotes" should be translated; strings in 'single quotes' should be left alone

merge(config.options, {
	txtUserName: "YourName"
});

merge(config.tasks, {
	save: { text: "save", tooltip: "Save your changes to this TiddlyWiki" },
	importTask: { text: "import", tooltip: "Import tiddlers and plugins " +
		"from other TiddlyWiki files and servers", content: '<<importTiddlers>>' },
	tweak: { text: "tweak", tooltip: "Tweak the appearance and behaviour of TiddlyWiki", content: '<<options>>' },
	upgrade: { text: "upgrade", tooltip: "Upgrade TiddlyWiki core code", content: '<<upgrade>>' },
	plugins: { text: "plugins", tooltip: "Manage installed plugins", content: '<<plugins>>' }
});

// Options that can be set in the options panel and/or cookies
merge(config.optionsDesc, {
	chkAnimate: "Enable animations",
	chkAutoSave: "Automatically save changes",
	chkCaseSensitiveSearch: "Case-sensitive searching",
	chkConfirmDelete: "Require confirmation before deleting tiddlers",
	chkIncrementalSearch: "Incremental key-by-key searching",
	chkInsertTabs: "Use the tab key to insert tab characters instead of moving between fields",
	chkForceMinorUpdate: "Don't update modifier username and date when editing tiddlers",
	chkGenerateAnRssFeed: "Generate an RSS feed when saving changes",
	chkHttpReadOnly: "Hide editing features when viewed over HTTP",
	chkOpenInNewWindow: "Open external links in a new window",
	chkPreventAsyncSaving: "Disable attempting async saving (may be needed by old plugins)",
	chkRegExpSearch: "Enable regular expressions for searches",
	chkSaveBackups: "Keep backup file when saving changes",
	chkSaveEmptyTemplate: "Generate an empty template when saving changes",
	chkToggleLinks: "Clicking on links to open tiddlers causes them to close",
	txtBackupFolder: "Name of folder to use for backups",
	txtFileSystemCharSet: "Default character set for saving changes (Firefox/Mozilla only)",
	txtMaxEditRows: "Maximum number of rows in edit boxes",
	chkRemoveExtraMarkers: "Replace unused transclusion markers with blanks", // #162
	txtTheme: "Name of the theme to use",
	txtUpgradeCoreURI: "Custom URI to download TiddlyWiki core from (when upgrading)",
	txtUserName: "Username for signing your edits"
});

merge(config.messages, {
	customConfigError: "Problems were encountered loading plugins. See PluginManager for details",
	pluginError: "Error: %0",
	pluginDisabled: "Not executed because disabled via 'systemConfigDisable' tag",
	pluginForced: "Executed because forced via 'systemConfigForce' tag",
	pluginVersionError: "Not executed because this plugin needs a newer version of TiddlyWiki",
	nothingSelected: "Nothing is selected. You must select one or more items first",
	savedSnapshotError: "It appears that this TiddlyWiki has been incorrectly saved. Please see https://classic.tiddlywiki.com/#SaveUnpredictabilities for details",
	subtitleUnknown: "(unknown)",
	undefinedTiddlerToolTip: "The tiddler '%0' doesn't yet exist",
	shadowedTiddlerToolTip: "The tiddler '%0' doesn't yet exist, but has a pre-defined shadow value",
	tiddlerLinkTooltip: "%0 - %1, %2",
	externalLinkTooltip: "External link to %0",
	noTags: "There are no tagged tiddlers",
	notFileUrlError: "You need to save this TiddlyWiki to a file before you can save changes",
	cantSaveError: "It's not possible to save changes. Possible reasons include:\n- your browser doesn't support saving (Firefox, Internet Explorer, Safari and Opera all work if properly configured)\n- the pathname to your TiddlyWiki file contains illegal characters\n- the TiddlyWiki HTML file has been moved or renamed",
	invalidFileError: "The original file '%0' does not appear to be a valid TiddlyWiki",
	backupSaved: "Backup saved",
	backupFailed: "Failed to save backup file",
	rssSaved: "RSS feed saved",
	rssFailed: "Failed to save RSS feed file",
	emptySaved: "Empty template saved",
	emptyFailed: "Failed to save empty template file",
	mainSaved: "TiddlyWiki saved",
	mainDownload: "Downloading/saving main TiddlyWiki file",
	mainDownloadManual: "RIGHT CLICK HERE to download/save main TiddlyWiki file",
	mainFailed: "Failed to save main TiddlyWiki file. Your changes have not been saved",
	macroError: "Error in macro <<%0>>",
	macroErrorDetails: "Error while executing macro <<%0>>:\n%1",
	missingMacro: "No such macro",
	overwriteWarning: "A tiddler named '%0' already exists. Choose OK to overwrite it",
	unsavedChangesWarning: "WARNING! There are unsaved changes in TiddlyWiki\n\nChoose OK to save\nChoose CANCEL to discard",
	confirmExit: "--------------------------------\n\nThere are unsaved changes in TiddlyWiki. If you continue you will lose those changes\n\n--------------------------------",
	saveInstructions: "SaveChanges",
	unsupportedTWFormat: "Unsupported TiddlyWiki format '%0'",
	tiddlerSaveError: "Error when saving tiddler '%0'",
	tiddlerLoadError: "Error when loading tiddler '%0'",
	wrongSaveFormat: "Cannot save with storage format '%0'. Using standard format for save.",
	invalidFieldName: "Invalid field name %0",
	fieldCannotBeChanged: "Field '%0' cannot be changed",
	loadingMissingTiddler: "Attempting to retrieve the tiddler '%0' from the '%1' server at:\n\n'%2' in the workspace '%3'",
	upgradeDone: "The upgrade to version %0 is now complete\n\nClick 'OK' to reload the newly upgraded TiddlyWiki",
	invalidCookie: "Invalid cookie '%0'"
});

merge(config.messages.messageClose, {
	text: "close",
	tooltip: "close this message area"
});

config.messages.backstage = {
	open: { text: "backstage", tooltip: "Open the backstage area to perform authoring and editing tasks" },
	close: { text: "close", tooltip: "Close the backstage area" },
	prompt: "backstage: ",
	decal: {
		edit: { text: "edit", tooltip: "Edit the tiddler '%0'" }
	}
};

config.messages.listView = {
	tiddlerTooltip: "Click for the full text of this tiddler",
	previewUnavailable: "(preview not available)"
};

config.messages.dates.months = ["January", "February", "March", "April", "May", "June",
	"July", "August", "September", "October", "November", "December"];
config.messages.dates.days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
config.messages.dates.shortMonths = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
config.messages.dates.shortDays = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
// suffixes for dates, eg "1st","2nd","3rd"..."30th","31st"
config.messages.dates.daySuffixes = [
	"st", "nd", "rd", "th", "th", "th", "th", "th", "th", "th",
	"th", "th", "th", "th", "th", "th", "th", "th", "th", "th",
	"st", "nd", "rd", "th", "th", "th", "th", "th", "th", "th",
	"st"
];
config.messages.dates.am = "am";
config.messages.dates.pm = "pm";

merge(config.messages.tiddlerPopup, {});

merge(config.views.wikified.tag, {
	labelNoTags: "no tags",
	labelTags: "tags: ",
	openTag: "Open tag '%0'",
	tooltip: "Show tiddlers tagged with '%0'",
	openAllText: "Open all",
	openAllTooltip: "Open all of these tiddlers",
	popupNone: "No other tiddlers tagged with '%0'"
});

merge(config.views.wikified, {
	defaultText: "The tiddler '%0' doesn't yet exist. Double-click to create it",
	defaultModifier: "(missing)",
	shadowModifier: "(built-in shadow tiddler)",
	dateFormat: "DD MMM YYYY",
	createdPrompt: "created"
});

merge(config.views.editor, {
	tagPrompt: "Type tags separated with spaces, [[use double square brackets]] if necessary, or add existing",
	defaultText: "Type the text for '%0'"
});

merge(config.views.editor.tagChooser, {
	text: "tags",
	tooltip: "Choose existing tags to add to this tiddler",
	popupNone: "There are no tags defined",
	tagTooltip: "Add the tag '%0'"
});

merge(config.messages, {
	sizeTemplates: [
		{ unit: 1024 * 1024 * 1024, template: "%0\u00a0GB" },
		{ unit: 1024 * 1024, template: "%0\u00a0MB" },
		{ unit: 1024, template: "%0\u00a0KB" },
		{ unit: 1, template: "%0\u00a0B" }
	]
});

merge(config.macros.search, {
	label: "search",
	prompt: "Search this TiddlyWiki",
	placeholder: "",
	accessKey: "F",
	successMsg: "%0 tiddlers found matching %1",
	failureMsg: "No tiddlers found matching %0"
});

merge(config.macros.tagging, {
	label: "tagging: ",
	labelNotTag: "not tagging",
	tooltip: "List of tiddlers tagged with '%0'"
});

merge(config.macros.timeline, {
	dateFormat: "DD MMM YYYY"
});

merge(config.macros.allTags, {
	tooltip: "Show tiddlers tagged with '%0'",
	noTags: "There are no tagged tiddlers"
});

config.macros.list.all.prompt = "All tiddlers in alphabetical order";
config.macros.list.missing.prompt = "Tiddlers that have links to them but are not defined";
config.macros.list.orphans.prompt = "Tiddlers that are not linked to from any other tiddlers";
config.macros.list.shadowed.prompt = "Tiddlers shadowed with default contents";
config.macros.list.touched.prompt = "Tiddlers that have been modified locally";

merge(config.macros.closeAll, {
	label: "close all",
	prompt: "Close all displayed tiddlers (except any that are being edited)"
});

merge(config.macros.permaview, {
	label: "permaview",
	prompt: "Link to an URL that retrieves all the currently displayed tiddlers"
});

merge(config.macros.saveChanges, {
	label: "save changes",
	prompt: "Save all tiddlers to create a new TiddlyWiki",
	accessKey: "S"
});

merge(config.macros.newTiddler, {
	label: "new tiddler",
	prompt: "Create a new tiddler",
	title: "New Tiddler",
	accessKey: "N"
});

merge(config.macros.newJournal, {
	label: "new journal",
	prompt: "Create a new tiddler from the current date and time",
	accessKey: "J"
});

merge(config.macros.options, {
	wizardTitle: "Tweak advanced options",
	step1Title: "These options are saved in cookies in your browser",
	step1Html: "<input type='hidden' name='markList'></input><br>" +
		"<label><input type='checkbox' checked='false' name='chkUnknown'>Show unknown options</label>",
	unknownDescription: "//(unknown)//",
	listViewTemplate: {
		columns: [
			{ name: 'Option', field: 'option', title: "Option", type: 'String' },
			{ name: 'Description', field: 'description', title: "Description", type: 'WikiText' },
			{ name: 'Name', field: 'name', title: "Name", type: 'String' }
		],
		rowClasses: [
			{ className: 'lowlight', field: 'lowlight' }
		]
	}
});

merge(config.macros.plugins, {
	wizardTitle: "Manage plugins",
	step1Title: "Currently loaded plugins",
	step1Html: "<input type='hidden' name='markList'></input>", // DO NOT TRANSLATE
	skippedText: "(This plugin has not been executed because it was added since startup)",
	noPluginText: "There are no plugins installed",
	confirmDeleteText: "Are you sure you want to delete these plugins:\n\n%0",
	removeLabel: "remove systemConfig tag",
	removePrompt: "Remove systemConfig tag",
	deleteLabel: "delete",
	deletePrompt: "Delete these tiddlers forever",
	listViewTemplate: {
		columns: [
			{ name: 'Selected', field: 'Selected', rowName: 'title', type: 'Selector' },
			{ name: 'Tiddler', field: 'tiddler', title: "Tiddler", type: 'Tiddler' },
			{ name: 'Description', field: 'Description', title: "Description", type: 'String' },
			{ name: 'Version', field: 'Version', title: "Version", type: 'String' },
			{ name: 'Size', field: 'size', tiddlerLink: 'size', title: "Size", type: 'Size' },
			{ name: 'Forced', field: 'forced', title: "Forced", tag: 'systemConfigForce', type: 'TagCheckbox' },
			{ name: 'Disabled', field: 'disabled', title: "Disabled", tag: 'systemConfigDisable', type: 'TagCheckbox' },
			{ name: 'Executed', field: 'executed', title: "Loaded", type: 'Boolean', trueText: "Yes", falseText: "No" },
			{ name: 'Startup Time', field: 'startupTime', title: "Startup Time", type: 'String' },
			{ name: 'Error', field: 'error', title: "Status", type: 'Boolean', trueText: "Error", falseText: "OK" },
			{ name: 'Log', field: 'log', title: "Log", type: 'StringList' }
		],
		rowClasses: [
			{ className: 'error', field: 'error' },
			{ className: 'warning', field: 'warning' }
		]
	},
	listViewTemplateReadOnly: {
		columns: [
			{ name: 'Tiddler', field: 'tiddler', title: "Tiddler", type: 'Tiddler' },
			{ name: 'Description', field: 'Description', title: "Description", type: 'String' },
			{ name: 'Version', field: 'Version', title: "Version", type: 'String' },
			{ name: 'Size', field: 'size', tiddlerLink: 'size', title: "Size", type: 'Size' },
			{ name: 'Executed', field: 'executed', title: "Loaded", type: 'Boolean', trueText: "Yes", falseText: "No" },
			{ name: 'Startup Time', field: 'startupTime', title: "Startup Time", type: 'String' },
			{ name: 'Error', field: 'error', title: "Status", type: 'Boolean', trueText: "Error", falseText: "OK" },
			{ name: 'Log', field: 'log', title: "Log", type: 'StringList' }
		],
		rowClasses: [
			{ className: 'error', field: 'error' },
			{ className: 'warning', field: 'warning' }
		]
	}
});

merge(config.macros.toolbar, {
	moreLabel: "more",
	morePrompt: "Show additional commands",
	lessLabel: "less",
	lessPrompt: "Hide additional commands",
	separator: "|"
});

merge(config.macros.refreshDisplay, {
	label: "refresh",
	prompt: "Redraw the entire TiddlyWiki display"
});

merge(config.macros.importTiddlers, {
	readOnlyWarning: "You cannot import into a read-only TiddlyWiki file. Try opening it from a file:// URL",
	wizardTitle: "Import tiddlers from another file or server",
	step1Title: "Step 1: Locate the server or TiddlyWiki file",
	step1Html: "Specify the type of the server: <select name='selTypes'><option value=''>Choose...</option></select><br>" +
		"Enter the URL or pathname here: <input type='text' size=50 name='txtPath'><br>" +
		"...or browse for a file: <input type='file' size=50 name='txtBrowse'><br><hr>" +
		"...or select a pre-defined feed: <select name='selFeeds'><option value=''>Choose...</option></select>",
	openLabel: "open",
	openPrompt: "Open the connection to this file or server",
	statusOpenHost: "Opening the host",
	statusGetWorkspaceList: "Getting the list of available workspaces",
	step2Title: "Step 2: Choose the workspace",
	step2Html: "Enter a workspace name: <input type='text' size=50 name='txtWorkspace'><br>...or select a workspace: " +
		"<select name='selWorkspace'><option value=''>Choose...</option></select>",
	cancelLabel: "cancel",
	cancelPrompt: "Cancel this import",
	statusOpenWorkspace: "Opening the workspace",
	statusGetTiddlerList: "Getting the list of available tiddlers",
	errorGettingTiddlerList: "Error getting list of tiddlers, click Cancel to try again",
	errorGettingTiddlerListHttp404: "Error retrieving tiddlers from url, please ensure the url exists. Click Cancel to try again.",
	errorGettingTiddlerListHttp: "Error retrieving tiddlers from url, please " +
		"ensure this url exists and is <a href='http://enable-cors.org/'>CORS</a> enabled",
	errorGettingTiddlerListFile: "Error retrieving tiddlers from local file, " +
		"please make sure the file is in the same directory as your TiddlyWiki. Click Cancel to try again.",
	step3Title: "Step 3: Choose the tiddlers to import",
	step3Html: "<input type='hidden' name='markList'></input><br><input type='checkbox' checked='true' name='chkSync'>" +
		"Keep these tiddlers linked to this server so that you can synchronise subsequent changes</input><br>" +
		"<input type='checkbox' name='chkSave'>Save the details of this server in a 'systemServer' tiddler called:</input> <input type='text' size=25 name='txtSaveTiddler'>",
	importLabel: "import",
	importPrompt: "Import these tiddlers",
	confirmOverwriteText: "Are you sure you want to overwrite these tiddlers:\n\n%0",
	step4Title: "Step 4: Importing %0 tiddler(s)",
	step4Html: "<input type='hidden' name='markReport'></input>", // DO NOT TRANSLATE
	doneLabel: "done",
	donePrompt: "Close this wizard",
	statusDoingImport: "Importing tiddlers",
	statusDoneImport: "All tiddlers imported",
	systemServerNamePattern: "%2 on %1",
	systemServerNamePatternNoWorkspace: "%1",
	confirmOverwriteSaveTiddler: "The tiddler '%0' already exists. Click 'OK' " +
		"to overwrite it with the details of this server, or 'Cancel' to leave it unchanged",
	serverSaveTemplate: "|''Type:''|%0|\n|''URL:''|%1|\n|''Workspace:''|%2|\n\n" +
		"This tiddler was automatically created to record the details of this server",
	serverSaveModifier: "(System)",
	listViewTemplate: {
		columns: [
			{ name: 'Selected', field: 'Selected', rowName: 'title', type: 'Selector' },
			{ name: 'Tiddler', field: 'tiddler', title: "Tiddler", type: 'Tiddler' },
			{ name: 'Size', field: 'size', tiddlerLink: 'size', title: "Size", type: 'Size' },
			{ name: 'Tags', field: 'tags', title: "Tags", type: 'Tags' }
		],
		rowClasses: []
	}
});

merge(config.macros.upgrade, {
	wizardTitle: "Upgrade TiddlyWiki core code",
	step1Title: "Update or repair this TiddlyWiki to the latest release",
	step1Html: "You are about to upgrade to the latest release of the TiddlyWiki core code " +
		"(from <a href='%0' class='externalLink' target='_blank'>%1</a>). Your content will be preserved across the upgrade.<br><br>" +
		"Note that core upgrades have been known to interfere with older plugins. If you run into problems with upgrading, " +
		"see <a href='http://www.tiddlywiki.org/wiki/CoreUpgrades' class='externalLink' target='_blank'>http://www.tiddlywiki.org/wiki/CoreUpgrades</a>",
	errorCantUpgrade: "Unable to upgrade this TiddlyWiki. You can only perform upgrades on TiddlyWiki files stored locally",
	errorNotSaved: "You must save changes before you can perform an upgrade",
	step2Title: "Confirm the upgrade details",
	step2Html_downgrade: "You are about to downgrade to TiddlyWiki version %0 from %1.<br><br>Downgrading to an earlier version of the core code is not recommended",
	step2Html_restore: "This TiddlyWiki appears to be already using the latest version of the core code (%0).<br><br>" +
		"You can continue to upgrade anyway to ensure that the core code hasn't been corrupted or damaged",
	step2Html_upgrade: "You are about to upgrade to TiddlyWiki version %0 from %1",
	upgradeLabel: "upgrade",
	upgradePrompt: "Prepare for the upgrade process",
	statusPreparingBackup: "Preparing backup",
	statusSavingBackup: "Saving backup file",
	errorSavingBackup: "There was a problem saving the backup file",
	statusLoadingCore: "Loading core code",
	errorLoadingCore: "Error loading the core code",
	errorCoreFormat: "Error with the new core code",
	statusSavingCore: "Saving the new core code",
	statusReloadingCore: "Reloading the new core code",
	startLabel: "start",
	startPrompt: "Start the upgrade process",
	cancelLabel: "cancel",
	cancelPrompt: "Cancel the upgrade process",
	step3Title: "Upgrade cancelled",
	step3Html: "You have cancelled the upgrade process"
});

merge(config.macros.annotations, {});

merge(config.commands.closeTiddler, {
	text: "close",
	tooltip: "Close this tiddler"
});

merge(config.commands.closeOthers, {
	text: "close others",
	tooltip: "Close all other tiddlers"
});

merge(config.commands.editTiddler, {
	text: "edit",
	tooltip: "Edit this tiddler",
	readOnlyText: "view",
	readOnlyTooltip: "View the source of this tiddler"
});

merge(config.commands.saveTiddler, {
	text: "done",
	tooltip: "Save changes to this tiddler"
});

merge(config.commands.cancelTiddler, {
	text: "cancel",
	tooltip: "Undo changes to this tiddler",
	warning: "Are you sure you want to abandon your changes to '%0'?",
	readOnlyText: "done",
	readOnlyTooltip: "View this tiddler normally"
});

merge(config.commands.deleteTiddler, {
	text: "delete",
	tooltip: "Delete this tiddler",
	warning: "Are you sure you want to delete '%0'?"
});

merge(config.commands.permalink, {
	text: "permalink",
	tooltip: "Permalink for this tiddler"
});

merge(config.commands.references, {
	text: "references",
	tooltip: "Show tiddlers that link to this one",
	popupNone: "No references"
});

merge(config.commands.jump, {
	text: "jump",
	tooltip: "Jump to another open tiddler"
});

merge(config.commands.fields, {
	text: "fields",
	tooltip: "Show the extended fields of this tiddler",
	emptyText: "There are no extended fields for this tiddler",
	listViewTemplate: {
		columns: [
			{ name: 'Field', field: 'field', title: "Field", type: 'String' },
			{ name: 'Value', field: 'value', title: "Value", type: 'String' }
		],
		rowClasses: [],
		buttons: []
	}
});

merge(config.shadowTiddlers, {
	DefaultTiddlers: "[[GettingStarted]]",
	MainMenu: "[[GettingStarted]]",
	SiteTitle: "My TiddlyWiki",
	SiteSubtitle: "a reusable non-linear personal web notebook",
	SiteUrl: "",
	SideBarOptions: '<<search>><<closeAll>><<permaview>><<newTiddler>><<newJournal "DD MMM YYYY" "journal">>' +
		'<<saveChanges>><<slider chkSliderOptionsPanel OptionsPanel "options \u00bb" "Change TiddlyWiki advanced options">>',
	SideBarTabs: '<<tabs txtMainTab "Timeline" "Timeline" TabTimeline "All" "All tiddlers" TabAll "Tags" "All tags" TabTags "More" "More lists" TabMore>>',
	TabMore: '<<tabs txtMoreTab "Missing" "Missing tiddlers" TabMoreMissing "Orphans" "Orphaned tiddlers" TabMoreOrphans "Shadowed" "Shadowed tiddlers" TabMoreShadowed>>'
});

merge(config.annotations, {
	AdvancedOptions: "This shadow tiddler provides access to several advanced options",
	ColorPalette: "These values in this shadow tiddler determine the colour scheme of the ~TiddlyWiki user interface",
	DefaultTiddlers: "The tiddlers listed in this shadow tiddler will be automatically displayed when ~TiddlyWiki starts up",
	EditTemplate: "The HTML template in this shadow tiddler determines how tiddlers look while they are being edited",
	GettingStarted: "This shadow tiddler provides basic usage instructions",
	ImportTiddlers: "This shadow tiddler provides access to importing tiddlers",
	MainMenu: "This shadow tiddler is used as the contents of the main menu in the left-hand column of the screen",
	MarkupPreHead: "This tiddler is inserted at the top of the <head> section of the TiddlyWiki HTML file",
	MarkupPostHead: "This tiddler is inserted at the bottom of the <head> section of the TiddlyWiki HTML file",
	MarkupPreBody: "This tiddler is inserted at the top of the <body> section of the TiddlyWiki HTML file",
	MarkupPostBody: "This tiddler is inserted at the end of the <body> section of the TiddlyWiki HTML file immediately after the script block",
	OptionsPanel: "This shadow tiddler is used as the contents of the options panel slider in the right-hand sidebar",
	PageTemplate: "The HTML template in this shadow tiddler determines the overall ~TiddlyWiki layout",
	PluginManager: "This shadow tiddler provides access to the plugin manager",
	SideBarOptions: "This shadow tiddler is used as the contents of the option panel in the right-hand sidebar",
	SideBarTabs: "This shadow tiddler is used as the contents of the tabs panel in the right-hand sidebar",
	SiteSubtitle: "This shadow tiddler is used as the second part of the page title",
	SiteTitle: "This shadow tiddler is used as the first part of the page title",
	SiteUrl: "This shadow tiddler should be set to the full target URL for publication",
	StyleSheetColors: "This shadow tiddler contains CSS definitions related to the color of page elements. " +
		"''DO NOT EDIT THIS TIDDLER'', instead make your changes in the StyleSheet shadow tiddler",
	StyleSheet: "This tiddler can contain custom CSS definitions",
	StyleSheetLayout: "This shadow tiddler contains CSS definitions related to the layout of page elements. " +
	"''DO NOT EDIT THIS TIDDLER'', instead make your changes in the StyleSheet shadow tiddler",
	StyleSheetLocale: "This shadow tiddler contains CSS definitions related to the translation locale",
	StyleSheetPrint: "This shadow tiddler contains CSS definitions for printing",
	SystemSettings: "Options may be stored here using the slice notation (like {{{chkAutoSave: true}}} or {{{|txtUserName|The great inventor|}}})",
	TabAll: "This shadow tiddler contains the contents of the 'All' tab in the right-hand sidebar",
	TabMore: "This shadow tiddler contains the contents of the 'More' tab in the right-hand sidebar",
	TabMoreMissing: "This shadow tiddler contains the contents of the 'Missing' tab in the right-hand sidebar",
	TabMoreOrphans: "This shadow tiddler contains the contents of the 'Orphans' tab in the right-hand sidebar",
	TabMoreShadowed: "This shadow tiddler contains the contents of the 'Shadowed' tab in the right-hand sidebar",
	TabTags: "This shadow tiddler contains the contents of the 'Tags' tab in the right-hand sidebar",
	TabTimeline: "This shadow tiddler contains the contents of the 'Timeline' tab in the right-hand sidebar",
	ToolbarCommands: "This shadow tiddler determines which commands are shown in tiddler toolbars",
	ViewTemplate: "The HTML template in this shadow tiddler determines how tiddlers look"
});
//--
//-- Main
//--

var params = null; // Command line parameters
var store = null; // TiddlyWiki storage
var story = null; // Main story
var formatter = null; // Default formatters for the wikifier
var anim = typeof Animator == "function" ? new Animator() : null; // Animation engine
var readOnly = false; // Whether we're in readonly mode
var highlightHack = null; // Embarrassing hack department...
var hadConfirmExit = false; // Don't warn more than once
var safeMode = false; // Disable all plugins and cookies
var showBackstage; // Whether to include the backstage area
var installedPlugins = []; // Information filled in when plugins are executed
var startingUp = false; // Whether we're in the process of starting up
var pluginInfo, tiddler; // Used to pass information to plugins in loadPlugins()

// Whether this file can be saved back to the same location [Preemption]
window.allowSave = window.allowSave || function(l)
{
	return true;
};

// Whether this file is being viewed locally
window.isLocal = function()
{
	return (document.location.protocol == "file:");
};

// Whether to use the JavaSaver applet
var useJavaSaver = window.isLocal() && (config.browser.isSafari || config.browser.isOpera);

// Allow preemption code a chance to tweak config and useJavaSaver [Preemption]
if (window.tweakConfig) window.tweakConfig();

if(!window || !window.console) {
	console = { tiddlywiki: true, log: function(message) { displayMessage(message) } };
}

// Starting up
function main()
{
	window.originalHTML = recreateOriginal();

	var t10, t9, t8, t7, t6, t5, t4, t3, t2, t1, t0 = new Date();
	startingUp = true;
	var doc = jQuery(document);
	jQuery.noConflict();
	window.onbeforeunload = function(e) { if(window.confirmExit) return confirmExit(); };
	params = getParameters();
	if(params) params = params.parseParams("open", null, false);
	store = new TiddlyWiki({ config: config });
	invokeParamifier(params, "oninit");
	story = new Story("tiddlerDisplay", "tiddler");
	addEvent(document, "click", Popup.onDocumentClick);
	saveTest();
	for(var i = 0; i < config.notifyTiddlers.length; i++)
		store.addNotification(config.notifyTiddlers[i].name, config.notifyTiddlers[i].notify);
	t1 = new Date();
	loadShadowTiddlers();
	doc.trigger("loadShadows");
	t2 = new Date();
	store.loadFromDiv("storeArea", "store", true);
	doc.trigger("loadTiddlers");
	loadOptions();
	t3 = new Date();
	invokeParamifier(params, "onload");
	t4 = new Date();
	readOnly = window.isLocal() ? false : config.options.chkHttpReadOnly;
	var pluginProblem = loadPlugins("systemConfig");
	doc.trigger("loadPlugins");
	t5 = new Date();
	formatter = new Formatter(config.formatters);
	invokeParamifier(params, "onconfig");
	story.switchTheme(config.options.txtTheme);
	showBackstage = showBackstage !== undefined ? showBackstage : !readOnly;
	t6 = new Date();
	for(var name in config.macros) {
		if(config.macros[name].init)
			config.macros[name].init();
	}
	t7 = new Date();
	store.notifyAll();
	t8 = new Date();
	restart();
	refreshDisplay();
	t9 = new Date();
	if(pluginProblem) {
		story.displayTiddler(null, "PluginManager");
		displayMessage(config.messages.customConfigError);
	}
	if(showBackstage)
		backstage.init();
	t10 = new Date();
	if(config.options.chkDisplayInstrumentation) {
		displayMessage("LoadShadows " + (t2 - t1) + " ms");
		displayMessage("LoadFromDiv " + (t3 - t2) + " ms");
		displayMessage("LoadPlugins " + (t5 - t4) + " ms");
		displayMessage("Macro init " + (t7 - t6) + " ms");
		displayMessage("Notify " + (t8 - t7) + " ms");
		displayMessage("Restart " + (t9 - t8) + " ms");
		displayMessage("Total: " + (t10 - t0) + " ms");
	}
	startingUp = false;
	doc.trigger("startup");
}

// Called on unload. Functions may get unloaded too, so they are called conditionally.
function unload()
{
	if(window.checkUnsavedChanges) checkUnsavedChanges();
	if(window.scrubNodes) scrubNodes(document.body);
}

// Restarting
function restart()
{
	invokeParamifier(params, "onstart");
	if(story.isEmpty()) {
		story.displayDefaultTiddlers();
	}
	window.scrollTo(0, 0);
}

function saveTest()
{
	var s = document.getElementById("saveTest");
	if(s.hasChildNodes())
		alert(config.messages.savedSnapshotError);
	s.appendChild(document.createTextNode("savetest"));
}

function loadShadowTiddlers()
{
	var shadows = new TiddlyWiki();
	shadows.loadFromDiv("shadowArea", "shadows", true);
	shadows.forEachTiddler(function(title, tiddler) { config.shadowTiddlers[title] = tiddler.text });
}

function loadPlugins(tag)
{
	if(safeMode)
		return false;
	var tiddlers = store.getTaggedTiddlers(tag);
	tiddlers.sort(function(a, b) { return a.title < b.title ? -1 : (a.title == b.title ? 0 : 1) });
	var toLoad = [];
	var nLoaded = 0;
	var map = {};
	var nPlugins = tiddlers.length;
	installedPlugins = [];
	for(var i = 0; i < nPlugins; i++) {
		var p = getPluginInfo(tiddlers[i]);
		installedPlugins[i] = p;
		var n = p.Name || p.title;
		if(n) map[n] = p;
		n = p.Source;
		if(n) map[n] = p;
	}
	var visit = function(p) {
		if(!p || p.done) return;
		p.done = 1;
		var reqs = p.Requires;
		if(reqs) {
			reqs = reqs.readBracketedList();
			for(var i = 0; i < reqs.length; i++)
				visit(map[reqs[i]]);
		}
		toLoad.push(p);
	};
	for(i = 0; i < nPlugins; i++)
		visit(installedPlugins[i]);
	for(i = 0; i < toLoad.length; i++) {
		p = toLoad[i];
		pluginInfo = p;
		tiddler = p.tiddler;
		if(isPluginExecutable(p)) {
			if(isPluginEnabled(p)) {
				p.executed = true;
				var startTime = new Date();
				try {
					if(tiddler.text)
						window.eval(tiddler.text);
					nLoaded++;
				} catch(ex) {
					p.log.push(config.messages.pluginError.format([exceptionText(ex)]));
					p.error = true;
					if(!console.tiddlywiki) {
						console.log("error evaluating " + tiddler.title, ex);
					}
				}
				pluginInfo.startupTime = String((new Date()) - startTime) + "ms";
			} else {
				nPlugins--;
			}
		} else {
			p.warning = true;
		}
	}
	return nLoaded != nPlugins;
}

function getPluginInfo(tiddler)
{
	var p = store.getTiddlerSlices(tiddler.title, ["Name", "Description", "Version",
		"Requires", "CoreVersion", "Date", "Source", "Author", "License", "Browsers"]);
	p.tiddler = tiddler;
	p.title = tiddler.title;
	p.log = [];
	return p;
}

// Check that a particular plugin is valid for execution
function isPluginExecutable(plugin)
{
	if(plugin.tiddler.isTagged("systemConfigForce")) {
		plugin.log.push(config.messages.pluginForced);
		return true;
	}
	if(plugin["CoreVersion"]) {
		var coreVersion = plugin["CoreVersion"].split(".");
		var w = parseInt(coreVersion[0], 10) - version.major;
		if(w == 0 && coreVersion[1])
			w = parseInt(coreVersion[1], 10) - version.minor;
		if(w == 0 && coreVersion[2])
			w = parseInt(coreVersion[2], 10) - version.revision;
		if(w > 0) {
			plugin.log.push(config.messages.pluginVersionError);
			return false;
		}
	}
	return true;
}

function isPluginEnabled(plugin)
{
	if(plugin.tiddler.isTagged("systemConfigDisable")) {
		plugin.log.push(config.messages.pluginDisabled);
		return false;
	}
	return true;
}

//--
//-- Paramifiers
//--

function getParameters()
{
	return window.location.hash ? decodeURIComponent(window.location.hash.substr(1)) : null;
}

function invokeParamifier(params, handler)
{
	if(!params || params.length == undefined || params.length <= 1)
		return;

	for(var i = 1; i < params.length; i++) {
		var name = params[i].name,
		    value = params[i].value;
		var p = config.paramifiers[name];
		if(p && p[handler] instanceof Function)
			p[handler](value);
		else {
			var h = config.optionHandlers[name.substr(0, 3)];
			if(h && h.set instanceof Function)
				h.set(name, value);
		}
	}
}

config.paramifiers = {};

config.paramifiers.start = {
	oninit: function(v) {
		safeMode = v.toLowerCase() == "safe";
	}
};

config.paramifiers.open = {
	onstart: function(title) {
		if(!readOnly || store.tiddlerExists(title) || store.isShadowTiddler(title))
			story.displayTiddler("bottom", title, null, false, null);
	}
};

config.paramifiers.story = {
	onstart: function(title) {
		var list = store.getTiddlerText(title, "").parseParams("open", null, false);
		invokeParamifier(list, "onstart");
	}
};

config.paramifiers.search = {
	onstart: function(query) {
		story.search(query, false, false);
	}
};

config.paramifiers.searchRegExp = {
	onstart: function(v) {
		story.prototype.search(v, false, true);
	}
};

config.paramifiers.tag = {
	onstart: function(tag) {
		story.displayTiddlers(null, store.filterTiddlers("[tag[" + tag + "]]"), null, false, null);
	}
};

config.paramifiers.newTiddler = {
	onstart: function(v) {
		if(readOnly) return;
		var args = v.parseParams("anon", null, null)[0];
		var title = args.title ? args.title[0] : v;
		var customFields = args.fields ? args.fields[0] : null;

		story.displayTiddler(null, title, DEFAULT_EDIT_TEMPLATE, false, null, customFields);
		story.focusTiddler(title, "text");
		var i, tags = args.tag || [];
		for(i = 0; i < tags.length; i++) {
			story.setTiddlerTag(title, tags[i], +1);
		}
	}
};

config.paramifiers.newJournal = {
	onstart: function(titleTemplate) {
		if(readOnly) return;
		var now = new Date();
		var title = now.formatString(titleTemplate.trim());
		story.displayTiddler(null, title, DEFAULT_EDIT_TEMPLATE);
		story.focusTiddler(title, "text");
	}
};

config.paramifiers.readOnly = {
	onconfig: function(v) {
		var p = v.toLowerCase();
		readOnly = p == "yes" ? true : (p == "no" ? false : readOnly);
	}
};

config.paramifiers.theme = {
	onconfig: function(themeTitle) {
		story.switchTheme(themeTitle);
	}
};

config.paramifiers.upgrade = {
	onstart: function(v) {
		upgradeFrom(v);
	}
};

config.paramifiers.recent = {
	onstart: function(limit) {
		var titles = [];
		var i, tiddlers = store.getTiddlers("modified", "excludeLists").reverse();
		for(i = 0; i < limit && i < tiddlers.length; i++)
			titles.push(tiddlers[i].title);
		story.displayTiddlers(null, titles);
	}
};

config.paramifiers.filter = {
	onstart: function(filterExpression) {
		story.displayTiddlers(null, store.filterTiddlers(filterExpression), null, false);
	}
};

//--
//-- Formatter helpers
//--

function Formatter(formatters)
{
	this.formatters = [];
	var pattern = [];
	for(var n = 0; n < formatters.length; n++) {
		pattern.push("(" + formatters[n].match + ")");
		this.formatters.push(formatters[n]);
	}
	this.formatterRegExp = new RegExp(pattern.join("|"), "mg");
}

config.formatterHelpers = {

	createElementAndWikify: function(w)
	{
		w.subWikifyTerm(createTiddlyElement(w.output, this.element), this.termRegExp);
	},

	inlineCssHelper: function(w)
	{
		// Convert CSS property name to a JavaScript style name ("background-color" -> "backgroundColor")
		var unDash = function(name) {
			return name
				.split("-")
				.map(function(word, i) {
					return i == 0 ? word :
						word.charAt(0).toUpperCase() + word.slice(1);
				})
				.join("");
		};
		var styles = [];
		config.textPrimitives.cssLookaheadRegExp.lastIndex = w.nextMatch;
		var lookaheadMatch = config.textPrimitives.cssLookaheadRegExp.exec(w.source);
		while(lookaheadMatch && lookaheadMatch.index == w.nextMatch) {
			var s, v;
			if(lookaheadMatch[1]) {
				s = unDash(lookaheadMatch[1]);
				v = lookaheadMatch[2];
			} else {
				s = unDash(lookaheadMatch[3]);
				v = lookaheadMatch[4];
			}
			if(s == "bgcolor") s = "backgroundColor";
			if(s == "float") s = "cssFloat";
			styles.push({ style: s, value: v });
			w.nextMatch = lookaheadMatch.index + lookaheadMatch[0].length;
			config.textPrimitives.cssLookaheadRegExp.lastIndex = w.nextMatch;
			lookaheadMatch = config.textPrimitives.cssLookaheadRegExp.exec(w.source);
		}
		return styles;
	},

	applyCssHelper: function(e, styles)
	{
		for(var i = 0; i < styles.length; i++) {
			try {
				e.style[styles[i].style] = styles[i].value;
			} catch (ex) {}
		}
	},

	enclosedTextHelper: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
			var text = lookaheadMatch[1];
			if(config.browser.isIE && (config.browser.ieVersion[1] < 10))
				text = text.replace(/\n/g, "\r");
			createTiddlyElement(w.output, this.element, null, null, text);
			w.nextMatch = lookaheadMatch.index + lookaheadMatch[0].length;
		}
	},

	isExternalLink: function(link)
	{
		if(store.tiddlerExists(link) || store.isShadowTiddler(link)) {
			return false;
		}
		var urlRegExp = new RegExp(config.textPrimitives.urlPattern, "mg");
		if(urlRegExp.exec(link)) {
			return true;
		}
		if(link.indexOf(".") != -1 ||
		   link.indexOf("\\") != -1 ||
		   link.indexOf("/") != -1 ||
		   link.indexOf("#") != -1
		) {
			return true;
		}
		return false;
	}
};

//--
//-- Standard formatters
//--

config.formatters = [
	{
		name: "table",
		match: "^\\|(?:[^\\n]*)\\|(?:[fhck]?)$",
		lookaheadRegExp: /^\|([^\n]*)\|([fhck]?)$/mg,
		rowTermRegExp: /(\|(?:[fhck]?)$\n?)/mg,
		cellRegExp: /(?:\|([^\n\|]*)\|)|(\|[fhck]?$\n?)/mg,
		cellTermRegExp: /((?:\x20*)\|)/mg,
		rowTypes: { "c": "caption", "h": "thead", "": "tbody", "f": "tfoot" },
		handler: function(w)
		{
			var table = createTiddlyElement(w.output, "table", null, "twtable");
			var prevColumns = [];
			var currRowType = null;
			var rowContainer;
			var rowCount = 0;
			var onmouseover = function() { jQuery(this).addClass("hoverRow") };
			var onmouseout = function() { jQuery(this).removeClass("hoverRow") };
			w.nextMatch = w.matchStart;
			this.lookaheadRegExp.lastIndex = w.nextMatch;
			var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
			while(lookaheadMatch && lookaheadMatch.index == w.nextMatch) {
				var nextRowType = lookaheadMatch[2];
				if(nextRowType == "k") {
					table.className = lookaheadMatch[1];
					w.nextMatch += lookaheadMatch[0].length + 1;
				} else {
					if(nextRowType != currRowType) {
						rowContainer = createTiddlyElement(table, this.rowTypes[nextRowType]);
						currRowType = nextRowType;
					}
					if(currRowType == "c") {
						// Caption
						w.nextMatch++;
						if(rowContainer != table.firstChild)
							table.insertBefore(rowContainer, table.firstChild);
						rowContainer.setAttribute("align", rowCount == 0 ? "top" : "bottom");
						w.subWikifyTerm(rowContainer, this.rowTermRegExp);
					} else {
						var theRow = createTiddlyElement(rowContainer, "tr", null, rowCount % 2 ? "oddRow" : "evenRow");
						theRow.onmouseover = onmouseover;
						theRow.onmouseout = onmouseout;
						this.rowHandler(w, theRow, prevColumns);
						rowCount++;
					}
				}
				this.lookaheadRegExp.lastIndex = w.nextMatch;
				lookaheadMatch = this.lookaheadRegExp.exec(w.source);
			}
		},
		rowHandler: function(w, e, prevColumns)
		{
			var col = 0;
			var colSpanCount = 1;
			var prevCell = null;
			this.cellRegExp.lastIndex = w.nextMatch;
			var cellMatch = this.cellRegExp.exec(w.source);
			while(cellMatch && cellMatch.index == w.nextMatch) {
				if(cellMatch[1] == "~") {
					// Rowspan
					var last = prevColumns[col];
					if(last) {
						last.rowSpanCount++;
						last.element.setAttribute("rowspan", last.rowSpanCount);
						last.element.setAttribute("rowSpan", last.rowSpanCount); // Needed for IE
						last.element.valign = "center";
						if(colSpanCount > 1) {
							last.element.setAttribute("colspan", colSpanCount);
							last.element.setAttribute("colSpan", colSpanCount); // Needed for IE
							colSpanCount = 1;
						}
					}
					w.nextMatch = this.cellRegExp.lastIndex - 1;
				} else if(cellMatch[1] == ">") {
					// Colspan
					colSpanCount++;
					w.nextMatch = this.cellRegExp.lastIndex - 1;
				} else if(cellMatch[2]) {
					// End of row
					if(prevCell && colSpanCount > 1) {
						prevCell.setAttribute("colspan", colSpanCount);
						prevCell.setAttribute("colSpan", colSpanCount); // Needed for IE
					}
					w.nextMatch = this.cellRegExp.lastIndex;
					break;
				} else {
					// Cell
					w.nextMatch++;
					var styles = config.formatterHelpers.inlineCssHelper(w);
					var spaceLeft = false;
					var chr = w.source.substr(w.nextMatch, 1);
					while(chr == " ") {
						spaceLeft = true;
						w.nextMatch++;
						chr = w.source.substr(w.nextMatch, 1);
					}
					var cell;
					if(chr == "!") {
						cell = createTiddlyElement(e, "th");
						w.nextMatch++;
					} else {
						var isInsideHeader = e.parentElement.tagName.toLocaleLowerCase() === 'thead';
						cell = createTiddlyElement(e, isInsideHeader ? "th" : "td");
					}
					prevCell = cell;
					prevColumns[col] = { rowSpanCount: 1, element: cell };
					if(colSpanCount > 1) {
						cell.setAttribute("colspan", colSpanCount);
						cell.setAttribute("colSpan", colSpanCount); // Needed for IE
						colSpanCount = 1;
					}
					config.formatterHelpers.applyCssHelper(cell, styles);
					w.subWikifyTerm(cell, this.cellTermRegExp);
					if(w.matchText.substr(w.matchText.length - 2, 1) == " ") // spaceRight
						cell.align = spaceLeft ? "center" : "left";
					else if(spaceLeft)
						cell.align = "right";
					w.nextMatch--;
				}
				col++;
				this.cellRegExp.lastIndex = w.nextMatch;
				cellMatch = this.cellRegExp.exec(w.source);
			}
		}
	},

	{
		name: "heading",
		match: "^!{1,6}",
		termRegExp: /(\n)/mg,
		handler: function(w)
		{
			w.subWikifyTerm(createTiddlyElement(w.output, "h" + w.matchLength), this.termRegExp);
		}
	},

	{
		name: "list",
		match: "^(?:[\\*#;:]+)",
		lookaheadRegExp: /^(?:(?:(\*)|(#)|(;)|(:))+)/mg,
		termRegExp: /(\n)/mg,
		handler: function(w)
		{
			// stack holds nested elements to which (nested) lists are appended
			var stack = [w.output];
			var currLevel = 0, currType = null;
			var listLevel, listType, itemType, baseType;
			w.nextMatch = w.matchStart;
			this.lookaheadRegExp.lastIndex = w.nextMatch;
			var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
			while(lookaheadMatch && lookaheadMatch.index == w.nextMatch) {
				if(lookaheadMatch[1]) {
					listType = "ul";
					itemType = "li";
				} else if(lookaheadMatch[2]) {
					listType = "ol";
					itemType = "li";
				} else if(lookaheadMatch[3]) {
					listType = "dl";
					itemType = "dt";
				} else if(lookaheadMatch[4]) {
					listType = "dl";
					itemType = "dd";
				}
				if(!baseType)
					baseType = listType;
				listLevel = lookaheadMatch[0].length;
				w.nextMatch += lookaheadMatch[0].length;
				var l;
				if(listLevel > currLevel) {
					for(l = currLevel; l < listLevel; l++) {
						var target = (currLevel == 0) ? stack[stack.length - 1] : stack[stack.length - 1].lastChild;
						stack.push(createTiddlyElement(target, listType));
					}
				} else if(listType != baseType && listLevel == 1) {
					w.nextMatch -= lookaheadMatch[0].length;
					return;
				} else if(listLevel < currLevel) {
					for(l = currLevel; l > listLevel; l--)
						stack.pop();
				} else if(listLevel == currLevel && listType != currType) {
					stack.pop();
					stack.push(createTiddlyElement(stack[stack.length - 1].lastChild, listType));
				}
				currLevel = listLevel;
				currType = listType;
				var itemElement = createTiddlyElement(stack[stack.length - 1], itemType);
				w.subWikifyTerm(itemElement, this.termRegExp);
				this.lookaheadRegExp.lastIndex = w.nextMatch;
				lookaheadMatch = this.lookaheadRegExp.exec(w.source);
			}
		}
	},

	{
		name: "quoteByBlock",
		match: "^<<<\\n",
		termRegExp: /(^<<<(\n|$))/mg,
		element: "blockquote",
		handler: config.formatterHelpers.createElementAndWikify
	},

	{
		name: "quoteByLine",
		match: "^>+",
		lookaheadRegExp: /^>+/mg,
		termRegExp: /(\n)/mg,
		element: "blockquote",
		handler: function(w)
		{
			var stack = [w.output];
			var currLevel = 0;
			var newLevel = w.matchLength;
			var l, matched;
			do {
				if(newLevel > currLevel) {
					for(l = currLevel; l < newLevel; l++)
						stack.push(createTiddlyElement(stack[stack.length - 1], this.element));
				} else if(newLevel < currLevel) {
					for(l = currLevel; l > newLevel; l--)
						stack.pop();
				}
				currLevel = newLevel;
				w.subWikifyTerm(stack[stack.length - 1], this.termRegExp);
				createTiddlyElement(stack[stack.length - 1], "br");
				this.lookaheadRegExp.lastIndex = w.nextMatch;
				var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
				matched = lookaheadMatch && lookaheadMatch.index == w.nextMatch;
				if(matched) {
					newLevel = lookaheadMatch[0].length;
					w.nextMatch += lookaheadMatch[0].length;
				}
			} while(matched);
		}
	},

	{
		name: "rule",
		match: "^----+$\\n?|<hr ?/?>\\n?",
		handler: function(w)
		{
			createTiddlyElement(w.output, "hr");
		}
	},

	{
		name: "monospacedByLine",
		match: "^(?:/\\*\\{\\{\\{\\*/|\\{\\{\\{|//\\{\\{\\{|<!--\\{\\{\\{-->)\\n",
		element: "pre",
		handler: function(w)
		{
			switch(w.matchText) {
				case "/*{{{*/\n": // CSS
					this.lookaheadRegExp = /\/\*\{\{\{\*\/\n*((?:^[^\n]*\n)+?)(\n*^\f*\/\*\}\}\}\*\/$\n?)/mg;
					break;
				case "{{{\n": // monospaced block
					this.lookaheadRegExp = /^\{\{\{\n((?:^[^\n]*\n)+?)(^\f*\}\}\}$\n?)/mg;
					break;
				case "//{{{\n": // plugin
					this.lookaheadRegExp = /^\/\/\{\{\{\n\n*((?:^[^\n]*\n)+?)(\n*^\f*\/\/\}\}\}$\n?)/mg;
					break;
				case "<!--{{{-->\n": //template
					this.lookaheadRegExp = /<!--\{\{\{-->\n*((?:^[^\n]*\n)+?)(\n*^\f*<!--\}\}\}-->$\n?)/mg;
					break;
				default:
					break;
			}
			config.formatterHelpers.enclosedTextHelper.call(this, w);
		}
	},

	{
		name: "wikifyComment",
		match: "^(?:/\\*\\*\\*|<!---)\\n",
		handler: function(w)
		{
			var termRegExp = (w.matchText == "/***\n") ? (/(^\*\*\*\/\n)/mg) : (/(^--->\n)/mg);
			w.subWikifyTerm(w.output, termRegExp);
		}
	},

	{
		name: "macro",
		match: "<<",
		lookaheadRegExp: /<<([^>\s]+)(?:\s*)((?:[^>]|(?:>(?!>)))*)>>/mg,
		handler: function(w)
		{
			this.lookaheadRegExp.lastIndex = w.matchStart;
			var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
			if(lookaheadMatch && lookaheadMatch.index == w.matchStart && lookaheadMatch[1]) {
				w.nextMatch = this.lookaheadRegExp.lastIndex;
				invokeMacro(w.output, lookaheadMatch[1], lookaheadMatch[2], w, w.tiddler);
			}
		}
	},

	{
		name: "prettyLink",
		match: "\\[\\[",
		lookaheadRegExp: /\[\[(.*?)(?:\|(~)?(.*?))?\]\]/mg,
		handler: function(w)
		{
			this.lookaheadRegExp.lastIndex = w.matchStart;
			var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
			if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
				var e;
				var text = lookaheadMatch[1];
				if(lookaheadMatch[3]) {
					// Pretty bracketted link
					var link = lookaheadMatch[3];
					e = (!lookaheadMatch[2] && config.formatterHelpers.isExternalLink(link))
						? createExternalLink(w.output, link)
						: createTiddlyLink(w.output, link, false, null, w.isStatic, w.tiddler);
				} else {
					// Simple bracketted link
					e = createTiddlyLink(w.output, text, false, null, w.isStatic, w.tiddler);
				}
				createTiddlyText(e, text);
				w.nextMatch = this.lookaheadRegExp.lastIndex;
			}
		}
	},

	{
		name: "wikiLink",
		match: config.textPrimitives.unWikiLink + "?" + config.textPrimitives.wikiLink,
		handler: function(w)
		{
			if(w.matchText.substr(0, 1) == config.textPrimitives.unWikiLink) {
				w.outputText(w.output, w.matchStart + 1, w.nextMatch);
				return;
			}
			if(w.matchStart > 0) {
				var preRegExp = new RegExp(config.textPrimitives.anyLetterStrict, "mg");
				preRegExp.lastIndex = w.matchStart - 1;
				var preMatch = preRegExp.exec(w.source);
				if(preMatch.index == w.matchStart - 1) {
					w.outputText(w.output, w.matchStart, w.nextMatch);
					return;
				}
			}
			if(w.autoLinkWikiWords || store.isShadowTiddler(w.matchText)) {
				var link = createTiddlyLink(w.output, w.matchText, false, null, w.isStatic, w.tiddler);
				w.outputText(link, w.matchStart, w.nextMatch);
			} else {
				w.outputText(w.output, w.matchStart, w.nextMatch);
			}
		}
	},

	{
		name: "urlLink",
		match: config.textPrimitives.urlPattern,
		handler: function(w)
		{
			w.outputText(createExternalLink(w.output, w.matchText), w.matchStart, w.nextMatch);
		}
	},

	{
		name: "image",
		match: "\\[[<>]?[Ii][Mm][Gg]\\[",
		lookaheadRegExp: /\[([<]?)(>?)[Ii][Mm][Gg]\[(?:([^\|\]]+)\|)?([^\[\]\|]+)\](?:\[([^\]]*)\])?\]/mg,
		handler: function(w)
		{
			this.lookaheadRegExp.lastIndex = w.matchStart;
			var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
			if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
				var container = w.output;
				var link = lookaheadMatch[5];
				if(link) {
					container = config.formatterHelpers.isExternalLink(link)
						? createExternalLink(w.output, link)
						: createTiddlyLink(w.output, link, false, null, w.isStatic, w.tiddler);
					jQuery(container).addClass("imageLink");
				}
				var img = createTiddlyElement(container, "img");
				if(lookaheadMatch[1])
					img.align = "left";
				else if(lookaheadMatch[2])
					img.align = "right";
				if(lookaheadMatch[3]) {
					img.title = lookaheadMatch[3];
					img.setAttribute("alt", lookaheadMatch[3]);
				}
				img.src = lookaheadMatch[4];
				w.nextMatch = this.lookaheadRegExp.lastIndex;
			}
		}
	},

	{
		name: "html",
		match: "<[Hh][Tt][Mm][Ll]>",
		lookaheadRegExp: /<[Hh][Tt][Mm][Ll]>((?:.|\n)*?)<\/[Hh][Tt][Mm][Ll]>/mg,
		handler: function(w)
		{
			this.lookaheadRegExp.lastIndex = w.matchStart;
			var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
			if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
				createTiddlyElement(w.output, "span").innerHTML = lookaheadMatch[1];
				w.nextMatch = this.lookaheadRegExp.lastIndex;
			}
		}
	},

	{
		name: "commentByBlock",
		match: "/%",
		lookaheadRegExp: /\/%((?:.|\n)*?)%\//mg,
		handler: function(w)
		{
			this.lookaheadRegExp.lastIndex = w.matchStart;
			var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
			if(lookaheadMatch && lookaheadMatch.index == w.matchStart)
				w.nextMatch = this.lookaheadRegExp.lastIndex;
		}
	},

	{
		name: "characterFormat",
		match: "''|//|__|\\^\\^|~~|--(?!\\s|$)|\\{\\{\\{",
		handler: function(w)
		{
			switch(w.matchText) {
				case "''":
					w.subWikifyTerm(w.output.appendChild(document.createElement("strong")), /('')/mg);
					break;
				case "//":
					w.subWikifyTerm(createTiddlyElement(w.output, "em"), /(\/\/)/mg);
					break;
				case "__":
					w.subWikifyTerm(createTiddlyElement(w.output, "u"), /(__)/mg);
					break;
				case "^^":
					w.subWikifyTerm(createTiddlyElement(w.output, "sup"), /(\^\^)/mg);
					break;
				case "~~":
					w.subWikifyTerm(createTiddlyElement(w.output, "sub"), /(~~)/mg);
					break;
				case "--":
					w.subWikifyTerm(createTiddlyElement(w.output, "strike"), /(--)/mg);
					break;
				case "{{{":
					var lookaheadRegExp = /\{\{\{((?:.|\n)*?)\}\}\}/mg;
					lookaheadRegExp.lastIndex = w.matchStart;
					var lookaheadMatch = lookaheadRegExp.exec(w.source);
					if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
						createTiddlyElement(w.output, "code", null, null, lookaheadMatch[1]);
						w.nextMatch = lookaheadRegExp.lastIndex;
					}
					break;
			}
		}
	},

	{
		name: "customFormat",
		match: "@@|\\{\\{",
		handler: function(w)
		{
			switch(w.matchText) {
				case "@@":
					var e = createTiddlyElement(w.output, "span");
					var styles = config.formatterHelpers.inlineCssHelper(w);
					if(styles.length == 0)
						e.className = "marked";
					else
						config.formatterHelpers.applyCssHelper(e, styles);
					w.subWikifyTerm(e, /(@@)/mg);
					break;
				case "{{":
					var lookaheadRegExp = /\{\{[\s]*([\w]+[\s\w]*)[\s]*\{(\n?)/mg;
					lookaheadRegExp.lastIndex = w.matchStart;
					var lookaheadMatch = lookaheadRegExp.exec(w.source);
					if(lookaheadMatch) {
						w.nextMatch = lookaheadRegExp.lastIndex;
						e = createTiddlyElement(w.output, lookaheadMatch[2] == "\n" ? "div" : "span", null, lookaheadMatch[1]);
						w.subWikifyTerm(e, /(\}\}\})/mg);
					}
					break;
			}
		}
	},

	{
		name: "mdash",
		match: "--",
		handler: function(w)
		{
			createTiddlyElement(w.output, "span").innerHTML = "&mdash;";
		}
	},

	{
		name: "lineBreak",
		match: "\\n|<br ?/?>",
		handler: function(w)
		{
			createTiddlyElement(w.output, "br");
		}
	},

	{
		name: "rawText",
		match: "\"{3}|<nowiki>",
		lookaheadRegExp: /(?:\"{3}|<nowiki>)((?:.|\n)*?)(?:\"{3}|<\/nowiki>)/mg,
		handler: function(w)
		{
			this.lookaheadRegExp.lastIndex = w.matchStart;
			var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
			if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
				createTiddlyElement(w.output, "span", null, null, lookaheadMatch[1]);
				w.nextMatch = this.lookaheadRegExp.lastIndex;
			}
		}
	},

	{
		name: "htmlEntitiesEncoding",
		match: "(?:(?:&#?[a-zA-Z0-9]{2,8};|.)" +
			"(?:&#?(?:x0*(?:3[0-6][0-9a-fA-F]|1D[c-fC-F][0-9a-fA-F]|20[d-fD-F][0-9a-fA-F]|FE2[0-9a-fA-F])|0*" +
			"(?:76[89]|7[7-9][0-9]|8[0-7][0-9]|761[6-9]|76[2-7][0-9]|84[0-3][0-9]|844[0-7]|6505[6-9]|6506[0-9]|6507[0-1]));)+" +
			"|&#?[a-zA-Z0-9]{2,8};)",
		handler: function(w)
		{
			createTiddlyElement(w.output, "span").innerHTML = w.matchText;
		}
	}
];

//--
//-- Wikifier
//--

function getParser(tiddler, format)
{
	if(tiddler) {
		if(!format) format = tiddler.fields["wikiformat"];
		var i;
		if(format) {
			for(i in config.parsers)
				if(format == config.parsers[i].format)
					return config.parsers[i];
		} else {
			for(i in config.parsers)
				if(tiddler.isTagged(config.parsers[i].formatTag))
					return config.parsers[i];
		}
	}
	return formatter;
}

function Wikifier(source, formatter, highlightRegExp, tiddler)
{
	this.source = source;
	this.output = null;
	this.formatter = formatter;
	this.nextMatch = 0;
	this.autoLinkWikiWords = tiddler && tiddler.autoLinkWikiWords() == false ? false : true;
	this.highlightRegExp = highlightRegExp;
	this.highlightMatch = null;
	this.isStatic = false;
	if(highlightRegExp) {
		highlightRegExp.lastIndex = 0;
		this.highlightMatch = highlightRegExp.exec(source);
	}
	this.tiddler = tiddler;
}

Wikifier.prototype.wikifyPlain = function()
{
	var e = createTiddlyElement(document.body, "div");
	e.style.display = "none";
	this.subWikify(e);
	var text = jQuery(e).text();
	jQuery(e).remove();
	return text;
};

Wikifier.prototype.subWikify = function(output, terminator)
{
	try {
		if(terminator)
			this.subWikifyTerm(output, new RegExp("(" + terminator + ")", "mg"));
		else
			this.subWikifyUnterm(output);
	} catch(ex) {
		showException(ex);
	}
};

Wikifier.prototype.subWikifyUnterm = function(output)
{
	var oldOutput = this.output;
	this.output = output;
	this.formatter.formatterRegExp.lastIndex = this.nextMatch;
	var formatterMatch;
	while(formatterMatch = this.formatter.formatterRegExp.exec(this.source)) {
		// Output any text before the match
		if(formatterMatch.index > this.nextMatch)
			this.outputText(this.output, this.nextMatch, formatterMatch.index);
		// Set the match parameters for the handler
		this.matchStart = formatterMatch.index;
		this.matchLength = formatterMatch[0].length;
		this.matchText = formatterMatch[0];
		this.nextMatch = this.formatter.formatterRegExp.lastIndex;
		for(var i = 1; i < formatterMatch.length; i++) {
			if(formatterMatch[i]) {
				this.formatter.formatters[i - 1].handler(this);
				this.formatter.formatterRegExp.lastIndex = this.nextMatch;
				break;
			}
		}
	}
	if(this.nextMatch < this.source.length) {
		this.outputText(this.output, this.nextMatch, this.source.length);
		this.nextMatch = this.source.length;
	}
	this.output = oldOutput;
};

Wikifier.prototype.subWikifyTerm = function(output, terminatorRegExp)
{
	var oldOutput = this.output;
	this.output = output;
	terminatorRegExp.lastIndex = this.nextMatch;
	var terminatorMatch = terminatorRegExp.exec(this.source);
	this.formatter.formatterRegExp.lastIndex = this.nextMatch;
	var formatterMatch = this.formatter.formatterRegExp.exec(terminatorMatch ?
		this.source.substr(0, terminatorMatch.index) : this.source);
	while(terminatorMatch || formatterMatch) {
		if(terminatorMatch && (!formatterMatch || terminatorMatch.index <= formatterMatch.index)) {
			if(terminatorMatch.index > this.nextMatch)
				this.outputText(this.output, this.nextMatch, terminatorMatch.index);
			this.matchText = terminatorMatch[1];
			this.matchLength = terminatorMatch[1].length;
			this.matchStart = terminatorMatch.index;
			this.nextMatch = this.matchStart + this.matchLength;
			this.output = oldOutput;
			return;
		}
		if(formatterMatch.index > this.nextMatch)
			this.outputText(this.output, this.nextMatch, formatterMatch.index);
		this.matchStart = formatterMatch.index;
		this.matchLength = formatterMatch[0].length;
		this.matchText = formatterMatch[0];
		this.nextMatch = this.formatter.formatterRegExp.lastIndex;
		for(var i = 1; i < formatterMatch.length; i++) {
			if(formatterMatch[i]) {
				this.formatter.formatters[i - 1].handler(this);
				this.formatter.formatterRegExp.lastIndex = this.nextMatch;
				break;
			}
		}
		terminatorRegExp.lastIndex = this.nextMatch;
		terminatorMatch = terminatorRegExp.exec(this.source);
		formatterMatch = this.formatter.formatterRegExp.exec(terminatorMatch ?
			this.source.substr(0, terminatorMatch.index) : this.source);
	}
	if(this.nextMatch < this.source.length) {
		this.outputText(this.output, this.nextMatch, this.source.length);
		this.nextMatch = this.source.length;
	}
	this.output = oldOutput;
};

Wikifier.prototype.outputText = function(place, startPos, endPos)
{
	while(this.highlightMatch && (this.highlightRegExp.lastIndex > startPos) &&
		  (this.highlightMatch.index < endPos) && (startPos < endPos)) {
		if(this.highlightMatch.index > startPos) {
			createTiddlyText(place, this.source.substring(startPos, this.highlightMatch.index));
			startPos = this.highlightMatch.index;
		}
		var highlightEnd = Math.min(this.highlightRegExp.lastIndex, endPos);
		createTiddlyElement(place, "span", null, "highlight", this.source.substring(startPos, highlightEnd));
		startPos = highlightEnd;
		if(startPos >= this.highlightRegExp.lastIndex)
			this.highlightMatch = this.highlightRegExp.exec(this.source);
	}
	if(startPos < endPos) {
		createTiddlyText(place, this.source.substring(startPos, endPos));
	}
};

function wikify(source, output, highlightRegExp, tiddler)
{
	if(!source) return;
	var wikifier = new Wikifier(source, getParser(tiddler), highlightRegExp, tiddler);
	var t0 = new Date();
	wikifier.subWikify(output);
	if(tiddler && config.options.chkDisplayInstrumentation)
		displayMessage("wikify:" + tiddler.title + " in " + (new Date() - t0) + " ms");
}

function wikifyStatic(source, highlightRegExp, tiddler, format)
{
	if(!source) return "";
	if(!tiddler) tiddler = new Tiddler("temp");
	var wikifier = new Wikifier(source, getParser(tiddler, format), highlightRegExp, tiddler);
	wikifier.isStatic = true;

	var e = createTiddlyElement(document.body, "pre");
	e.style.display = "none";
	wikifier.subWikify(e);
	var html = e.innerHTML;
	jQuery(e).remove();
	return html;
}

function wikifyPlainText(text, limit, tiddler)
{
	if(limit > 0)
		text = text.substr(0, limit);
	var wikifier = new Wikifier(text, formatter, null, tiddler);
	return wikifier.wikifyPlain();
}

function highlightify(source, output, highlightRegExp, tiddler)
{
	if(!source) return;
	var wikifier = new Wikifier(source, formatter, highlightRegExp, tiddler);
	wikifier.outputText(output, 0, source.length);
}

//--
//-- Macro definitions
//--

function invokeMacro(place, macro, params, wikifier, tiddler)
{
	try {
		var m = config.macros[macro];
		if(m && m.handler) {
			var tiddlerElem = story.findContainingTiddler(place);

			window.tiddler = tiddlerElem ? store.getTiddler(tiddlerElem.getAttribute("tiddler")) : null;
			window.place = place;

			var allowEval = true;
			if(config.evaluateMacroParameters == "system") {
				if(!tiddler || tiddler.tags.indexOf("systemAllowEval") == -1) {
					allowEval = false;
				}
			}
			m.handler(place, macro, m.noPreParse ? null : params.readMacroParams(!allowEval), wikifier, params, tiddler);
		} else {
			createTiddlyError(place, config.messages.macroError.format([macro]),
				config.messages.macroErrorDetails.format([macro, config.messages.missingMacro]));
		}
	} catch(ex) {
		createTiddlyError(place, config.messages.macroError.format([macro]),
			config.messages.macroErrorDetails.format([macro, ex.toString()]));
	}
}

config.macros.version.handler = function(place)
{
	jQuery("<span/>").text(formatVersion()).appendTo(place);
};

config.macros.today.handler = function(place, macroName, params)
{
	var now = new Date();
	var text = params[0] ? now.formatString(params[0].trim()) : now.toLocaleString();
	jQuery("<span/>").text(text).appendTo(place);
};

config.macros.list.template = "<<view title link>>";
config.macros.list.handler = function(place, macroName, params, wikifier, paramString)
{
	var list = document.createElement("ul");
	jQuery(list).attr({ refresh: "macro", macroName: macroName }).data("params", paramString);
	place.appendChild(list);
	this.refresh(list);
};

config.macros.list.refresh = function(list)
{
	var paramString = jQuery(list).data("params");
	var params = paramString.readMacroParams();
	var args = paramString.parseParams("anon", null, null)[0];
	var type = args.anon ? args.anon[0] : "all";
	var template = args.template ? store.getTiddlerText(args.template[0]) : false;
	if(!template) {
		template = config.macros.list.template;
	}
	var results;
	if(this[type].handler)
		results = this[type].handler(params);

	jQuery(list).empty().addClass("list list-" + type);
	if(this[type].prompt)
		createTiddlyElement(list, "li", null, "listTitle", this[type].prompt);

	for(var i = 0; i < results.length; i++) {
		var li = createTiddlyElement(list, "li");
		var tiddler = results[i];
		if(typeof(tiddler) == 'string') { // deal with missing etc..
			tiddler = store.getTiddler(tiddler) || new Tiddler(tiddler);
		}
		wikify(template, li, null, tiddler);
	}
	if(results.length === 0 && args.emptyMessage) {
		jQuery(list).addClass("emptyList");
		jQuery("<li />").text(args.emptyMessage[0]).appendTo(list);
	}
};

config.macros.list.all.handler = function(params)
{
	return store.reverseLookup("tags", "excludeLists", false, "title");
};

config.macros.list.missing.handler = function(params)
{
	return store.getMissingLinks();
};

config.macros.list.orphans.handler = function(params)
{
	return store.getOrphans();
};

config.macros.list.shadowed.handler = function(params)
{
	return store.getShadowed();
};

config.macros.list.touched.handler = function(params)
{
	return store.getTouched();
};

config.macros.list.filter.handler = function(params)
{
	var filter = params[1];
	if(!filter) return [];
	return store.filterTiddlers(filter).map(function(tiddler) {
		return tiddler.title;
	});
};

config.macros.allTags.handler = function(place, macroName, params)
{
	var tags = store.getTags(params[0]);
	var ul = createTiddlyElement(place, "ul");
	if(tags.length == 0) createTiddlyElement(ul, "li", null, "listTitle", this.noTags);

	for(var i = 0; i < tags.length; i++) {
		var title = tags[i][0];
		var info = getTiddlyLinkInfo(title);
		var li = createTiddlyElement(ul, "li");
		var btn = createTiddlyButton(li, title + " (" + tags[i][1] + ")",
			this.tooltip.format([title]), onClickTag, info.classes);
		btn.setAttribute("tag", title);
		btn.setAttribute("refresh", "link");
		btn.setAttribute("tiddlyLink", title);
		if(params[1]) btn.setAttribute("sortby", params[1]);
	}
};

var macro = config.macros.timeline;
merge(macro, {
	handler: function(place, macroName, params, wikifier, paramString, tiddler) {
		var container = jQuery("<div />").attr("params", paramString).
			attr("macroName", macroName).appendTo(place)[0];
		macro.refresh(container);
	},
	refresh: function(container) {
		jQuery(container).attr("refresh", "macro").empty();
		var paramString = jQuery(container).attr("params");
		var args = paramString.parseParams("anon", null, null)[0];
		var params = args.anon || [];

		var field = params[0] || "modified";
		var prefix = field.charAt(0);
		var no_prefix_field = prefix === "-" || prefix === "+" ? field.substr(1, field.length) : field;
		var dateFormat = params[2] || this.dateFormat;

		var groupTemplate = (args.groupTemplate ? store.getTiddlerText(args.groupTemplate[0]) : null)
			|| macro.groupTemplate.format(no_prefix_field, dateFormat);
		var itemTemplate = (args.template ? store.getTiddlerText(args.template[0]) : null)
			|| macro.itemTemplate;

		var tiddlers = args.filter ? store.sortTiddlers(store.filterTiddlers(args.filter[0]), field) :
			store.reverseLookup("tags", "excludeLists", false, field);
		var last = params[1] ? tiddlers.length - Math.min(tiddlers.length, parseInt(params[1], 10)) : 0;
		var lastGroup = "", ul;

		for(var i = tiddlers.length - 1; i >= last; i--) {
			var theGroup = wikifyPlainText(groupTemplate, 0, tiddlers[i]);
			if(ul === undefined || theGroup != lastGroup) {
				ul = createTiddlyElement(container, "ul", null, "timeline");
				createTiddlyElement(ul, "li", null, "listTitle", theGroup);
				lastGroup = theGroup;
			}
			var item = createTiddlyElement(ul, "li", null, "listLink");
			wikify(itemTemplate, item, null, tiddlers[i]);
		}
	},
	groupTemplate: "<<view %0 date '%1'>>",
	itemTemplate: "<<view title link>>"
});

config.macros.tiddler.handler = function(place, macroName, params, wikifier, paramString, tiddler)
{
	var allowEval = true;
	var stack = config.macros.tiddler.tiddlerStack;
	if(stack.length > 0 && config.evaluateMacroParameters == "system") {
		// included tiddler and "system" evaluation required, so check tiddler tagged appropriately
		var title = stack[stack.length - 1];
		var pos = title.indexOf(config.textPrimitives.sectionSeparator);
		if(pos != -1) {
			title = title.substr(0, pos); // get the base tiddler title
		}
		var t = store.getTiddler(title);
		if(!t || t.tags.indexOf("systemAllowEval") == -1) {
			allowEval = false;
		}
	}
	params = paramString.parseParams("name", null, allowEval, false, true);
	var names = params[0]["name"];
	var tiddlerName = names[0];
	var className = names[1] || null;
	var args = params[0]["with"];

	var wrapper = createTiddlyElement(place, "span", null, className, null, {
		refresh: "content", tiddler: tiddlerName
	});
	if(args !== undefined)
		wrapper.macroArgs = args; // #154
	this.transclude(wrapper, tiddlerName, args);
};

config.macros.tiddler.transclude = function(wrapper, tiddlerName, args)
{
	var text = store.getTiddlerText(tiddlerName);
	if(!text) return;

	var stack = config.macros.tiddler.tiddlerStack;
	if(stack.indexOf(tiddlerName) !== -1) return;

	stack.push(tiddlerName);
	try {
		// substitute $1, $2, .. placeholders (markers)
		if(typeof args == "string")
			args = args.readBracketedList();
		var maxSupportedPlaceholders = 9; // $1 - $9
		var n = args ? args.length : 0;
		for(var i = 0; i < maxSupportedPlaceholders; i++) {
			var placeholderRE = new RegExp("\\$" + (i + 1), "mg");
			if(i < n) {
				text = text.replace(placeholderRE, args[i]);
			}
			// #162
			else if(n && config.options.chkRemoveExtraMarkers) {
				text = text.replace(placeholderRE, "");
			}
		}

		config.macros.tiddler.renderText(wrapper, text, tiddlerName);
	} finally {
		stack.pop();
	}
};

config.macros.tiddler.renderText = function(place, text, tiddlerName)
{
	wikify(text, place, null, store.getTiddler(tiddlerName));
};

config.macros.tiddler.tiddlerStack = [];

config.macros.tag.handler = function(place, macroName, params)
{
	var btn = createTagButton(place, params[0], null, params[1], params[2]);
	if(params[3]) btn.setAttribute('sortby', params[3]);
};

config.macros.tags.handler = function(place, macroName, params, wikifier, paramString, tiddler)
{
	params = paramString.parseParams("anon", null, true, false, false);
	var title = getParam(params, "anon", "");
	if(title && store.tiddlerExists(title))
		tiddler = store.getTiddler(title);
	var sep = getParam(params, "sep", " ");
	var lingo = config.views.wikified.tag;

	var ul = createTiddlyElement(place, "ul");
	createTiddlyElement(ul, "li", null, "listTitle",
		(tiddler.tags.length ? lingo.labelTags : lingo.labelNoTags).format([tiddler.title])
	);
	for(var i = 0; i < tiddler.tags.length; i++) {
		var tag = store.getTiddler(tiddler.tags[i]);
		if(tag && tag.tags.indexOf("excludeLists") != -1) continue;
		createTagButton(createTiddlyElement(ul, "li"), tiddler.tags[i], tiddler.title);
		if(i < tiddler.tags.length - 1)
			createTiddlyText(ul, sep);
	}
};

config.macros.tagging.handler = function(place, macroName, params, wikifier, paramString, tiddler)
{
	params = paramString.parseParams("anon", null, true, false, false);
	var title = getParam(params, "anon", "");
	if(title == "" && tiddler instanceof Tiddler)
		title = tiddler.title;
	var sep = getParam(params, "sep", " ");
	var sortby = getParam(params, "sortBy", false);
	var tagged = store.getTaggedTiddlers(title, sortby);
	var prompt = tagged.length == 0 ? this.labelNotTag : this.label;

	var ul = createTiddlyElement(place, "ul");
	ul.setAttribute("title", this.tooltip.format([title]));
	createTiddlyElement(ul, "li", null, "listTitle", prompt.format([title, tagged.length]));

	for(var i = 0; i < tagged.length; i++) {
		createTiddlyLink(createTiddlyElement(ul, "li"), tagged[i].title, true);
		if(i < tagged.length - 1)
			createTiddlyText(ul, sep);
	}
};

config.macros.closeAll.handler = function(place)
{
	createTiddlyButton(place, this.label, this.prompt, this.onClick);
};

config.macros.closeAll.onClick = function(e)
{
	story.closeAllTiddlers();
	return false;
};

config.macros.permaview.handler = function(place)
{
	createTiddlyButton(place, this.label, this.prompt, this.onClick);
};

config.macros.permaview.onClick = function(e)
{
	story.permaView();
	return false;
};

config.macros.saveChanges.handler = function(place, macroName, params)
{
	if(!readOnly)
		createTiddlyButton(place, params[0] || this.label, params[1] || this.prompt, this.onClick, null, null, this.accessKey);
};

config.macros.saveChanges.onClick = function(e)
{
	saveChanges();
	return false;
};

config.macros.slider.onClickSlider = function(ev)
{
	var n = this.nextSibling;
	var cookie = n.getAttribute("cookie");
	var isOpen = n.style.display != "none";
	if(config.options.chkAnimate && anim && typeof Slider == "function")
		anim.startAnimating(new Slider(n, !isOpen, null, "none"));
	else
		n.style.display = isOpen ? "none" : "block";
	config.options[cookie] = !isOpen;
	saveOption(cookie);
	return false;
};

config.macros.slider.createSlider = function(place, cookie, title, tooltip)
{
	var c = cookie || "";
	createTiddlyButton(place, title, tooltip, this.onClickSlider);
	var panel = createTiddlyElement(null, "div", null, "sliderPanel");
	panel.setAttribute("cookie", c);
	panel.style.display = config.options[c] ? "block" : "none";
	place.appendChild(panel);
	return panel;
};

config.macros.slider.handler = function(place, macroName, params)
{
	var panel = this.createSlider(place, params[0], params[2], params[3]);
	var text = store.getTiddlerText(params[1]);
	panel.setAttribute("refresh", "content");
	panel.setAttribute("tiddler", params[1]);
	if(text)
		wikify(text, panel, null, store.getTiddler(params[1]));
};

// <<gradient [[tiddler name]] vert|horiz rgb rgb rgb rgb... >>
config.macros.gradient.handler = function(place, macroName, params, wikifier, paramString, tiddler)
{
	var panel = wikifier ? createTiddlyElement(place, "div", null, "gradient") : place;
	panel.style.position = "relative";
	panel.style.overflow = "hidden";
	panel.style.zIndex = "0";
	if(wikifier) {
		var styles = config.formatterHelpers.inlineCssHelper(wikifier);
		config.formatterHelpers.applyCssHelper(panel, styles);
	}
	params = paramString.parseParams("color");
	var loColors = [], hiColors = [];

	for(var i = 2; i < params.length; i++) {
		var c = params[i].value;
		if(params[i].name == "snap") {
			hiColors[hiColors.length - 1] = c;
		} else {
			loColors.push(c);
			hiColors.push(c);
		}
	}
	drawGradient(panel, params[1].value != "vert", loColors, hiColors);
	if(wikifier)
		wikifier.subWikify(panel, ">>");
	if(document.all) {
		panel.style.height = "100%";
		panel.style.width = "100%";
	}
};

config.macros.message.handler = function(place, macroName, params)
{
	if(!params[0]) return;

	var names = params[0].split(".");
	var lookupMessage = function(root, nameIndex) {
		if(root[names[nameIndex]]) {
			if(nameIndex < names.length - 1)
				return (lookupMessage(root[names[nameIndex]], nameIndex + 1));
			else
				return root[names[nameIndex]];
		} else
			return null;
	};
	var m = lookupMessage(config, 0);
	if(m == null)
		m = lookupMessage(window, 0);
	createTiddlyText(place, m.toString().format(params.splice(1)));
};

config.macros.view.depth = 0;
config.macros.view.values = [];
config.macros.view.views = {
	text: function(value, place, params, wikifier, paramString, tiddler) {
		highlightify(value, place, highlightHack, tiddler);
	},
	link: function(value, place, params, wikifier, paramString, tiddler) {
		createTiddlyLink(place, value, true);
	},
	wikified: function(value, place, params, wikifier, paramString, tiddler) {
		if(config.macros.view.depth > 50)
			return;
		if(config.macros.view.depth > 0) {
			if (value == config.macros.view.values[config.macros.view.depth - 1]) {
				return;
			}
		}
		config.macros.view.values[config.macros.view.depth] = value;
		config.macros.view.depth++;
		if(params[2])
			value = params[2].unescapeLineBreaks().format([value]);
		wikify(value, place, highlightHack, tiddler);
		config.macros.view.depth--;
		config.macros.view.values[config.macros.view.depth] = null;
	},
	date: function(value, place, params, wikifier, paramString, tiddler) {
		value = Date.convertFromYYYYMMDDHHMM(value);
		createTiddlyText(place, value.formatString(params[2] || config.views.wikified.dateFormat));
	}
};

config.macros.view.handler = function(place, macroName, params, wikifier, paramString, tiddler)
{
	if(!(tiddler instanceof Tiddler) || !params[0]) return;
	var value = store.getValue(tiddler, params[0]);
	if(!value) return;

	var type = params[1] || config.macros.view.defaultView;
	var handler = config.macros.view.views[type];
	if(handler)
		handler(value, place, params, wikifier, paramString, tiddler);
};

config.macros.edit.handler = function(place, macroName, params, wikifier, paramString, tiddler)
{
	var field = params[0];
	var rows = params[1] || 0;
	var defaultValue = params[2] || '';
	if(!(tiddler instanceof Tiddler) || !field) return;

	story.setDirty(tiddler.title, true);
	var e, value = store.getValue(tiddler, field) || defaultValue;
	if(field != "text" && !rows) {
		e = createTiddlyElement(place, "input", null, null, null, {
			type: "text", edit: field, size: "40", autocomplete: "off"
		});
		e.value = value;
	} else {
		rows = rows || 10;
		var lines = value.match(/\n/mg);
		var maxLines = Math.max(parseInt(config.options.txtMaxEditRows), 5);
		if(lines != null && lines.length > rows)
			rows = lines.length + 5;
		rows = Math.min(rows, maxLines);

		var wrapper1 = createTiddlyElement(null, "fieldset", null, "fieldsetFix");
		var wrapper2 = createTiddlyElement(wrapper1, "div");
		e = createTiddlyElement(wrapper2, "textarea");
		e.value = value;
		e.setAttribute("rows", rows);
		e.setAttribute("edit", field);
		place.appendChild(wrapper1);
	}
	if(tiddler.isReadOnly()) {
		e.setAttribute("readOnly", "readOnly");
		jQuery(e).addClass("readOnly");
	}
	return e;
};

config.macros.tagChooser.onClick = function(ev)
{
	var e = ev || window.event;
	var lingo = config.views.editor.tagChooser;
	var popup = Popup.create(this);
	var tags = store.getTags(this.getAttribute("tags"));

	for(var i = 0; i < tags.length; i++) {
		var tag = createTiddlyButton(createTiddlyElement(popup, "li"), tags[i][0],
			lingo.tagTooltip.format([tags[i][0]]), config.macros.tagChooser.onTagClick);
		tag.setAttribute("tag", tags[i][0]);
		tag.setAttribute("tiddler", this.getAttribute("tiddler"));
	}
	if(tags.length == 0) jQuery("<li/>").addClass('disabled').text(lingo.popupNone).appendTo(popup);

	Popup.show();
	e.cancelBubble = true;
	if(e.stopPropagation) e.stopPropagation();
	return false;
};

config.macros.tagChooser.onTagClick = function(ev)
{
	var e = ev || window.event;
	if(e.metaKey || e.ctrlKey) stopEvent(e); //# keep popup open on CTRL-click
	var tag = this.getAttribute("tag");
	var title = this.getAttribute("tiddler");
	if(!readOnly)
		story.setTiddlerTag(title, tag, 0);
	return false;
};

config.macros.tagChooser.handler = function(place, macroName, params, wikifier, paramString, tiddler)
{
	if(!(tiddler instanceof Tiddler)) return;
	var lingo = config.views.editor.tagChooser;
	createTiddlyButton(place, lingo.text, lingo.tooltip, this.onClick, null, null, null, {
		tiddler: tiddler.title,
		tags: params[0]
	});
};

config.macros.refreshDisplay.handler = function(place)
{
	createTiddlyButton(place, this.label, this.prompt, this.onClick);
};

config.macros.refreshDisplay.onClick = function(e)
{
	refreshAll();
	return false;
};

config.macros.annotations.handler = function(place, macroName, params, wikifier, paramString, tiddler)
{
	var title = tiddler ? tiddler.title : null;
	var annotation = title ? config.annotations[title] : null;
	if(!tiddler || !title || !annotation) return;
	var text = annotation.format([title]);
	wikify(text, createTiddlyElement(place, "div", null, "annotation"), null, tiddler);
};

//--
//-- NewTiddler and NewJournal macros
//--

config.macros.newTiddler.createNewTiddlerButton = function(place,
	title, params, label, prompt, accessKey, newFocus, isJournal)
{
	label = getParam(params, "label", label);
	prompt = getParam(params, "prompt", prompt);
	accessKey = getParam(params, "accessKey", accessKey);
	var customFields = getParam(params, "fields", "");
	if(!customFields && !store.isShadowTiddler(title))
		customFields = String.encodeHashMap(config.defaultCustomFields);
	var tags = [];
	for(var i = 1; i < params.length; i++) {
		if((params[i].name == "anon" && i != 1) || (params[i].name == "tag"))
			tags.push(params[i].value);
	}
	var text = getParam(params, "text");

	var btn = createTiddlyButton(place, label, prompt, this.onClickNewTiddler, null, null, accessKey, {
		newTitle: title,
		isJournal: isJournal ? "true" : "false",
		newFocus: getParam(params, "focus", newFocus),
		newTemplate: getParam(params, "template", DEFAULT_EDIT_TEMPLATE)
	});
	if(tags.length > 0)
		btn.setAttribute("params", tags.join("|"));
	if(customFields !== "")
		btn.setAttribute("customFields", customFields);
	if(text !== undefined)
		btn.setAttribute("newText", text);
	return btn;
};

config.macros.newTiddler.onClickNewTiddler = function()
{
	var title = this.getAttribute("newTitle");
	if(this.getAttribute("isJournal") == "true") {
		title = new Date().formatString(title.trim());
	}
	var params = this.getAttribute("params");
	var tags = params ? params.split("|") : [];
	var focus = this.getAttribute("newFocus");
	var template = this.getAttribute("newTemplate");
	var customFields = this.getAttribute("customFields");
	if(!customFields && !store.isShadowTiddler(title))
		customFields = String.encodeHashMap(config.defaultCustomFields);

	story.displayTiddler(this, title, template, false, null, null); // #161
	var tiddlerElem = story.getTiddler(title);
	if(customFields)
		story.addCustomFields(tiddlerElem, customFields);
	var text = this.getAttribute("newText");
	if(typeof text == "string" && story.getTiddlerField(title, "text"))
		story.getTiddlerField(title, "text").value = text.format([title]);
	for(var i = 0; i < tags.length; i++)
		story.setTiddlerTag(title, tags[i], +1);
	story.focusTiddler(title, focus);
	return false;
};

config.macros.newTiddler.handler = function(place, macroName, params, wikifier, paramString)
{
	if(readOnly) return;
	params = paramString.parseParams("anon", null, true, false, false);
	var title = params[1] && params[1].name == "anon" ? params[1].value : this.title;
	title = getParam(params, "title", title);
	this.createNewTiddlerButton(place, title, params, this.label, this.prompt, this.accessKey, "title", false);
};

config.macros.newJournal.handler = function(place, macroName, params, wikifier, paramString)
{
	if(readOnly) return;
	params = paramString.parseParams("anon", null, true, false, false);
	var title = params[1] && params[1].name == "anon" ? params[1].value : config.macros.timeline.dateFormat;
	title = getParam(params, "title", title);
	config.macros.newTiddler.createNewTiddlerButton(place, title,
		params, this.label, this.prompt, this.accessKey, "text", true);
};

//--
//-- Search macro
//--

config.macros.search.handler = function(place, macroName, params, wikifier, paramString, tiddler)
{
	params = paramString.parseParams("anon", null, false, false, false);
	createTiddlyButton(place, this.label, this.prompt, this.onClick, "searchButton");
	var attributes = {
		size: this.sizeTextbox,
		accessKey: getParam(params, "accesskey", this.accessKey),
		autocomplete: "off",
		lastSearchText: "",
		placeholder: getParam(params, "placeholder", this.placeholder)
	};
	if(config.browser.isSafari) {
		attributes.type = "search";
		attributes.results = "5";
	} else {
		attributes.type = "text";
	}
	var input = createTiddlyElement(place, "input", null, "txtOptionInput searchField", null, attributes);
	input.value = getParam(params, "anon", "");
	input.onkeyup = this.onKeyPress;
	input.onfocus = this.onFocus;
};

// Global because there's only ever one outstanding incremental search timer
config.macros.search.timeout = null;

config.macros.search.doSearch = function(input)
{
	if(input.value.length == 0) return;
	story.search(input.value, config.options.chkCaseSensitiveSearch, config.options.chkRegExpSearch);
	input.setAttribute("lastSearchText", input.value);
};

config.macros.search.onClick = function(e)
{
	config.macros.search.doSearch(this.nextSibling);
	return false;
};

config.macros.search.onKeyPress = function(ev)
{
	var me = config.macros.search;
	var e = ev || window.event;
	switch(e.keyCode) {
		case 9: // Tab
			return;
		case 13: // Ctrl-Enter
		case 10: // Ctrl-Enter on IE PC
			me.doSearch(this);
			break;
		case 27: // Escape
			this.value = "";
			clearMessage();
			break;
	}
	if(config.options.chkIncrementalSearch) {
		if(this.value.length > 2) {
			if(this.value != this.getAttribute("lastSearchText")) {
				if(me.timeout) clearTimeout(me.timeout);
				var input = this;
				me.timeout = setTimeout(function() { me.doSearch(input) }, 500);
			}
		} else {
			if(me.timeout) clearTimeout(me.timeout);
		}
	}
};

config.macros.search.onFocus = function(e)
{
	this.select();
};

//--
//-- Tabs macro
//--

config.macros.tabs.handler = function(place, macroName, params)
{
	var cookie = params[0];
	var numTabs = (params.length - 1) / 3;
	var wrapper = createTiddlyElement(null, "div", null, "tabsetWrapper " + cookie);
	var tabset = createTiddlyElement(wrapper, "div", null, "tabset");
	tabset.setAttribute("cookie", cookie);
	var validTab = false;
	for(var i = 0; i < numTabs; i++) {
		var label = params[i * 3 + 1];
		var prompt = params[i * 3 + 2];
		var content = params[i * 3 + 3];
		var tab = createTiddlyButton(tabset, label, prompt, this.onClickTab, "tab tabUnselected");
		createTiddlyElement(tab, "span", null, null, " ", { style: "font-size:0pt;line-height:0px" });
		tab.setAttribute("tab", label);
		tab.setAttribute("content", content);
		tab.title = prompt;
		if(config.options[cookie] == label)
			validTab = true;
	}
	if(!validTab)
		config.options[cookie] = params[1];
	place.appendChild(wrapper);
	this.switchTab(tabset, config.options[cookie]);
};

config.macros.tabs.onClickTab = function(e)
{
	config.macros.tabs.switchTab(this.parentNode, this.getAttribute("tab"));
	return false;
};

config.macros.tabs.switchTab = function(tabset, tab)
{
	var cookie = tabset.getAttribute("cookie");
	var theTab = null;
	var nodes = tabset.childNodes;
	for(var i = 0; i < nodes.length; i++) {
		if(nodes[i].getAttribute && nodes[i].getAttribute("tab") == tab) {
			theTab = nodes[i];
			theTab.className = "tab tabSelected";
		} else {
			nodes[i].className = "tab tabUnselected";
		}
	}
	if(!theTab) return;

	if(tabset.nextSibling && tabset.nextSibling.className == "tabContents")
		jQuery(tabset.nextSibling).remove();
	var tabContent = createTiddlyElement(null, "div", null, "tabContents");
	tabset.parentNode.insertBefore(tabContent, tabset.nextSibling);
	var contentTitle = theTab.getAttribute("content");
	wikify(store.getTiddlerText(contentTitle), tabContent, null, store.getTiddler(contentTitle));
	if(cookie) {
		config.options[cookie] = tab;
		saveOption(cookie);
	}
};

//--
//-- Tiddler toolbar
//--

// Create a toolbar command button
config.macros.toolbar.createCommand = function(place, commandName, tiddler, className)
{
	if(!(tiddler instanceof Tiddler)) return;
	if(typeof commandName != "string") {
		for(var name in config.commands) {
			if(config.commands[name] == commandName)
				commandName = name;
		}
	}
	if(typeof commandName != "string") return;
	var command = config.commands[commandName];
	if(command.isEnabled ? !command.isEnabled(tiddler) : !this.isCommandEnabled(command, tiddler))
		return;

	var text = command.getText ? command.getText(tiddler) : this.getCommandText(command, tiddler);
	var tooltip = command.getTooltip ? command.getTooltip(tiddler) : this.getCommandTooltip(command, tiddler);
	var cmd = command.type == "popup" ? this.onClickPopup : this.onClickCommand;
	var btn = createTiddlyButton(place, text, tooltip, cmd, "button command_" + commandName, null, null, {
		commandName: commandName,
		tiddler: tiddler.title
	});
	if(className) jQuery(btn).addClass(className);
};

config.macros.toolbar.isCommandEnabled = function(command, tiddler)
{
	var title = tiddler.title;
	var shadow = store.isShadowTiddler(title) && !store.tiddlerExists(title);
	if(shadow && command.hideShadow) return false;
	var ro = tiddler.isReadOnly();
	return !ro || (ro && !command.hideReadOnly);
};

config.macros.toolbar.getCommandText = function(command, tiddler)
{
	return (tiddler.isReadOnly() && command.readOnlyText) || command.text;
};

config.macros.toolbar.getCommandTooltip = function(command, tiddler)
{
	return (tiddler.isReadOnly() && command.readOnlyTooltip) || command.tooltip;
};

config.macros.toolbar.onClickCommand = function(ev)
{
	var e = ev || window.event;
	e.cancelBubble = true;
	if(e.stopPropagation) e.stopPropagation();
	var command = config.commands[this.getAttribute("commandName")];
	return command.handler(e, this, this.getAttribute("tiddler"));
};

config.macros.toolbar.onClickPopup = function(ev)
{
	var e = ev || window.event;
	e.cancelBubble = true;
	if(e.stopPropagation) e.stopPropagation();
	var popup = Popup.create(this);
	var title = this.getAttribute("tiddler");
	popup.setAttribute("tiddler", title);
	var command = config.commands[this.getAttribute("commandName")];
	command.handlePopup(popup, title);
	Popup.show();
	return false;
};

// Invoke the first command encountered from a given place that is tagged with a specified class
config.macros.toolbar.invokeCommand = function(place, className, event)
{
	var children = place.getElementsByTagName("a");
	for(var i = 0; i < children.length; i++) {
		var c = children[i];
		if(jQuery(c).hasClass(className) && c.getAttribute && c.getAttribute("commandName")) {
			if(c.onclick instanceof Function)
				c.onclick.call(c, event);
			break;
		}
	}
};

config.macros.toolbar.onClickMore = function(ev)
{
	var e = this.nextSibling;
	e.style.display = "inline";
	this.style.display = "none";
	return false;
};

config.macros.toolbar.onClickLess = function(ev)
{
	var e = this.parentNode;
	var m = e.previousSibling;
	e.style.display = "none";
	m.style.display = "inline";
	return false;
};

config.macros.toolbar.handler = function(place, macroName, params, wikifier, paramString, tiddler)
{
	for(var i = 0; i < params.length; i++) {
		var commandName = params[i];
		switch(commandName) {
			case "!":
				createTiddlyText(place, this.separator);
				break;
			case "*":
				createTiddlyElement(place, "br");
				break;
			case "<":
				createTiddlyButton(place, this.lessLabel, this.lessPrompt,
					config.macros.toolbar.onClickLess, "button lessCommand");
				break;
			case ">":
				createTiddlyButton(place, this.moreLabel, this.morePrompt,
					config.macros.toolbar.onClickMore, "button moreCommand");
				place = createTiddlyElement(place, "span", null, "moreCommand");
				place.style.display = "none";
				break;
			default:
				var className = "";
				switch(commandName.substring(0, 1)) {
					case "+":
						className = "defaultCommand";
						commandName = commandName.substring(1);
						break;
					case "-":
						className = "cancelCommand";
						commandName = commandName.substring(1);
						break;
				}
				if(config.commands[commandName]) {
					this.createCommand(place, commandName, tiddler, className);
				} else {
					this.customCommand(place, commandName, wikifier, tiddler);
				}
				break;
		}
	}
};

// Overrideable function to extend toolbar handler
config.macros.toolbar.customCommand = function(place, command, wikifier, tiddler)
{
};

//--
//-- Menu and toolbar commands
//--

config.commands.closeTiddler.handler = function(event, src, title)
{
	if(story.isDirty(title) && !readOnly) {
		if(!confirm(config.commands.cancelTiddler.warning.format([title])))
			return false;
	}
	story.setDirty(title, false);
	story.closeTiddler(title, true);
	return false;
};

config.commands.closeOthers.handler = function(event, src, title)
{
	story.closeAllTiddlers(title);
	return false;
};

config.commands.editTiddler.handler = function(event, src, title)
{
	clearMessage();
	var tiddlerElem = story.getTiddler(title);
	var fields = tiddlerElem.getAttribute("tiddlyFields");
	story.displayTiddler(null, title, DEFAULT_EDIT_TEMPLATE, false, null, fields);

	var editorElement = story.getTiddlerField(title, config.options.txtEditorFocus || "text");
	if(editorElement) setCaretPosition(editorElement, 0);
	return false;
};

config.commands.saveTiddler.handler = function(event, src, title)
{
	var newTitle = story.saveTiddler(title, event.shiftKey);
	if(newTitle) story.displayTiddler(null, newTitle);
	return false;
};

config.commands.cancelTiddler.handler = function(event, src, title)
{
	if(story.hasChanges(title) && !readOnly) {
		if(!confirm(this.warning.format([title])))
			return false;
	}
	story.setDirty(title, false);
	story.displayTiddler(null, title);
	return false;
};

config.commands.deleteTiddler.handler = function(event, src, title)
{
	var deleteIt = true;
	if(config.options.chkConfirmDelete) deleteIt = confirm(this.warning.format([title]));
	if(!deleteIt) return false;

	store.removeTiddler(title);
	story.closeTiddler(title, true);
	autoSaveChanges();
	return false;
};

config.commands.permalink.handler = function(event, src, title)
{
	var hash = story.getPermaViewHash([title]);
	if(window.location.hash != hash) window.location.hash = hash;
	return false;
};

config.commands.references.handlePopup = function(popup, title)
{
	var references = store.getReferringTiddlers(title);
	var hasRefs = false;
	for(var i = 0; i < references.length; i++) {
		if(references[i].title != title && !references[i].isTagged("excludeLists")) {
			createTiddlyLink(createTiddlyElement(popup, "li"), references[i].title, true);
			hasRefs = true;
		}
	}
	if(!hasRefs) createTiddlyElement(popup, "li", null, "disabled", this.popupNone);
};

config.commands.jump.handlePopup = function(popup, title)
{
	story.forEachTiddler(function(title, element) {
		createTiddlyLink(createTiddlyElement(popup, "li"), title, true, null, false, null, true);
	});
};

config.commands.fields.handlePopup = function(popup, title)
{
	var tiddler = store.fetchTiddler(title);
	if(!tiddler) return;
	var items = [];
	store.forEachField(tiddler, function(tiddler, fieldName, value) {
		items.push({ field: fieldName, value: value }); }, true);
	items.sort(function(a, b) { return a.field < b.field ? -1 : (a.field == b.field ? 0 : +1) });

	if(items.length > 0) {
		ListView.create(popup, items, this.listViewTemplate);
	} else {
		createTiddlyElement(popup, "li", null, "disabled", this.emptyText);
	}
};

//--
//-- Tiddler() object
//--

function Tiddler(title)
{
	this.title = title;
	this.text = "";
	this.creator = null;
	this.modifier = null;
	this.created = new Date();
	this.modified = this.created;
	this.links = [];
	this.linksUpdated = false;
	this.tags = [];
	this.fields = {};
	return this;
}

Tiddler.prototype.getLinks = function()
{
	if(this.linksUpdated == false) this.changed();
	return this.links;
};

// Returns the fields that are inherited in string field:"value" field2:"value2" format
Tiddler.prototype.getInheritedFields = function()
{
	var f = {};
	for(var i in this.fields) {
		if(i == "server.host" || i == "server.workspace" || i == "wikiformat" || i == "server.type") {
			f[i] = this.fields[i];
		}
	}
	return String.encodeHashMap(f);
};

// Increment the changeCount of a tiddler
Tiddler.prototype.incChangeCount = function()
{
	var c = this.fields['changecount'];
	c = c ? parseInt(c, 10) : 0;
	this.fields['changecount'] = String(c + 1);
};

Tiddler.prototype.clearChangeCount = function()
{
	if(this.fields['changecount']) {
		delete this.fields['changecount'];
	}
};

Tiddler.prototype.doNotSave = function()
{
	return this.fields['doNotSave'];
};

// Returns true if the tiddler has been updated since the tiddler was created or downloaded
Tiddler.prototype.isTouched = function()
{
	var changecount = this.fields.changecount || 0;
	return changecount > 0;
};

// Change the text and other attributes of a tiddler
Tiddler.prototype.set = function(title, text, modifier, modified, tags, created, fields, creator)
{
	this.assign(title, text, modifier, modified, tags, created, fields, creator);
	this.changed();
	return this;
};

// Change the text and other attributes of a tiddler without triggered a tiddler.changed() call
Tiddler.prototype.assign = function(title, text, modifier, modified, tags, created, fields, creator)
{
	if(title != undefined) this.title = title;
	if(text != undefined) this.text = text;
	if(modifier != undefined) this.modifier = modifier;
	if(modified != undefined) this.modified = modified;
	if(creator != undefined) this.creator = creator;
	if(created != undefined) this.created = created;
	if(fields != undefined) this.fields = fields;
	if(tags != undefined) this.tags = (typeof tags == "string") ? tags.readBracketedList() : tags;
	else if(this.tags == undefined) this.tags = [];
	return this;
};

// Get the tags for a tiddler as a string (space delimited, using [[brackets]] for tags containing spaces)
Tiddler.prototype.getTags = function()
{
	return String.encodeTiddlyLinkList(this.tags);
};

// Test if a tiddler carries a tag
Tiddler.prototype.isTagged = function(tag)
{
	return this.tags.indexOf(tag) != -1;
};

// Static method to convert "\n" to newlines, "\s" to "\"
Tiddler.unescapeLineBreaks = function(text)
{
	return text ? text.unescapeLineBreaks() : "";
};

// Convert newlines to "\n", "\" to "\s"
Tiddler.prototype.escapeLineBreaks = function()
{
	return this.text.escapeLineBreaks();
};

// Updates the secondary information (like .links array) after a change to a tiddler
Tiddler.prototype.changed = function()
{
	this.links = [];
	var text = this.text;
	// remove 'quoted' text before scanning tiddler source
	text = text.replace(/\/%((?:.|\n)*?)%\//g, "")
		.replace(/\{{3}((?:.|\n)*?)\}{3}/g, "")
		.replace(/"""((?:.|\n)*?)"""/g, "")
		.replace(/<nowiki\>((?:.|\n)*?)<\/nowiki\>/g, "")
		.replace(/<html\>((?:.|\n)*?)<\/html\>/g, "")
		.replace(/<script((?:.|\n)*?)<\/script\>/g, "");
	var t = this.autoLinkWikiWords() ? 0 : 1;
	var tiddlerLinkRegExp = t == 0 ?
		config.textPrimitives.tiddlerAnyLinkRegExp :
		config.textPrimitives.tiddlerForcedLinkRegExp;
	tiddlerLinkRegExp.lastIndex = 0;
	var formatMatch = tiddlerLinkRegExp.exec(text);
	while(formatMatch) {
		var lastIndex = tiddlerLinkRegExp.lastIndex;
		if(t == 0 && formatMatch[1] && formatMatch[1] != this.title) {
			// wikiWordLink
			if(formatMatch.index > 0) {
				var preRegExp = new RegExp(config.textPrimitives.unWikiLink + "|" +
					config.textPrimitives.anyLetter, "mg");
				preRegExp.lastIndex = formatMatch.index - 1;
				var preMatch = preRegExp.exec(text);
				if(preMatch.index != formatMatch.index - 1)
					this.links.pushUnique(formatMatch[1]);
			} else {
				this.links.pushUnique(formatMatch[1]);
			}
		}
		else if(formatMatch[2 - t] && !config.formatterHelpers.isExternalLink(formatMatch[3 - t]))
			// titledBrackettedLink
			this.links.pushUnique(formatMatch[3 - t]);
		else if(formatMatch[4 - t] && formatMatch[4 - t] != this.title) // brackettedLink
			this.links.pushUnique(formatMatch[4 - t]);
		tiddlerLinkRegExp.lastIndex = lastIndex;
		formatMatch = tiddlerLinkRegExp.exec(text);
	}
	this.linksUpdated = true;
};

Tiddler.prototype.getSubtitle = function()
{
	var modifier = this.modifier || config.messages.subtitleUnknown || "";
	var modified = this.modified ?
		this.modified.toLocaleString() :
		config.messages.subtitleUnknown || "";
	var f = config.messages.tiddlerLinkTooltip || "%0 - %1, %2";
	return f.format([this.title, modifier, modified]);
};

Tiddler.prototype.isReadOnly = function()
{
	return readOnly;
};

Tiddler.prototype.autoLinkWikiWords = function()
{
	return !(this.isTagged("systemConfig") || this.isTagged("excludeMissing"));
};

Tiddler.prototype.getServerType = function()
{
	var serverType = this.fields['server.type'] || this.fields['wikiformat'];
	if(serverType && !config.adaptors[serverType]) return null;
	return serverType;
};

Tiddler.prototype.getAdaptor = function()
{
	var serverType = this.getServerType();
	return serverType ? new config.adaptors[serverType]() : null;
};

//--
//-- TiddlyWiki instance contains TiddlerS
//--

function TiddlyWiki(params)
{
	var tiddlers = {}; // Hashmap by name of tiddlers
	if(params && params.config) {
		this.config = config;
	}
	this.tiddlersUpdated = false;
	this.namedNotifications = []; // Array of {name:,notify:} of notification functions
	this.notificationLevel = 0;
	this.slices = {}; // map tiddlerName->(map sliceName->sliceValue). Lazy.
	this.clear = function() {
		tiddlers = {};
		this.setDirty(false);
	};
	this.fetchTiddler = function(title) {
		var t = tiddlers[title];
		return t instanceof Tiddler ? t : null;
	};
	this.deleteTiddler = function(title) {
		delete this.slices[title];
		delete tiddlers[title];
	};
	this.addTiddler = function(tiddler) {
		delete this.slices[tiddler.title];
		tiddlers[tiddler.title] = tiddler;
	};
	this.forEachTiddler = function(callback) {
		for(var title in tiddlers) {
			var tiddler = tiddlers[title];
			if(tiddler instanceof Tiddler)
				callback.call(this, title, tiddler);
		}
	};
}

TiddlyWiki.prototype.setDirty = function(dirty)
{
	this.dirty = dirty;
};

TiddlyWiki.prototype.isDirty = function()
{
	return this.dirty;
};

TiddlyWiki.prototype.tiddlerExists = function(title)
{
	return this.fetchTiddler(title) != undefined;
};

TiddlyWiki.prototype.isShadowTiddler = function(title)
{
	return config.shadowTiddlers[title] === undefined ? false : true;
};

TiddlyWiki.prototype.isAvailable = function(title) {
	if(!title) return false;
	var i = title.indexOf(config.textPrimitives.sectionSeparator);
	if(i != -1) title = title.substring(0, i);
	return this.tiddlerExists(title) || this.isShadowTiddler(title);
};

TiddlyWiki.prototype.createTiddler = function(title)
{
	var tiddler = this.fetchTiddler(title);
	if(!tiddler) {
		tiddler = new Tiddler(title);
		this.addTiddler(tiddler);
		this.setDirty(true);
	}
	return tiddler;
};

TiddlyWiki.prototype.getTiddler = function(title)
{
	return this.fetchTiddler(title) || null;
};

TiddlyWiki.prototype.getShadowTiddlerText = function(title)
{
	return (typeof config.shadowTiddlers[title] == "string")
		? config.shadowTiddlers[title]
		: "";
};

// Retrieve tiddler contents
TiddlyWiki.prototype.getTiddlerText = function(title, defaultText)
{
	if(!title) return defaultText;

	var pos = title.indexOf(config.textPrimitives.sectionSeparator);
	var section = null;
	if(pos != -1) {
		section = title.substr(pos + config.textPrimitives.sectionSeparator.length);
		title = title.substr(0, pos);
	}
	pos = title.indexOf(config.textPrimitives.sliceSeparator);
	if(pos != -1) {
		var sliceNameStart = pos + config.textPrimitives.sliceSeparator.length;
		var slice = this.getTiddlerSlice(title.substr(0, pos), title.substr(sliceNameStart));
		if(slice) return slice;
	}

	var tiddler = this.fetchTiddler(title);
	var text = tiddler ? tiddler.text : null;
	if(!tiddler && this.isShadowTiddler(title)) {
		text = this.getShadowTiddlerText(title);
	}
	if(!text) return defaultText != undefined ? defaultText : null;
	if(!section) return text;

	var headerRE = new RegExp("(^!{1,6}[ \t]*" + section.escapeRegExp() + "[ \t]*\n)", "mg");
	headerRE.lastIndex = 0;
	var match = headerRE.exec(text);
	if(!match) return defaultText;

	var t = text.substr(match.index + match[1].length);
	var nextHeaderRE = /^!/mg;
	nextHeaderRE.lastIndex = 0;
	match = nextHeaderRE.exec(t);
	return !match ? t :
		// don't include final \n
		t.substr(0, match.index - 1);
};

TiddlyWiki.prototype.getRecursiveTiddlerText = function(title, defaultText, depth)
{
	var text = this.getTiddlerText(title, null);
	if(text == null) return defaultText;

	var bracketRegExp = new RegExp("(?:\\[\\[([^\\]]+)\\]\\])", "mg");
	var textOut = [], match, lastPos = 0;
	do {
		if(match = bracketRegExp.exec(text)) {
			textOut.push(text.substr(lastPos, match.index - lastPos));
			if(match[1]) {
				if(depth <= 0)
					textOut.push(match[1]);
				else
					textOut.push(this.getRecursiveTiddlerText(match[1], "", depth - 1));
			}
			lastPos = match.index + match[0].length;
		} else {
			textOut.push(text.substr(lastPos));
		}
	} while(match);
	return textOut.join("");
};

//TiddlyWiki.prototype.slicesRE = /(?:^([\'\/]{0,2})~?([\.\w]+)\:\1[\t\x20]*([^\n]+)[\t\x20]*$)|(?:^\|([\'\/]{0,2})~?([\.\w]+)\:?\4\|[\t\x20]*([^\n]+)[\t\x20]*\|$)/gm;
TiddlyWiki.prototype.slicesRE = /(?:^([\'\/]{0,2})~?([\.\w]+)\:\1[\t\x20]*([^\n]+)[\t\x20]*$)|(?:^\|\x20?([\'\/]{0,2})~?([^\|\s\:\~\'\/]|(?:[^\|\s~\'\/][^\|\n\f\r]*[^\|\s\:\'\/]))\:?\4[\x20\t]*\|[\t\x20]*([^\n\t\x20](?:[^\n]*[^\n\t\x20])?)[\t\x20]*\|$)/gm; // #112
// @internal
TiddlyWiki.prototype.calcAllSlices = function(title)
{
	var text = this.getTiddlerText(title, "");
	this.slicesRE.lastIndex = 0;
	var slices = {}, m;
	while(m = this.slicesRE.exec(text)) {
		if(m[2])
			slices[m[2]] = m[3];
		else
			slices[m[5]] = m[6];
	}
	return slices;
};

// Returns the slice of text of the given name
TiddlyWiki.prototype.getTiddlerSlice = function(title, sliceName)
{
	var slices = this.slices[title];
	if(!slices) {
		slices = this.calcAllSlices(title);
		this.slices[title] = slices;
	}
	return slices[sliceName];
};

// Build an hashmap of the specified named slices of a tiddler
TiddlyWiki.prototype.getTiddlerSlices = function(title, sliceNames)
{
	var i, r = {};
	for(i = 0; i < sliceNames.length; i++) {
		var slice = this.getTiddlerSlice(title, sliceNames[i]);
		if(slice) r[sliceNames[i]] = slice;
	}
	return r;
};

TiddlyWiki.prototype.suspendNotifications = function()
{
	this.notificationLevel--;
};

TiddlyWiki.prototype.resumeNotifications = function()
{
	this.notificationLevel++;
};

// Invoke the notification handlers for a particular tiddler
TiddlyWiki.prototype.notify = function(title, doBlanket)
{
	if(this.notificationLevel) return;
	for(var i = 0; i < this.namedNotifications.length; i++) {
		var n = this.namedNotifications[i];
		if((n.name == null && doBlanket) || (n.name == title))
			n.notify(title);
	}
};

// Invoke the notification handlers for all tiddlers
TiddlyWiki.prototype.notifyAll = function()
{
	if(this.notificationLevel) return;
	for(var i = 0; i < this.namedNotifications.length; i++) {
		var n = this.namedNotifications[i];
		if(n.name)
			n.notify(n.name);
	}
};

// Add a notification handler to a tiddler unless it's already set
TiddlyWiki.prototype.addNotification = function(title, fn)
{
	for(var i = 0; i < this.namedNotifications.length; i++) {
		if((this.namedNotifications[i].name == title) && (this.namedNotifications[i].notify == fn))
			return this;
	}
	this.namedNotifications.push({ name: title, notify: fn });
	return this;
};

TiddlyWiki.prototype.removeTiddler = function(title)
{
	var tiddler = this.fetchTiddler(title);
	if(tiddler) {
		this.deleteTiddler(title);
		this.notify(title, true);
		this.setDirty(true);
	}
};

// Reset the sync status of a freshly synced tiddler
TiddlyWiki.prototype.resetTiddler = function(title)
{
	var tiddler = this.fetchTiddler(title);
	if(tiddler) {
		tiddler.clearChangeCount();
		this.notify(title, true);
		this.setDirty(true);
	}
};

TiddlyWiki.prototype.setTiddlerTag = function(title, status, tag)
{
	var tiddler = this.fetchTiddler(title);
	if(!tiddler) return;

	var t = tiddler.tags.indexOf(tag);
	if(t != -1)
		tiddler.tags.splice(t, 1);
	if(status)
		tiddler.tags.push(tag);

	tiddler.changed();
	tiddler.incChangeCount();
	this.notify(title, true);
	this.setDirty(true);
};

TiddlyWiki.prototype.addTiddlerFields = function(title, fields)
{
	var tiddler = this.fetchTiddler(title);
	if(!tiddler) return;

	merge(tiddler.fields, fields);
	tiddler.changed();
	tiddler.incChangeCount();
	this.notify(title, true);
	this.setDirty(true);
};

// Store tiddler in TiddlyWiki instance
TiddlyWiki.prototype.saveTiddler = function(titleOrTiddler, newTitle, newBody,
	modifier, modified, tags, fields, clearChangeCount, created, creator)
{
	var wasTiddlerProvided = titleOrTiddler instanceof Tiddler;
	var tiddler = this.resolveTiddler(titleOrTiddler);
	var title = tiddler ? tiddler.title : titleOrTiddler;
	newTitle = newTitle || title;

	if(tiddler) {
		this.deleteTiddler(title); //# clean up slices for title, make sure the tiddler is not copied when renamed
		created = created || tiddler.created; // Preserve created date
		creator = creator || tiddler.creator;
	} else {
		tiddler = new Tiddler();
		created = created || modified;
	}

	if(wasTiddlerProvided) {
		tiddler.fields = merge(merge({}, tiddler.fields), config.defaultCustomFields, true);
	} else {
		fields = merge(merge({}, fields), config.defaultCustomFields, true);
		tiddler.set(newTitle, newBody, modifier, modified, tags, created, fields, creator);
	}
	if(clearChangeCount)
		tiddler.clearChangeCount();
	else
		tiddler.incChangeCount();

	this.addTiddler(tiddler); //# clean up slices for newTitle, add/return the tiddler
	if(title != newTitle) this.notify(title, true);
	this.notify(newTitle, true);
	this.setDirty(true);

	return tiddler;
};

TiddlyWiki.prototype.incChangeCount = function(title)
{
	var tiddler = this.fetchTiddler(title);
	if(tiddler)
		tiddler.incChangeCount();
};

TiddlyWiki.prototype.getLoader = function()
{
	if(!this.loader)
		this.loader = new TW21Loader();
	return this.loader;
};

TiddlyWiki.prototype.getSaver = function()
{
	if(!this.saver)
		this.saver = new TW21Saver();
	return this.saver;
};

// Return all tiddlers formatted as an HTML string
TiddlyWiki.prototype.allTiddlersAsHtml = function()
{
	return this.getSaver().externalize(store);
};

// Load contents of a TiddlyWiki from an HTML DIV
TiddlyWiki.prototype.loadFromDiv = function(src, idPrefix, noUpdate)
{
	var storeElem = (typeof src == "string") ? document.getElementById(src) : src;
	if(!storeElem) return;

	this.idPrefix = idPrefix;
	var tiddlers = this.getLoader().loadTiddlers(this, storeElem.childNodes);
	this.setDirty(false);
	if(!noUpdate) {
		for(var i = 0; i < tiddlers.length; i++)
			tiddlers[i].changed();
	}
	jQuery(document).trigger("loadTiddlers");
};

// Load contents of a TiddlyWiki from a string
// Returns null if there's an error
TiddlyWiki.prototype.importTiddlyWiki = function(text)
{
	var posDiv = locateStoreArea(text);
	if(!posDiv) return null;
	var content = "<" + "html><" + "body>" + text.substring(posDiv[0], posDiv[1] + endSaveArea.length) + "<" + "/body><" + "/html>";

	// Create an iframe
	var iframe = document.createElement("iframe");
	iframe.style.display = "none";
	document.body.appendChild(iframe);
	var doc = iframe.document;
	if(iframe.contentDocument)
		doc = iframe.contentDocument; // For NS6
	else if(iframe.contentWindow)
		doc = iframe.contentWindow.document; // For IE5.5 and IE6

	// Put the content in the iframe
	doc.open();
	doc.writeln(content);
	doc.close();

	// Load the content into a TiddlyWiki() object
	var storeArea = doc.getElementById("storeArea");
	this.loadFromDiv(storeArea, "store");

	iframe.parentNode.removeChild(iframe);
	return this;
};

TiddlyWiki.prototype.updateTiddlers = function()
{
	this.tiddlersUpdated = true;
	this.forEachTiddler(function(title, tiddler) {
		tiddler.changed();
	});
};

// Return an array of tiddlers matching a search regular expression
TiddlyWiki.prototype.search = function(searchRegExp, sortField, excludeTag, match)
{
	var candidates = this.reverseLookup("tags", excludeTag, !!match);
	var i, results = [];
	for(i = 0; i < candidates.length; i++) {
		if((candidates[i].title.search(searchRegExp) != -1) || (candidates[i].text.search(searchRegExp) != -1))
			results.push(candidates[i]);
	}
	if(!sortField) sortField = "title";
	results.sort(function(a, b) { return a[sortField] < b[sortField] ? -1 : (a[sortField] == b[sortField] ? 0 : +1) });
	return results;
};

// Returns a list of all tags in use (in the form of an array of [tagName, numberOfOccurances] "tuples")
//   excludeTag - if present, excludes tags that are themselves tagged with excludeTag
TiddlyWiki.prototype.getTags = function(excludeTag)
{
	var results = [];
	this.forEachTiddler(function(title, tiddler) {
	    var i, j;
		for(i = 0; i < tiddler.tags.length; i++) {
			var tag = tiddler.tags[i];
			var isTagToAdd = true;
			for(j = 0; j < results.length; j++) {
				if(results[j][0] == tag) {
					isTagToAdd = false;
					results[j][1]++;
				}
			}
			if(isTagToAdd && excludeTag) {
				var t = this.fetchTiddler(tag);
				if(t && t.isTagged(excludeTag))
					isTagToAdd = false;
			}
			if(isTagToAdd) results.push([tag, 1]);
		}
	});
	results.sort(function(a, b) {
		var tag1 = a[0].toLowerCase(), tag2 = b[0].toLowerCase();
		return tag1 < tag2 ? -1 : (tag1 == tag2 ? 0 : +1);
	});
	return results;
};

// Return an array of the tiddlers that are tagged with a given tag
TiddlyWiki.prototype.getTaggedTiddlers = function(tag, sortField)
{
	return this.reverseLookup("tags", tag, true, sortField);
};

TiddlyWiki.prototype.getValueTiddlers = function(field, value, sortField)
{
	return this.reverseLookup(field, value, true, sortField);
};

// Return an array of the tiddlers that link to a given tiddler
TiddlyWiki.prototype.getReferringTiddlers = function(title, unusedParameter, sortField)
{
	if(!this.tiddlersUpdated)
		this.updateTiddlers();
	return this.reverseLookup("links", title, true, sortField);
};

// Return an array of the tiddlers that have a specified entry (lookupValue) in the specified field (lookupField, like "links" or "tags")
// if shouldMatch == true, or don't have such entry (if shouldMatch == false)
TiddlyWiki.prototype.reverseLookup = function(lookupField, lookupValue, shouldMatch, sortField)
{
	var results = [];
	this.forEachTiddler(function(title, tiddler) {
		var values;
		if(["links", "tags"].contains(lookupField)) {
			values = tiddler[lookupField];
		} else {
			var accessor = TiddlyWiki.standardFieldAccess[lookupField];
			values = accessor ? [ accessor.get(tiddler) ] :
				( tiddler.fields[lookupField] ? [tiddler.fields[lookupField]] : [] );
		}

		var hasMatch = false;
		for(var i = 0; i < values.length; i++) {
			if(values[i] == lookupValue)
				hasMatch = true;
		}
		if(hasMatch == !!shouldMatch) results.push(tiddler);
	});
	return this.sortTiddlers(results, sortField || "title");
};

// Return the tiddlers as a sorted array
TiddlyWiki.prototype.getTiddlers = function(field, excludeTag)
{
	var results = [];
	this.forEachTiddler(function(title, tiddler) {
		if(excludeTag == undefined || !tiddler.isTagged(excludeTag))
			results.push(tiddler);
	});
	if(field) results.sort(function(a, b) { return a[field] < b[field] ? -1 : (a[field] == b[field] ? 0 : +1) });
	return results;
};

// Return array of names of tiddlers that are referred to but not defined
TiddlyWiki.prototype.getMissingLinks = function()
{
	if(!this.tiddlersUpdated) this.updateTiddlers();

	var results = [];
	this.forEachTiddler(function (title, tiddler) {
		if(tiddler.isTagged("excludeMissing") || tiddler.isTagged("systemConfig"))
			return;

		for(var i = 0; i < tiddler.links.length; i++) {
			var link = tiddler.links[i];
			if(this.getTiddlerText(link, null) == null && !this.isShadowTiddler(link) && !config.macros[link])
				results.pushUnique(link);
		}
	});
	results.sort();
	return results;
};

// Return an array of names of tiddlers that are defined but not referred to
TiddlyWiki.prototype.getOrphans = function()
{
	var results = [];
	this.forEachTiddler(function (title, tiddler) {
		if(this.getReferringTiddlers(title).length == 0 && !tiddler.isTagged("excludeLists"))
			results.push(title);
	});
	results.sort();
	return results;
};

// Return an array of names of all the shadow tiddlers
TiddlyWiki.prototype.getShadowed = function()
{
	var t, results = [];
	for(t in config.shadowTiddlers) {
		if(this.isShadowTiddler(t))
			results.push(t);
	}
	results.sort();
	return results;
};

// Return an array of tiddlers that have been touched since they were downloaded or created
TiddlyWiki.prototype.getTouched = function()
{
	var results = [];
	this.forEachTiddler(function(title, tiddler) {
		if(tiddler.isTouched())
			results.push(tiddler);
	});
	results.sort();
	return results;
};

// Resolves a Tiddler reference or tiddler title into a Tiddler object, or null if it doesn't exist
TiddlyWiki.prototype.resolveTiddler = function(tiddler)
{
	var t = (typeof tiddler == "string") ? this.getTiddler(tiddler) : tiddler;
	return t instanceof Tiddler ? t : null;
};

// Sort a list of tiddlers
TiddlyWiki.prototype.sortTiddlers = function(tiddlers, field)
{
	var asc = +1;
	switch(field.substr(0, 1)) {
		case "-":
			asc = -1;
			field = field.substr(1);
			break;
		case "+":
			field = field.substr(1);
			break;
	}
	if(TiddlyWiki.standardFieldAccess[field]) {
		if(field == "title") {
			tiddlers.sort(function(a, b) {
				var t1 = a[field].toLowerCase(), t2 = b[field].toLowerCase();
				return t1 < t2 ? -asc : (t1 == t2 ? 0 : asc);
			});
		} else {
			tiddlers.sort(function(a, b) {
				return a[field] < b[field] ? -asc : (a[field] == b[field] ? 0 : asc);
			});
		}
	} else {
		tiddlers.sort(function(a, b) {
			return a.fields[field] < b.fields[field] ? -asc : (a.fields[field] == b.fields[field] ? 0 : +asc);
		});
	}
	return tiddlers;
};

//--
//-- Filter a list of tiddlers
//--

config.filters = {
	tiddler: function(results, match) {
		var title = match[1] || match[4];
		var tiddler = this.fetchTiddler(title);
		if(tiddler) {
			results.pushUnique(tiddler);
		} else if(this.isShadowTiddler(title)) {
			tiddler = new Tiddler();
			tiddler.set(title, this.getTiddlerText(title));
			results.pushUnique(tiddler);
		} else {
			results.pushUnique(new Tiddler(title));
		}
		return results;
	},
	tag: function(results, match) {
		var i, matched = this.getTaggedTiddlers(match[3]);
		for(i = 0; i < matched.length; i++) {
			results.pushUnique(matched[i]);
		}
		return results;
	},
	sort: function(results, match) {
		return this.sortTiddlers(results, match[3]);
	},
	limit: function(results, match) {
		return results.slice(0, parseInt(match[3], 10));
	},
	field: function(results, match) {
		var i, matched = this.getValueTiddlers(match[2], match[3]);
		for (i = 0; i < matched.length; i++) {
			results.pushUnique(matched[i]);
		}
		return results;
	}
};

// Filter a list of tiddlers
TiddlyWiki.prototype.filterTiddlers = function(filter, results)
{
	var re = /([^\s\[\]]+)|(?:\[([ \w\.\-]+)\[([^\]]+)\]\])|(?:\[\[([^\]]+)\]\])/mg;

	results = results || [];
	if(filter) {
		var match;
		while(match = re.exec(filter)) {
			var handler = (match[1] || match[4]) ? 'tiddler' :
				config.filters[match[2]] ? match[2] : 'field';
			results = config.filters[handler].call(this, results, match);
		}
	}
	return results;
};

// Returns true if path is a valid field name (path),
// i.e. a sequence of identifiers, separated by "."
TiddlyWiki.isValidFieldName = function(name)
{
	var match = /[a-zA-Z_]\w*(\.[a-zA-Z_]\w*)*/.exec(name);
	return match && (match[0] == name);
};

// Throws an exception when name is not a valid field name.
TiddlyWiki.checkFieldName = function(name)
{
	if(!TiddlyWiki.isValidFieldName(name))
		throw config.messages.invalidFieldName.format([name]);
};

function StringFieldAccess(fName, readOnly)
{
	this.set = readOnly ?
		function(tiddler, newValue) {
			if(newValue != tiddler[fName]) throw config.messages.fieldCannotBeChanged.format([fName]);
		} :
		function(tiddler, newValue) {
			if(newValue == tiddler[fName]) return;
			tiddler[fName] = newValue;
			return true;
		};
	this.get = function(tiddler) { return tiddler[fName] };
}

function DateFieldAccess(fName)
{
	this.set = function(tiddler, newValue) {
		var d = newValue instanceof Date ? newValue : Date.convertFromYYYYMMDDHHMM(newValue);
		if(d == tiddler[fName]) return;
		tiddler[fName] = d;
		return true;
	};
	this.get = function(tiddler) { return tiddler[fName].convertToYYYYMMDDHHMM() };
}

function LinksFieldAccess(fName)
{
	this.set = function(tiddler, newValue) {
		var items = (typeof newValue == "string") ? newValue.readBracketedList() : newValue;
		if(items.toString() == tiddler[fName].toString()) return;
		tiddler[fName] = items;
		return true;
	};
	this.get = function(tiddler) { return String.encodeTiddlyLinkList(tiddler[fName]) };
}

TiddlyWiki.standardFieldAccess = {
	// The set functions return true when setting the data has changed the value.
	"title":    new StringFieldAccess("title", true),
	// Handle the "tiddler" field name as the title
	"tiddler":  new StringFieldAccess("title", true),
	"text":     new StringFieldAccess("text"),
	"modifier": new StringFieldAccess("modifier"),
	"modified": new DateFieldAccess("modified"),
	"creator":  new StringFieldAccess("creator"),
	"created":  new DateFieldAccess("created"),
	"tags":     new LinksFieldAccess("tags")
};

TiddlyWiki.isStandardField = function(name)
{
	return TiddlyWiki.standardFieldAccess[name] != undefined;
};

// Sets the value of the given field of the tiddler to the value.
// Setting an ExtendedField's value to null or undefined removes the field.
// Setting a namespace to undefined removes all fields of that namespace.
// The fieldName is case-insensitive.
// All values will be converted to a string value.
TiddlyWiki.prototype.setValue = function(tiddlerOrTitle, fieldName, value)
{
	TiddlyWiki.checkFieldName(fieldName);
	var t = this.resolveTiddler(tiddlerOrTitle);
	if(!t) return;

	fieldName = fieldName.toLowerCase();
	var isRemove = (value === undefined) || (value === null);
	var accessor = TiddlyWiki.standardFieldAccess[fieldName];
	if(accessor) {
		// don't remove StandardFields
		if(isRemove) return;
		if(!accessor.set(t, value)) return;
	} else {
		var oldValue = t.fields[fieldName];
		if(isRemove) {
			if(oldValue !== undefined) {
				// deletes a single field
				delete t.fields[fieldName];
			} else {
				// no concrete value is defined for the fieldName
				// so we guess this is a namespace path.
				// delete all fields in a namespace
				var re = new RegExp("^" + fieldName + "\\.");
				var dirty = false;
				for(var n in t.fields) {
					if(n.match(re)) {
						delete t.fields[n];
						dirty = true;
					}
				}
				if(!dirty) return;
			}
		} else {
			// the "normal" set case. value is defined (not null/undefined)
			// For convenience convert Date -> String
			value = value instanceof Date ? value.convertToYYYYMMDDHHMMSSMMM() : String(value);
			if(oldValue == value) return;
			t.fields[fieldName] = value;
		}
	}

	// When we are here the tiddler/store really was changed.
	this.notify(t.title, true);
	if(!fieldName.match(/^temp\./))
		this.setDirty(true);
};

// Returns the value of the given field of the tiddler.
// The fieldName is case-insensitive.
// Will only return String values (or undefined).
TiddlyWiki.prototype.getValue = function(tiddlerOrTitle, fieldName)
{
	var t = this.resolveTiddler(tiddlerOrTitle);
	if(!t) return undefined;

	if(fieldName.indexOf(config.textPrimitives.sectionSeparator) === 0 ||
	   fieldName.indexOf(config.textPrimitives.sliceSeparator) === 0
	) {
		var separator = fieldName.substr(0, 2);
		var partName = fieldName.substring(2);
		return store.getTiddlerText(t.title + separator + partName);
	} else {
		fieldName = fieldName.toLowerCase();
		var accessor = TiddlyWiki.standardFieldAccess[fieldName];
		if(accessor) return accessor.get(t);
	}
	return t.fields[fieldName];
};

// Calls the callback function for every field in the tiddler.
// When callback function returns a non-false value the iteration stops
// and that value is returned.
// The order of the fields is not defined.
// @param callback a function(tiddler, fieldName, value).
TiddlyWiki.prototype.forEachField = function(tiddlerOrTitle, callback, onlyExtendedFields)
{
	var t = this.resolveTiddler(tiddlerOrTitle);
	if(!t) return undefined;

	var name, result;
	for(name in t.fields) {
		result = callback(t, name, t.fields[name]);
		if(result) return result;
	}

	if(onlyExtendedFields) return undefined;
	for(name in TiddlyWiki.standardFieldAccess) {
		// even though the "title" field can also be referenced through the name "tiddler"
		// we only visit this field once.
		if(name == "tiddler") continue;

		result = callback(t, name, TiddlyWiki.standardFieldAccess[name].get(t));
		if(result) return result;
	}
	return undefined;
};

//--
//-- Story functions
//--

// A story is a HTML div containing a sequence of tiddlers that can be manipulated
//  container - id of containing element
//  idPrefix - string prefix prepended to title to make ids for tiddlers in this story
function Story(containerId, idPrefix)
{
	this.container = containerId;
	this.idPrefix = idPrefix;
	this.highlightRegExp = null;
	this.tiddlerId = function(title) {
		var validId = title.replace(/_/g, "__").replace(/ /g, "_");
		var id = this.idPrefix + validId;
		return id == this.container ? this.idPrefix + "_" + validId : id;
	};
	this.containerId = function() {
		return this.container;
	};
}

Story.prototype.getTiddler = function(title)
{
	return document.getElementById(this.tiddlerId(title));
};

Story.prototype.getContainer = function()
{
	return document.getElementById(this.containerId());
};

Story.prototype.forEachTiddler = function(handleTiddler)
{
	var place = this.getContainer();
	if(!place) return;
	var el = place.firstChild;
	while(el) {
		var next = el.nextSibling;
		var title = el.getAttribute("tiddler");
		if(title) {
			handleTiddler.call(this, title, el);
		}
		el = next;
	}
};

Story.prototype.displayTiddler = function(srcElement, tiddler,
	template, animate, unused, customFields, toggle, animationSrc)
{
	var title = (tiddler instanceof Tiddler) ? tiddler.title : tiddler;
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem) {
		if(toggle) {
			if(tiddlerElem.getAttribute("dirty") != "true")
				this.closeTiddler(title, true);
		} else {
			this.refreshTiddler(title, template, false, customFields);
		}
	} else {
		var place = this.getContainer();
		var before = this.positionTiddler(srcElement);
		tiddlerElem = this.createTiddler(place, before, title, template, customFields);
	}

	if(animationSrc && typeof animationSrc !== "string") {
		srcElement = animationSrc;
	}
	if(srcElement && typeof srcElement !== "string") {
		if(config.options.chkAnimate && (animate == undefined || animate == true) && anim &&
		   typeof Zoomer == "function" && typeof Scroller == "function")
			anim.startAnimating(new Zoomer(title, srcElement, tiddlerElem), new Scroller(tiddlerElem));
		else
			window.scrollTo(0, ensureVisible(tiddlerElem));
	}
	return tiddlerElem;
};

Story.prototype.displayTiddlers = function(srcElement, titles, template, animate, unused, customFields, toggle)
{
	for(var i = titles.length - 1; i >= 0; i--)
		this.displayTiddler(srcElement, titles[i], template, animate, unused, customFields);
};

Story.prototype.displayDefaultTiddlers = function()
{
	this.displayTiddlers(null, store.filterTiddlers(store.getTiddlerText("DefaultTiddlers")));
};

Story.prototype.positionTiddler = function(srcElement)
{
	var place = this.getContainer();
	var before = null;
	if(typeof srcElement == "string") {
		switch(srcElement) {
			case "top":
				before = place.firstChild;
				break;
			case "bottom":
				before = null;
				break;
		}
	} else {
		var after = this.findContainingTiddler(srcElement);
		if(after == null) {
			before = place.firstChild;
		} else if(after.nextSibling) {
			before = after.nextSibling;
			if(before.nodeType != 1)
				before = null;
		}
	}
	return before;
};

Story.prototype.createTiddler = function(place, before, title, template, customFields)
{
	var tiddlerElem = createTiddlyElement(null, "div", this.tiddlerId(title), "tiddler");
	tiddlerElem.setAttribute("refresh", "tiddler");
	if(customFields)
		tiddlerElem.setAttribute("tiddlyFields", customFields);
	place.insertBefore(tiddlerElem, before);
	var defaultText = null;
	if(!store.tiddlerExists(title) && !store.isShadowTiddler(title))
		defaultText = this.loadMissingTiddler(title, customFields);
	this.refreshTiddler(title, template, false, customFields, defaultText);
	return tiddlerElem;
};

Story.prototype.loadMissingTiddler = function(title, fields, callback)
{
	var tiddler = new Tiddler(title);
	tiddler.fields = typeof fields == "string" ? fields.decodeHashMap() : fields || {};
	var context = { serverType: tiddler.getServerType() };
	if(!context.serverType) return "";
	context.host = tiddler.fields['server.host'];
	context.workspace = tiddler.fields['server.workspace'];
	var adaptor = new config.adaptors[context.serverType]();

	var onLoadTiddlerResponse = function(context)
	{
		if(context.status) {
			var t = context.tiddler;
			t.created  = t.created  || new Date();
			t.modified = t.modified || t.created;
			var dirty = store.isDirty();
			context.tiddler = store.saveTiddler(t.title, t.title, t.text, t.modifier, t.modified,
				t.tags, t.fields, true, t.created, t.creator);
			if(!window.allowSave())
				store.setDirty(dirty);
			autoSaveChanges();
		} else {
			story.refreshTiddler(context.title, null, true);
		}
		context.adaptor.close();
		if(callback) callback(context);
	};
	adaptor.getTiddler(title, context, null, onLoadTiddlerResponse);
	return config.messages.loadingMissingTiddler.format([title, context.serverType, context.host, context.workspace]);
};

Story.prototype.chooseTemplateForTiddler = function(title, template)
{
	if(!template)
		template = DEFAULT_VIEW_TEMPLATE;
	if(template == DEFAULT_VIEW_TEMPLATE || template == DEFAULT_EDIT_TEMPLATE)
		template = config.tiddlerTemplates[template];
	return template;
};

Story.prototype.getTemplateForTiddler = function(title, template, tiddler)
{
	return store.getRecursiveTiddlerText(template, null, 10);
};

Story.prototype.refreshTiddler = function(title, template, force, customFields, defaultText)
{
	var tiddlerElem = this.getTiddler(title);
	if(!tiddlerElem) return null;

	if(tiddlerElem.getAttribute("dirty") == "true" && !force)
		return tiddlerElem;
	template = this.chooseTemplateForTiddler(title, template);
	var currTemplate = tiddlerElem.getAttribute("template");
	if((template == currTemplate) && !force)
		return tiddlerElem;

	var tiddler = store.getTiddler(title);
	if(!tiddler) {
		tiddler = new Tiddler();
		if(store.isShadowTiddler(title)) {
			var tags = [];
			tiddler.set(title, store.getTiddlerText(title),
				config.views.wikified.shadowModifier, version.date, tags, version.date);
		} else {
			var text = template == config.tiddlerTemplates[DEFAULT_EDIT_TEMPLATE] // #166
				? config.views.editor.defaultText.format([title])
				: config.views.wikified.defaultText.format([title]);
			text = defaultText || text;
			var fields = customFields ? customFields.decodeHashMap() : null;
			tiddler.set(title, text, config.views.wikified.defaultModifier, version.date, [], version.date, fields);
		}
	}

	tiddlerElem.setAttribute("tags", tiddler.tags.join(" "));
	tiddlerElem.setAttribute("tiddler", title);
	tiddlerElem.setAttribute("template", template);
	tiddlerElem.onmouseover = this.onTiddlerMouseOver;
	tiddlerElem.onmouseout = this.onTiddlerMouseOut;
	tiddlerElem.ondblclick = this.onTiddlerDblClick;
	tiddlerElem[window.event ? "onkeydown" : "onkeypress"] = this.onTiddlerKeyPress;
	tiddlerElem.innerHTML = this.getTemplateForTiddler(title, template, tiddler);
	applyHtmlMacros(tiddlerElem, tiddler);
	if(store.getTaggedTiddlers(title).length > 0)
		jQuery(tiddlerElem).addClass("isTag");
	else
		jQuery(tiddlerElem).removeClass("isTag");
	if(store.tiddlerExists(title)) {
		jQuery(tiddlerElem).removeClass("shadow");
		jQuery(tiddlerElem).removeClass("missing");
	} else {
		jQuery(tiddlerElem).addClass(store.isShadowTiddler(title) ? "shadow" : "missing");
	}
	if(customFields)
		this.addCustomFields(tiddlerElem, customFields);

	return tiddlerElem;
};

Story.prototype.addCustomFields = function(place, customFields)
{
	var fields = customFields.decodeHashMap();
	var container = createTiddlyElement(place, "div", null, "customFields");
	container.style.display = "none";
	for(var fieldName in fields) {
		var input = document.createElement("input");
		input.setAttribute("type", "text");
		input.setAttribute("value", fields[fieldName]);
		container.appendChild(input);
		input.setAttribute("edit", fieldName);
	}
};

Story.prototype.refreshAllTiddlers = function(force)
{
	this.forEachTiddler(function(title, element) {
		var template = element.getAttribute("template");
		if(template && element.getAttribute("dirty") != "true") {
			this.refreshTiddler(title, force ? null : template, true);
		}
	});
};

Story.prototype.onTiddlerMouseOver = function()
{
	jQuery(this).addClass("selected");
};

Story.prototype.onTiddlerMouseOut = function()
{
	jQuery(this).removeClass("selected");
};

Story.prototype.onTiddlerDblClick = function(ev)
{
	var e = ev || window.event;
	var target = resolveTarget(e);
	if(!target || target.nodeName.toLowerCase() == "input" || target.nodeName.toLowerCase() == "textarea")
		return false;
	if(document.selection && document.selection.empty)
		document.selection.empty();
	config.macros.toolbar.invokeCommand(this, "defaultCommand", e);
	e.cancelBubble = true;
	if(e.stopPropagation) e.stopPropagation();
	return true;
};

Story.prototype.onTiddlerKeyPress = function(ev)
{
	var e = ev || window.event;
	clearMessage();
	var consume = false;
	var title = this.getAttribute("tiddler");
	var target = resolveTarget(e);
	switch(e.keyCode) {
		case 9: // Tab
			var editor = story.getTiddlerField(title, "text");
			if(target.tagName.toLowerCase() == "input"
			   && editor.value == config.views.editor.defaultText.format([title])) {
				// moving from input field and editor still contains default text, so select it
				editor.focus();
				editor.select();
				consume = true;
			}
			if(config.options.chkInsertTabs && !e.ctrlKey && target.tagName.toLowerCase() == "textarea") {
				replaceSelection(target, String.fromCharCode(9));
				consume = true;
			}
			if(config.isOpera) {
				target.onblur = function() {
					this.focus();
					this.onblur = null;
				};
			}
			break;
		case 13: // Ctrl-Enter
		case 10: // Ctrl-Enter on IE PC
		case 77: // Ctrl-Enter is "M" on some platforms
			if(e.ctrlKey) {
				blurElement(this);
				config.macros.toolbar.invokeCommand(this, "defaultCommand", e);
				consume = true;
			}
			break;
		case 27: // Escape
			blurElement(this);
			config.macros.toolbar.invokeCommand(this, "cancelCommand", e);
			consume = true;
			break;
	}
	e.cancelBubble = consume;
	if(consume) {
		if(e.stopPropagation) e.stopPropagation(); // Stop Propagation
		e.returnValue = true; // Cancel The Event in IE
		if(e.preventDefault) e.preventDefault(); // Cancel The Event in Moz
	}
	return !consume;
};

Story.prototype.getTiddlerField = function(title, field)
{
	var tiddlerElem = this.getTiddler(title);
	if(!tiddlerElem) return null;

	var $editors = jQuery(tiddlerElem).find('input, textarea');
	return $editors.filter('[edit="' + field + '"]')[0] || $editors[0] || null;
};

Story.prototype.focusTiddler = function(title, field)
{
	var e = this.getTiddlerField(title, field);
	if(e) {
		e.focus();
		e.select();
	}
};

Story.prototype.blurTiddler = function(title)
{
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem && tiddlerElem.focus && tiddlerElem.blur) {
		tiddlerElem.focus();
		tiddlerElem.blur();
	}
};

Story.prototype.setTiddlerField = function(title, tag, mode, field)
{
	var editor = this.getTiddlerField(title, field);
	var tags = editor.value.readBracketedList();
	tags.setItem(tag, mode);
	editor.value = String.encodeTiddlyLinkList(tags);
};

Story.prototype.setTiddlerTag = function(title, tag, mode)
{
	this.setTiddlerField(title, tag, mode, "tags");
};

Story.prototype.closeTiddler = function(title, shouldAnimate, unused)
{
	var tiddlerElem = this.getTiddler(title);
	if(!tiddlerElem) return;

	clearMessage();
	this.scrubTiddler(tiddlerElem);
	if(config.options.chkAnimate && shouldAnimate && anim && typeof Slider == "function") {
		anim.startAnimating(new Slider(tiddlerElem, false, null, "all"));
	} else {
		jQuery(tiddlerElem).remove();
	}
};

Story.prototype.scrubTiddler = function(tiddlerElement)
{
	tiddlerElement.id = null;
};

// 'dirty' flag attribute is used on tiddlers to mark those having unsaved changes

Story.prototype.setDirty = function(title, dirty)
{
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem)
		tiddlerElem.setAttribute("dirty", dirty ? "true" : "false");
};

Story.prototype.isDirty = function(title)
{
	var tiddlerElem = this.getTiddler(title);
	if(!tiddlerElem) return null;
	return tiddlerElem.getAttribute("dirty") == "true";
};

Story.prototype.areAnyDirty = function()
{
	var r = false;
	this.forEachTiddler(function(title, element) {
		if(this.isDirty(title))
			r = true;
	});
	return r;
};

Story.prototype.closeAllTiddlers = function(exclude)
{
	clearMessage();
	this.forEachTiddler(function(title, element) {
		if((title != exclude) && element.getAttribute("dirty") != "true")
			this.closeTiddler(title);
	});
	window.scrollTo(0, ensureVisible(this.container));
};

Story.prototype.isEmpty = function()
{
	var place = this.getContainer();
	return place && place.firstChild == null;
};

Story.prototype.search = function(text, useCaseSensitive, useRegExp)
{
	this.closeAllTiddlers();
	highlightHack = new RegExp(useRegExp ? text : text.escapeRegExp(), useCaseSensitive ? "mg" : "img");
	var matches = store.search(highlightHack, "title", "excludeSearch");
	this.displayTiddlers(null, matches);
	highlightHack = null;
	var q = useRegExp ? "/" : "'";
	if(matches.length > 0)
		displayMessage(config.macros.search.successMsg.format([matches.length.toString(), q + text + q]));
	else
		displayMessage(config.macros.search.failureMsg.format([q + text + q]));
};

Story.prototype.findContainingTiddler = function(el)
{
	while(el && !jQuery(el).hasClass("tiddler")) {
		el = jQuery(el).hasClass("popup") && Popup.stack[0] ? Popup.stack[0].root
			: el.parentNode;
	}
	return el;
};

Story.prototype.gatherSaveFields = function(el, fields)
{
	if(!el || !el.getAttribute) return;
	var fieldName = el.getAttribute("edit");
	if(fieldName)
		fields[fieldName] = el.value.replace(/\r/mg, "");
	if(el.hasChildNodes()) {
		for(var i = 0; i < el.childNodes.length; i++)
			this.gatherSaveFields(el.childNodes[i], fields);
	}
};

Story.prototype.hasChanges = function(title)
{
	var tiddlerElement = this.getTiddler(title);
	if(!tiddlerElement) return false;

	var fields = {};
	this.gatherSaveFields(tiddlerElement, fields);
	if(store.fetchTiddler(title)) {
		for(var fieldName in fields) {
			if(store.getValue(title, fieldName) != fields[fieldName])
				return true;
		}
		return false;
	}
	if(store.isShadowTiddler(title)) {
		// not checking for title or tags
		return store.getShadowTiddlerText(title) != fields.text;
	}
	// new tiddler
	return true;
};

Story.prototype.saveTiddler = function(title, minorUpdate)
{
	var tiddlerElem = this.getTiddler(title);
	if(!tiddlerElem) return null;

	var fields = {};
	this.gatherSaveFields(tiddlerElem, fields);
	var newTitle = fields.title || title;
	if(!store.tiddlerExists(newTitle)) {
		newTitle = newTitle.trim();
		var creator = config.options.txtUserName;
	}
	if(store.tiddlerExists(newTitle) && newTitle != title) {
		if(!confirm(config.messages.overwriteWarning.format([newTitle.toString()])))
			return null;
	}
	if(newTitle != title)
		this.closeTiddler(newTitle, false);
	tiddlerElem.id = this.tiddlerId(newTitle);
	tiddlerElem.setAttribute("tiddler", newTitle);
	tiddlerElem.setAttribute("template", DEFAULT_VIEW_TEMPLATE);
	tiddlerElem.setAttribute("dirty", "false");
	if(config.options.chkForceMinorUpdate)
		minorUpdate = !minorUpdate;
	if(!store.tiddlerExists(newTitle))
		minorUpdate = false;
	if(store.tiddlerExists(title)) {
		var t = store.fetchTiddler(title);
		var extendedFields = t.fields;
		creator = t.creator;
	} else {
		extendedFields = merge({}, config.defaultCustomFields);
	}
	for(var n in fields) {
		if(!TiddlyWiki.isStandardField(n))
			extendedFields[n] = fields[n];
	}
	var tiddler = store.saveTiddler(title, newTitle, fields.text, minorUpdate ? undefined : config.options.txtUserName,
		minorUpdate ? undefined : new Date(), fields.tags, extendedFields, null, null, creator);
	autoSaveChanges(null, [tiddler]);
	return newTitle;
};

Story.prototype.getPermaViewHash = function(titles)
{
	return '#' + encodeURIComponent(String.encodeTiddlyLinkList(titles));
};

Story.prototype.permaView = function()
{
	var titles = [];
	this.forEachTiddler(function(title, element) {
		titles.push(title);
	});
	var hash = this.getPermaViewHash(titles);
	if(window.location.hash != hash)
		window.location.hash = hash;
};

Story.prototype.switchTheme = function(theme)
{
	if(safeMode) return;

	var getSlice = function(theme, slice) {
		var r;
		if(readOnly)
			r = store.getTiddlerSlice(theme, slice + "ReadOnly") || store.getTiddlerSlice(theme, "Web" + slice);
		r = r || store.getTiddlerSlice(theme, slice);
		if(r && r.indexOf(config.textPrimitives.sectionSeparator) == 0)
			r = theme + r;
		return store.isAvailable(r) ? r : slice;
	};

	var replaceNotification = function(i, name, theme, slice) {
		var newName = getSlice(theme, slice);
		if(name != newName && store.namedNotifications[i].name == name) {
			store.namedNotifications[i].name = newName;
			return newName;
		}
		return name;
	};

	var pt = config.refresherData.pageTemplate;
	var vi = DEFAULT_VIEW_TEMPLATE;
	var vt = config.tiddlerTemplates[vi];
	var ei = DEFAULT_EDIT_TEMPLATE;
	var et = config.tiddlerTemplates[ei];

	for(var i = 0; i < config.notifyTiddlers.length; i++) {
		var name = config.notifyTiddlers[i].name;
		switch(name) {
			case "PageTemplate":
				config.refresherData.pageTemplate = replaceNotification(i, config.refresherData.pageTemplate, theme, name);
				break;
			case "StyleSheet":
				removeStyleSheet(config.refresherData.styleSheet);
				config.refresherData.styleSheet = replaceNotification(i, config.refresherData.styleSheet, theme, name);
				break;
			case "ColorPalette":
				config.refresherData.colorPalette = replaceNotification(i, config.refresherData.colorPalette, theme, name);
				break;
			default:
				break;
		}
	}
	config.tiddlerTemplates[vi] = getSlice(theme, "ViewTemplate");
	config.tiddlerTemplates[ei] = getSlice(theme, "EditTemplate");
	if(!startingUp) {
		if(config.refresherData.pageTemplate != pt || config.tiddlerTemplates[vi] != vt
		   || config.tiddlerTemplates[ei] != et) {
			refreshAll();
			this.refreshAllTiddlers(true);
		} else {
			setStylesheet(store.getRecursiveTiddlerText(config.refresherData.styleSheet, "", 10),
				config.refreshers.styleSheet);
		}
		config.options.txtTheme = theme;
		saveOption("txtTheme");
	}
};

//--
//-- Backstage
//--
// Backstage tasks
config.tasks.save.action = saveChanges;

var backstage = {
	area: null,
	toolbar: null,
	button: null,
	showButton: null,
	hideButton: null,
	cloak: null,
	panel: null,
	panelBody: null,
	panelFooter: null,
	currTabName: null,
	currTabElem: null,
	content: null,

	init: function() {
		var cmb = config.messages.backstage;
		this.area = document.getElementById("backstageArea");
		this.toolbar = jQuery("#backstageToolbar").empty()[0];
		this.button = jQuery("#backstageButton").empty()[0];
		this.button.style.display = "block";
		var text = cmb.open.text + " " + glyph("bentArrowLeft");
		this.showButton = createTiddlyButton(this.button, text, cmb.open.tooltip,
			function(e) { backstage.show(); return false }, null, "backstageShow");
		text = glyph("bentArrowRight") + " " + cmb.close.text;
		this.hideButton = createTiddlyButton(this.button, text, cmb.close.tooltip,
			function(e) { backstage.hide(); return false }, null, "backstageHide");
		this.cloak = document.getElementById("backstageCloak");
		this.panel = document.getElementById("backstagePanel");
		this.panelFooter = createTiddlyElement(this.panel, "div", null, "backstagePanelFooter");
		this.panelBody = createTiddlyElement(this.panel, "div", null, "backstagePanelBody");
		this.cloak.onmousedown = function(e) { backstage.switchTab(null) };
		createTiddlyText(this.toolbar, cmb.prompt);
		for(var i = 0; i < config.backstageTasks.length; i++)
		{
			var taskName = config.backstageTasks[i];
			var task = config.tasks[taskName];
			var handler = task.action ? this.onClickCommand : this.onClickTab;
			var text = task.text + (task.action ? "" : glyph("downTriangle"));
			var btn = createTiddlyButton(this.toolbar, text, task.tooltip, handler, "backstageTab");
			jQuery(btn).addClass(task.action ? "backstageAction" : "backstageTask");
			btn.setAttribute("task", taskName);
		}
		this.content = document.getElementById("contentWrapper");
		if(config.options.chkBackstage)
			this.show();
		else
			this.hide();
	},

	isVisible: function() {
		return this.area ? this.area.style.display == "block" : false;
	},

	show: function() {
		this.area.style.display = "block";
		if(anim && config.options.chkAnimate) {
			backstage.toolbar.style.left = findWindowWidth() + "px";
			anim.startAnimating(new Morpher(backstage.toolbar, config.animDuration, [
				{ style: "left", start: findWindowWidth(), end: 0, template: "%0px" }
			]));
		} else {
			backstage.area.style.left = "0px";
		}
		jQuery(this.showButton).hide();
		jQuery(this.hideButton).show();
		config.options.chkBackstage = true;
		saveOption("chkBackstage");
		jQuery(this.content).addClass("backstageVisible");
	},

	hide: function() {
		if(this.currTabElem) {
			// close current tab, not backstage
			this.switchTab(null);
			return;
		}

		backstage.toolbar.style.left = "0px";
		var hide = function() { backstage.area.style.display = "none" };
		if(anim && config.options.chkAnimate) {
			anim.startAnimating(new Morpher(backstage.toolbar, config.animDuration, [
				{ style: "left", start: 0, end: findWindowWidth(), template: "%0px" }
			], hide));
		} else {
			hide();
		}
		this.showButton.style.display = "block";
		this.hideButton.style.display = "none";
		config.options.chkBackstage = false;
		saveOption("chkBackstage");
		jQuery(this.content).removeClass("backstageVisible");
	},

	onClickCommand: function(e) {
		var task = config.tasks[this.getAttribute("task")];
		if(task.action) {
			backstage.switchTab(null);
			task.action();
		}
		return false;
	},

	onClickTab: function(e) {
		backstage.switchTab(this.getAttribute("task"));
		return false;
	},

	// Switch to a given tab, or none if null is passed
	switchTab: function(tabName) {
		var tabElem = null;
		var e = this.toolbar.firstChild;
		while(e) {
			if(e.getAttribute && e.getAttribute("task") == tabName)
				tabElem = e;
			e = e.nextSibling;
		}
		if(tabName == this.currTabName) {
			this.hidePanel();
			return;
		}
		if(this.currTabElem) {
			jQuery(this.currTabElem).removeClass("backstageSelTab");
		}
		if(tabElem && tabName) {
			this.preparePanel();
			jQuery(tabElem).addClass("backstageSelTab");
			var task = config.tasks[tabName];
			wikify(task.content, this.panelBody, null, null);
			this.showPanel();
		} else if(this.currTabElem) {
			this.hidePanel();
		}
		this.currTabName = tabName;
		this.currTabElem = tabElem;
	},

	isPanelVisible: function() {
		return backstage.panel ? backstage.panel.style.display == "block" : false;
	},

	preparePanel: function() {
		backstage.cloak.style.height = findDocHeight() + "px";
		backstage.cloak.style.display = "block";
		jQuery(backstage.panelBody).empty();
		return backstage.panelBody;
	},

	showPanel: function() {
		backstage.panel.style.display = "block";
		if(anim && config.options.chkAnimate) {
			backstage.panel.style.top = (-backstage.panel.offsetHeight) + "px";
			anim.startAnimating(new Morpher(backstage.panel, config.animDuration, [
				{ style: "top", start: -backstage.panel.offsetHeight, end: 0, template: "%0px" }
			]), new Scroller(backstage.panel, false));
		} else {
			backstage.panel.style.top = "0px";
		}
		return backstage.panelBody;
	},

	hidePanel: function() {
		if(backstage.currTabElem)
			jQuery(backstage.currTabElem).removeClass("backstageSelTab");
		backstage.currTabElem = null;
		backstage.currTabName = null;
		if(anim && config.options.chkAnimate) {
			var callback = function() { backstage.cloak.style.display = "none" };
			anim.startAnimating(new Morpher(backstage.panel, config.animDuration, [
				{ style: "top", start: 0, end: -(backstage.panel.offsetHeight), template: "%0px" },
				{ style: "display", atEnd: "none" }
			], callback));
		} else {
			jQuery([backstage.panel, backstage.cloak]).hide();
		}
	}
};

config.macros.backstage = {};

config.macros.backstage.handler = function(place, macroName, params)
{
	var backstageTask = config.tasks[params[0]];
	if(!backstageTask) return;
	createTiddlyButton(place, backstageTask.text, backstageTask.tooltip, function(e) {
		backstage.switchTab(params[0]);
		return false;
	});
};

//--
//-- ImportTiddlers macro
//--

config.macros.importTiddlers.handler = function(place, macroName, params, wikifier, paramString, tiddler)
{
	if(readOnly) {
		createTiddlyElement(place, "div", null, "marked", this.readOnlyWarning);
		return;
	}
	var w = new Wizard();
	w.createWizard(place, this.wizardTitle);
	this.restart(w);
};

config.macros.importTiddlers.onCancel = function(e)
{
	var wizard = new Wizard(this);
	wizard.clear();
	config.macros.importTiddlers.restart(wizard);
	return false;
};

config.macros.importTiddlers.onClose = function(e)
{
	backstage.hidePanel();
	return false;
};

config.macros.importTiddlers.restart = function(wizard)
{
	var me = config.macros.importTiddlers;
	wizard.addStep(this.step1Title, this.step1Html);
	var name, s = wizard.getElement("selTypes");
	for(name in config.adaptors) {
		var e = createTiddlyElement(s, "option", null, null, config.adaptors[name].serverLabel || name);
		e.value = name;
	}
	if(config.defaultAdaptor) s.value = config.defaultAdaptor;
	s = wizard.getElement("selFeeds");
	var feeds = this.getFeeds();
	for(name in feeds) {
		e = createTiddlyElement(s, "option", null, null, name);
		e.value = name;
	}
	wizard.setValue("feeds", feeds);
	s.onchange = me.onFeedChange;
	var fileInput = wizard.getElement("txtBrowse");
	fileInput.onchange = me.onBrowseChange;
	fileInput.onkeyup = me.onBrowseChange;
	wizard.setButtons([{ caption: this.openLabel, tooltip: this.openPrompt, onClick: me.onOpen }]);
	wizard.formElem.action = "javascript:;";
	wizard.formElem.onsubmit = function() {
		if(!this.txtPath || this.txtPath.value.length) //# check for manually entered path in first step
			this.lastChild.firstChild.onclick();
	};
};

config.macros.importTiddlers.getFeeds = function()
{
	var feeds = {};
	var i, tagged = store.getTaggedTiddlers("systemServer", "title");
	for(i = 0; i < tagged.length; i++) {
		var title = tagged[i].title;
		feeds[title] = {
			title: title,
			url: store.getTiddlerSlice(title, "URL"),
			workspace: store.getTiddlerSlice(title, "Workspace"),
			workspaceList: store.getTiddlerSlice(title, "WorkspaceList"),
			tiddlerFilter: store.getTiddlerSlice(title, "TiddlerFilter"),
			serverType: store.getTiddlerSlice(title, "Type") || "file",
			description: store.getTiddlerSlice(title, "Description")
		};
	}
	return feeds;
};

config.macros.importTiddlers.onFeedChange = function(e)
{
	var wizard = new Wizard(this);
	var selTypes = wizard.getElement("selTypes");
	var fileInput = wizard.getElement("txtPath");
	var feeds = wizard.getValue("feeds");
	var f = feeds[this.value];
	if(f) {
		selTypes.value = f.serverType;
		fileInput.value = f.url;
		wizard.setValue("feedName", f.serverType);
		wizard.setValue("feedHost", f.url);
		wizard.setValue("feedWorkspace", f.workspace);
		wizard.setValue("feedWorkspaceList", f.workspaceList);
		wizard.setValue("feedTiddlerFilter", f.tiddlerFilter);
	}
	return false;
};

config.macros.importTiddlers.onBrowseChange = function(e)
{
	var wizard = new Wizard(this);
	var file = this.value;
	file = file.replace(/^C:\\fakepath\\/i, ''); // remove fakepath (chrome/opera/safari)
	if(this.files && this.files[0]) {
		try {
			netscape.security.PrivilegeManager.enablePrivilege("UniversalFileRead");
			file = this.files[0].fileName; // REQUIRES PRIVILEGES.. NULL otherwise
		} catch (ex) {
			// non-priv fallback: combine filename with path to current document
			var path = getLocalPath(document.location.href);
			var slashpos = path.lastIndexOf('/');
			if (slashpos == -1) slashpos = path.lastIndexOf('\\');
			if (slashpos != -1) path = path.substr(0, slashpos + 1); // remove filename, leave trailing slash
			file = path + file;
		}
	}
	var fileInput = wizard.getElement("txtPath");
	fileInput.value = config.macros.importTiddlers.getURLFromLocalPath(file);
	var serverType = wizard.getElement("selTypes");
	serverType.value = "file";
	return true;
};

config.macros.importTiddlers.getURLFromLocalPath = function(path)
{
	if(!path) return path;
	// use "/" for cross-platform consistency
	path = path.replace(/\\/g, "/");

	var t = path.split(":");
	if(t[1] && (t[0] == "http" || t[0] == "https" || t[0] == "file")) {
		// input is already a URL
		return path;
	}

	var p = t[1] || t[0]; // remove drive letter (if any)
	if(p.substr(0, 1) == "/") {
		// path is absolute, add protocol + domain + extra slash (if drive letter)
		return document.location.protocol + "//" + document.location.hostname + (t[1] ? "/" : "") + path;
	}

	// path is relative, add current document protocol + domain + path
	var c = document.location.href.replace(/\\/g, "/");
	var pos = c.lastIndexOf("/");
	if(pos != -1)
		c = c.substring(0, pos); // remove filename
	return c + "/" + p;
};

config.macros.importTiddlers.onOpen = function(e)
{
	var me = config.macros.importTiddlers;
	var wizard = new Wizard(this);
	var fileInput = wizard.getElement("txtPath");
	var url = fileInput.value;
	var serverType = wizard.getElement("selTypes").value || config.defaultAdaptor;
	var adaptor = new config.adaptors[serverType]();
	wizard.setValue("adaptor", adaptor);
	wizard.setValue("serverType", serverType);
	wizard.setValue("host", url);
	adaptor.openHost(url, null, wizard, me.onOpenHost);
	wizard.setButtons([{ caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel }], me.statusOpenHost);
	return false;
};

config.macros.importTiddlers.onOpenHost = function(context, wizard)
{
	var me = config.macros.importTiddlers;
	var adaptor = wizard.getValue("adaptor");
	if(context.status !== true)
		displayMessage("Error in importTiddlers.onOpenHost: " + context.statusText);
	adaptor.getWorkspaceList(context, wizard, me.onGetWorkspaceList);
	wizard.setButtons([{ caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel }], me.statusGetWorkspaceList);
};

config.macros.importTiddlers.onGetWorkspaceList = function(context, wizard)
{
	var me = config.macros.importTiddlers;
	if(context.status !== true)
		displayMessage("Error in importTiddlers.onGetWorkspaceList: " + context.statusText);
	wizard.setValue("context", context);
	var workspace = wizard.getValue("feedWorkspace");
	if(!workspace && context.workspaces.length == 1)
		workspace = context.workspaces[0].title;
	if(workspace) {
		context.adaptor.openWorkspace(workspace, context, wizard, me.onOpenWorkspace);
		wizard.setValue("workspace", workspace);
		wizard.setButtons([{ caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel }], me.statusOpenWorkspace);
		return;
	}
	wizard.addStep(me.step2Title, me.step2Html);
	var i, s = wizard.getElement("selWorkspace");
	s.onchange = me.onWorkspaceChange;
	for(i = 0; i < context.workspaces.length; i++) {
		var e = createTiddlyElement(s, "option", null, null, context.workspaces[i].title);
		e.value = context.workspaces[i].title;
	}
	var workspaceList = wizard.getValue("feedWorkspaceList");
	if(workspaceList) {
		var list = workspaceList.parseParams("workspace", null, false, true);
		for(i = 1; i < list.length; i++) {
			if(context.workspaces.findByField("title", list[i].value) == null) {
				e = createTiddlyElement(s, "option", null, null, list[i].value);
				e.value = list[i].value;
			}
		}
	}
	if(workspace) {
		wizard.getElement("txtWorkspace").value = workspace;
	}
	wizard.setButtons([{ caption: me.openLabel, tooltip: me.openPrompt, onClick: me.onChooseWorkspace }]);
};

config.macros.importTiddlers.onWorkspaceChange = function(e)
{
	var wizard = new Wizard(this);
	wizard.getElement("txtWorkspace").value = this.value;
	this.selectedIndex = 0;
	return false;
};

config.macros.importTiddlers.onChooseWorkspace = function(e)
{
	var me = config.macros.importTiddlers;
	var wizard = new Wizard(this);
	var adaptor = wizard.getValue("adaptor");
	var workspace = wizard.getElement("txtWorkspace").value;
	wizard.setValue("workspace", workspace);
	var context = wizard.getValue("context");
	adaptor.openWorkspace(workspace, context, wizard, me.onOpenWorkspace);
	wizard.setButtons([{ caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel }], me.statusOpenWorkspace);
	return false;
};

config.macros.importTiddlers.onOpenWorkspace = function(context, wizard)
{
	var me = config.macros.importTiddlers;
	if(context.status !== true)
		displayMessage("Error in importTiddlers.onOpenWorkspace: " + context.statusText);
	var adaptor = wizard.getValue("adaptor");
	var browse = wizard.getElement("txtBrowse");
	if (browse.files) context.file = browse.files[0]; // for HTML5 FileReader
	adaptor.getTiddlerList(context, wizard, me.onGetTiddlerList, wizard.getValue("feedTiddlerFilter"));
	wizard.setButtons([{ caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel }], me.statusGetTiddlerList);
};

config.macros.importTiddlers.onGetTiddlerList = function(context, wizard)
{
	var me = config.macros.importTiddlers;
	if(context.status !== true) {
		var error = context.statusText || me.errorGettingTiddlerList;
		if(context.host.indexOf("file://") === 0) {
			error = me.errorGettingTiddlerListFile;
		} else {
			error = context.xhr && context.xhr.status == 404 ? me.errorGettingTiddlerListHttp404 :
				me.errorGettingTiddlerListHttp;
		}
		wizard.setButtons([{ caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel }], "");
		jQuery("span.status", wizard.footerEl).html(error); // so error message can be html
		return;
	}

	// Extract data for the listview
	var listedTiddlers = [];
	if(context.tiddlers) {
		for(var i = 0; i < context.tiddlers.length; i++) {
			var tiddler = context.tiddlers[i];
			listedTiddlers.push({
				title: tiddler.title,
				modified: tiddler.modified,
				modifier: tiddler.modifier,
				text: tiddler.text ? wikifyPlainText(tiddler.text, 100) : "",
				tags: tiddler.tags,
				size: tiddler.text ? tiddler.text.length : 0,
				tiddler: tiddler
			});
		}
	}
	listedTiddlers.sort(function(a, b) { return a.title < b.title ? -1 : (a.title == b.title ? 0 : +1) });

	// Display the listview
	wizard.addStep(me.step3Title, me.step3Html);
	var markList = wizard.getElement("markList");
	var listWrapper = document.createElement("div");
	markList.parentNode.insertBefore(listWrapper, markList);
	var listView = ListView.create(listWrapper, listedTiddlers, me.listViewTemplate);
	wizard.setValue("listView", listView);
	wizard.setValue("context", context);
	var txtSaveTiddler = wizard.getElement("txtSaveTiddler");
	txtSaveTiddler.value = me.generateSystemServerName(wizard);
	wizard.setButtons([
		{ caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel },
		{ caption: me.importLabel, tooltip: me.importPrompt, onClick: me.doImport }
	]);
};

config.macros.importTiddlers.generateSystemServerName = function(wizard)
{
	var serverType = wizard.getValue("serverType");
	var host = wizard.getValue("host");
	var workspace = wizard.getValue("workspace");
	var pattern = config.macros.importTiddlers[workspace ? "systemServerNamePattern" : "systemServerNamePatternNoWorkspace"];
	return pattern.format([serverType, host, workspace]);
};

config.macros.importTiddlers.saveServerTiddler = function(wizard)
{
	var me = config.macros.importTiddlers;
	var txtSaveTiddler = wizard.getElement("txtSaveTiddler").value;
	if(store.tiddlerExists(txtSaveTiddler)) {
		if(!confirm(me.confirmOverwriteSaveTiddler.format([txtSaveTiddler])))
			return;
		store.suspendNotifications();
		store.removeTiddler(txtSaveTiddler);
		store.resumeNotifications();
	}
	var serverType = wizard.getValue("serverType");
	var host = wizard.getValue("host");
	var workspace = wizard.getValue("workspace");
	var text = me.serverSaveTemplate.format([serverType, host, workspace]);
	store.saveTiddler(txtSaveTiddler, txtSaveTiddler, text, me.serverSaveModifier, new Date(), ["systemServer"]);
};

config.macros.importTiddlers.doImport = function(e)
{
	var me = config.macros.importTiddlers;
	var wizard = new Wizard(this);
	if(wizard.getElement("chkSave").checked)
		me.saveServerTiddler(wizard);
	var chkSync = wizard.getElement("chkSync").checked;
	wizard.setValue("sync", chkSync);

	var listView = wizard.getValue("listView");
	var rowNames = ListView.getSelectedRows(listView);
	var adaptor = wizard.getValue("adaptor");
	var overwrite = [];
	for(var i = 0; i < rowNames.length; i++) {
		if(store.tiddlerExists(rowNames[i]))
			overwrite.push(rowNames[i]);
	}
	if(overwrite.length > 0) {
		if(!confirm(me.confirmOverwriteText.format([overwrite.join(", ")])))
			return false;
	}

	wizard.addStep(me.step4Title.format([rowNames.length]), me.step4Html);
	for(i = 0; i < rowNames.length; i++) {
		var linkHolder = document.createElement("div");
		createTiddlyLink(linkHolder, rowNames[i], true);
		var place = wizard.getElement("markReport");
		place.parentNode.insertBefore(linkHolder, place);
	}
	wizard.setValue("remainingImports", rowNames.length);
	wizard.setButtons([
		{ caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel }
	], me.statusDoingImport);
	var wizardContext = wizard.getValue("context");
	var tiddlers = wizardContext ? wizardContext.tiddlers : [];
	for(i = 0; i < rowNames.length; i++) {
		var context = {
			allowSynchronous: true,
			tiddler: tiddlers[tiddlers.findByField("title", rowNames[i])]
		};
		adaptor.getTiddler(rowNames[i], context, wizard, me.onGetTiddler);
	}
	return false;
};

config.macros.importTiddlers.onGetTiddler = function(context, wizard)
{
	if(!context.status)
		displayMessage("Error in importTiddlers.onGetTiddler: " + context.statusText);
	var tiddler = context.tiddler;
	store.suspendNotifications();
	store.saveTiddler(tiddler.title, tiddler.title, tiddler.text, tiddler.modifier,
		tiddler.modified, tiddler.tags, tiddler.fields, true, tiddler.created);
	if(!wizard.getValue("sync")) {
		store.setValue(tiddler.title, 'server', null);
	}
	store.resumeNotifications();
	if(!context.isSynchronous) store.notify(tiddler.title, true);

	var remainingImports = wizard.getValue("remainingImports") - 1;
	wizard.setValue("remainingImports", remainingImports);

	if(remainingImports != 0) return;
	if(context.isSynchronous) {
		store.notifyAll();
		refreshDisplay();
	}
	var me = config.macros.importTiddlers;
	wizard.setButtons([
		{ caption: me.doneLabel, tooltip: me.donePrompt, onClick: me.onClose }
	], me.statusDoneImport);
	autoSaveChanges();
};

//--
//-- Upgrade macro
//--

config.macros.upgrade.getSourceURL = function()
{
	return config.options.txtUpgradeCoreURI || config.macros.upgrade.source;
};

config.macros.upgrade.loadLatestCore = function(onSuccess, onError)
{
	ajaxReq({
		type: "GET",
		url: this.getSourceURL(),
		processData: false,
		success: onSuccess,
		error: onError
	});
};

config.macros.upgrade.handler = function(place)
{
	var w = new Wizard();
	w.createWizard(place, this.wizardTitle);
	w.addStep(this.step1Title, this.step1Html.format([this.getSourceURL(), this.getSourceURL()]));
	w.setButtons([{
		caption: this.upgradeLabel,
		tooltip: this.upgradePrompt,
		onClick: this.onClickUpgrade
	}]);
};

config.macros.upgrade.onClickUpgrade = function(e)
{
	var me = config.macros.upgrade;
	var w = new Wizard(this);
	if(!window.allowSave()) {
		alert(me.errorCantUpgrade);
		return false;
	}
	if(story.areAnyDirty() || store.isDirty()) {
		alert(me.errorNotSaved);
		return false;
	}

	w.setButtons([], me.statusPreparingBackup);
	var localPath = getLocalPath(document.location.toString());
	var backupPath = getBackupPath(localPath, me.backupExtension);
	var original = loadOriginal(localPath);

	w.setButtons([], me.statusSavingBackup);
	var backupSuccess = copyFile(backupPath, localPath) || saveFile(backupPath, original);
	if(!backupSuccess) {
		w.setButtons([], me.errorSavingBackup);
		alert(me.errorSavingBackup);
		return false;
	}
	w.setValue("backupPath", backupPath);

	w.setButtons([], me.statusLoadingCore);
	var sourceURL = me.getSourceURL();
	me.loadLatestCore(function(data, textStatus, jqXHR) {
		me.onLoadCore(true, w, jqXHR.responseText, sourceURL, jqXHR);
	}, function(jqXHR, textStatus, errorThrown) {
		me.onLoadCore(false, w, null, sourceURL, jqXHR);
	});
	return false;
};

config.macros.upgrade.onLoadCore = function(status, w, responseText, url, xhr)
{
	var me = config.macros.upgrade;
	var errMsg;
	if(!status) errMsg = me.errorLoadingCore;
	var newVer = me.extractVersion(responseText);
	if(!newVer) errMsg = me.errorCoreFormat;
	if(errMsg) {
		w.setButtons([], errMsg);
		alert(errMsg);
		return;
	}

	var step2 = [me.step2Html_downgrade, me.step2Html_restore, me.step2Html_upgrade][compareVersions(version, newVer) + 1];
	w.addStep(me.step2Title, step2.format([formatVersion(newVer), formatVersion(version)]));
	w.setButtons([
		{ caption: me.startLabel,  tooltip: me.startPrompt,  onClick: function() {
			config.macros.upgrade.onStartUpgrade(w, responseText);
		} },
		{ caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel }
	]);
};

config.macros.upgrade.onStartUpgrade = function(wizard, newCoreHtml)
{
	wizard.setButtons([], config.macros.upgrade.statusSavingCore);
	var localPath = getLocalPath(document.location.toString());
	saveFile(localPath, newCoreHtml);

	wizard.setButtons([], config.macros.upgrade.statusReloadingCore);
	var backupPath = wizard.getValue("backupPath");
	var newLocation = addUpgradePartsToURI(document.location.toString(), backupPath);
	window.setTimeout(function () { window.location = newLocation }, 10);
};

config.macros.upgrade.onCancel = function(e)
{
	var me = config.macros.upgrade;
	var w = new Wizard(this);
	w.addStep(me.step3Title, me.step3Html);
	w.setButtons([]);
	return false;
};

config.macros.upgrade.extractVersion = function(upgradeFile)
{
	var re = /version = \{\s*title: "([^"]+)", major: (\d+), minor: (\d+), revision: (\d+)(, beta: (\d+)){0,1}, date: new Date\("([^"]+)"\)/mg;
	var m = re.exec(upgradeFile);
	return !m ? null : {
		title: m[1], major: m[2], minor: m[3], revision: m[4], beta: m[6], date: new Date(m[7])
	};
};

// a helper, splits uri into parts, passes the map of parts to modify and glues parts back
function changeUri(uri, modify)
{
	var uriPartsRE = /^(?:([\w:]+)\/\/)?([^\/\?#]+)?([^\?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;
	var match = uriPartsRE.exec(uri) || [null, '', '', '', '', ''];
	var parts = {
		scheme:	match[1],
		host:	match[2],
		path:	match[3],
		query:	match[4],
		hash:	match[5]
	};
	modify(parts);
	var newScheme = parts.scheme === undefined ? '' : (parts.scheme + '//'),
	    newHost   = parts.host || '',
	    newPath   = parts.path || '',
	    newQuery  = parts.query ? ('?' + parts.query) : '',
	    newHash   = parts.hash   === undefined ? '' : ('#' + parts.hash);
	return newScheme + newHost + newPath + newQuery + newHash;
}

function addUpgradePartsToURI(uri, backupPath)
{
	return changeUri(uri, function(uriParts)
	{
		var newParamifier = 'upgrade:[[' + encodeURI(backupPath) + ']]';
		uriParts.hash = (uriParts.hash ? uriParts.hash + '%20' : '') + newParamifier;

		var newQuery = "time=" + new Date().convertToYYYYMMDDHHMM();
		uriParts.query = (uriParts.query ? uriParts.query + '&' : '') + newQuery;
	});
}

function stripUpgradePartsFromURI(uri)
{
	return changeUri(uri, function(uriParts)
	{
		var queryParts = uriParts.query.split('&'),
		    hashParts = uriParts.hash.split('%20'); // splits paramifiers with a space in argument

		for(var i = 0; i < queryParts.length; i++)
			if(queryParts[i].indexOf('time=') == 0)
				queryParts.splice(i--, 1);

		// relies on the upgrade paramifier being added to the end of hash
		for(i = 0; i < hashParts.length; i++)
			if(hashParts[i].indexOf('upgrade:') == 0)
				hashParts = hashParts.slice(0, i);

		uriParts.query = queryParts.join('&');
		uriParts.hash = hashParts.join('%20') || undefined;
	});
}

function upgradeFrom(path)
{
	tw.io.loadFile(path, function(oldTw) {
		var importStore = new TiddlyWiki();
		importStore.importTiddlyWiki(oldTw);
		importStore.forEachTiddler(function(title, tiddler) {
			if(!store.getTiddler(title)) {
				store.addTiddler(tiddler);
			}
		});

		refreshDisplay();
		saveChanges();
		alert(config.messages.upgradeDone.format([formatVersion()]));
		window.location = stripUpgradePartsFromURI(window.location.toString());
	});
}

//--
//-- Manager UI for groups of tiddlers
//--

config.macros.plugins.handler = function(place, macroName, params, wikifier, paramString)
{
	var wizard = new Wizard();
	wizard.createWizard(place, this.wizardTitle);
	wizard.addStep(this.step1Title, this.step1Html);
	var markList = wizard.getElement("markList");
	var listWrapper = document.createElement("div");
	markList.parentNode.insertBefore(listWrapper, markList);
	listWrapper.setAttribute("refresh", "macro");
	listWrapper.setAttribute("macroName", "plugins");
	listWrapper.setAttribute("params", paramString);
	this.refresh(listWrapper, paramString);
};

config.macros.plugins.refresh = function(listWrapper, paramString)
{
	var wizard = new Wizard(listWrapper);
	var selectedRows = [];
	ListView.forEachSelector(listWrapper, function(e, rowName) {
		if(e.checked) selectedRows.push(e.getAttribute("rowName"));
	});
	jQuery(listWrapper).empty();
	var plugins = installedPlugins.slice(0);
	var i, tiddler, p;
	var configTiddlers = store.getTaggedTiddlers("systemConfig");
	for(i = 0; i < configTiddlers.length; i++) {
		tiddler = configTiddlers[i];
		if(plugins.findByField("title", tiddler.title) != null) continue;

		p = getPluginInfo(tiddler);
		p.executed = false;
		p.log.splice(0, 0, this.skippedText);
		p.size = p.tiddler.text ? p.tiddler.text.length : 0;
		p.forced = p.tiddler.isTagged("systemConfigForce");
		p.disabled = p.tiddler.isTagged("systemConfigDisable");
		p.Selected = selectedRows.indexOf(p.title) != -1;
		plugins.push(p);
	}

	if(plugins.length == 0) {
		createTiddlyElement(listWrapper, "em", null, null, this.noPluginText);
		wizard.setButtons([]);
	} else {
		var template = readOnly ? this.listViewTemplateReadOnly : this.listViewTemplate;
		var listView = ListView.create(listWrapper, plugins, template, this.onSelectCommand);
		wizard.setValue("listView", listView);
		if(!readOnly) {
			var me = config.macros.plugins;
			wizard.setButtons([
				{ caption: me.removeLabel, tooltip: me.removePrompt, onClick: me.doRemoveTag },
				{ caption: me.deleteLabel, tooltip: me.deletePrompt, onClick: me.doDelete }
			]);
		}
	}
};

config.macros.plugins.doRemoveTag = function(e)
{
	var wizard = new Wizard(this);
	var listView = wizard.getValue("listView");
	var rowNames = ListView.getSelectedRows(listView);
	if(rowNames.length == 0) {
		alert(config.messages.nothingSelected);
	} else {
		for(var i = 0; i < rowNames.length; i++) {
			store.setTiddlerTag(rowNames[i], false, "systemConfig");
		}
		autoSaveChanges();
	}
};

config.macros.plugins.doDelete = function(e)
{
	var wizard = new Wizard(this);
	var listView = wizard.getValue("listView");
	var rowNames = ListView.getSelectedRows(listView);
	if(rowNames.length == 0) {
		alert(config.messages.nothingSelected);
	} else {
		if(confirm(config.macros.plugins.confirmDeleteText.format([rowNames.join(", ")]))) {
			for(var i = 0; i < rowNames.length; i++) {
				store.removeTiddler(rowNames[i]);
				story.closeTiddler(rowNames[i], true);
			}
		}
		autoSaveChanges();
	}
};

//--
//-- Message area
//--

function getMessageDiv()
{
	var msgArea = document.getElementById("messageArea");
	if(!msgArea) return null;

	if(!msgArea.hasChildNodes()) {
		var toolbar = createTiddlyElement(msgArea, "div", null, "messageArea__toolbar messageToolbar");
		var btn = createTiddlyButton(toolbar, '', config.messages.messageClose.tooltip, clearMessage,
			"button messageToolbar__button");

		btn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10" class="messageToolbar__icon">' +
		'	<rect width="1" height="13.1" x="4.5" y="-1.6" transform="rotate(-45 5 5)"/>' +
		'	<rect width="1" height="13.1" x="4.5" y="-1.6" transform="rotate(+45 5 5)"/>' +
		'</svg>';
		// inline SVG is unsupported in old FireFox
		if(window.HTMLUnknownElement && btn.firstChild instanceof window.HTMLUnknownElement) {
			btn.innerHTML = config.messages.messageClose.text;
		} else {
			btn.classList.add('messageToolbar__button_withIcon');
		}
	}
	msgArea.style.display = "block";
	return createTiddlyElement(msgArea, "div", null, "messageArea__text");
}

function displayMessage(text, link)
{
	var e = getMessageDiv();
	if(!e) {
		alert(text);
		return;
	}
	if(!link) {
		createTiddlyText(e, text);
	} else {
		createTiddlyElement(e, "a", null, null, text, { href: link, target: "_blank" });
	}
}

function clearMessage()
{
	var msgArea = document.getElementById("messageArea");
	if(msgArea) {
		jQuery(msgArea).empty();
		msgArea.style.display = "none";
	}
	return false;
}

//--
//-- Refresh mechanism
//--

config.notifyTiddlers = [
	{ name: "SystemSettings", notify: onSystemSettingsChange },
	{ name: "StyleSheetLayout", notify: refreshStyles },
	{ name: "StyleSheetColors", notify: refreshStyles },
	{ name: "StyleSheet", notify: refreshStyles },
	{ name: "StyleSheetPrint", notify: refreshStyles },
	{ name: "PageTemplate", notify: refreshPageTemplate },
	{ name: "SiteTitle", notify: refreshPageTitle },
	{ name: "SiteSubtitle", notify: refreshPageTitle },
	{ name: "WindowTitle", notify: refreshPageTitle },
	{ name: "ColorPalette", notify: refreshColorPalette },
	{ name: null, notify: refreshDisplay }
];

config.refreshers = {
	link: function(e, changeList)
	{
		var title = e.getAttribute("tiddlyLink");
		refreshTiddlyLink(e, title);
		return true;
	},

	tiddler: function(e, changeList)
	{
		if (startingUp) return true; // #147
		var title = e.getAttribute("tiddler");
		var template = e.getAttribute("template");
		if(changeList && (changeList.indexOf && changeList.indexOf(title) != -1) && !story.isDirty(title))
			story.refreshTiddler(title, template, true);
		else
			refreshElements(e, changeList);
		return true;
	},

	content: function(e, changeList)
	{
		var title = e.getAttribute("tiddler");
		var force = e.getAttribute("force");
		var args = e.macroArgs; // #154
		if(force != null || changeList == null || (changeList.indexOf && changeList.indexOf(title) != -1)) {
			jQuery(e).empty();
			config.macros.tiddler.transclude(e, title, args);
			return true;
		} else
			return false;
	},

	macro: function(e, changeList)
	{
		var macro = e.getAttribute("macroName");
		var params = e.getAttribute("params");
		if(macro)
			macro = config.macros[macro];
		if(macro && macro.refresh)
			macro.refresh(e, params);
		return true;
	}
};

config.refresherData = {
	styleSheet: "StyleSheet",
	defaultStyleSheet: "StyleSheet",
	pageTemplate: "PageTemplate",
	defaultPageTemplate: "PageTemplate",
	colorPalette: "ColorPalette",
	defaultColorPalette: "ColorPalette"
};

function refreshElements(root, changeList)
{
	var i, nodes = root.childNodes;
	for(i = 0; i < nodes.length; i++) {
		var e = nodes[i], type = null;
		if(e.getAttribute && (e.tagName ? e.tagName != "IFRAME" : true))
			type = e.getAttribute("refresh");
		var refresher = config.refreshers[type];
		var refreshed = false;
		if(refresher != undefined)
			refreshed = refresher(e, changeList);
		if(e.hasChildNodes() && !refreshed)
			refreshElements(e, changeList);
	}
}

function applyHtmlMacros(root, tiddler)
{
	var e = root.firstChild;
	while(e) {
		var nextChild = e.nextSibling;
		if(e.getAttribute) {
			var macro = e.getAttribute("macro");
			if(macro) {
				e.removeAttribute("macro");
				var params = "";
				var p = macro.indexOf(" ");
				if(p != -1) {
					params = macro.substr(p + 1);
					macro = macro.substr(0, p);
				}
				invokeMacro(e, macro, params, null, tiddler);
			}
		}
		if(e.hasChildNodes())
			applyHtmlMacros(e, tiddler);
		e = nextChild;
	}
}

function refreshPageTemplate(title)
{
	var stash = jQuery("<div/>").appendTo("body").hide()[0];
	var display = story.getContainer();
	var nodes, i;
	if(display) {
		nodes = display.childNodes;
		for(i = nodes.length - 1; i >= 0; i--)
			stash.appendChild(nodes[i]);
	}
	var wrapper = document.getElementById("contentWrapper");

	if(!title || !store.isAvailable(title))
		title = config.refresherData.pageTemplate;
	if(!store.isAvailable(title))
		title = config.refresherData.defaultPageTemplate; //# this one is always avaialable

	wrapper.innerHTML = store.getRecursiveTiddlerText(title, null, 10);
	applyHtmlMacros(wrapper);
	refreshElements(wrapper);
	display = story.getContainer();
	jQuery(display).empty();
	if(!display)
		display = createTiddlyElement(wrapper, "div", story.containerId());
	nodes = stash.childNodes;
	for(i = nodes.length - 1; i >= 0; i--)
		display.appendChild(nodes[i]);
	jQuery(stash).remove();
}

function refreshDisplay(hint)
{
	if(typeof hint == "string")
		hint = [hint];
	var e = document.getElementById("contentWrapper");
	refreshElements(e, hint);
	if(backstage.isPanelVisible()) {
		e = document.getElementById("backstage");
		refreshElements(e, hint);
	}
}

function refreshPageTitle()
{
	document.title = getPageTitle();
}

function getPageTitle()
{
	return wikifyPlainText(store.getTiddlerText("WindowTitle", ""), null, tiddler);
}

function refreshStyles(title, doc)
{
	setStylesheet(title == null ? "" : store.getRecursiveTiddlerText(title, "", 10), title, doc || document);
}

function refreshColorPalette(title)
{
	if(!startingUp)
		refreshAll();
}

function refreshAll()
{
	refreshPageTemplate();
	refreshDisplay();
	refreshStyles("StyleSheetLayout");
	refreshStyles("StyleSheetColors");
	refreshStyles(config.refresherData.styleSheet);
	refreshStyles("StyleSheetPrint");
}

//--
//-- Option handling
//--

config.optionHandlers = {
	'txt': {
		get: function(name) { return encodeCookie(config.options[name].toString()) },
		set: function(name, value) { config.options[name] = decodeCookie(value) }
	},
	'chk': {
		get: function(name) { return config.options[name] ? 'true' : 'false' },
		set: function(name, value) { config.options[name] = value == 'true' }
	}
};

function setOption(name, value)
{
	var optType = name.substr(0, 3);
	if(config.optionHandlers[optType] && config.optionHandlers[optType].set)
		config.optionHandlers[optType].set(name, value);
}

// Gets the value of an option as a string. Most code should just read from config.options.* directly
function getOption(name)
{
	var optType = name.substring(0, 3);
	return config.optionHandlers[optType] && config.optionHandlers[optType].get ?
		config.optionHandlers[optType].get(name) : null;
}

function loadOptions()
{
	if(safeMode) return;
	loadCookies();
	loadSystemSettings();
}
// @Deprecated; retained for backwards compatibility
var loadOptionsCookie = loadOptions;

function getCookies()
{
	var cookieList = document.cookie.split(';');
	var i, cookies = {};
	for(i = 0; i < cookieList.length; i++) {
		var p = cookieList[i].indexOf('=');
		if(p != -1) {
			var name = jQuery.trim(cookieList[i].substring(0, p));
			var value = jQuery.trim(cookieList[i].substring(p + 1));
			cookies[name] = value;
		}
	}
	return cookies;
}

function loadCookies()
{
	var i, cookies = getCookies();
	if(cookies['TiddlyWikiClassicOptions']) // TW291 and later //#159
		cookies = cookies['TiddlyWikiClassicOptions'].replace(/%22/g, '"').replace(/%25/g, '%').decodeHashMap(); // #159
	else if(cookies['TiddlyWikiOptions']) // TW290 beta //#159
		cookies = cookies['TiddlyWikiOptions'].replace(/%25/g, '%').decodeHashMap(); // #159
	else if(cookies['TiddlyWiki']) // TW281 and earlier
		cookies = cookies['TiddlyWiki'].decodeHashMap();

	for(i in cookies) {
		if(config.optionsSource[i] != 'setting') {
			setOption(i, cookies[i]);
		}
	}
}

function loadSystemSettings()
{
	var key, settings = store.calcAllSlices('SystemSettings');
	config.optionsSource = {};
	for(key in settings) {
		setOption(key, settings[key]);
		config.optionsSource[key] = 'setting';
	}
}

function onSystemSettingsChange()
{
	if(!startingUp) {
		loadSystemSettings();
	}
}

function saveOption(name)
{
	if(safeMode) return;
	if(name.match(/[()\s]/g, '_')) {
		alert(config.messages.invalidCookie.format([name]));
		return;
	}

	saveCookie(name);
	if(config.optionsSource[name] == 'setting') {
		saveSystemSetting(name, true);
	}
}
// @Deprecated; retained for backwards compatibility
var saveOptionCookie = saveOption;

function removeCookie(name)
{
	document.cookie = name + '=; expires=Thu, 01-Jan-1970 00:00:01 UTC; path=/;';
}

function saveCookie(name)
{
	var key, cookies = {};
	for(key in config.options) {
		var value = getOption(key);
		value = value == null ? 'false' : value;
		cookies[key] = value;
	}
	document.cookie = 'TiddlyWikiClassicOptions='
		+ String.encodeHashMap(cookies).replace(/%/g, '%25').replace(/"/g, '%22')
		+ '; expires=Fri, 1 Jan 2038 12:00:00 UTC; path=/';

	// clean up cookies saved in an earlier format, before TW291 (#159)
	cookies = getCookies();
	for(var c in cookies) {
		var optType = c.substring(0, 3);
		if(config.optionHandlers[optType])
			removeCookie(c);
	}
}

var systemSettingSave;
function commitSystemSettings(storeWasDirty)
{
	if(systemSettingSave) {
		window.clearTimeout(systemSettingSave);
	}
	systemSettingSave = window.setTimeout(function() {
		var tiddler = store.getTiddler('SystemSettings');
		autoSaveChanges(null, [tiddler]);
	}, 1000);
}

function saveSystemSetting(name, saveFile)
{
	var title = 'SystemSettings';
	var slice = store.getTiddlerSlice(title, name);
	var isUnchanged = slice === getOption(name);
	if(readOnly || isUnchanged) return;

	var slices = store.calcAllSlices(title);
	for(var key in config.optionsSource) {
		var value = getOption(key) || '';
		if(slices[key] !== value) {
			slices[key] = value;
		}
	}

	var text = [];
	for(key in slices) {
		text.push('%0: %1'.format([key, slices[key]]));
	}
	text = text.sort().join('\n');

	var storeWasDirty = store.isDirty();
	var tiddler = store.getTiddler(title);
	if(tiddler) {
		tiddler.text = text;
		tiddler = store.saveTiddler(tiddler);
	} else {
		tiddler = store.saveTiddler(title, title, text, 'System',
			new Date(), ['excludeLists'], config.defaultCustomFields);
	}
	if(saveFile) {
		commitSystemSettings(storeWasDirty);
	}
}

function encodeCookie(s)
{
	return escape(convertUnicodeToHtmlEntities(s));
}

function decodeCookie(s)
{
	s = unescape(s);
	var re = /&#[0-9]{1,5};/g;
	return s.replace(re, function($0) { return String.fromCharCode(eval($0.replace(/[&#;]/g, ''))) });
}

config.macros.option.genericCreate = function(place, type, opt, className, desc)
{
	var typeInfo = config.macros.option.types[type];
	var text = desc != 'no' ? (config.optionsDesc[opt] || opt) : null;
	var attributes = { option: opt };
	if(typeInfo.typeValue) attributes.type = typeInfo.typeValue;
	if(config.optionsDesc[opt]) attributes.title = config.optionsDesc[opt];
	var c = createTiddlyElement(place, typeInfo.elementType, null, className || typeInfo.className, text, attributes);
	c[typeInfo.eventName] = typeInfo.onChange;
	c[typeInfo.valueField] = config.options[opt];
	return c;
};

config.macros.option.genericOnChange = function(e)
{
	var opt = this.getAttribute('option');
	if(opt) {
		var optType = opt.substring(0, 3);
		var handler = config.macros.option.types[optType];
		if(handler.elementType && handler.valueField)
			config.macros.option.propagateOption(opt, handler.valueField,
				this[handler.valueField], handler.elementType, this);
	}
	return true;
};

config.macros.option.types = {
	'txt': {
		elementType: 'input',
		valueField: 'value',
		eventName: 'onchange',
		className: 'txtOptionInput',
		create: config.macros.option.genericCreate,
		onChange: config.macros.option.genericOnChange
	},
	'chk': {
		elementType: 'input',
		valueField: 'checked',
		eventName: 'onclick',
		className: 'chkOptionInput',
		typeValue: 'checkbox',
		create: config.macros.option.genericCreate,
		onChange: config.macros.option.genericOnChange
	}
};

config.macros.option.propagateOption = function(opt, valueField, value, elementType, sourceEditor)
{
	config.options[opt] = value;
	saveOption(opt);

	jQuery(elementType + '[option=' + opt + ']').each(function(i, editor) {
		if(editor != sourceEditor) editor[valueField] = value;
	});
};

config.macros.option.handler = function(place, macroName, params, wikifier, paramString)
{
	params = paramString.parseParams('anon', null, true, false, false);
	var opt = (params[1] && params[1].name == 'anon') ? params[1].value : getParam(params, 'name', null);
	var className = (params[2] && params[2].name == 'anon') ? params[2].value : getParam(params, 'class', null);
	var desc = getParam(params, 'desc', 'no');
	var type = opt.substring(0, 3);
	var h = config.macros.option.types[type];
	if(h && h.create)
		h.create(place, type, opt, className, desc);
};

config.macros.options.handler = function(place, macroName, params, wikifier, paramString)
{
	params = paramString.parseParams('anon', null, true, false, false);
	var showUnknown = getParam(params, 'showUnknown', 'no');
	var wizard = new Wizard();
	wizard.createWizard(place, this.wizardTitle);
	wizard.addStep(this.step1Title, this.step1Html);
	var markList = wizard.getElement('markList');
	var chkUnknown = wizard.getElement('chkUnknown');
	chkUnknown.checked = showUnknown == 'yes';
	chkUnknown.onchange = this.onChangeUnknown;
	var listWrapper = document.createElement('div');
	markList.parentNode.insertBefore(listWrapper, markList);
	wizard.setValue('listWrapper', listWrapper);
	this.refreshOptions(listWrapper, showUnknown == 'yes');
};

config.macros.options.refreshOptions = function(listWrapper, showUnknown)
{
	var n, opts = [];
	for(n in config.options) {
		var isUnknown = !config.optionsDesc[n];
		if(!isUnknown || showUnknown) opts.push({
			option: '',
			name: n,
			lowlight: isUnknown,
			description: config.optionsDesc[n] || this.unknownDescription
		});
	}
	opts.sort(function(a, b) {
		var nameA = a.name.substring(3);
		var nameB = b.name.substring(3);
		return nameA < nameB ? -1 : (nameA == nameB ? 0 : +1);
	});

	ListView.create(listWrapper, opts, this.listViewTemplate);
	for(var i = 0; i < opts.length; i++) {
		var type = opts[i].name.substring(0, 3);
		var h = config.macros.option.types[type];
		if(h && h.create) {
			h.create(opts[i].colElements['option'], type, opts[i].name, null, 'no');
		}
	}
};

config.macros.options.onChangeUnknown = function(e)
{
	var wizard = new Wizard(this);
	var listWrapper = wizard.getValue('listWrapper');
	jQuery(listWrapper).empty();
	config.macros.options.refreshOptions(listWrapper, this.checked);
	return false;
};

//--
//-- Saving
//--

var startSaveArea = '<div id="' + 'storeArea">'; // Split up into two so that indexOf() of this source doesn't find it
var startSaveAreaRE = /<((div)|(DIV)) ((id)|(ID))=["']?storeArea['"]?>/; // Used for IE6
var endSaveArea = '</d' + 'iv>';
var endSaveAreaCaps = '</D' + 'IV>';

// If there are unsaved changes, force the user to confirm before exitting
function confirmExit()
{
	hadConfirmExit = true;
	var hasDirtyStore = store && store.isDirty && store.isDirty();
	var hasDirtyStory = story && story.areAnyDirty && story.areAnyDirty();
	if(hasDirtyStore || hasDirtyStory) return config.messages.confirmExit;
}

// Give the user a chance to save changes before exitting
function checkUnsavedChanges()
{
	if(store && store.isDirty && store.isDirty() && window.hadConfirmExit === false) {
		if(confirm(config.messages.unsavedChangesWarning))
			saveChanges();
	}
}

function updateLanguageAttribute(s)
{
	if(!config.locale) return s;
	var m = /(<html(?:.*?)?)(?: xml:lang\="([a-z]+)")?(?: lang\="([a-z]+)")?>/.exec(s);
	if(!m) return s;

	var htmlTag = m[1];
	if(m[2]) htmlTag += ' xml:lang="' + config.locale + '"';
	if(m[3]) htmlTag += ' lang="' + config.locale + '"';
	htmlTag += ">";

	return s.substr(0, m.index) + htmlTag + s.substr(m.index + m[0].length);
}

function updateMarkupBlock(s, blockName, tiddlerName)
{
	return tw.textUtils.replaceChunk(s,
		"<!--%0-START-->".format([blockName]),
		"<!--%0-END-->".format([blockName]),
		"\n" + store.getRecursiveTiddlerText(tiddlerName, "") + "\n");
}

function updateOriginal(original, posDiv, localPath)
{
	if(!posDiv) posDiv = locateStoreArea(original);
	if(!posDiv) {
		alert(config.messages.invalidFileError.format([localPath]));
		return null;
	}
	var revised = original.substr(0, posDiv[0] + startSaveArea.length) + "\n" +
		store.allTiddlersAsHtml() + "\n" +
		original.substr(posDiv[1]);
	var newSiteTitle = getPageTitle().htmlEncode();
	revised = tw.textUtils.replaceChunk(revised, "<title" + ">", "</title" + ">", " " + newSiteTitle + " ");
	revised = updateLanguageAttribute(revised);
	revised = updateMarkupBlock(revised, "PRE-HEAD", "MarkupPreHead");
	revised = updateMarkupBlock(revised, "POST-HEAD", "MarkupPostHead");
	revised = updateMarkupBlock(revised, "PRE-BODY", "MarkupPreBody");
	revised = updateMarkupBlock(revised, "POST-SCRIPT", "MarkupPostBody");
	return revised;
}

function locateStoreArea(original)
{
	// Locate the storeArea divs
	if(!original) return null;
	var posOpeningDiv = original.search(startSaveAreaRE);
	var limitClosingDiv = original.indexOf("<" + "!--POST-STOREAREA--" + ">");
	if(limitClosingDiv == -1)
		limitClosingDiv = original.indexOf("<" + "!--POST-BODY-START--" + ">");
	var start = limitClosingDiv == -1 ? original.length : limitClosingDiv;
	var posClosingDiv = original.lastIndexOf(endSaveArea, start);
	if(posClosingDiv == -1)
		posClosingDiv = original.lastIndexOf(endSaveAreaCaps, start);
	return (posOpeningDiv != -1 && posClosingDiv != -1) ? [posOpeningDiv, posClosingDiv] : null;
}

function autoSaveChanges(onlyIfDirty, tiddlers)
{
	if(config.options.chkAutoSave)
		saveChanges(onlyIfDirty, tiddlers);
}

// get the full HTML of the original file
function loadOriginal(localPath, callback)
{
	if(!callback) return loadFile(localPath) || window.originalHTML || recreateOriginal();

	tw.io.loadFile(localPath, function(result, details) {
		if(typeof result == 'string') {
			callback(result, details);
		} else {
			var original = window.originalHTML || recreateOriginal();
			callback(original);
		}
	});
}

// reconstruct original HTML file content from current document memory
function recreateOriginal()
{
	// construct doctype
	var content = "<!DOCTYPE ";
	var t = document.doctype;
	if (!t)
		content += "html";
	else {
		content += t.name;
		if(t.publicId)
			content += ' PUBLIC "' + t.publicId + '"';
		else if(t.systemId)
			content += ' SYSTEM "' + t.systemId + '"';
	}
	content += ' "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"';
	content += '>\n';

	// append current document content
	content += document.documentElement.outerHTML;

	// clear 'savetest' marker
	content = content.replace(/<div id="saveTest">savetest<\/div>/, '<div id="saveTest"></div>');
	content = content.replace(/script><applet [^\>]*><\/applet>/g, 'script>');
	// newline before head tag
	content = content.replace(/><head>/, '>\n<head>');
	// newlines before/after end of body/html tags
	content = content.replace(/\n\n<\/body><\/html>$/, '</' + 'body>\n</' + 'html>\n'); // #170
	// meta tag terminators
	content = content.replace(/(<(meta) [^\>]*[^\/])>/g, '$1 />');
	// decode LT/GT entities in noscript
	content = content.replace(/<noscript>[^\<]*<\/noscript>/,
		function(m) { return m.replace(/&lt;/g, '<').replace(/&gt;/g, '>') });
	// encode copyright symbols (UTF-8 to HTML entity)
	content = content.replace(/<div id="copyright">[^\<]*<\/div>/,
		function(m) { return m.replace(/\xA9/g, '&copy;') });

	return content;
}

// Save this tiddlywiki with the pending changes
function saveChanges(onlyIfDirty, tiddlers)
{
	if(onlyIfDirty && !store.isDirty()) return;

	clearMessage();
	var t0 = new Date();
	var msg = config.messages;
	if(!window.allowSave()) {
		alert(msg.notFileUrlError);
		if(store.tiddlerExists(msg.saveInstructions))
			story.displayTiddler(null, msg.saveInstructions);
		return;
	}

	var originalPath = document.location.toString();
	var localPath = getLocalPath(originalPath);
	var onLoadOriginal = function(original) {
		if(original == null) {
			alert(msg.cantSaveError);
			if(store.tiddlerExists(msg.saveInstructions))
				story.displayTiddler(null, msg.saveInstructions);
			return;
		}

		var posDiv = locateStoreArea(original);
		if(!posDiv) {
			alert(msg.invalidFileError.format([localPath]));
			return;
		}

		config.saveByDownload = false;
		config.saveByManualDownload = false;
		saveMain(localPath, original, posDiv);

		var co = config.options;
		if (!config.saveByDownload && !config.saveByManualDownload) {
			if(co.chkSaveBackups) saveBackup(localPath, original);
			if(co.chkSaveEmptyTemplate) saveEmpty(localPath, original, posDiv);
			if(co.chkGenerateAnRssFeed) saveRss(localPath);
		}

		if(co.chkDisplayInstrumentation)
			displayMessage("saveChanges " + (new Date() - t0) + " ms");
	};

	if(!config.options.chkPreventAsyncSaving) {
		loadOriginal(localPath, onLoadOriginal);
	} else {
		// useful when loadOriginal is overwritten without support of callback
		// or when an extension relies saveChanges being a sync function
		var original = loadOriginal(localPath);
		onLoadOriginal(original);
	}
}

function saveMain(localPath, original, posDiv)
{
	try {
		var revised = updateOriginal(original, posDiv, localPath);
		var saved = saveFile(localPath, revised);
		if(!saved) {
			tw.io.onSaveMainFail();
		} else {
			tw.io.onSaveMainSuccess(config.saveByDownload ? getDataURI(revised) : "file://" + localPath, revised, original);
		}
	} catch (ex) {
		tw.io.onSaveMainFail(ex);
	}
}

tw.io.onSaveMainSuccess = function(urlSaved, savedHtml, original) {
	if (!config.saveByManualDownload) {
		displayMessage(
			// set by HTML5DownloadSaveFile()
			config.saveByDownload ?
				config.messages.mainDownload :
				config.messages.mainSaved,
			urlSaved);
	}

	store.setDirty(false);
};

tw.io.onSaveMainFail = function(catchedExeption) {
	alert(config.messages.mainFailed);
	if(catchedExeption) showException(catchedExeption);
};

function saveBackup(localPath, original)
{
	var backupPath = getBackupPath(localPath);
	var backupSuccess = copyFile(backupPath, localPath) || saveFile(backupPath, original);
	if(backupSuccess)
		displayMessage(config.messages.backupSaved, "file://" + backupPath);
	else
		alert(config.messages.backupFailed);
}

function saveEmpty(localPath, original, posDiv)
{
	var emptyPath, slashPosition;
	if((slashPosition = localPath.lastIndexOf("/")) != -1)
		emptyPath = localPath.substr(0, slashPosition) + "/";
	else if((slashPosition = localPath.lastIndexOf("\\")) != -1)
		emptyPath = localPath.substr(0, slashPosition) + "\\";
	else
		emptyPath = localPath + ".";
	emptyPath += "empty.html";

	var empty = original.substr(0, posDiv[0] + startSaveArea.length) + original.substr(posDiv[1]);
	var emptySave = saveFile(emptyPath, empty);
	if(emptySave)
		displayMessage(config.messages.emptySaved, "file://" + emptyPath);
	else
		alert(config.messages.emptyFailed);
}

// Translate URL to local path [Preemption]
window.getLocalPath = window.getLocalPath || function(origPath)
{
	var originalPath = convertUriToUTF8(origPath, config.options.txtFileSystemCharSet);
	// Remove any location or query part of the URL
	var argPos = originalPath.indexOf("?");
	if(argPos != -1)
		originalPath = originalPath.substr(0, argPos);
	var hashPos = originalPath.indexOf("#");
	if(hashPos != -1)
		originalPath = originalPath.substr(0, hashPos);
	// Convert file://localhost/ to file:///
	if(originalPath.indexOf("file://localhost/") == 0)
		originalPath = "file://" + originalPath.substr(16);
	// Convert to a native file format
	// "file:///x:/path/path/path..." - pc local file --> "x:\path\path\path..."
	// "file://///server/share/path/path/path..." - FireFox pc network file --> "\\server\share\path\path\path..."
	// "file:///path/path/path..." - mac/unix local file --> "/path/path/path..."
	// "file://server/share/path/path/path..." - pc network file --> "\\server\share\path\path\path..."
	var localPath;
	if(originalPath.charAt(9) == ":") // pc local file
		localPath = unescape(originalPath.substr(8)).replace(new RegExp("/", "g"), "\\");
	else if(originalPath.indexOf("file://///") == 0) // FireFox pc network file
		localPath = "\\\\" + unescape(originalPath.substr(10)).replace(new RegExp("/", "g"), "\\");
	else if(originalPath.indexOf("file:///") == 0) // mac/unix local file
		localPath = unescape(originalPath.substr(7));
	else if(originalPath.indexOf("file:/") == 0) // mac/unix local file
		localPath = unescape(originalPath.substr(5));
	else // pc network file
		localPath = "\\\\" + unescape(originalPath.substr(7)).replace(new RegExp("/", "g"), "\\");
	return localPath;
};

function getBackupPath(localPath, filenameSuffix, extension)
{
	var slash = "\\";
	var dirPathPos = localPath.lastIndexOf("\\");
	if(dirPathPos == -1) {
		dirPathPos = localPath.lastIndexOf("/");
		slash = "/";
	}
	var backupFolder = config.options.txtBackupFolder || ".";
	var backupPath = localPath.substring(0, dirPathPos) + slash + backupFolder + localPath.substring(dirPathPos);
	backupPath = backupPath.substring(0, backupPath.lastIndexOf(".")) + ".";
	if(filenameSuffix) {
		var illegalFilenameCharacterOrSpaceRE = /[\\\/\*\?\":<> ]/g;
		backupPath += filenameSuffix.replace(illegalFilenameCharacterOrSpaceRE, "_") + ".";
	}
	backupPath += (new Date()).convertToYYYYMMDDHHMMSSMMM() + "." + (extension || "html");
	return backupPath;
}

//--
//-- RSS Saving
//--

function saveRss(localPath)
{
	var rssPath = localPath.substr(0, localPath.lastIndexOf(".")) + ".xml";
	if(saveFile(rssPath, generateRss()))
		displayMessage(config.messages.rssSaved, "file://" + rssPath);
	else
		alert(config.messages.rssFailed);
}

tiddlerToRssItem = function(tiddler, uri)
{
	var s = "<title" + ">" + tiddler.title.htmlEncode() + "</title" + ">\n";
	s += "<description>" + wikifyStatic(tiddler.text, null, tiddler).htmlEncode() + "</description>\n";
	for(var i = 0; i < tiddler.tags.length; i++)
		s += "<category>" + tiddler.tags[i] + "</category>\n";
	s += "<link>" + uri + "#" + encodeURIComponent(String.encodeTiddlyLink(tiddler.title)) + "</link>\n";
	s += "<pubDate>" + tiddler.modified.toGMTString() + "</pubDate>\n";
	return s;
};

function generateRss()
{
	var s = [];
	var d = new Date();
	var u = store.getTiddlerText("SiteUrl");
	// Assemble the header
	s.push("<" + "?xml version=\"1.0\"?" + ">");
	s.push("<rss version=\"2.0\">");
	s.push("<channel>");
	s.push("<title" + ">" + wikifyPlainText(store.getTiddlerText("SiteTitle", ""),
		null, tiddler).htmlEncode() + "</title" + ">");
	if(u) s.push("<link>" + u.htmlEncode() + "</link>");
	s.push("<description>" + wikifyPlainText(store.getTiddlerText("SiteSubtitle", ""),
		null, tiddler).htmlEncode() + "</description>");
	s.push("<language>" + config.locale + "</language>");
	s.push("<copyright>Copyright " + d.getFullYear() + " " + config.options.txtUserName.htmlEncode() + "</copyright>");
	s.push("<pubDate>" + d.toGMTString() + "</pubDate>");
	s.push("<lastBuildDate>" + d.toGMTString() + "</lastBuildDate>");
	s.push("<docs>http://blogs.law.harvard.edu/tech/rss</docs>");
	s.push("<generator>TiddlyWiki " + formatVersion() + "</generator>");
	// The body
	var tiddlers = store.getTiddlers("modified", "excludeLists");
	var i, n = config.numRssItems > tiddlers.length ? 0 : tiddlers.length - config.numRssItems;
	for(i = tiddlers.length - 1; i >= n; i--) {
		s.push("<item>\n" + tiddlerToRssItem(tiddlers[i], u) + "\n</item>");
	}
	// And footer
	s.push("</channel>");
	s.push("</rss>");
	// Save it all
	return s.join("\n");
}

//--
//-- Filesystem code
//--

// Copy a file in filesystem [Preemption]
window.copyFile = window.copyFile || function(dest, source)
{
	return config.browser.isIE ? ieCopyFile(dest, source) : false;
};

// Save a file in filesystem [Preemption]
window.saveFile = window.saveFile || function(fileUrl, content)
{
	var r = mozillaSaveFile(fileUrl, content);
	if(!r)
		r = ieSaveFile(fileUrl, content);
	if(!r)
		r = javaSaveFile(fileUrl, content);
	if(!r)
		r = HTML5DownloadSaveFile(fileUrl, content);
	if(!r)
		r = manualSaveFile(fileUrl, content);
	return r;
};

// Load a file from filesystem [Preemption]
window.loadFile = window.loadFile || function(fileUrl)
{
	var r = mozillaLoadFile(fileUrl);
	if((r === null) || (r === false))
		r = ieLoadFile(fileUrl);
	if((r === null) || (r === false))
		r = javaLoadFile(fileUrl);
	if((r === null) || (r === false))
		r = tw.io.xhrLoadFile(fileUrl);
	return r;
};

tw.io.xhrLoadFile = function(filePath, callback)
{
	try {
		var isAsync = !!callback;
		var url = 'file://' + (filePath[0] != '/' ? '/' : '') + encodeURIComponent(filePath);
		if(isAsync) {
			httpReq('GET', url, function(status, params, responseText, url, xhr) {
				callback(responseText, { xhr: xhr });
			});
		} else {
			var xhr = new XMLHttpRequest();
			xhr.open('GET', url, isAsync);
			xhr.send(null);
			return xhr.responseText;
		}
	} catch(ex) {
		return callback ? callback(null) : null;
	}
};

// if callback is set, tries to load in an async fashion and do callback(result, details)
tw.io.loadFile = function(fileUrl, callback)
{
	if(!callback) return loadFile(fileUrl);

	tw.io.xhrLoadFile(fileUrl, function(result, details) {
		if(typeof result == 'string') {
			callback(result, details);
		} else {
			result = loadFile(fileUrl);
			callback(result);
		}
	});
};


function ieCreatePath(path)
{
	try {
		var fso = new ActiveXObject("Scripting.FileSystemObject");
	} catch(ex) {
		return null;
	}

	// Remove the filename, if present. Use trailing slash (i.e. "foo\bar\") if no filename.
	var pos = path.lastIndexOf("\\");
	if(pos == -1)
		pos = path.lastIndexOf("/");
	if(pos != -1)
		path = path.substring(0, pos + 1);

	// Walk up the path until we find a folder that exists
	var scan = [path];
	var parent = fso.GetParentFolderName(path);
	while(parent && !fso.FolderExists(parent)) {
		scan.push(parent);
		parent = fso.GetParentFolderName(parent);
	}

	// Walk back down the path, creating folders
	for(var i = scan.length - 1; i >= 0; i--) {
		if(!fso.FolderExists(scan[i])) {
			fso.CreateFolder(scan[i]);
		}
	}
	return true;
}

// Returns null if it can't do it, false if there's an error, true if it saved OK
function ieSaveFile(filePath, content)
{
	ieCreatePath(filePath);
	try {
		var fso = new ActiveXObject("Scripting.FileSystemObject");
	} catch(ex) {
		return null;
	}
	var file = fso.OpenTextFile(filePath, 2, -1, 0);
	file.Write(convertUnicodeToHtmlEntities(content));
	file.Close();
	return true;
}

// Returns null if it can't do it, false if there's an error, or a string of the content if successful
function ieLoadFile(filePath)
{
	try {
		var fso = new ActiveXObject("Scripting.FileSystemObject");
		var file = fso.OpenTextFile(filePath, 1);
		var content = file.ReadAll();
		file.Close();
	} catch(ex) {
		return null;
	}
	return content;
}

function ieCopyFile(dest, source)
{
	ieCreatePath(dest);
	try {
		var fso = new ActiveXObject("Scripting.FileSystemObject");
		fso.GetFile(source).Copy(dest);
	} catch(ex) {
		return false;
	}
	return true;
}

// Returns null if it can't do it, false if there's an error, true if it saved OK
function mozillaSaveFile(filePath, content)
{
	if(!window.Components) return null;

	content = mozConvertUnicodeToUTF8(content);
	try {
		netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
		var file = Components.classes["@mozilla.org/file/local;1"]
			.createInstance(Components.interfaces.nsILocalFile);
		file.initWithPath(filePath);
		if(!file.exists())
			file.create(0, 0x01B4);// 0x01B4 = 0664
		var out = Components.classes["@mozilla.org/network/file-output-stream;1"]
			.createInstance(Components.interfaces.nsIFileOutputStream);
		out.init(file, 0x22, 0x04, null);
		out.write(content, content.length);
		out.flush();
		out.close();
		return true;
	} catch(ex) {
		return false;
	}
}

// Returns null if it can't do it, false if there's an error, or a string of the content if successful
function mozillaLoadFile(filePath)
{
	if(!window.Components) return null;

	try {
		netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
		var file = Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);
		file.initWithPath(filePath);
		if(!file.exists())
			return null;
		var inputStream = Components.classes["@mozilla.org/network/file-input-stream;1"]
			.createInstance(Components.interfaces.nsIFileInputStream);
		inputStream.init(file, 0x01, 0x04, null);
		var sInputStream = Components.classes["@mozilla.org/scriptableinputstream;1"]
			.createInstance(Components.interfaces.nsIScriptableInputStream);
		sInputStream.init(inputStream);
		var contents = sInputStream.read(sInputStream.available());
		sInputStream.close();
		inputStream.close();
		return mozConvertUTF8ToUnicode(contents);
	} catch(ex) {
		return false;
	}
}

function javaUrlToFilename(url)
{
	var f = "//localhost";
	if(url.indexOf(f) == 0)
		return url.substring(f.length);
	var i = url.indexOf(":");
	return i > 0 ? url.substring(i - 1) : url;
}

/*
 * in between when the applet has been started
 * and the user has given permission to run the applet
 * we get an applet object, but it doesn't have the methods
 * we expect yet.
 */
var LOG_TIDDLYSAVER = true;
function logTiddlySaverException(msg, ex)
{
	var applet = document.applets['TiddlySaver'];
	console.log(msg + ": " + ex);
	if (LOG_TIDDLYSAVER && applet) {
		try {
			console.log(msg + ": " + applet.getLastErrorMsg());
			console.log(msg + ": " + applet.getLastErrorStackTrace());
		} catch (ex) {}
	}
}

function javaDebugInformation()
{
	var applet = document.applets['TiddlySaver'];
	var what = [
		["Java Version", applet.getJavaVersion],
		["Last Exception", applet.getLastErrorMsg], // #156
		["Last Exception Stack Trace", applet.getLastErrorStackTrace],
		["System Properties", applet.getSystemProperties] ];

	function formatItem (description, method) {
		try {
			 result = String(method.call(applet));
		} catch (ex) {
			 result = String(ex);
		}
		return description + ": " + result;
	}

	return jQuery.map(what, function (item) { return formatItem.apply(this, item) })
		.join('\n\n');
}

function javaSaveFile(filePath, content)
{
	if(!filePath) return null;
	var applet = document.applets['TiddlySaver'];
	if(applet) {
		try {
			return applet.saveFile(javaUrlToFilename(filePath), "UTF-8", content);
		} catch(ex) {
			logTiddlySaverException("javaSaveFile", ex);
		}
	}
	try {
		var s = new java.io.PrintStream(new java.io.FileOutputStream(javaUrlToFilename(filePath)));
		s.print(content);
		s.close();
	} catch(ex2) {
		return null;
	}
	return true;
}

function javaLoadFile(filePath)
{
	if(!filePath) return null;
	var applet = document.applets['TiddlySaver'];
	if(applet) {
		try {
			var value = applet.loadFile(javaUrlToFilename(filePath), "UTF-8");
			return !value ? null : String(value);
		} catch(ex) {
			logTiddlySaverException("javaLoadFile", ex);
		}
	}
	var content = [];
	try {
		var r = new java.io.BufferedReader(new java.io.FileReader(javaUrlToFilename(filePath)));
		var line;
		while((line = r.readLine()) != null)
			content.push(String(line));
		r.close();
	} catch(ex2) {
		return null;
	}
	return content.join("\n");
}

function HTML5DownloadSaveFile(filePath, content)
{
	var link = document.createElement("a");
	if(link.download === undefined)
		return null;

	config.saveByDownload = true;
	var slashpos = filePath.lastIndexOf("/");
	if (slashpos == -1) slashpos = filePath.lastIndexOf("\\");
	var filename = filePath.substr(slashpos + 1);
	var uri = getDataURI(content);
	link.setAttribute("target", "_blank");
	link.setAttribute("href", uri);
	link.setAttribute("download", filename);
	document.body.appendChild(link);
	link.click();
	document.body.removeChild(link);
	return true;
}

// Returns null if it can't do it, false if there's an error, true if it saved OK
function manualSaveFile(filePath, content)
{
	// FALLBACK for showing a link to data: URI
	config.saveByManualDownload = true;
	var slashpos = filePath.lastIndexOf("/");
	if (slashpos == -1) slashpos = filePath.lastIndexOf("\\");
	var filename = filePath.substr(slashpos + 1);
	var uri = getDataURI(content);
	displayMessage(config.messages.mainDownloadManual, uri);
	return true;
}

// construct data URI (using base64 encoding to preserve multi-byte encodings)
function getDataURI(data)
{
	if (config.browser.isIE)
		return "data:text/html," + encodeURIComponent(data);
	else
		// manualConvertUnicodeToUTF8 was moved here from convertUnicodeToFileFormat
		// in 2.9.1 it was used only for FireFox but happened to fix download saving non-ASCII in Chrome & Safari as well
		return "data:text/html;base64," + encodeBase64(manualConvertUnicodeToUTF8(data));
}

function encodeBase64(data)
{
	if (!data) return "";
	var keyStr = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
	var out = "";
	var chr1, chr2, chr3 = "";
	var enc1, enc2, enc3, enc4 = "";
	for (var i = 0; i < data.length; )
	{
		chr1 = data.charCodeAt(i++);
		chr2 = data.charCodeAt(i++);
		chr3 = data.charCodeAt(i++);
		enc1 = chr1 >> 2;
		enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);
		enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);
		enc4 = chr3 & 63;
		if (isNaN(chr2)) enc3 = enc4 = 64;
		else if (isNaN(chr3)) enc4 = 64;
		out += keyStr.charAt(enc1) + keyStr.charAt(enc2) + keyStr.charAt(enc3) + keyStr.charAt(enc4);
		chr1 = chr2 = chr3 = enc1 = enc2 = enc3 = enc4 = "";
	}
	return out;
}

//--
//-- Filesystem utilities
//--

function convertUTF8ToUnicode(u)
{
	return config.browser.isOpera || !window.netscape ? manualConvertUTF8ToUnicode(u) : mozConvertUTF8ToUnicode(u);
}


function manualConvertUTF8ToUnicode(utf)
{
	var uni = utf;
	var src = 0;
	var dst = 0;
	var b1, b2, b3;
	var c;
	while(src < utf.length) {
		b1 = utf.charCodeAt(src++);
		if(b1 < 0x80) {
			dst++;
		} else if(b1 < 0xE0) {
			b2 = utf.charCodeAt(src++);
			c = String.fromCharCode(((b1 & 0x1F) << 6) | (b2 & 0x3F));
			uni = uni.substring(0, dst++).concat(c, utf.substr(src));
		} else {
			b2 = utf.charCodeAt(src++);
			b3 = utf.charCodeAt(src++);
			c = String.fromCharCode(((b1 & 0xF) << 12) | ((b2 & 0x3F) << 6) | (b3 & 0x3F));
			uni = uni.substring(0, dst++).concat(c, utf.substr(src));
		}
	}
	return uni;
}

function mozConvertUTF8ToUnicode(u)
{
	try {
		netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
		var converter = Components.classes["@mozilla.org/intl/scriptableunicodeconverter"]
			.createInstance(Components.interfaces.nsIScriptableUnicodeConverter);
		converter.charset = "UTF-8";
	} catch(ex) {
		return manualConvertUTF8ToUnicode(u);
	} // fallback
	var s = converter.ConvertToUnicode(u);
	var fin = converter.Finish();
	return fin.length > 0 ? s + fin : s;
}

function manualConvertUnicodeToUTF8(s)
{
	return unescape(encodeURIComponent(s));
}

function mozConvertUnicodeToUTF8(s)
{
	try {
		netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
		var converter = Components.classes["@mozilla.org/intl/scriptableunicodeconverter"]
			.createInstance(Components.interfaces.nsIScriptableUnicodeConverter);
		converter.charset = "UTF-8";
	} catch(ex) {
		return manualConvertUnicodeToUTF8(s);
	} // fallback
	var u = converter.ConvertFromUnicode(s);
	var fin = converter.Finish();
	return fin.length > 0 ? u + fin : u;
}

function convertUnicodeToHtmlEntities(s)
{
	var re = /[^\u0000-\u007F]/g;
	return s.replace(re, function($0) { return "&#" + $0.charCodeAt(0).toString() + ";" });
}

function convertUriToUTF8(uri, charSet)
{
	if(window.netscape == undefined || charSet == undefined || charSet == "")
		return uri;
	try {
		netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
		var converter = Components.classes["@mozilla.org/intl/utf8converterservice;1"]
			.getService(Components.interfaces.nsIUTF8ConverterService);
	} catch(ex) {
		return uri;
	}
	return converter.convertURISpecToUTF8(uri, charSet);
}

// deprecated helper for backward-compatibility with elder extensions
// (browser/saving method-specific convertion is only needed in browser-specific savers)
function convertUnicodeToFileFormat(s)
{
	return s;
}

// deprecated helper for backward-compatibility with elder extensions
function convertUnicodeToUTF8(s)
{
	return s;
}

//--
//-- Server adaptor base class
//--

function AdaptorBase()
{
	this.host = null;
	this.store = null;
	return this;
}

AdaptorBase.prototype.close = function()
{
	return true;
};

AdaptorBase.prototype.fullHostName = function(host)
{
	if(!host) return '';
	host = jQuery.trim(host);
	if(!host.match(/:\/\//))
		host = 'http://' + host;
	if(host.substr(host.length - 1) == '/')
		host = host.substr(0, host.length - 1);
	return host;
};

AdaptorBase.minHostName = function(host)
{
	return host;
};

AdaptorBase.prototype.setContext = function(context, userParams, callback)
{
	if(!context) context = {};
	context.userParams = userParams;
	if(callback) context.callback = callback;
	context.adaptor = this;
	if(!context.host)
		context.host = this.host;
	context.host = this.fullHostName(context.host);
	if(!context.workspace)
		context.workspace = this.workspace;
	return context;
};

// Open the specified host
//   host - uri of host (eg, "http://www.tiddlywiki.com/" or "www.tiddlywiki.com")
//   context is itself passed on as a parameter to the callback function
//   userParams - user settable object object that is passed on unchanged to the callback function
//   callback - optional function to be called on completion
// Return value is true if the request was successfully issued, false if this connector doesn't support openHost(),
//   or an error description string if there was a problem
// The callback parameters are callback(context)
//   context.status - true if OK, string if error
//   context.adaptor - reference to this adaptor object
//   userParams - parameters as originally passed into the openHost function
AdaptorBase.prototype.openHost = function(host, context, userParams, callback)
{
	this.host = host;
	context = this.setContext(context, userParams, callback);
	context.status = true;
	if(callback)
		window.setTimeout(function() { context.callback(context, userParams) }, 10);
	return true;
};

// Open the specified workspace
//   workspace - name of workspace to open
//   context - passed on as a parameter to the callback function
//   userParams - user settable object object that is passed on unchanged to the callback function
//   callback - function to be called on completion
// Return value is true if the request was successfully issued
//   or an error description string if there was a problem
// The callback parameters are callback(context, userParams)
//   context.status - true if OK, false if error
//   context.statusText - error message if there was an error
//   context.adaptor - reference to this adaptor object
//   userParams - parameters as originally passed into the openWorkspace function
AdaptorBase.prototype.openWorkspace = function(workspace, context, userParams, callback)
{
	this.workspace = workspace;
	context = this.setContext(context, userParams, callback);
	context.status = true;
	if(callback)
		window.setTimeout(function() { callback(context, userParams) }, 10);
	return true;
};

//--
//-- Server adaptor for talking to static TiddlyWiki files
//--

function FileAdaptor()
{
}

FileAdaptor.prototype = new AdaptorBase();

FileAdaptor.serverType = 'file';
FileAdaptor.serverLabel = 'TiddlyWiki';

FileAdaptor.loadTiddlyWikiSuccess = function(context, jqXHR)
{
	context.status = true;
	context.adaptor.store = new TiddlyWiki();
	if(!context.adaptor.store.importTiddlyWiki(jqXHR.responseText)) {
		context.statusText = config.messages.invalidFileError.format([context.host]);
		context.status = false;
	}
	context.complete(context, context.userParams);
};

FileAdaptor.loadTiddlyWikiError = function(context, jqXHR)
{
	context.status = false;
	context.statusText = jqXHR.message;
	context.complete(context, context.userParams);
};

// Get the list of workspaces on a given server
//   context - passed on as a parameter to the callback function
//   userParams - user settable object object that is passed on unchanged to the callback function
//   callback - function to be called on completion
// Return value is true if the request was successfully issued,
//   false if this connector doesn't support getWorkspaceList(),
//   or an error description string if there was a problem
// The callback parameters are callback(context, userParams)
//   context.status - true if OK, false if error
//   context.statusText - error message if there was an error
//   context.adaptor - reference to this adaptor object
//   userParams - parameters as originally passed into the getWorkspaceList function
FileAdaptor.prototype.getWorkspaceList = function(context, userParams, callback)
{
	context = this.setContext(context, userParams, callback);
	context.workspaces = [{ title: "(default)" }];
	context.status = true;
	if(callback)
		window.setTimeout(function() { callback(context, userParams) }, 10);
	return true;
};

// Gets the list of tiddlers within a given workspace
//   context - passed on as a parameter to the callback function
//   userParams - user settable object object that is passed on unchanged to the callback function
//   callback - function to be called on completion
//   filter - filter expression
// Return value is true if the request was successfully issued,
//   or an error description string if there was a problem
// The callback parameters are callback(context, userParams)
//   context.status - true if OK, false if error
//   context.statusText - error message if there was an error
//   context.adaptor - reference to this adaptor object
//   context.tiddlers - array of tiddler objects
//   userParams - parameters as originally passed into the getTiddlerList function
FileAdaptor.prototype.getTiddlerList = function(context, userParams, callback, filter)
{
	context = this.setContext(context, userParams, callback);
	if(!context.filter)
		context.filter = filter;
	context.complete = FileAdaptor.getTiddlerListComplete;
	if(this.store) {
		return context.complete(context, context.userParams);
	}
	var options = {
		type: "GET",
		url: context.host,
		file: context.file, // for HTML5 FileReader
		processData: false,
		success: function(data, textStatus, jqXHR) {
			FileAdaptor.loadTiddlyWikiSuccess(context, jqXHR);
		},
		error: function(jqXHR, textStatus, errorThrown) {
			context.xhr = jqXHR;
			FileAdaptor.loadTiddlyWikiError(context, jqXHR);
		}
	};
	return ajaxReq(options);
};

FileAdaptor.getTiddlerListComplete = function(context, userParams)
{
	if(context.status) {
		if(context.filter) {
			context.tiddlers = context.adaptor.store.filterTiddlers(context.filter);
		} else {
			context.tiddlers = [];
			context.adaptor.store.forEachTiddler(function(title, tiddler) { context.tiddlers.push(tiddler) });
		}
		for(var i = 0; i < context.tiddlers.length; i++) {
			context.tiddlers[i].fields['server.type'] = FileAdaptor.serverType;
			context.tiddlers[i].fields['server.host'] = AdaptorBase.minHostName(context.host);
			context.tiddlers[i].fields['server.page.revision'] = context.tiddlers[i].modified.convertToYYYYMMDDHHMM();
		}
		context.status = true;
	}
	if(context.callback) {
		window.setTimeout(function() { context.callback(context, userParams) }, 10);
	}
	return true;
};

FileAdaptor.prototype.generateTiddlerInfo = function(tiddler)
{
	return {
		uri: tiddler.fields['server.host'] + "#" + tiddler.title
	};
};

// Retrieve a tiddler from a given workspace on a given server
//   title - title of the tiddler to get
//   context - passed on as a parameter to the callback function
//   userParams - user settable object object that is passed on unchanged to the callback function
//   callback - function to be called on completion
// Return value is true if the request was successfully issued,
//   or an error description string if there was a problem
// The callback parameters are callback(context, userParams)
//   context.status - true if OK, false if error
//   context.statusText - error message if there was an error
//   context.adaptor - reference to this adaptor object
//   context.tiddler - the retrieved tiddler, or null if it cannot be found
//   userParams - parameters as originally passed into the getTiddler function
FileAdaptor.prototype.getTiddler = function(title, context, userParams, callback)
{
	context = this.setContext(context, userParams, callback);
	context.title = title;
	context.complete = FileAdaptor.getTiddlerComplete;
	if(context.adaptor.store) {
		return context.complete(context, context.userParams);
	}
	var options = {
		type: "GET",
		url: context.host,
		processData: false,
		success: function(data, textStatus, jqXHR) {
			FileAdaptor.loadTiddlyWikiSuccess(context, jqXHR);
		},
		error: function(jqXHR, textStatus, errorThrown) {
			FileAdaptor.loadTiddlyWikiError(context, jqXHR);
		}
	};
	return ajaxReq(options);
};

FileAdaptor.getTiddlerComplete = function(context, userParams)
{
	var t = context.adaptor.store.fetchTiddler(context.title);
	if(t) {
		t.fields['server.type'] = FileAdaptor.serverType;
		t.fields['server.host'] = AdaptorBase.minHostName(context.host);
		t.fields['server.page.revision'] = t.modified.convertToYYYYMMDDHHMM();
		context.tiddler = t;
		context.status = true;
	} else { //# tiddler does not exist in document
		context.status = false;
	}
	if(context.allowSynchronous) {
		context.isSynchronous = true;
		context.callback(context, userParams);
	} else {
		window.setTimeout(function() { context.callback(context, userParams) }, 10);
	}
	return true;
};

FileAdaptor.prototype.close = function()
{
	this.store = null;
};

config.adaptors[FileAdaptor.serverType] = FileAdaptor;

config.defaultAdaptor = FileAdaptor.serverType;

//--
//-- HTTP request code
//--

// Perform an http request using the jQuery ajax function
// fallback to privileged file I/O or HTML5 FileReader
function ajaxReq(args)
{
	if (args.file || args.url.startsWith("file"))  // LOCAL FILE
		return localAjax(args);
	return jQuery.ajax(args);
}

// perform local I/O and FAKE a minimal XHR response object
function localAjax(args)
{
	var success = function(data) {
		args.success(data, "success", { responseText: data });
	};
	var failure = function(who) {
		args.error({ message: who + ": cannot read local file" }, "error", 0);
	};

	if (args.file) try { // HTML5 FileReader (Chrome, FF20+, Safari, etc.)
		var reader = new FileReader();
		reader.onload = function(e)  { success(e.target.result) };
		reader.onerror = function(e) { failure("FileReader") };
		reader.readAsText(args.file);
		return true;
	} catch (ex) { ; }

	try { // local file I/O (IE, FF with TiddlyFox, Chrome/Safari with TiddlySaver, etc.)
		var data = loadFile(getLocalPath(args.url));
		if (data) success(data);
		else failure("loadFile");
		return true;
	} catch (ex) { ; }

	return true;
}

// Perform an http request
//   type - GET/POST/PUT/DELETE
//   url - the source url
//   data - optional data for POST and PUT
//   contentType - optionalContent type for the data (defaults to application/x-www-form-urlencoded)
//   username - optional username for basic authentication
//   password - optional password for basic authentication
//   callback - function to call when there is a response
//   params - parameter object that gets passed to the callback for storing it's state
//   headers - optional hashmap of additional headers
//   allowCache - unless true, adds a "nocache=" parameter to the URL
// Return value is the underlying XMLHttpRequest object, or a string if there was an error
// Callback function is called like this:
//   callback(status, params, responseText, url, xhr)
//     status - true if OK, false if error
//     params - the parameter object provided to loadRemoteFile()
//     responseText - the text of the file
//     url - requested URL
//     xhr - the underlying XMLHttpRequest object
function httpReq(type, url, callback, params, headers, data, contentType, username, password, allowCache)
{
	var httpSuccess = function(xhr) {
		try {
			// IE error sometimes returns 1223 when it should be 204 so treat it as success, see #1450
			return (!xhr.status && location.protocol === "file:") ||
				(xhr.status >= 200 && xhr.status < 300) ||
				xhr.status === 304 || xhr.status === 1223;
		} catch(e) {}
		return false;
	};

	var options = {
		type: type,
		url: url,
		processData: false,
		data: data,
		cache: !!allowCache,
		beforeSend: function(xhr) {
			for(var i in headers)
				xhr.setRequestHeader(i, headers[i]);
		}
	};

	if(callback) {
		options.complete = function(xhr, textStatus) {
			if(httpSuccess(xhr))
				callback(true, params, xhr.responseText, url, xhr);
			else
				callback(false, params, null, url, xhr);
		};
	}
	if(contentType)
		options.contentType = contentType;
	if(username)
		options.username = username;
	if(password)
		options.password = password;
	try {
		if(window.Components && window.netscape && window.netscape.security
		   && document.location.protocol.indexOf("http") == -1)
			window.netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");
	} catch (ex) {
	}
	return jQuery.ajax(options);
}
//--
//-- TiddlyWiki-specific utility functions
//--

// Return TiddlyWiki version string
function formatVersion(v)
{
	v = v || version;
	return v.major + "." + v.minor + "." + v.revision +
		(v.alpha ? " (alpha " + v.alpha + ")" : "") +
		(v.beta ? " (beta " + v.beta + ")" : "");
}

function compareVersions(v1, v2)
{
	var x1, x2, i, a = ["major", "minor", "revision"];
	for(i = 0; i < a.length; i++)
	{
		x1 = v1[a[i]] || 0;
		x2 = v2[a[i]] || 0;
		if(x1 < x2) return +1;
		if(x1 > x2) return -1;
	}
	x1 = v1.beta || Infinity;
	x2 = v2.beta || Infinity;
	return x1 < x2 ? +1 :
	       x1 > x2 ? -1 : 0;
}

function merge(dst, src, preserveExisting)
{
	for(var key in src)
		if(!preserveExisting || dst[key] === undefined)
			dst[key] = src[key];

	return dst;
}

// Get the target of an event
function resolveTarget(event)
{
	var obj = event.target || event.srcElement;
	// defeat Safari bug
	if(obj.nodeType == 3)
		obj = obj.parentNode;
	return obj;
}

// Return the description of an exception (string)
function exceptionText(ex, prependedMessage)
{
	var s = ex.description || ex.toString();
	return prependedMessage ? (prependedMessage + ":\n" + s) : s;
}

// Display an alert of an exception description with optional message
function showException(e, prependedMessage)
{
	alert(exceptionText(e, prependedMessage));
}

function alertAndThrow(m)
{
	alert(m);
	throw(m);
}

function glyph(name)
{
	var g = config.glyphs;
	if(!g.codes[name]) return "";
	if(g.currBrowser == null) {
		var i = 0;
		while(i < g.browsers.length - 1 && !g.browsers[i]())
			i++;
		g.currBrowser = i;
	}
	return g.codes[name][g.currBrowser];
}

function createTiddlyText(parent, text)
{
	return parent.appendChild(document.createTextNode(text));
}

function createTiddlyCheckbox(parent, caption, checked, onChange)
{
	var cb = document.createElement("input");
	cb.setAttribute("type", "checkbox");
	cb.onclick = onChange;
	parent.appendChild(cb);
	cb.checked = checked;
	cb.className = "chkOptionInput";
	if(caption)
		wikify(caption, parent);
	return cb;
}

function createTiddlyElement(parent, element, id, className, text, attribs)
{
	var n, e = document.createElement(element);
	if(className != null) e.className = className;
	if(       id != null) e.setAttribute('id', id);
	if(     text != null) createTiddlyText(e, text);
	if(attribs) {
		for(n in attribs) e.setAttribute(n, attribs[n]);
	}
	if(parent != null) parent.appendChild(e);
	return e;
}

function createTiddlyButton(parent, text, tooltip, action, className, id, accessKey, customAttributes)
{
	var attributes = { href: 'javascript:;' };
	if(tooltip)   attributes.title = tooltip;
	if(accessKey) attributes.accessKey = accessKey;
	merge(attributes, customAttributes || {});

	var btn = createTiddlyElement(parent, 'a', id || null, className || 'button', text, attributes);
	if(action) btn.onclick = action;
	return btn;
}

function createExternalLink(place, url, label)
{
	var tooltip = config.messages.externalLinkTooltip;
	var link = createTiddlyElement(place, 'a', null, 'externalLink', label, {
		href: url,
		title: tooltip ? tooltip.format([url]) : url
	});
	if(config.options.chkOpenInNewWindow)
		link.target = "_blank";
	return link;
}

function getTiddlyLinkInfo(title, currClasses)
{
	var classes = currClasses ? currClasses.split(" ") : [];
	classes.pushUnique("tiddlyLink");
	var tiddler = store.fetchTiddler(title);
	var subTitle;
	if(tiddler) {
		subTitle = tiddler.getSubtitle();
		classes.pushUnique("tiddlyLinkExisting");
		classes.remove("tiddlyLinkNonExisting");
		classes.remove("shadow");
	} else {
	    var f;
		classes.remove("tiddlyLinkExisting");
		classes.pushUnique("tiddlyLinkNonExisting");
		if(store.isShadowTiddler(title)) {
			f = config.messages.shadowedTiddlerToolTip;
			classes.pushUnique("shadow");
		} else {
			f = config.messages.undefinedTiddlerToolTip;
			classes.remove("shadow");
		}
		subTitle = f ? f.format([title]) : "";
	}
	if(typeof config.annotations[title] == "string")
		subTitle = config.annotations[title];
	return { classes: classes.join(" "), subTitle: subTitle };
}

// Event handler for clicking on a tiddly link
function onClickTiddlerLink(ev)
{
	var e = ev || window.event;
	var target = resolveTarget(e);
	var link = target;
	var title = null;
	var fields = null;
	var noToggle = null;
	do {
		title = link.getAttribute("tiddlyLink");
		fields = link.getAttribute("tiddlyFields");
		noToggle = link.getAttribute("noToggle");
		link = link.parentNode;
	} while(title == null && link != null);
	if(!store.isShadowTiddler(title)) {
		var f = fields ? fields.decodeHashMap() : {};
		fields = String.encodeHashMap(merge(f, config.defaultCustomFields, true));
	}
	if(title) {
		var toggling = e.metaKey || e.ctrlKey;
		if(config.options.chkToggleLinks)
			toggling = !toggling;
		if(noToggle)
			toggling = false;
		if(store.getTiddler(title))
			fields = null;
		story.displayTiddler(target, title, null, true, null, fields, toggling);
	}
	clearMessage();
	return false;
}

function getTiddlerLinkHref(title)
{
	return window.location.toString().replace(/#.*$/, '') + story.getPermaViewHash([title]);
}

function createTiddlyLink(place, title, includeText, className, isStatic, linkedFromTiddler, noToggle)
{
	var title = jQuery.trim(title);
	var text = includeText ? title : null;
	var info = getTiddlyLinkInfo(title, className);
	var btn = isStatic ?
		createExternalLink(place, store.getTiddlerText("SiteUrl", null) + story.getPermaViewHash([title])) :
		createTiddlyButton(place, text, info.subTitle, onClickTiddlerLink, info.classes, '', '', {
			href: getTiddlerLinkHref(title)
		});
	if(isStatic)
		btn.className += ' ' + className;
	btn.setAttribute("refresh", "link");
	btn.setAttribute("tiddlyLink", title);
	if(noToggle)
		btn.setAttribute("noToggle", "true");
	if(linkedFromTiddler)
	{
		var fields = linkedFromTiddler.getInheritedFields();
		if(fields)
			btn.setAttribute("tiddlyFields", fields);
	}
	return btn;
}

function refreshTiddlyLink(e, title)
{
	var info = getTiddlyLinkInfo(title, e.className);
	e.className = info.classes;
	e.title = info.subTitle;
}

function createTiddlyDropDown(place, onchange, options, defaultValue)
{
	var sel = createTiddlyElement(place, "select");
	sel.onchange = onchange;

	for(var i = 0; i < options.length; i++)
	{
		var e = createTiddlyElement(sel, "option", null, null, options[i].caption);
		e.value = options[i].name;
		if(e.value == defaultValue)
			e.selected = true;
	}
	return sel;
}

//--
//-- TiddlyWiki-specific popup utility functions
//--

// Event handler for 'open all' on a tiddler popup
function onClickTagOpenAll(ev)
{
	var tiddlers = store.getTaggedTiddlers(this.getAttribute("tag"));
	var sortby = this.getAttribute("sortby");
	if(sortby && sortby.length) {
		store.sortTiddlers(tiddlers, sortby);
	}
	story.displayTiddlers(this, tiddlers);
	return false;
}

// Event handler for clicking on a tiddler tag
function onClickTag(ev)
{
	var e = ev || window.event;
	var popup = Popup.create(this);
	jQuery(popup).addClass("taggedTiddlerList");
	var tag = this.getAttribute("tag");
	var title = this.getAttribute("tiddler");
	if(popup && tag) {
		var tagged = tag.indexOf("[") == -1 ? store.getTaggedTiddlers(tag) : store.filterTiddlers(tag);
		var sortby = this.getAttribute("sortby");
		if(sortby && sortby.length) {
			store.sortTiddlers(tagged, sortby);
		}
		var titles = [];
		for(var i = 0; i < tagged.length; i++) {
			if(tagged[i].title != title)
				titles.push(tagged[i].title);
		}
		var lingo = config.views.wikified.tag;
		if(titles.length > 0) {
			var openAll = createTiddlyButton(createTiddlyElement(popup, "li"),
				lingo.openAllText.format([tag]), lingo.openAllTooltip, onClickTagOpenAll);
			openAll.setAttribute("tag", tag);
			openAll.setAttribute("sortby", sortby);
			createTiddlyElement(createTiddlyElement(popup, "li", null, "listBreak"), "div");
			for(i = 0; i < titles.length; i++) {
				createTiddlyLink(createTiddlyElement(popup, "li"), titles[i], true);
			}
		} else {
			createTiddlyElement(popup, "li", null, "disabled", lingo.popupNone.format([tag]));
		}
		createTiddlyElement(createTiddlyElement(popup, "li", null, "listBreak"), "div");
		var link = createTiddlyLink(createTiddlyElement(popup, "li"), tag, false);
		createTiddlyText(link, lingo.openTag.format([tag]));
	}
	Popup.show();
	e.cancelBubble = true;
	if(e.stopPropagation) e.stopPropagation();
	return false;
}

// Create a button for a tag with a popup listing all the tiddlers that it tags
function createTagButton(place, tag, excludeTiddler, title, tooltip)
{
	var btn = createTiddlyButton(place, title || tag,
		(tooltip || config.views.wikified.tag.tooltip).format([tag]), onClickTag);
	btn.setAttribute("tag", tag);
	if(excludeTiddler)
		btn.setAttribute("tiddler", excludeTiddler);
	return btn;
}

function onClickTiddlyPopup(ev)
{
	var e = ev || window.event;
	var tiddler = this.tiddler;
	if(tiddler.text) {
		var popup = Popup.create(this, "div", "popupTiddler");
		wikify(tiddler.text, popup, null, tiddler);
		Popup.show();
	}
	if(e) e.cancelBubble = true;
	if(e && e.stopPropagation) e.stopPropagation();
	return false;
}

function createTiddlyPopup(place, caption, tooltip, tiddler)
{
	if(tiddler.text) {
		createTiddlyLink(place, caption, true);
		var btn = createTiddlyButton(place, glyph("downArrow"), tooltip, onClickTiddlyPopup, "tiddlerPopupButton");
		btn.tiddler = tiddler;
	} else {
		createTiddlyText(place, caption);
	}
}

function onClickError(ev)
{
	var e = ev || window.event;
	var popup = Popup.create(this);
	var lines = this.getAttribute("errorText").split("\n");
	for(var i = 0; i < lines.length; i++) {
		createTiddlyElement(popup, "li", null, "popupMessage", lines[i]);
	}
	Popup.show();
	e.cancelBubble = true;
	if(e.stopPropagation) e.stopPropagation();
	return false;
}

function createTiddlyError(place, title, text)
{
	var btn = createTiddlyButton(place, title, null, onClickError, "errorButton");
	if(text) btn.setAttribute("errorText", text);
}
//-
//- Animation engine
//-

function Animator()
{
	// Incremented at start of each animation, decremented afterwards. If zero, the interval timer is disabled
	this.running = 0;
	// ID of the timer used for animating
	this.timerID = 0;
	// List of animations in progress
	this.animations = [];
	return this;
}

// Start animation engine
Animator.prototype.startAnimating = function() //# Variable number of arguments
{
	for(var i = 0; i < arguments.length; i++)
		this.animations.push(arguments[i]);
	if(this.running == 0) {
		var me = this;
		this.timerID = window.setInterval(function() { me.doAnimate(me) }, 10);
	}
	this.running += arguments.length;
};

// Perform an animation engine tick, calling each of the known animation modules
Animator.prototype.doAnimate = function(me)
{
	var i = 0;
	while(i < me.animations.length) {
		if(me.animations[i].tick()) {
			i++;
		} else {
			me.animations.splice(i, 1);
			if(--me.running == 0)
				window.clearInterval(me.timerID);
		}
	}
};

Animator.slowInSlowOut = function(progress)
{
	return 1 - ((Math.cos(progress * Math.PI) + 1) / 2);
};

//--
//-- Morpher animation
//--

// Animate a set of properties of an element
function Morpher(element, duration, properties, callback)
{
	this.element = element;
	this.duration = duration;
	this.properties = properties;
	this.startTime = new Date();
	this.endTime = Number(this.startTime) + duration;
	this.callback = callback;
	this.tick();
	return this;
}

Morpher.prototype.assignStyle = function(element, style, value)
{
	switch(style) {
		case "-tw-vertScroll":
			window.scrollTo(findScrollX(), value);
			break;
		case "-tw-horizScroll":
			window.scrollTo(value, findScrollY());
			break;
		default:
			element.style[style] = value;
			break;
	}
};

Morpher.prototype.stop = function()
{
	for(var i = 0; i < this.properties.length; i++) {
		var p = this.properties[i];
		if(p.atEnd !== undefined) {
			this.assignStyle(this.element, p.style, p.atEnd);
		}
	}
	if(this.callback)
		this.callback(this.element, this.properties);
};

Morpher.prototype.tick = function()
{
	var currTime = Number(new Date());
	var i, progress = Animator.slowInSlowOut(Math.min(1, (currTime - this.startTime) / this.duration));
	for(i = 0; i < this.properties.length; i++) {
		var p = this.properties[i];
		if(p.start !== undefined && p.end !== undefined) {
			var template = p.template || "%0";
			switch(p.format) {
				case undefined:
				case "style":
					var value = p.start + (p.end - p.start) * progress;
					this.assignStyle(this.element, p.style, template.format([value]));
					break;
				case "color":
					break;
			}
		}
	}
	if(currTime >= this.endTime) {
		this.stop();
		return false;
	}
	return true;
};

//--
//-- Zoomer animation
//--

function Zoomer(text, startElement, targetElement, unused)
{
	var e = createTiddlyElement(document.body, "div", null, "zoomer");
	createTiddlyElement(e, "div", null, null, text);
	var winWidth = findWindowWidth();
	var winHeight = findWindowHeight();
	var p = [
		{ style: 'left', start: findPosX(startElement), end: findPosX(targetElement), template: '%0px' },
		{ style: 'top', start: findPosY(startElement), end: findPosY(targetElement), template: '%0px' },
		{ style: 'width', start: Math.min(startElement.scrollWidth, winWidth),
		  end: Math.min(targetElement.scrollWidth, winWidth), template: '%0px', atEnd: 'auto' },
		{ style: 'height', start: Math.min(startElement.scrollHeight, winHeight),
		  end: Math.min(targetElement.scrollHeight, winHeight), template: '%0px', atEnd: 'auto' },
		{ style: 'fontSize', start: 8, end: 24, template: '%0pt' }
	];
	var c = function(element) { jQuery(element).remove() };
	return new Morpher(e, config.animDuration, p, c);
}

//--
//-- Scroller animation
//--

function Scroller(targetElement)
{
	return new Morpher(targetElement, config.animDuration, [{
		style: '-tw-vertScroll', start: findScrollY(), end: ensureVisible(targetElement)
	}]);
}

//--
//-- Slider animation
//--

// deleteMode - "none", "all" [delete target element and it's children], [only] "children" [but not the target element]
function Slider(element, opening, unused, deleteMode)
{
	element.style.overflow = 'hidden';
	// Workaround a Firefox flashing bug
	if(opening) element.style.height = '0px';
	element.style.display = 'block';
	var height = element.scrollHeight;
	var props = [];
	var callback = null;
	if(opening) {
		props.push({ style: 'height', start: 0, end: height, template: '%0px', atEnd: 'auto' });
		props.push({ style: 'opacity', start: 0, end: 1, template: '%0' });
		props.push({ style: 'filter', start: 0, end: 100, template: 'alpha(opacity:%0)' });
	} else {
		props.push({ style: 'height', start: height, end: 0, template: '%0px' });
		props.push({ style: 'display', atEnd: 'none' });
		props.push({ style: 'opacity', start: 1, end: 0, template: '%0' });
		props.push({ style: 'filter', start: 100, end: 0, template: 'alpha(opacity:%0)' });
		switch(deleteMode) {
			case "all":
				callback = function(element, properties) { jQuery(element).remove() };
				break;
			case "children":
				callback = function(element, properties) { jQuery(element).empty() };
				break;
		}
	}
	return new Morpher(element, config.animDuration, props, callback);
}

//--
//-- Popup menu
//--

var Popup = {
	stack: [] // Array of objects with members root: and popup:
};

Popup.create = function(root, elem, className)
{
	var stackPosition = this.find(root, "popup");
	Popup.remove(stackPosition + 1);
	var popup = createTiddlyElement(document.body, elem || "ol", "popup", className || "popup");
	popup.stackPosition = stackPosition;
	Popup.stack.push({ root: root, popup: popup });
	return popup;
};

Popup.onDocumentClick = function(ev)
{
	var e = ev || window.event;
	if(e.eventPhase == undefined)
		Popup.remove();
	else if(e.eventPhase == Event.BUBBLING_PHASE || e.eventPhase == Event.AT_TARGET)
		Popup.remove();
	return true;
};

Popup.show = function(valign, halign, offset)
{
	var curr = Popup.stack[Popup.stack.length - 1];
	this.place(curr.root, curr.popup, valign, halign, offset);
	jQuery(curr.root).addClass("highlight");
	if(config.options.chkAnimate && anim && typeof Scroller == "function")
		anim.startAnimating(new Scroller(curr.popup));
	else
		window.scrollTo(0, ensureVisible(curr.popup));
};

Popup.place = function(root, popup, valign, halign, offset)
{
	if(!offset)
		offset = { x: 0, y: 0 };
	if(popup.stackPosition >= 0 && !valign && !halign) {
		offset.x = offset.x + root.offsetWidth;
	} else {
		offset.x = (halign == "right") ? offset.x + root.offsetWidth : offset.x;
		offset.y = (valign == "top") ? offset.y : offset.y + root.offsetHeight;
	}
	var rootLeft = findPosX(root);
	var rootTop = findPosY(root);
	var popupLeft = rootLeft + offset.x;
	var popupTop = rootTop + offset.y;
	var winWidth = findWindowWidth();
	if(popup.offsetWidth > winWidth * 0.75)
		popup.style.width = winWidth * 0.75 + "px";
	var popupWidth = popup.offsetWidth;
	var scrollWidth = winWidth - document.body.offsetWidth;
	if(popupLeft + popupWidth > winWidth - scrollWidth - 1) {
		if(halign == "right")
			popupLeft = popupLeft - root.offsetWidth - popupWidth;
		else
			popupLeft = winWidth - popupWidth - scrollWidth - 1;
	}
	popup.style.left = popupLeft + "px";
	popup.style.top = popupTop + "px";
	popup.style.display = "block";
};

Popup.find = function(e)
{
	var i, pos = -1;
	for(i = this.stack.length - 1; i >= 0; i--) {
		if(isDescendant(e, this.stack[i].popup))
			pos = i;
	}
	return pos;
};

Popup.remove = function(pos)
{
	if(!pos) pos = 0;
	if(Popup.stack.length > pos) {
		Popup.removeFrom(pos);
	}
};

Popup.removeFrom = function(from)
{
	for(var i = Popup.stack.length - 1; i >= from; i--) {
		var p = Popup.stack[i];
		jQuery(p.root).removeClass("highlight");
		jQuery(p.popup).remove();
	}
	Popup.stack = Popup.stack.slice(0, from);
};

//--
//-- Wizard support
//--

function Wizard(place)
{
	if(place) {
		this.formElem = findRelated(place, "wizard", "className");
		this.bodyElem = findRelated(this.formElem.firstChild, "wizardBody", "className", "nextSibling");
		this.footElem = findRelated(this.formElem.firstChild, "wizardFooter", "className", "nextSibling");
	} else {
		this.formElem = null;
		this.bodyElem = null;
		this.footElem = null;
	}
}

Wizard.prototype.setValue = function(name, value)
{
	jQuery(this.formElem).data(name, value);
};

Wizard.prototype.getValue = function(name)
{
	return this.formElem ? jQuery(this.formElem).data(name) : null;
};

Wizard.prototype.createWizard = function(place, title)
{
	this.formElem = createTiddlyElement(place, "form", null, "wizard");
	createTiddlyElement(this.formElem, "h1", null, "wizard__title", title);
	this.bodyElem = createTiddlyElement(this.formElem, "div", null, "wizardBody");
	this.footElem = createTiddlyElement(this.formElem, "div", null, "wizardFooter");
	return this.formElem;
};

Wizard.prototype.clear = function()
{
	jQuery(this.bodyElem).empty();
};

Wizard.prototype.setButtons = function(buttonInfo, status)
{
	jQuery(this.footElem).empty();
	for(var i = 0; i < buttonInfo.length; i++) {
		createTiddlyButton(this.footElem, buttonInfo[i].caption, buttonInfo[i].tooltip, buttonInfo[i].onClick);
		insertSpacer(this.footElem);
	}
	if(typeof status == "string") {
		createTiddlyElement(this.footElem, "span", null, "status", status);
	}
};

Wizard.prototype.addStep = function(stepTitle, htmlString)
{
	jQuery(this.bodyElem).empty();
	var wrapper = createTiddlyElement(this.bodyElem, "div");
	createTiddlyElement(wrapper, "h2", null, "wizard__subtitle", stepTitle);
	var step = createTiddlyElement(wrapper, "div", null, "wizardStep");
	step.innerHTML = htmlString;
	applyHtmlMacros(step, tiddler);
};

Wizard.prototype.getElement = function(name)
{
	return this.formElem.elements[name];
};

//--
//-- ListView gadget
//--

var ListView = {};

// Create a listview
ListView.create = function(place, listObject, listTemplate, callback, className)
{
	var table = createTiddlyElement(place, "table", null, className || "listView twtable");

	var thead = createTiddlyElement(table, "thead");
	var i, row = createTiddlyElement(thead, "tr");
	for(i = 0; i < listTemplate.columns.length; i++) {
		var columnTemplate = listTemplate.columns[i];
		var cell = createTiddlyElement(row, "th");
		var colType = ListView.columnTypes[columnTemplate.type];
		if(colType && colType.createHeader) {
			colType.createHeader(cell, columnTemplate, i);
			if(columnTemplate.className)
				jQuery(cell).addClass(columnTemplate.className);
		}
	}

	var rc, tbody = createTiddlyElement(table, "tbody");
	for(rc = 0; rc < listObject.length; rc++) {
		var rowObject = listObject[rc];
		row = createTiddlyElement(tbody, "tr");
		for(i = 0; i < listTemplate.rowClasses.length; i++) {
			if(rowObject[listTemplate.rowClasses[i].field])
				jQuery(row).addClass(listTemplate.rowClasses[i].className);
		}
		rowObject.rowElement = row;
		rowObject.colElements = {};
		for(i = 0; i < listTemplate.columns.length; i++) {
			cell = createTiddlyElement(row, "td");
			columnTemplate = listTemplate.columns[i];
			var field = columnTemplate.field;
			colType = ListView.columnTypes[columnTemplate.type];
			if(colType && colType.createItem) {
				colType.createItem(cell, rowObject, field, columnTemplate, i, rc);
				if(columnTemplate.className)
					jQuery(cell).addClass(columnTemplate.className);
			}
			rowObject.colElements[field] = cell;
		}
	}

	if(callback && listTemplate.actions)
		createTiddlyDropDown(place, ListView.getCommandHandler(callback), listTemplate.actions);

	if(callback && listTemplate.buttons) {
		for(i = 0; i < listTemplate.buttons.length; i++) {
			var b = listTemplate.buttons[i];
			if(b && b.name != "") createTiddlyButton(place, b.caption, null,
				ListView.getCommandHandler(callback, b.name, b.allowEmptySelection));
		}
	}
	return table;
};

ListView.getCommandHandler = function(callback, name, allowEmptySelection)
{
	return function(e) {
		var view = findRelated(this, "TABLE", null, "previousSibling");
		var tiddlers = ListView.getSelectedRows(view);
		if(tiddlers.length == 0 && !allowEmptySelection) {
			alert(config.messages.nothingSelected);
		} else {
			if(this.nodeName.toLowerCase() == "select") {
				callback(view, this.value, tiddlers);
				this.selectedIndex = 0;
			} else {
				callback(view, name, tiddlers);
			}
		}
	};
};

// Invoke a callback for each selector checkbox in the listview
ListView.forEachSelector = function(view, callback)
{
	var checkboxes = view.getElementsByTagName("input");
	var i, hadOne = false;
	for(i = 0; i < checkboxes.length; i++) {
		var cb = checkboxes[i];
		var rowName = cb.getAttribute("rowName");
		if(cb.getAttribute("type") != "checkbox" || !rowName) continue;
		callback(cb, rowName);
		hadOne = true;
	}
	return hadOne;
};

ListView.getSelectedRows = function(view)
{
	var rowNames = [];
	ListView.forEachSelector(view, function(e, rowName) {
		if(e.checked) rowNames.push(rowName);
	});
	return rowNames;
};

// describes filling cells of a column of each type, a map of typeName => { createHeader, createItem }
ListView.columnTypes = {};

ListView.columnTypes.String = {
	createHeader: function(place, columnTemplate, col)
	{
		createTiddlyText(place, columnTemplate.title);
	},
	createItem: function(place, listObject, field, columnTemplate, col, row)
	{
		var v = listObject[field];
		if(v != undefined)
			createTiddlyText(place, v);
	}
};

ListView.columnTypes.WikiText = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place, listObject, field, columnTemplate, col, row)
	{
		var v = listObject[field];
		if(v != undefined)
			wikify(v, place, null, null);
	}
};

ListView.columnTypes.Tiddler = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place, listObject, field, columnTemplate, col, row)
	{
		var v = listObject[field];
		if(v != undefined && v.title)
			createTiddlyPopup(place, v.title, config.messages.listView.tiddlerTooltip, v);
	}
};

ListView.columnTypes.Size = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place, listObject, field, columnTemplate, col, row)
	{
		var v = listObject[field];
		if(v == undefined) return;
		var i = 0, msg = config.messages.sizeTemplates;
		while(i < msg.length - 1 && v < msg[i].unit)
			i++;
		createTiddlyText(place, msg[i].template.format([Math.round(v / msg[i].unit)]));
	}
};

ListView.columnTypes.Link = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place, listObject, field, columnTemplate, col, row)
	{
		var v = listObject[field];
		var c = columnTemplate.text;
		if(v != undefined)
			createExternalLink(place, v, c || v);
	}
};

ListView.columnTypes.Date = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place, listObject, field, columnTemplate, col, row)
	{
		var v = listObject[field];
		if(v != undefined)
			createTiddlyText(place, v.formatString(columnTemplate.dateFormat));
	}
};

ListView.columnTypes.StringList = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place, listObject, field, columnTemplate, col, row)
	{
		var v = listObject[field];
		if(v == undefined) return;
		for(var i = 0; i < v.length; i++) {
			createTiddlyText(place, v[i]);
			createTiddlyElement(place, "br");
		}
	}
};

ListView.columnTypes.Selector = {
	createHeader: function(place, columnTemplate, col)
	{
		createTiddlyCheckbox(place, null, false, this.onHeaderChange);
	},
	createItem: function(place, listObject, field, columnTemplate, col, row)
	{
		var e = createTiddlyCheckbox(place, null, listObject[field], null);
		e.setAttribute("rowName", listObject[columnTemplate.rowName]);
	},
	onHeaderChange: function(e)
	{
		var state = this.checked;
		var view = findRelated(this, "TABLE");
		if(!view) return;
		ListView.forEachSelector(view, function(e, rowName) {
			e.checked = state;
		});
	}
};

ListView.columnTypes.Tags = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place, listObject, field, columnTemplate, col, row)
	{
		var tags = listObject[field];
		createTiddlyText(place, String.encodeTiddlyLinkList(tags));
	}
};

ListView.columnTypes.Boolean = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place, listObject, field, columnTemplate, col, row)
	{
		if(listObject[field] == true)
			createTiddlyText(place, columnTemplate.trueText);
		if(listObject[field] == false)
			createTiddlyText(place, columnTemplate.falseText);
	}
};

ListView.columnTypes.TagCheckbox = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place, listObject, field, columnTemplate, col, row)
	{
		var e = createTiddlyCheckbox(place, null, listObject[field], this.onChange);
		e.setAttribute("tiddler", listObject.title);
		e.setAttribute("tag", columnTemplate.tag);
	},
	onChange: function(e)
	{
		var tag = this.getAttribute("tag");
		var tiddler = this.getAttribute("tiddler");
		store.setTiddlerTag(tiddler, this.checked, tag);
	}
};

ListView.columnTypes.TiddlerLink = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place, listObject, field, columnTemplate, col, row)
	{
		var v = listObject[field];
		if(v == undefined) return;
		var link = createTiddlyLink(place, listObject[columnTemplate.tiddlerLink], false, null);
		createTiddlyText(link, listObject[field]);
	}
};

//--
//-- Augmented methods for the JavaScript Array() object
//--

// For IE up to 8 (https://caniuse.com/?search=indexOf)
if(!Array.indexOf) {
	Array.prototype.indexOf = function(item, from)
	{
		if(!from) from = 0;
		for(var i = from; i < this.length; i++) {
			if(this[i] === item) return i;
		}
		return -1;
	};
}

// Find an entry in a given field of the members of an array
Array.prototype.findByField = function(field, value)
{
	for(var i = 0; i < this.length; i++) {
		if(this[i][field] === value) return i;
	}
	return null;
};

// Return whether an entry exists in an array
Array.prototype.contains = function(item)
{
	return this.indexOf(item) != -1;
};

// Adds, removes or toggles a particular value within an array
//  value - value to add
//  mode - +1 to add value, -1 to remove value, 0 to toggle it
Array.prototype.setItem = function(value, mode)
{
	var p = this.indexOf(value);
	if(mode == 0)
		mode = (p == -1) ? +1 : -1;
	if(mode == +1) {
		if(p == -1) this.push(value);
	} else if(mode == -1) {
		if(p != -1) this.splice(p, 1);
	}
};

// Return whether one of a list of values exists in an array
Array.prototype.containsAny = function(items)
{
	for(var i = 0; i < items.length; i++) {
		if(this.indexOf(items[i]) != -1)
			return true;
	}
	return false;
};

// Return whether all of a list of values exists in an array
Array.prototype.containsAll = function(items)
{
	for(var i = 0; i < items.length; i++) {
		if(this.indexOf(items[i]) == -1)
			return false;
	}
	return true;
};

// Push a new value into an array only if it is not already present in the array.
// If the optional unique parameter is false, it reverts to a normal push
Array.prototype.pushUnique = function(item, unique)
{
	if(unique === false || this.indexOf(item) == -1) {
		this.push(item);
	}
};

Array.prototype.remove = function(item)
{
	var p = this.indexOf(item);
	if(p != -1) this.splice(p, 1);
};

// For IE up to 8 (https://caniuse.com/?search=indexOf)
if(!Array.prototype.map) {
	Array.prototype.map = function(fn, thisObj)
	{
		var scope = thisObj || window;
		var i, j, a = [];
		for(i = 0, j = this.length; i < j; ++i) {
			a.push(fn.call(scope, this[i], i, this));
		}
		return a;
	};
}

//--
//-- Augmented methods for the JavaScript String() object
//--

// todo: create functions substituting String augmenting methods, use in the core; deprecate all String augmenting methods

// Trim whitespace from both ends of a string
String.prototype.trim = function()
{
	return this.replace(/^\s*|\s*$/g, "");
};

// Substitute substrings from an array into a format string that includes '%1'-type specifiers
String.prototype.format = function(s)
{
	var substrings = s && s.constructor == Array ? s : arguments;
	var subRegExp = /(?:%(\d+))/mg;
	var currPos = 0;
	var match, r = [];
	while(match = subRegExp.exec(this)) {
		if(!match[1]) continue;
		if(match.index > currPos)
			r.push(this.substring(currPos, match.index));
		r.push(substrings[parseInt(match[1], 10)]);
		currPos = subRegExp.lastIndex;
	}
	if(currPos < this.length)
		r.push(this.substring(currPos, this.length));
	return r.join("");
};

// Escape any special RegExp characters with that character preceded by a backslash
String.prototype.escapeRegExp = function()
{
	return this.replace(/[\-\/\\\^\$\*\+\?\.\(\)\|\[\]\{\}]/g, '\\$&'); // #157
};

// Convert "\" to "\s", newlines to "\n" (and remove carriage returns)
String.prototype.escapeLineBreaks = function()
{
	return this.replace(/\\/mg, "\\s").replace(/\n/mg, "\\n").replace(/\r/mg, "");
};

// Convert "\n" to newlines, "\b" to " ", "\s" to "\" (and remove carriage returns)
String.prototype.unescapeLineBreaks = function()
{
	return this.replace(/\\n/mg, "\n").replace(/\\b/mg, " ").replace(/\\s/mg, "\\").replace(/\r/mg, "");
};

// Convert & to "&amp;", < to "&lt;", > to "&gt;" and " to "&quot;"
String.prototype.htmlEncode = function()
{
	return this.replace(/&/mg, "&amp;").replace(/</mg, "&lt;").replace(/>/mg, "&gt;").replace(/\"/mg, "&quot;");
};

// Convert "&amp;" to &, "&lt;" to <, "&gt;" to > and "&quot;" to "
String.prototype.htmlDecode = function()
{
	return this.replace(/&lt;/mg, "<").replace(/&gt;/mg, ">").replace(/&quot;/mg, "\"").replace(/&amp;/mg, "&");
};

// Parse a space-separated string of name:value parameters
// The result is an array of objects:
//   result[0] = object with a member for each parameter name, value of that member being an array of values
//   result[1..n] = one object for each parameter, with 'name' and 'value' members
String.prototype.parseParams = function(defaultName, defaultValue, allowEval, noNames, cascadeDefaults)
{
	var dblQuote = "(?:\"((?:(?:\\\\\")|[^\"])+)\")";
	var sngQuote = "(?:'((?:(?:\\\\\')|[^'])+)')";
	var dblSquare = "(?:\\[\\[((?:\\s|\\S)*?)\\]\\])";
	var dblBrace = "(?:\\{\\{((?:\\s|\\S)*?)\\}\\})";
	var unQuoted = noNames ? "([^\"'\\s]\\S*)" : "([^\"':\\s][^\\s:]*)";
	var emptyQuote = "((?:\"\")|(?:''))";
	var skipSpace = "(?:\\s*)";
	var token = "(?:" + dblQuote + "|" + sngQuote + "|" + dblSquare + "|" +
		dblBrace + "|" + unQuoted + "|" + emptyQuote + ")";
	var re = noNames ? new RegExp(token, "mg") :
		new RegExp(skipSpace + token + skipSpace + "(?:(\\:)" + skipSpace + token + ")?", "mg");

	var parseToken = function(match, p) {
		// Double quoted
		if(match[p])     return match[p].replace(/\\"/g, '"');
		// Single quoted
		if(match[p + 1]) return match[p + 1].replace(/\\'/g, "'");
		// Double-square-bracket quoted
		if(match[p + 2]) return match[p + 2];
		// Double-brace quoted
		if(match[p + 3]) {
			var value = match[p + 3];
			if(allowEval && config.evaluateMacroParameters != "none") {
				try {
					if(config.evaluateMacroParameters == "restricted") {
						if(window.restrictedEval) value = window.restrictedEval(value);
					} else {
						value = window.eval(value);
					}
				} catch(ex) {
					throw "Unable to evaluate {{" + value + "}}: " + exceptionText(ex);
				}
			}
			return value;
		}
		// Unquoted
		if(match[p + 4]) return match[p + 4];
		// Empty quote
		if(match[p + 5]) return "";
	};

	var summary = {};
	var results = [summary], match;
	while(match = re.exec(this)) {
		// matched bit is like  firstToken  or  firstToken:tokenAfterColon  (like "param":{{evaluated expression}})
		var firstToken = parseToken(match, 1);
		if(noNames) {
			results.push({ name: "", value: firstToken });
			continue;
		}

		var tokenAfterColon = parseToken(match, 8);
		var newItem = {
			name: firstToken,
			value: tokenAfterColon
		};
		if(newItem.value == null) {
			if(defaultName) {
				newItem.value = firstToken;
				newItem.name = defaultName;
			}
			else if(defaultValue) newItem.value = defaultValue;
		}

		results.push(newItem);
		if(cascadeDefaults) {
			defaultName = newItem.name;
			defaultValue = newItem.value;
		}
	}

	for(var i = 1; i < results.length; i++) {
		var name = results[i].name;
		var value = results[i].value;
		if(!summary[name])
			summary[name] = [value];
		else
			summary[name].push(value);
	}
	return results;
};

// Process a string list of macro parameters into an array. Parameters can be quoted with "", '',
// [[]], {{ }} or left unquoted (and therefore space-separated). Double-braces {{}} results in
// an *evaluated* parameter: e.g. {{config.options.txtUserName}} results in the current user's name.
String.prototype.readMacroParams = function(notAllowEval)
{
	var p = this.parseParams("list", null, !notAllowEval, true);
	return p.slice(1).map(function(param) { return param.value });
};

// Process a string list of unique tiddler names into an array. Tiddler names that have spaces in them must be [[bracketed]]
String.prototype.readBracketedList = function(unique)
{
	var p = this.parseParams("list", null, false, true);
	var i, n = [];
	for(i = 1; i < p.length; i++) {
		if(p[i].value)
			n.pushUnique(p[i].value, unique);
	}
	return n;
};

// Get [startIndex, endIndex] of chunk between given startMarker and endMarker inside text, or undefined.
tw.textUtils.getChunkRange = function(text, startMarker, endMarker)
{
	var s = text.indexOf(startMarker);
	if(s == -1) return;
	s += startMarker.length;
	var e = text.indexOf(endMarker, s);
	if(e != -1) return [s, e];
};

// Replace a chunk of a string given start and end markers
tw.textUtils.replaceChunk = function(text, startMarker, endMarker, newValue)
{
	var r = this.getChunkRange(text, startMarker, endMarker);
	return r ? text.substring(0, r[0]) + newValue + text.substring(r[1]) : text;
};


// Static method to bracket a string with double square brackets if it contains a space
String.encodeTiddlyLink = function(title)
{
	return title.indexOf(" ") == -1 ? title : "[[" + title + "]]";
};

// Static method to encodeTiddlyLink for every item in an array and join them with spaces
String.encodeTiddlyLinkList = function(list)
{
	if(!list) return "";
	return list.map(function(item) { return String.encodeTiddlyLink(item) }).join(" ");
};

// Convert a string as a sequence of name:"value" pairs into a hashmap
String.prototype.decodeHashMap = function()
{
	var fields = this.parseParams("anon", "", false);
	var i, hashmap = {};
	for(i = 1; i < fields.length; i++)
		hashmap[fields[i].name] = fields[i].value;
	return hashmap;
};

// Static method to encode a hashmap into a name:"value"... string
String.encodeHashMap = function(hashmap)
{
	var name, r = [];
	for(name in hashmap)
		r.push(name + ':"' + hashmap[name] + '"');
	return r.join(" ");
};

// Static method to left-pad a string with 0s to a certain width
String.zeroPad = function(n, width)
{
	var s = n.toString();
	if(s.length >= width) return s;
	return "000000000000000000000000000".substring(0, width - s.length) + s;
};

String.prototype.startsWith = function(prefix)
{
	return !prefix || this.substring(0, prefix.length) == prefix;
};

// Returns the first value of the given named parameter.
function getParam(params, name, defaultValue)
{
	if(!params) return defaultValue;
	var p = params[0][name];
	return p ? p[0] : defaultValue;
}

// Returns the first value of the given boolean named parameter.
function getFlag(params, name, defaultValue)
{
	return !!getParam(params, name, defaultValue);
}

//--
//-- Augmented methods for the JavaScript Date() object
//--

// Substitute date components into a string
Date.prototype.formatString = function(template)
{
	var tz = this.getTimezoneOffset();
	var atz = Math.abs(tz);
	var t = template
		.replace(/0hh12/g, String.zeroPad(this.getHours12(), 2))
		.replace(/hh12/g, this.getHours12())
		.replace(/0hh/g, String.zeroPad(this.getHours(), 2))
		.replace(/hh/g, this.getHours())
		.replace(/mmm/g, config.messages.dates.shortMonths[this.getMonth()])
		.replace(/0mm/g, String.zeroPad(this.getMinutes(), 2))
		.replace(/mm/g, this.getMinutes())
		.replace(/0ss/g, String.zeroPad(this.getSeconds(), 2))
		.replace(/ss/g, this.getSeconds())
		.replace(/[ap]m/g, this.getAmPm().toLowerCase())
		.replace(/[AP]M/g, this.getAmPm().toUpperCase())
		.replace(/wYYYY/g, this.getYearForWeekNo())
		.replace(/wYY/g, String.zeroPad(this.getYearForWeekNo() - 2000, 2))
		.replace(/YYYY/g, this.getFullYear())
		.replace(/YY/g, String.zeroPad(this.getFullYear() - 2000, 2))
		.replace(/MMM/g, config.messages.dates.months[this.getMonth()])
		.replace(/0MM/g, String.zeroPad(this.getMonth() + 1, 2))
		.replace(/MM/g, this.getMonth() + 1)
		.replace(/0WW/g, String.zeroPad(this.getWeek(), 2))
		.replace(/WW/g, this.getWeek())
		.replace(/DDD/g, config.messages.dates.days[this.getDay()])
		.replace(/ddd/g, config.messages.dates.shortDays[this.getDay()])
		.replace(/0DD/g, String.zeroPad(this.getDate(), 2))
		.replace(/DDth/g, this.getDate() + this.daySuffix())
		.replace(/DD/g, this.getDate())
		.replace(/TZD/g, (tz < 0 ? '+' : '-') + String.zeroPad(Math.floor(atz / 60), 2) +
			':' + String.zeroPad(atz % 60, 2))
		.replace(/\\/g, "");
	return t;
};

Date.prototype.getWeek = function()
{
	var dt = new Date(this.getTime());
	var d = dt.getDay();
	// JavaScript Sun=0, ISO Sun=7
	if(d == 0) d = 7;
	// shift day to Thurs of same week to calculate weekNo
	dt.setTime(dt.getTime() + (4 - d) * 86400000);
	var n = Math.floor((dt.getTime() - new Date(dt.getFullYear(), 0, 1) + 3600000) / 86400000);
	return Math.floor(n / 7) + 1;
};

Date.prototype.getYearForWeekNo = function()
{
	var dt = new Date(this.getTime());
	var d = dt.getDay();
	// JavaScript Sun=0, ISO Sun=7
	if(d == 0) d = 7;
	// shift day to Thurs of same week
	dt.setTime(dt.getTime() + (4 - d) * 86400000);
	return dt.getFullYear();
};

Date.prototype.getHours12 = function()
{
	var h = this.getHours();
	return h > 12 ? h - 12 : ( h > 0 ? h : 12 );
};

Date.prototype.getAmPm = function()
{
	return this.getHours() >= 12 ? config.messages.dates.pm : config.messages.dates.am;
};

Date.prototype.daySuffix = function()
{
	return config.messages.dates.daySuffixes[this.getDate() - 1];
};

// Convert to local YYYYMMDDHHMM format string
Date.prototype.convertToLocalYYYYMMDDHHMM = function()
{
	return this.getFullYear() + String.zeroPad(this.getMonth() + 1, 2) + String.zeroPad(this.getDate(), 2) +
		String.zeroPad(this.getHours(), 2) + String.zeroPad(this.getMinutes(), 2);
};

// Convert to UTC YYYYMMDDHHMM format string
Date.prototype.convertToYYYYMMDDHHMM = function()
{
	return this.getUTCFullYear() + String.zeroPad(this.getUTCMonth() + 1, 2) + String.zeroPad(this.getUTCDate(), 2) +
		String.zeroPad(this.getUTCHours(), 2) + String.zeroPad(this.getUTCMinutes(), 2);
};

// Convert to UTC YYYYMMDD.HHMMSSMMM format string
Date.prototype.convertToYYYYMMDDHHMMSSMMM = function()
{
	return this.getUTCFullYear() + String.zeroPad(this.getUTCMonth() + 1, 2) +
		String.zeroPad(this.getUTCDate(), 2) + "." + String.zeroPad(this.getUTCHours(), 2) +
		String.zeroPad(this.getUTCMinutes(), 2) + String.zeroPad(this.getUTCSeconds(), 2) +
		String.zeroPad(this.getUTCMilliseconds(), 3) + "0";
};

// Static. Create a date from a UTC YYYYMMDDHHMM format string
Date.convertFromYYYYMMDDHHMM = function(d)
{
	d = d ? d.replace(/[^0-9]/g, "") : "";
	return Date.convertFromYYYYMMDDHHMMSSMMM(d.substr(0, 12));
};

// Static. Create a date from a UTC YYYYMMDDHHMMSS format string
Date.convertFromYYYYMMDDHHMMSS = function(d)
{
	d = d ? d.replace(/[^0-9]/g, "") : "";
	return Date.convertFromYYYYMMDDHHMMSSMMM(d.substr(0, 14));
};

// Static. Create a date from a UTC YYYYMMDDHHMMSSMMM format string
Date.convertFromYYYYMMDDHHMMSSMMM = function(d)
{
	d = d ? d.replace(/[^0-9]/g, "") : "";
	return new Date(Date.UTC(parseInt(d.substr(0, 4), 10),
		parseInt(d.substr(4, 2), 10) - 1,
		parseInt(d.substr(6, 2), 10),
		parseInt(d.substr(8, 2) || "00", 10),
		parseInt(d.substr(10, 2) || "00", 10),
		parseInt(d.substr(12, 2) || "00", 10),
		parseInt(d.substr(14, 3) || "000", 10)));
};

//--
//-- RGB colour object
//--

// Construct an RGB colour object from a '#rrggbb', '#rgb' or 'rgb(n,n,n)' string or from separate r,g,b values
function RGB(r, g, b)
{
	this.r = 0;
	this.g = 0;
	this.b = 0;
	if(typeof r == "string") {
		if(r.substr(0, 1) == "#") {
			if(r.length == 7) {
				this.r = parseInt(r.substr(1, 2), 16) / 255;
				this.g = parseInt(r.substr(3, 2), 16) / 255;
				this.b = parseInt(r.substr(5, 2), 16) / 255;
			} else {
				this.r = parseInt(r.substr(1, 1), 16) / 15;
				this.g = parseInt(r.substr(2, 1), 16) / 15;
				this.b = parseInt(r.substr(3, 1), 16) / 15;
			}
		} else {
			var rgbPattern = /rgb\s*\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/;
			var c = r.match(rgbPattern);
			if(c) {
				this.r = parseInt(c[1], 10) / 255;
				this.g = parseInt(c[2], 10) / 255;
				this.b = parseInt(c[3], 10) / 255;
			}
		}
	} else {
		this.r = r;
		this.g = g;
		this.b = b;
	}
	return this;
}

// Mixes this colour with another in a specified proportion
// c = other colour to mix
// f = 0..1 where 0 is this colour and 1 is the new colour
// Returns an RGB object
RGB.prototype.mix = function(c, f)
{
	return new RGB(this.r + (c.r - this.r) * f, this.g + (c.g - this.g) * f, this.b + (c.b - this.b) * f);
};

// Return an rgb colour as a #rrggbb format hex string
RGB.prototype.toString = function()
{
	var to255Range = function(value) {
		var clamped = value < 0 ? 0 : value > 1 ? 1 : value;
		return clamped * 255;
	};

	var to2DigitString = function(value) {
		var s = Math.floor(value).toString(16);
		return ("0" + s).slice(-2);
	};

	return "#" +
		to2DigitString(to255Range(this.r)) +
		to2DigitString(to255Range(this.g)) +
		to2DigitString(to255Range(this.b));
};

//--
//-- DOM utilities - many derived from www.quirksmode.org
//--

function drawGradient(place, horiz, loColors, hiColors)
{
	if(!hiColors) hiColors = loColors;

	for(var i = 0; i <= 100; i += 2)
	{
		var bar = document.createElement("div");
		place.appendChild(bar);
		bar.style.position = "absolute";
		bar.style.left = horiz ? i + "%" : 0;
		bar.style.top = horiz ? 0 : i + "%";
		bar.style.width = horiz ? (101 - i) + "%" : "100%";
		bar.style.height = horiz ? "100%" : (101 - i) + "%";
		bar.style.zIndex = -1;
		var p = i / 100 * (loColors.length - 1);
		var hc = hiColors[Math.floor(p)];
		if(typeof hc == "string")
			hc = new RGB(hc);
		var lc = loColors[Math.ceil(p)];
		if(typeof lc == "string")
			lc = new RGB(lc);
		bar.style.backgroundColor = hc.mix(lc, p - Math.floor(p)).toString();
	}
}

function addEvent(obj, type, fn)
{
	if(obj.attachEvent) {
		obj["e" + type + fn] = fn;
		obj[type + fn] = function() { obj["e" + type + fn](window.event) };
		obj.attachEvent("on" + type, obj[type + fn]);
	} else {
		obj.addEventListener(type, fn, false);
	}
}

function removeEvent(obj, type, fn)
{
	if(obj.detachEvent) {
		obj.detachEvent("on" + type, obj[type + fn]);
		obj[type + fn] = null;
	} else {
		obj.removeEventListener(type, fn, false);
	}
}

// Find the closest relative with a given property value (property defaults to tagName, relative defaults to parentNode)
function findRelated(e, value, name, relative)
{
	name = name || "tagName";
	relative = relative || "parentNode";
	if(name == "className") {
		while(e && !jQuery(e).hasClass(value)) {
			e = e[relative];
		}
	} else {
		while(e && e[name] != value) {
			e = e[relative];
		}
	}
	return e;
}

// Get the scroll position for window.scrollTo necessary to scroll a given element into view
function ensureVisible(e)
{
	var posTop = findPosY(e);
	var posBot = posTop + e.offsetHeight;
	var winTop = findScrollY();
	var winHeight = findWindowHeight();
	var winBot = winTop + winHeight;
	if(posTop < winTop) {
		return posTop;
	} else if(posBot > winBot) {
		if(e.offsetHeight < winHeight)
			return posTop - (winHeight - e.offsetHeight);
		else
			return posTop;
	} else {
		return winTop;
	}
}

// Get the current width of the display window
function findWindowWidth()
{
	return window.innerWidth || document.documentElement.clientWidth;
}

// Get the current height of the display window
function findWindowHeight()
{
	return window.innerHeight || document.documentElement.clientHeight;
}

// Get the current height of the document
function findDocHeight() {
	var d = document;
	return Math.max(
		Math.max(d.body.scrollHeight, d.documentElement.scrollHeight),
		Math.max(d.body.offsetHeight, d.documentElement.offsetHeight),
		Math.max(d.body.clientHeight, d.documentElement.clientHeight)
	);
}

// Get the current horizontal page scroll position
function findScrollX()
{
	return window.scrollX || document.documentElement.scrollLeft;
}

// Get the current vertical page scroll position
function findScrollY()
{
	return window.scrollY || document.documentElement.scrollTop;
}

function findPosX(obj)
{
	var curleft = 0;
	while(obj.offsetParent) {
		curleft += obj.offsetLeft;
		obj = obj.offsetParent;
	}
	return curleft;
}

function findPosY(obj)
{
	var curtop = 0;
	while(obj.offsetParent) {
		curtop += obj.offsetTop;
		obj = obj.offsetParent;
	}
	return curtop;
}

function blurElement(e)
{
	if(e && e.focus && e.blur) {
		e.focus();
		e.blur();
	}
}

// Create a non-breaking space
function insertSpacer(place)
{
	var e = document.createTextNode(String.fromCharCode(160));
	if(place) place.appendChild(e);
	return e;
}

// Replace the current selection of a textarea or text input and scroll it into view
function replaceSelection(e, text)
{
	if(e.setSelectionRange) {
		var oldpos = e.selectionStart;
		var isRange = e.selectionEnd > e.selectionStart;
		e.value = e.value.substr(0, e.selectionStart) + text + e.value.substr(e.selectionEnd);
		e.setSelectionRange(isRange ? oldpos : oldpos + text.length, oldpos + text.length);
		// scroll into view
		var linecount = e.value.split("\n").length;
		var thisline = e.value.substr(0, e.selectionStart).split("\n").length - 1;
		e.scrollTop = Math.floor((thisline - e.rows / 2) * e.scrollHeight / linecount);
	} else if(document.selection) { // support IE
		var range = document.selection.createRange();
		if(range.parentElement() == e) {
			var isCollapsed = range.text == "";
			range.text = text;
			if(!isCollapsed) {
				range.moveStart("character", -text.length);
				range.select();
			}
		}
	}
}

// Set the caret position in a text area
function setCaretPosition(e, pos)
{
	if(e.selectionStart || e.selectionStart == '0') {
		e.selectionStart = pos;
		e.selectionEnd = pos;
		e.focus();
	} else if(document.selection) { // support IE
		e.focus();
		var sel = document.selection.createRange();
		sel.moveStart('character', -e.value.length);
		sel.moveStart('character', pos);
		sel.moveEnd('character', 0);
		sel.select();
	}
}

// Returns the text of the given (text) node, possibly merging subsequent text nodes
function getNodeText(e)
{
	var text = "";
	while(e && e.nodeName == "#text") {
		text += e.nodeValue;
		e = e.nextSibling;
	}
	return text;
}

// Returns true if the element e has a given ancestor element
function isDescendant(e, ancestor)
{
	while(e) {
		if(e === ancestor)
			return true;
		e = e.parentNode;
	}
	return false;
}


// deprecate the following...

// Prevent an event from bubbling
function stopEvent(e)
{
	var ev = e || window.event;
	ev.cancelBubble = true;
	if(ev.stopPropagation) ev.stopPropagation();
	return false;
}

// Remove any event handlers or non-primitve custom attributes
function scrubNode(e)
{
	if(!config.browser.isIE) return;
	var att = e.attributes;
	if(att) {
		for(var i = 0; i < att.length; i++) {
			var n = att[i].name;
			if(n !== "style" && (typeof e[n] === "function" || (typeof e[n] === "object" && e[n] != null))) {
				try {
					e[n] = null;
				} catch(ex) {
				}
			}
		}
	}
	var c = e.firstChild;
	while(c) {
		scrubNode(c);
		c = c.nextSibling;
	}
}

function setStylesheet(s, id, doc)
{
	jQuery.twStylesheet(s, { id: id, doc: doc });
}

function removeStyleSheet(id)
{
	jQuery.twStylesheet.remove({ id: id });
}

//--
//-- LoaderBase and SaverBase
//--

function LoaderBase() {}

LoaderBase.prototype.loadTiddler = function(store, node, tiddlers)
{
	var title = this.getTitle(store, node);
	if(!title) return;
	if(safeMode && store.isShadowTiddler(title)) return;

	var tiddler = store.createTiddler(title);
	this.internalizeTiddler(store, tiddler, title, node);
	tiddlers.push(tiddler);
};

LoaderBase.prototype.loadTiddlers = function(store, nodes)
{
	var i, tiddlers = [];
	for(i = 0; i < nodes.length; i++) {
		try {
			this.loadTiddler(store, nodes[i], tiddlers);
		} catch(ex) {
			showException(ex, config.messages.tiddlerLoadError.format([this.getTitle(store, nodes[i])]));
		}
	}
	return tiddlers;
};

function SaverBase() {}

SaverBase.prototype.externalize = function(store)
{
	var results = [];
	var i, tiddlers = store.getTiddlers("title");
	for(i = 0; i < tiddlers.length; i++) {
		if(!tiddlers[i].doNotSave())
			results.push(this.externalizeTiddler(store, tiddlers[i]));
	}
	return results.join("\n");
};

//--
//-- TW21Loader (inherits from LoaderBase)
//--

function TW21Loader() {}

TW21Loader.prototype = new LoaderBase();

TW21Loader.prototype.getTitle = function(store, node)
{
	var title = null;
	if(node.getAttribute) {
		title = node.getAttribute("title") || node.getAttribute("tiddler");
	}
	if(!title && node.id) {
		var prefixLen = store.idPrefix.length;
		if(node.id.substr(0, prefixLen) == store.idPrefix)
			title = node.id.substr(prefixLen);
	}
	return title;
};

TW21Loader.prototype.internalizeTiddler = function(store, tiddler, title, node)
{
	var e = node.firstChild;
	var text = null;
	if(node.getAttribute && node.getAttribute("tiddler")) {
		text = getNodeText(e).unescapeLineBreaks();
	} else {
		while(e.nodeName != "PRE" && e.nodeName != "pre") {
			e = e.nextSibling;
		}
		text = e.innerHTML.replace(/\r/mg, "").htmlDecode();
	}
	var creator = node.getAttribute("creator");
	var modifier = node.getAttribute("modifier");
	var c = node.getAttribute("created");
	var m = node.getAttribute("modified");
	var created = c ? Date.convertFromYYYYMMDDHHMMSS(c) : version.date;
	var modified = m ? Date.convertFromYYYYMMDDHHMMSS(m) : created;
	var tags = node.getAttribute("tags");
	var fields = {};
	var i, attrs = node.attributes;
	for(i = attrs.length - 1; i >= 0; i--) {
		var name = attrs[i].name;
		if(attrs[i].specified && !TiddlyWiki.isStandardField(name)) {
			fields[name] = attrs[i].value.unescapeLineBreaks();
		}
	}
	tiddler.assign(title, text, modifier, modified, tags, created, fields, creator);
	return tiddler;
};

//--
//-- TW21Saver (inherits from SaverBase)
//--

function TW21Saver() {}

TW21Saver.prototype = new SaverBase();

TW21Saver.prototype.externalizeTiddler = function(store, tiddler)
{
	try {
		var usePre = config.options.chkUsePreForStorage;
		var created = tiddler.created;
		var modified = tiddler.modified;
		var tags = tiddler.getTags();
		var attributes =
			(tiddler.creator ? ' creator="' + tiddler.creator.htmlEncode() + '"' : "") +
			(tiddler.modifier ? ' modifier="' + tiddler.modifier.htmlEncode() + '"' : "") +
			((usePre && created == version.date) ? "" : ' created="' + created.convertToYYYYMMDDHHMM() + '"') +
			((usePre && modified == created) ? "" : ' modified="' + modified.convertToYYYYMMDDHHMM() + '"') +
			((!usePre || tags) ? ' tags="' + tags.htmlEncode() + '"' : "");
		var extendedAttributes = "";
		store.forEachField(tiddler, function(tiddler, fieldName, value) {
			if(typeof value != "string")
				value = "";
			// don't store fields from the temp namespace
			if(!fieldName.match(/^temp\./))
				extendedAttributes += ' %0="%1"'.format([fieldName, value.escapeLineBreaks().htmlEncode()]);
		}, true);
		return ('<div %0="%1"%2%3>%4</' + 'div>').format([
			usePre ? "title" : "tiddler",
			tiddler.title.htmlEncode(),
			attributes,
			extendedAttributes,
			usePre ? "\n<pre>" + tiddler.text.htmlEncode() + "</pre>\n" : tiddler.text.escapeLineBreaks().htmlEncode()
		]);
	} catch (ex) {
		throw exceptionText(ex, config.messages.tiddlerSaveError.format([tiddler.title]));
	}
};



//]]>
</script>

<script id="jsdeprecatedArea" type="text/javascript">
//<![CDATA[
//--
//-- Deprecated Crypto functions and associated conversion routines.
//-- Use the jQuery.encoding functions directly instead.
//--

// Crypto 'namespace'
function Crypto() {}

// Convert a string to an array of big-endian 32-bit words
Crypto.strToBe32s = function(str)
{
	return jQuery.encoding.strToBe32s(str);
};

// Convert an array of big-endian 32-bit words to a string
Crypto.be32sToStr = function(be)
{
	return jQuery.encoding.be32sToStr(be);
};

// Convert an array of big-endian 32-bit words to a hex string
Crypto.be32sToHex = function(be)
{
	return jQuery.encoding.be32sToHex(be);
};

// Return, in hex, the SHA-1 hash of a string
Crypto.hexSha1Str = function(str)
{
	return jQuery.encoding.digests.hexSha1Str(str);
};

// Return the SHA-1 hash of a string
Crypto.sha1Str = function(str)
{
	return jQuery.encoding.digests.sha1Str(str);
};

// Calculate the SHA-1 hash of an array of blen bytes of big-endian 32-bit words
Crypto.sha1 = function(x,blen)
{
	return jQuery.encoding.digests.sha1(x,blen);
};

//--
//-- Deprecated code
//--

// @Deprecated: Use createElementAndWikify and this.termRegExp instead
config.formatterHelpers.charFormatHelper = function(w)
{
	w.subWikify(createTiddlyElement(w.output, this.element), this.terminator);
};

// @Deprecated: Use enclosedTextHelper and this.lookaheadRegExp instead
config.formatterHelpers.monospacedByLineHelper = function(w)
{
	var lookaheadRegExp = new RegExp(this.lookahead, "mg");
	lookaheadRegExp.lastIndex = w.matchStart;
	var lookaheadMatch = lookaheadRegExp.exec(w.source);
	if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
		var text = lookaheadMatch[1];
		if(config.browser.isIE) text = text.replace(/\n/g, "\r");
		createTiddlyElement(w.output, "pre", null, null, text);
		w.nextMatch = lookaheadRegExp.lastIndex;
	}
};

// @Deprecated: Use <br> or <br /> instead of <<br>>
config.macros.br = {};
config.macros.br.handler = function(place)
{
	createTiddlyElement(place, "br");
};

// Find an entry in an array. Returns the array index or null
// @Deprecated: Use indexOf instead
Array.prototype.find = function(item)
{
	var i = this.indexOf(item);
	return i == -1 ? null : i;
};

// Load a tiddler from an HTML DIV. The caller should make sure to later call Tiddler.changed()
// @Deprecated: Use store.getLoader().internalizeTiddler instead
Tiddler.prototype.loadFromDiv = function(divRef, title)
{
	return store.getLoader().internalizeTiddler(store, this, title, divRef);
};

// Format the text for storage in an HTML DIV
// @Deprecated Use store.getSaver().externalizeTiddler instead.
Tiddler.prototype.saveToDiv = function()
{
	return store.getSaver().externalizeTiddler(store, this);
};

// @Deprecated: Use store.allTiddlersAsHtml() instead
function allTiddlersAsHtml()
{
	return store.allTiddlersAsHtml();
}

// @Deprecated: Use refreshPageTemplate instead
function applyPageTemplate(title)
{
	refreshPageTemplate(title);
}

// @Deprecated: Use story.displayTiddlers instead
function displayTiddlers(srcElement, titles, template, unused1, unused2, animate, unused3)
{
	story.displayTiddlers(srcElement, titles, template, animate);
}

// @Deprecated: Use story.displayTiddler instead
function displayTiddler(srcElement, title, template, unused1, unused2, animate, unused3)
{
	story.displayTiddler(srcElement, title, template, animate);
}

// @Deprecated: Use functions on right hand side directly instead
var createTiddlerPopup = Popup.create;
var scrollToTiddlerPopup = Popup.show;
var hideTiddlerPopup = Popup.remove;

// @Deprecated: Use right hand side directly instead
var regexpBackSlashEn = new RegExp("\\\\n", "mg");
var regexpBackSlash = new RegExp("\\\\", "mg");
var regexpBackSlashEss = new RegExp("\\\\s", "mg");
var regexpNewLine = new RegExp("\n", "mg");
var regexpCarriageReturn = new RegExp("\r", "mg");

//--
//-- Deprecated FileAdaptor functions
//--

FileAdaptor.loadTiddlyWikiCallback = function(status,context,responseText,url,xhr)
{
	context.status = status;
	if(!status) {
		context.statusText = "Error reading file";
	} else {
		context.adaptor.store = new TiddlyWiki();
		if(!context.adaptor.store.importTiddlyWiki(responseText)) {
			context.statusText = config.messages.invalidFileError.format([url]);
			context.status = false;
		}
	}
	context.complete(context,context.userParams);
};

//--
//-- Deprecated HTTP request code
//-- Use the jQuery ajax functions directly instead
//--

function loadRemoteFile(url,callback,params)
{
	return httpReq("GET",url,callback,params);
}

function doHttp(type,url,data,contentType,username,password,callback,params,headers,allowCache)
{
	return httpReq(type,url,callback,params,headers,data,contentType,username,password,allowCache);
}

//--
//-- Deprecated String functions
//--

// @Deprecated: no direct replacement, since not used in core code
String.prototype.toJSONString = function()
{
	// Convert a string to it's JSON representation by encoding control characters, double quotes and backslash. See json.org
	var m = {
		'\b': '\\b',
		'\f': '\\f',
		'\n': '\\n',
		'\r': '\\r',
		'\t': '\\t',
		'"':  '\\"',
		'\\': '\\\\'
	};
	var replaceFn = function(a, b) {
		var c = m[b];
		if(c)
			return c;
		c = b.charCodeAt();
		return '\\u00' + Math.floor(c / 16).toString(16) + (c % 16).toString(16);
	};
	if(/["\\\x00-\x1f]/.test(this))
		return '"' + this.replace(/([\x00-\x1f\\"])/g, replaceFn) + '"';
	return '"' + this + '"';
};

// @Deprecated: no direct replacement, since not used in core code
String.prototype.right = function(n)
{
	return n < this.length ? this.slice(this.length - n) : this;
};

// @Deprecated: no direct replacement, since not used in core code (see unDash in inlineCssHelper)
// Convert a string from a CSS style property name to a JavaScript style name ("background-color" -> "backgroundColor")
String.prototype.unDash = function()
{
	var i, words = this.split("-");
	for(i = 1; i < words.length; i++)
		words[i] = words[i].substring(0, 1).toUpperCase() + words[i].substring(1);
	return words.join("");
};

// @Deprecated: use tw.textUtils.getChunkRange instead
String.prototype.getChunkRange = function(startMarker, endMarker)
{
	return tw.textUtils.getChunkRange(this, startMarker, endMarker);
};

// @Deprecated: no direct replacement, since not used in core code
// Get a chunk of a string between startMarker and endMarker, or undefined
String.prototype.getChunk = function(startMarker, endMarker)
{
	var r = tw.textUtils.getChunkRange(this, startMarker, endMarker);
	if(r) return this.substring(r[0], r[1]);
};

// @Deprecated: use tw.textUtils.replaceChunk instead
String.prototype.replaceChunk = function(startMarker, endMarker, newValue)
{
	return tw.textUtils.replaceChunk(this, startMarker, endMarker, newValue);
};

//--
//-- Deprecated Tiddler code
//--

// @Deprecated: Use tiddlerToRssItem(tiddler,uri) instead
Tiddler.prototype.toRssItem = function(uri)
{
	return tiddlerToRssItem(this,uri);
};

// @Deprecated: Use "<item>\n" + tiddlerToRssItem(tiddler,uri)  + "\n</item>" instead
Tiddler.prototype.saveToRss = function(uri)
{
	return "<item>\n" + tiddlerToRssItem(this,uri) + "\n</item>";
};

// @Deprecated: Use jQuery.encoding.digests.hexSha1Str instead
Tiddler.prototype.generateFingerprint = function()
{
	return "0x" + Crypto.hexSha1Str(this.text);
};

//--
//-- Deprecated Number functions
//--

// @Deprecated: no direct replacement, since not used in core code
// Clamp a number to a range
Number.prototype.clamp = function(min, max)
{
	var c = this;
	if(c < min) c = min;
	if(c > max) c = max;
	return Number(c);
};

//--
//-- Deprecated utility functions
//-- Use the jQuery functions directly instead
//--

// Remove all children of a node
function removeChildren(e)
{
	jQuery(e).empty();
}

// Remove a node and all its children
function removeNode(e)
{
	jQuery(e).remove();
}

// Return the content of an element as plain text with no formatting
function getPlainText(e)
{
	return jQuery(e).text();
}

function addClass(e, className)
{
	jQuery(e).addClass(className);
}

function removeClass(e, className)
{
	jQuery(e).removeClass(className);
}

function hasClass(e, className)
{
	return jQuery(e).hasClass(className);
}

//--
//-- Deprecated Wikifier code
//--

function wikifyPlain(title,theStore,limit)
{
	if(!theStore)
		theStore = store;
	if(theStore.tiddlerExists(title) || theStore.isShadowTiddler(title)) {
		return wikifyPlainText(theStore.getTiddlerText(title),limit,tiddler);
	} else {
		return "";
	}
}


//]]>
</script>
<script id="jslibArea" type="text/javascript">
//<![CDATA[
/*! jQuery v1.8.3 jquery.com | jquery.org/license */
(function(e,t){function _(e){var t=M[e]={};return v.each(e.split(y),function(e,n){t[n]=!0}),t}function H(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(P,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:D.test(r)?v.parseJSON(r):r}catch(s){}v.data(e,n,r)}else r=t}return r}function B(e){var t;for(t in e){if(t==="data"&&v.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function et(){return!1}function tt(){return!0}function ut(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function at(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function ft(e,t,n){t=t||0;if(v.isFunction(t))return v.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return v.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=v.grep(e,function(e){return e.nodeType===1});if(it.test(t))return v.filter(t,r,!n);t=v.filter(t,r)}return v.grep(e,function(e,r){return v.inArray(e,t)>=0===n})}function lt(e){var t=ct.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Lt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function At(e,t){if(t.nodeType!==1||!v.hasData(e))return;var n,r,i,s=v._data(e),o=v._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)v.event.add(t,n,u[n][r])}o.data&&(o.data=v.extend({},o.data))}function Ot(e,t){var n;if(t.nodeType!==1)return;t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),n==="object"?(t.parentNode&&(t.outerHTML=e.outerHTML),v.support.html5Clone&&e.innerHTML&&!v.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):n==="input"&&Et.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):n==="option"?t.selected=e.defaultSelected:n==="input"||n==="textarea"?t.defaultValue=e.defaultValue:n==="script"&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(v.expando)}function Mt(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function _t(e){Et.test(e.type)&&(e.defaultChecked=e.checked)}function Qt(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Jt.length;while(i--){t=Jt[i]+n;if(t in e)return t}return r}function Gt(e,t){return e=t||e,v.css(e,"display")==="none"||!v.contains(e.ownerDocument,e)}function Yt(e,t){var n,r,i=[],s=0,o=e.length;for(;s<o;s++){n=e[s];if(!n.style)continue;i[s]=v._data(n,"olddisplay"),t?(!i[s]&&n.style.display==="none"&&(n.style.display=""),n.style.display===""&&Gt(n)&&(i[s]=v._data(n,"olddisplay",nn(n.nodeName)))):(r=Dt(n,"display"),!i[s]&&r!=="none"&&v._data(n,"olddisplay",r))}for(s=0;s<o;s++){n=e[s];if(!n.style)continue;if(!t||n.style.display==="none"||n.style.display==="")n.style.display=t?i[s]||"":"none"}return e}function Zt(e,t,n){var r=Rt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function en(e,t,n,r){var i=n===(r?"border":"content")?4:t==="width"?1:0,s=0;for(;i<4;i+=2)n==="margin"&&(s+=v.css(e,n+$t[i],!0)),r?(n==="content"&&(s-=parseFloat(Dt(e,"padding"+$t[i]))||0),n!=="margin"&&(s-=parseFloat(Dt(e,"border"+$t[i]+"Width"))||0)):(s+=parseFloat(Dt(e,"padding"+$t[i]))||0,n!=="padding"&&(s+=parseFloat(Dt(e,"border"+$t[i]+"Width"))||0));return s}function tn(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=!0,s=v.support.boxSizing&&v.css(e,"boxSizing")==="border-box";if(r<=0||r==null){r=Dt(e,t);if(r<0||r==null)r=e.style[t];if(Ut.test(r))return r;i=s&&(v.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+en(e,t,n||(s?"border":"content"),i)+"px"}function nn(e){if(Wt[e])return Wt[e];var t=v("<"+e+">").appendTo(i.body),n=t.css("display");t.remove();if(n==="none"||n===""){Pt=i.body.appendChild(Pt||v.extend(i.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!Ht||!Pt.createElement)Ht=(Pt.contentWindow||Pt.contentDocument).document,Ht.write("<!doctype html><html><body>"),Ht.close();t=Ht.body.appendChild(Ht.createElement(e)),n=Dt(t,"display"),i.body.removeChild(Pt)}return Wt[e]=n,n}function fn(e,t,n,r){var i;if(v.isArray(t))v.each(t,function(t,i){n||sn.test(e)?r(e,i):fn(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&v.type(t)==="object")for(i in t)fn(e+"["+i+"]",t[i],n,r);else r(e,t)}function Cn(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i,s,o=t.toLowerCase().split(y),u=0,a=o.length;if(v.isFunction(n))for(;u<a;u++)r=o[u],s=/^\+/.test(r),s&&(r=r.substr(1)||"*"),i=e[r]=e[r]||[],i[s?"unshift":"push"](n)}}function kn(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u,a=e[s],f=0,l=a?a.length:0,c=e===Sn;for(;f<l&&(c||!u);f++)u=a[f](n,r,i),typeof u=="string"&&(!c||o[u]?u=t:(n.dataTypes.unshift(u),u=kn(e,n,r,i,u,o)));return(c||!u)&&!o["*"]&&(u=kn(e,n,r,i,"*",o)),u}function Ln(e,n){var r,i,s=v.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((s[r]?e:i||(i={}))[r]=n[r]);i&&v.extend(!0,e,i)}function An(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(s in l)s in r&&(n[l[s]]=r[s]);while(f[0]==="*")f.shift(),i===t&&(i=e.mimeType||n.getResponseHeader("content-type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){f.unshift(s);break}if(f[0]in r)o=f[0];else{for(s in r){if(!f[0]||e.converters[s+" "+f[0]]){o=s;break}u||(u=s)}o=o||u}if(o)return o!==f[0]&&f.unshift(o),r[o]}function On(e,t){var n,r,i,s,o=e.dataTypes.slice(),u=o[0],a={},f=0;e.dataFilter&&(t=e.dataFilter(t,e.dataType));if(o[1])for(n in e.converters)a[n.toLowerCase()]=e.converters[n];for(;i=o[++f];)if(i!=="*"){if(u!=="*"&&u!==i){n=a[u+" "+i]||a["* "+i];if(!n)for(r in a){s=r.split(" ");if(s[1]===i){n=a[u+" "+s[0]]||a["* "+s[0]];if(n){n===!0?n=a[r]:a[r]!==!0&&(i=s[0],o.splice(f--,0,i));break}}}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(l){return{state:"parsererror",error:n?l:"No conversion from "+u+" to "+i}}}u=i}return{state:"success",data:t}}function Fn(){try{return new e.XMLHttpRequest}catch(t){}}function In(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function $n(){return setTimeout(function(){qn=t},0),qn=v.now()}function Jn(e,t){v.each(t,function(t,n){var r=(Vn[t]||[]).concat(Vn["*"]),i=0,s=r.length;for(;i<s;i++)if(r[i].call(e,t,n))return})}function Kn(e,t,n){var r,i=0,s=0,o=Xn.length,u=v.Deferred().always(function(){delete a.elem}),a=function(){var t=qn||$n(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,i=1-r,s=0,o=f.tweens.length;for(;s<o;s++)f.tweens[s].run(i);return u.notifyWith(e,[f,i,n]),i<1&&o?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:v.extend({},t),opts:v.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:qn||$n(),duration:n.duration,tweens:[],createTween:function(t,n,r){var i=v.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(i),i},stop:function(t){var n=0,r=t?f.tweens.length:0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;Qn(l,f.opts.specialEasing);for(;i<o;i++){r=Xn[i].call(f,e,l,f.opts);if(r)return r}return Jn(f,l),v.isFunction(f.opts.start)&&f.opts.start.call(e,f),v.fx.timer(v.extend(a,{anim:f,queue:f.opts.queue,elem:e})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function Qn(e,t){var n,r,i,s,o;for(n in e){r=v.camelCase(n),i=t[r],s=e[n],v.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=v.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function Gn(e,t,n){var r,i,s,o,u,a,f,l,c,h=this,p=e.style,d={},m=[],g=e.nodeType&&Gt(e);n.queue||(l=v._queueHooks(e,"fx"),l.unqueued==null&&(l.unqueued=0,c=l.empty.fire,l.empty.fire=function(){l.unqueued||c()}),l.unqueued++,h.always(function(){h.always(function(){l.unqueued--,v.queue(e,"fx").length||l.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],v.css(e,"display")==="inline"&&v.css(e,"float")==="none"&&(!v.support.inlineBlockNeedsLayout||nn(e.nodeName)==="inline"?p.display="inline-block":p.zoom=1)),n.overflow&&(p.overflow="hidden",v.support.shrinkWrapBlocks||h.done(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t){s=t[r];if(Un.exec(s)){delete t[r],a=a||s==="toggle";if(s===(g?"hide":"show"))continue;m.push(r)}}o=m.length;if(o){u=v._data(e,"fxshow")||v._data(e,"fxshow",{}),"hidden"in u&&(g=u.hidden),a&&(u.hidden=!g),g?v(e).show():h.done(function(){v(e).hide()}),h.done(function(){var t;v.removeData(e,"fxshow",!0);for(t in d)v.style(e,t,d[t])});for(r=0;r<o;r++)i=m[r],f=h.createTween(i,g?u[i]:0),d[i]=u[i]||v.style(e,i),i in u||(u[i]=f.start,g&&(f.end=f.start,f.start=i==="width"||i==="height"?1:0))}}function Yn(e,t,n,r,i){return new Yn.prototype.init(e,t,n,r,i)}function Zn(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=$t[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function tr(e){return v.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n,r,i=e.document,s=e.location,o=e.navigator,u=e.jQuery,a=e.$,f=Array.prototype.push,l=Array.prototype.slice,c=Array.prototype.indexOf,h=Object.prototype.toString,p=Object.prototype.hasOwnProperty,d=String.prototype.trim,v=function(e,t){return new v.fn.init(e,t,n)},m=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,g=/\S/,y=/\s+/,b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,w=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,E=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,S=/^[\],:{}\s]*$/,x=/(?:^|:|,)(?:\s*\[)+/g,T=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,N=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,C=/^-ms-/,k=/-([\da-z])/gi,L=function(e,t){return(t+"").toUpperCase()},A=function(){i.addEventListener?(i.removeEventListener("DOMContentLoaded",A,!1),v.ready()):i.readyState==="complete"&&(i.detachEvent("onreadystatechange",A),v.ready())},O={};v.fn=v.prototype={constructor:v,init:function(e,n,r){var s,o,u,a;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?s=[null,e,null]:s=w.exec(e);if(s&&(s[1]||!n)){if(s[1])return n=n instanceof v?n[0]:n,a=n&&n.nodeType?n.ownerDocument||n:i,e=v.parseHTML(s[1],a,!0),E.test(s[1])&&v.isPlainObject(n)&&this.attr.call(e,n,!0),v.merge(this,e);o=i.getElementById(s[2]);if(o&&o.parentNode){if(o.id!==s[2])return r.find(e);this.length=1,this[0]=o}return this.context=i,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return v.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),v.makeArray(e,this))},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return l.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=v.merge(this.constructor(),e);return r.prevObject=this,r.context=this.context,t==="find"?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return v.each(this,e,t)},ready:function(e){return v.ready.promise().done(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(l.apply(this,arguments),"slice",l.call(arguments).join(","))},map:function(e){return this.pushStack(v.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:[].sort,splice:[].splice},v.fn.init.prototype=v.fn,v.extend=v.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!v.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((e=arguments[a])!=null)for(n in e){r=u[n],i=e[n];if(u===i)continue;l&&i&&(v.isPlainObject(i)||(s=v.isArray(i)))?(s?(s=!1,o=r&&v.isArray(r)?r:[]):o=r&&v.isPlainObject(r)?r:{},u[n]=v.extend(l,o,i)):i!==t&&(u[n]=i)}return u},v.extend({noConflict:function(t){return e.$===v&&(e.$=a),t&&e.jQuery===v&&(e.jQuery=u),v},isReady:!1,readyWait:1,holdReady:function(e){e?v.readyWait++:v.ready(!0)},ready:function(e){if(e===!0?--v.readyWait:v.isReady)return;if(!i.body)return setTimeout(v.ready,1);v.isReady=!0;if(e!==!0&&--v.readyWait>0)return;r.resolveWith(i,[v]),v.fn.trigger&&v(i).trigger("ready").off("ready")},isFunction:function(e){return v.type(e)==="function"},isArray:Array.isArray||function(e){return v.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):O[h.call(e)]||"object"},isPlainObject:function(e){if(!e||v.type(e)!=="object"||e.nodeType||v.isWindow(e))return!1;try{if(e.constructor&&!p.call(e,"constructor")&&!p.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||p.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){var r;return!e||typeof e!="string"?null:(typeof t=="boolean"&&(n=t,t=0),t=t||i,(r=E.exec(e))?[t.createElement(r[1])]:(r=v.buildFragment([e],t,n?null:[]),v.merge([],(r.cacheable?v.clone(r.fragment):r.fragment).childNodes)))},parseJSON:function(t){if(!t||typeof t!="string")return null;t=v.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(S.test(t.replace(T,"@").replace(N,"]").replace(x,"")))return(new Function("return "+t))();v.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&v.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&g.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(C,"ms-").replace(k,L)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,n,r){var i,s=0,o=e.length,u=o===t||v.isFunction(e);if(r){if(u){for(i in e)if(n.apply(e[i],r)===!1)break}else for(;s<o;)if(n.apply(e[s++],r)===!1)break}else if(u){for(i in e)if(n.call(e[i],i,e[i])===!1)break}else for(;s<o;)if(n.call(e[s],s,e[s++])===!1)break;return e},trim:d&&!d.call("\ufeff\u00a0")?function(e){return e==null?"":d.call(e)}:function(e){return e==null?"":(e+"").replace(b,"")},makeArray:function(e,t){var n,r=t||[];return e!=null&&(n=v.type(e),e.length==null||n==="string"||n==="function"||n==="regexp"||v.isWindow(e)?f.call(r,e):v.merge(r,e)),r},inArray:function(e,t,n){var r;if(t){if(c)return c.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,n,r){var i,s,o=[],u=0,a=e.length,f=e instanceof v||a!==t&&typeof a=="number"&&(a>0&&e[0]&&e[a-1]||a===0||v.isArray(e));if(f)for(;u<a;u++)i=n(e[u],u,r),i!=null&&(o[o.length]=i);else for(s in e)i=n(e[s],s,r),i!=null&&(o[o.length]=i);return o.concat.apply([],o)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(r=e[n],n=e,e=r),v.isFunction(e)?(i=l.call(arguments,2),s=function(){return e.apply(n,i.concat(l.call(arguments)))},s.guid=e.guid=e.guid||v.guid++,s):t},access:function(e,n,r,i,s,o,u){var a,f=r==null,l=0,c=e.length;if(r&&typeof r=="object"){for(l in r)v.access(e,n,l,r[l],1,o,i);s=1}else if(i!==t){a=u===t&&v.isFunction(i),f&&(a?(a=n,n=function(e,t,n){return a.call(v(e),n)}):(n.call(e,i),n=null));if(n)for(;l<c;l++)n(e[l],r,a?i.call(e[l],l,n(e[l],r)):i,u);s=1}return s?e:f?n.call(e):c?n(e[0],r):o},now:function(){return(new Date).getTime()}}),v.ready.promise=function(t){if(!r){r=v.Deferred();if(i.readyState==="complete")setTimeout(v.ready,1);else if(i.addEventListener)i.addEventListener("DOMContentLoaded",A,!1),e.addEventListener("load",v.ready,!1);else{i.attachEvent("onreadystatechange",A),e.attachEvent("onload",v.ready);var n=!1;try{n=e.frameElement==null&&i.documentElement}catch(s){}n&&n.doScroll&&function o(){if(!v.isReady){try{n.doScroll("left")}catch(e){return setTimeout(o,50)}v.ready()}}()}}return r.promise(t)},v.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){O["[object "+t+"]"]=t.toLowerCase()}),n=v(i);var M={};v.Callbacks=function(e){e=typeof e=="string"?M[e]||_(e):v.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){n=e.memory&&t,r=!0,u=s||0,s=0,o=a.length,i=!0;for(;a&&u<o;u++)if(a[u].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}i=!1,a&&(f?f.length&&l(f.shift()):n?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function r(t){v.each(t,function(t,n){var i=v.type(n);i==="function"?(!e.unique||!c.has(n))&&a.push(n):n&&n.length&&i!=="string"&&r(n)})})(arguments),i?o=a.length:n&&(s=t,l(n))}return this},remove:function(){return a&&v.each(arguments,function(e,t){var n;while((n=v.inArray(t,a,n))>-1)a.splice(n,1),i&&(n<=o&&o--,n<=u&&u--)}),this},has:function(e){return v.inArray(e,a)>-1},empty:function(){return a=[],this},disable:function(){return a=f=n=t,this},disabled:function(){return!a},lock:function(){return f=t,n||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],a&&(!r||f)&&(i?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},v.extend({Deferred:function(e){var t=[["resolve","done",v.Callbacks("once memory"),"resolved"],["reject","fail",v.Callbacks("once memory"),"rejected"],["notify","progress",v.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return v.Deferred(function(n){v.each(t,function(t,r){var s=r[0],o=e[t];i[r[1]](v.isFunction(o)?function(){var e=o.apply(this,arguments);e&&v.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n:this,[e])}:n[s])}),e=null}).promise()},promise:function(e){return e!=null?v.extend(e,r):r}},i={};return r.pipe=r.then,v.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=o.fire,i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=l.call(arguments),r=n.length,i=r!==1||e&&v.isFunction(e.promise)?r:0,s=i===1?e:v.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?l.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&v.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),v.support=function(){var t,n,r,s,o,u,a,f,l,c,h,p=i.createElement("div");p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*"),r=p.getElementsByTagName("a")[0];if(!n||!r||!n.length)return{};s=i.createElement("select"),o=s.appendChild(i.createElement("option")),u=p.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:u.value==="on",optSelected:o.selected,getSetAttribute:p.className!=="t",enctype:!!i.createElement("form").enctype,html5Clone:i.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:i.compatMode==="CSS1Compat",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},u.checked=!0,t.noCloneChecked=u.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!o.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",h=function(){t.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick"),p.detachEvent("onclick",h)),u=i.createElement("input"),u.value="t",u.setAttribute("type","radio"),t.radioValue=u.value==="t",u.setAttribute("checked","checked"),u.setAttribute("name","t"),p.appendChild(u),a=i.createDocumentFragment(),a.appendChild(p.lastChild),t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=u.checked,a.removeChild(u),a.appendChild(p);if(p.attachEvent)for(l in{submit:!0,change:!0,focusin:!0})f="on"+l,c=f in p,c||(p.setAttribute(f,"return;"),c=typeof p[f]=="function"),t[l+"Bubbles"]=c;return v(function(){var n,r,s,o,u="padding:0;margin:0;border:0;display:block;overflow:hidden;",a=i.getElementsByTagName("body")[0];if(!a)return;n=i.createElement("div"),n.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",a.insertBefore(n,a.firstChild),r=i.createElement("div"),n.appendChild(r),r.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=r.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",c=s[0].offsetHeight===0,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=c&&s[0].offsetHeight===0,r.innerHTML="",r.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=r.offsetWidth===4,t.doesNotIncludeMarginInBodyOffset=a.offsetTop!==1,e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(r,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(r,null)||{width:"4px"}).width==="4px",o=i.createElement("div"),o.style.cssText=r.style.cssText=u,o.style.marginRight=o.style.width="0",r.style.width="1px",r.appendChild(o),t.reliableMarginRight=!parseFloat((e.getComputedStyle(o,null)||{}).marginRight)),typeof r.style.zoom!="undefined"&&(r.innerHTML="",r.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=r.offsetWidth===3,r.style.display="block",r.style.overflow="visible",r.innerHTML="<div></div>",r.firstChild.style.width="5px",t.shrinkWrapBlocks=r.offsetWidth!==3,n.style.zoom=1),a.removeChild(n),n=r=s=o=null}),a.removeChild(p),n=r=s=o=u=a=p=null,t}();var D=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,P=/([A-Z])/g;v.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(v.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?v.cache[e[v.expando]]:e[v.expando],!!e&&!B(e)},data:function(e,n,r,i){if(!v.acceptData(e))return;var s,o,u=v.expando,a=typeof n=="string",f=e.nodeType,l=f?v.cache:e,c=f?e[u]:e[u]&&u;if((!c||!l[c]||!i&&!l[c].data)&&a&&r===t)return;c||(f?e[u]=c=v.deletedIds.pop()||v.guid++:c=u),l[c]||(l[c]={},f||(l[c].toJSON=v.noop));if(typeof n=="object"||typeof n=="function")i?l[c]=v.extend(l[c],n):l[c].data=v.extend(l[c].data,n);return s=l[c],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[v.camelCase(n)]=r),a?(o=s[n],o==null&&(o=s[v.camelCase(n)])):o=s,o},removeData:function(e,t,n){if(!v.acceptData(e))return;var r,i,s,o=e.nodeType,u=o?v.cache:e,a=o?e[v.expando]:v.expando;if(!u[a])return;if(t){r=n?u[a]:u[a].data;if(r){v.isArray(t)||(t in r?t=[t]:(t=v.camelCase(t),t in r?t=[t]:t=t.split(" ")));for(i=0,s=t.length;i<s;i++)delete r[t[i]];if(!(n?B:v.isEmptyObject)(r))return}}if(!n){delete u[a].data;if(!B(u[a]))return}o?v.cleanData([e],!0):v.support.deleteExpando||u!=u.window?delete u[a]:u[a]=null},_data:function(e,t,n){return v.data(e,t,n,!0)},acceptData:function(e){var t=e.nodeName&&v.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),v.fn.extend({data:function(e,n){var r,i,s,o,u,a=this[0],f=0,l=null;if(e===t){if(this.length){l=v.data(a);if(a.nodeType===1&&!v._data(a,"parsedAttrs")){s=a.attributes;for(u=s.length;f<u;f++)o=s[f].name,o.indexOf("data-")||(o=v.camelCase(o.substring(5)),H(a,o,l[o]));v._data(a,"parsedAttrs",!0)}}return l}return typeof e=="object"?this.each(function(){v.data(this,e)}):(r=e.split(".",2),r[1]=r[1]?"."+r[1]:"",i=r[1]+"!",v.access(this,function(n){if(n===t)return l=this.triggerHandler("getData"+i,[r[0]]),l===t&&a&&(l=v.data(a,e),l=H(a,e,l)),l===t&&r[1]?this.data(r[0]):l;r[1]=n,this.each(function(){var t=v(this);t.triggerHandler("setData"+i,r),v.data(this,e,n),t.triggerHandler("changeData"+i,r)})},null,n,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){v.removeData(this,e)})}}),v.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=v._data(e,t),n&&(!r||v.isArray(n)?r=v._data(e,t,v.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=v.queue(e,t),r=n.length,i=n.shift(),s=v._queueHooks(e,t),o=function(){v.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return v._data(e,n)||v._data(e,n,{empty:v.Callbacks("once memory").add(function(){v.removeData(e,t+"queue",!0),v.removeData(e,n,!0)})})}}),v.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?v.queue(this[0],e):n===t?this:this.each(function(){var t=v.queue(this,e,n);v._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&v.dequeue(this,e)})},dequeue:function(e){return this.each(function(){v.dequeue(this,e)})},delay:function(e,t){return e=v.fx?v.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=v.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)r=v._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var j,F,I,q=/[\t\r\n]/g,R=/\r/g,U=/^(?:button|input)$/i,z=/^(?:button|input|object|select|textarea)$/i,W=/^a(?:rea|)$/i,X=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,V=v.support.getSetAttribute;v.fn.extend({attr:function(e,t){return v.access(this,v.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){v.removeAttr(this,e)})},prop:function(e,t){return v.access(this,v.prop,e,t,arguments.length>1)},removeProp:function(e){return e=v.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o,u;if(v.isFunction(e))return this.each(function(t){v(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(y);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{s=" "+i.className+" ";for(o=0,u=t.length;o<u;o++)s.indexOf(" "+t[o]+" ")<0&&(s+=t[o]+" ");i.className=v.trim(s)}}}return this},removeClass:function(e){var n,r,i,s,o,u,a;if(v.isFunction(e))return this.each(function(t){v(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(y);for(u=0,a=this.length;u<a;u++){i=this[u];if(i.nodeType===1&&i.className){r=(" "+i.className+" ").replace(q," ");for(s=0,o=n.length;s<o;s++)while(r.indexOf(" "+n[s]+" ")>=0)r=r.replace(" "+n[s]+" "," ");i.className=e?v.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return v.isFunction(e)?this.each(function(n){v(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,s=0,o=v(this),u=t,a=e.split(y);while(i=a[s++])u=r?u:!o.hasClass(i),o[u?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&v._data(this,"__className__",this.className),this.className=this.className||e===!1?"":v._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(q," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return n=v.valHooks[s.type]||v.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&(r=n.get(s,"value"))!==t?r:(r=s.value,typeof r=="string"?r.replace(R,""):r==null?"":r);return}return i=v.isFunction(e),this.each(function(r){var s,o=v(this);if(this.nodeType!==1)return;i?s=e.call(this,r,o.val()):s=e,s==null?s="":typeof s=="number"?s+="":v.isArray(s)&&(s=v.map(s,function(e){return e==null?"":e+""})),n=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()];if(!n||!("set"in n)||n.set(this,s,"value")===t)this.value=s})}}),v.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(v.support.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!v.nodeName(n.parentNode,"optgroup"))){t=v(n).val();if(s)return t;o.push(t)}}return o},set:function(e,t){var n=v.makeArray(t);return v(e).find("option").each(function(){this.selected=v.inArray(v(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{},attr:function(e,n,r,i){var s,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;if(i&&v.isFunction(v.fn[n]))return v(e)[n](r);if(typeof e.getAttribute=="undefined")return v.prop(e,n,r);u=a!==1||!v.isXMLDoc(e),u&&(n=n.toLowerCase(),o=v.attrHooks[n]||(X.test(n)?F:j));if(r!==t){if(r===null){v.removeAttr(e,n);return}return o&&"set"in o&&u&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+""),r)}return o&&"get"in o&&u&&(s=o.get(e,n))!==null?s:(s=e.getAttribute(n),s===null?t:s)},removeAttr:function(e,t){var n,r,i,s,o=0;if(t&&e.nodeType===1){r=t.split(y);for(;o<r.length;o++)i=r[o],i&&(n=v.propFix[i]||i,s=X.test(i),s||v.attr(e,i,""),e.removeAttribute(V?i:n),s&&n in e&&(e[n]=!1))}},attrHooks:{type:{set:function(e,t){if(U.test(e.nodeName)&&e.parentNode)v.error("type property can't be changed");else if(!v.support.radioValue&&t==="radio"&&v.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return j&&v.nodeName(e,"button")?j.get(e,t):t in e?e.value:null},set:function(e,t,n){if(j&&v.nodeName(e,"button"))return j.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!v.isXMLDoc(e),o&&(n=v.propFix[n]||n,s=v.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):z.test(e.nodeName)||W.test(e.nodeName)&&e.href?0:t}}}}),F={get:function(e,n){var r,i=v.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?v.removeAttr(e,n):(r=v.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},V||(I={name:!0,id:!0,coords:!0},j=v.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(I[n]?r.value!=="":r.specified)?r.value:t},set:function(e,t,n){var r=e.getAttributeNode(n);return r||(r=i.createAttribute(n),e.setAttributeNode(r)),r.value=t+""}},v.each(["width","height"],function(e,t){v.attrHooks[t]=v.extend(v.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),v.attrHooks.contenteditable={get:j.get,set:function(e,t,n){t===""&&(t="false"),j.set(e,t,n)}}),v.support.hrefNormalized||v.each(["href","src","width","height"],function(e,n){v.attrHooks[n]=v.extend(v.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),v.support.style||(v.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=t+""}}),v.support.optSelected||(v.propHooks.selected=v.extend(v.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),v.support.enctype||(v.propFix.enctype="encoding"),v.support.checkOn||v.each(["radio","checkbox"],function(){v.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),v.each(["radio","checkbox"],function(){v.valHooks[this]=v.extend(v.valHooks[this],{set:function(e,t){if(v.isArray(t))return e.checked=v.inArray(v(e).val(),t)>=0}})});var $=/^(?:textarea|input|select)$/i,J=/^([^\.]*|)(?:\.(.+)|)$/,K=/(?:^|\s)hover(\.\S+|)\b/,Q=/^key/,G=/^(?:mouse|contextmenu)|click/,Y=/^(?:focusinfocus|focusoutblur)$/,Z=function(e){return v.event.special.hover?e:e.replace(K,"mouseenter$1 mouseleave$1")};v.event={add:function(e,n,r,i,s){var o,u,a,f,l,c,h,p,d,m,g;if(e.nodeType===3||e.nodeType===8||!n||!r||!(o=v._data(e)))return;r.handler&&(d=r,r=d.handler,s=d.selector),r.guid||(r.guid=v.guid++),a=o.events,a||(o.events=a={}),u=o.handle,u||(o.handle=u=function(e){return typeof v=="undefined"||!!e&&v.event.triggered===e.type?t:v.event.dispatch.apply(u.elem,arguments)},u.elem=e),n=v.trim(Z(n)).split(" ");for(f=0;f<n.length;f++){l=J.exec(n[f])||[],c=l[1],h=(l[2]||"").split(".").sort(),g=v.event.special[c]||{},c=(s?g.delegateType:g.bindType)||c,g=v.event.special[c]||{},p=v.extend({type:c,origType:l[1],data:i,handler:r,guid:r.guid,selector:s,needsContext:s&&v.expr.match.needsContext.test(s),namespace:h.join(".")},d),m=a[c];if(!m){m=a[c]=[],m.delegateCount=0;if(!g.setup||g.setup.call(e,i,h,u)===!1)e.addEventListener?e.addEventListener(c,u,!1):e.attachEvent&&e.attachEvent("on"+c,u)}g.add&&(g.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),s?m.splice(m.delegateCount++,0,p):m.push(p),v.event.global[c]=!0}e=null},global:{},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,m,g=v.hasData(e)&&v._data(e);if(!g||!(h=g.events))return;t=v.trim(Z(t||"")).split(" ");for(s=0;s<t.length;s++){o=J.exec(t[s])||[],u=a=o[1],f=o[2];if(!u){for(u in h)v.event.remove(e,u+t[s],n,r,!0);continue}p=v.event.special[u]||{},u=(r?p.delegateType:p.bindType)||u,d=h[u]||[],l=d.length,f=f?new RegExp("(^|\\.)"+f.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(c=0;c<d.length;c++)m=d[c],(i||a===m.origType)&&(!n||n.guid===m.guid)&&(!f||f.test(m.namespace))&&(!r||r===m.selector||r==="**"&&m.selector)&&(d.splice(c--,1),m.selector&&d.delegateCount--,p.remove&&p.remove.call(e,m));d.length===0&&l!==d.length&&((!p.teardown||p.teardown.call(e,f,g.handle)===!1)&&v.removeEvent(e,u,g.handle),delete h[u])}v.isEmptyObject(h)&&(delete g.handle,v.removeData(e,"events",!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,s,o){if(!s||s.nodeType!==3&&s.nodeType!==8){var u,a,f,l,c,h,p,d,m,g,y=n.type||n,b=[];if(Y.test(y+v.event.triggered))return;y.indexOf("!")>=0&&(y=y.slice(0,-1),a=!0),y.indexOf(".")>=0&&(b=y.split("."),y=b.shift(),b.sort());if((!s||v.event.customEvent[y])&&!v.event.global[y])return;n=typeof n=="object"?n[v.expando]?n:new v.Event(y,n):new v.Event(y),n.type=y,n.isTrigger=!0,n.exclusive=a,n.namespace=b.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h=y.indexOf(":")<0?"on"+y:"";if(!s){u=v.cache;for(f in u)u[f].events&&u[f].events[y]&&v.event.trigger(n,r,u[f].handle.elem,!0);return}n.result=t,n.target||(n.target=s),r=r!=null?v.makeArray(r):[],r.unshift(n),p=v.event.special[y]||{};if(p.trigger&&p.trigger.apply(s,r)===!1)return;m=[[s,p.bindType||y]];if(!o&&!p.noBubble&&!v.isWindow(s)){g=p.delegateType||y,l=Y.test(g+y)?s:s.parentNode;for(c=s;l;l=l.parentNode)m.push([l,g]),c=l;c===(s.ownerDocument||i)&&m.push([c.defaultView||c.parentWindow||e,g])}for(f=0;f<m.length&&!n.isPropagationStopped();f++)l=m[f][0],n.type=m[f][1],d=(v._data(l,"events")||{})[n.type]&&v._data(l,"handle"),d&&d.apply(l,r),d=h&&l[h],d&&v.acceptData(l)&&d.apply&&d.apply(l,r)===!1&&n.preventDefault();return n.type=y,!o&&!n.isDefaultPrevented()&&(!p._default||p._default.apply(s.ownerDocument,r)===!1)&&(y!=="click"||!v.nodeName(s,"a"))&&v.acceptData(s)&&h&&s[y]&&(y!=="focus"&&y!=="blur"||n.target.offsetWidth!==0)&&!v.isWindow(s)&&(c=s[h],c&&(s[h]=null),v.event.triggered=y,s[y](),v.event.triggered=t,c&&(s[h]=c)),n.result}return},dispatch:function(n){n=v.event.fix(n||e.event);var r,i,s,o,u,a,f,c,h,p,d=(v._data(this,"events")||{})[n.type]||[],m=d.delegateCount,g=l.call(arguments),y=!n.exclusive&&!n.namespace,b=v.event.special[n.type]||{},w=[];g[0]=n,n.delegateTarget=this;if(b.preDispatch&&b.preDispatch.call(this,n)===!1)return;if(m&&(!n.button||n.type!=="click"))for(s=n.target;s!=this;s=s.parentNode||this)if(s.disabled!==!0||n.type!=="click"){u={},f=[];for(r=0;r<m;r++)c=d[r],h=c.selector,u[h]===t&&(u[h]=c.needsContext?v(h,this).index(s)>=0:v.find(h,this,null,[s]).length),u[h]&&f.push(c);f.length&&w.push({elem:s,matches:f})}d.length>m&&w.push({elem:this,matches:d.slice(m)});for(r=0;r<w.length&&!n.isPropagationStopped();r++){a=w[r],n.currentTarget=a.elem;for(i=0;i<a.matches.length&&!n.isImmediatePropagationStopped();i++){c=a.matches[i];if(y||!n.namespace&&!c.namespace||n.namespace_re&&n.namespace_re.test(c.namespace))n.data=c.data,n.handleObj=c,o=((v.event.special[c.origType]||{}).handle||c.handler).apply(a.elem,g),o!==t&&(n.result=o,o===!1&&(n.preventDefault(),n.stopPropagation()))}}return b.postDispatch&&b.postDispatch.call(this,n),n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,s,o,u=n.button,a=n.fromElement;return e.pageX==null&&n.clientX!=null&&(r=e.target.ownerDocument||i,s=r.documentElement,o=r.body,e.pageX=n.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=n.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},fix:function(e){if(e[v.expando])return e;var t,n,r=e,s=v.event.fixHooks[e.type]||{},o=s.props?this.props.concat(s.props):this.props;e=v.Event(r);for(t=o.length;t;)n=o[--t],e[n]=r[n];return e.target||(e.target=r.srcElement||i),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,r):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){v.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=v.extend(new v.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?v.event.trigger(i,null,t):v.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},v.event.handle=v.event.dispatch,v.removeEvent=i.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]=="undefined"&&(e[r]=null),e.detachEvent(r,n))},v.Event=function(e,t){if(!(this instanceof v.Event))return new v.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?tt:et):this.type=e,t&&v.extend(this,t),this.timeStamp=e&&e.timeStamp||v.now(),this[v.expando]=!0},v.Event.prototype={preventDefault:function(){this.isDefaultPrevented=tt;var e=this.originalEvent;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=tt;var e=this.originalEvent;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=tt,this.stopPropagation()},isDefaultPrevented:et,isPropagationStopped:et,isImmediatePropagationStopped:et},v.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){v.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj,o=s.selector;if(!i||i!==r&&!v.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),v.support.submitBubbles||(v.event.special.submit={setup:function(){if(v.nodeName(this,"form"))return!1;v.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=v.nodeName(n,"input")||v.nodeName(n,"button")?n.form:t;r&&!v._data(r,"_submit_attached")&&(v.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),v._data(r,"_submit_attached",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&v.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(v.nodeName(this,"form"))return!1;v.event.remove(this,"._submit")}}),v.support.changeBubbles||(v.event.special.change={setup:function(){if($.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")v.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),v.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),v.event.simulate("change",this,e,!0)});return!1}v.event.add(this,"beforeactivate._change",function(e){var t=e.target;$.test(t.nodeName)&&!v._data(t,"_change_attached")&&(v.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&v.event.simulate("change",this.parentNode,e,!0)}),v._data(t,"_change_attached",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return v.event.remove(this,"._change"),!$.test(this.nodeName)}}),v.support.focusinBubbles||v.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){v.event.simulate(t,e.target,v.event.fix(e),!0)};v.event.special[t]={setup:function(){n++===0&&i.addEventListener(e,r,!0)},teardown:function(){--n===0&&i.removeEventListener(e,r,!0)}}}),v.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(u in e)this.on(u,n,r,e[u],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=et;else if(!i)return this;return s===1&&(o=i,i=function(e){return v().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=v.guid++)),this.each(function(){v.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,v(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=et),this.each(function(){v.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return v(this.context).on(e,this.selector,t,n),this},die:function(e,t){return v(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){v.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return v.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||v.guid++,r=0,i=function(n){var i=(v._data(this,"lastToggle"+e.guid)||0)%r;return v._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),v.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){v.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},Q.test(t)&&(v.event.fixHooks[t]=v.event.keyHooks),G.test(t)&&(v.event.fixHooks[t]=v.event.mouseHooks)}),function(e,t){function nt(e,t,n,r){n=n||[],t=t||g;var i,s,a,f,l=t.nodeType;if(!e||typeof e!="string")return n;if(l!==1&&l!==9)return[];a=o(t);if(!a&&!r)if(i=R.exec(e))if(f=i[1]){if(l===9){s=t.getElementById(f);if(!s||!s.parentNode)return n;if(s.id===f)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(f))&&u(t,s)&&s.id===f)return n.push(s),n}else{if(i[2])return S.apply(n,x.call(t.getElementsByTagName(e),0)),n;if((f=i[3])&&Z&&t.getElementsByClassName)return S.apply(n,x.call(t.getElementsByClassName(f),0)),n}return vt(e.replace(j,"$1"),t,n,r,a)}function rt(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function it(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function st(e){return N(function(t){return t=+t,N(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ot(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}function ut(e,t){var n,r,s,o,u,a,f,l=L[d][e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=i.preFilter;while(u){if(!n||(r=F.exec(u)))r&&(u=u.slice(r[0].length)||u),a.push(s=[]);n=!1;if(r=I.exec(u))s.push(n=new m(r.shift())),u=u.slice(n.length),n.type=r[0].replace(j," ");for(o in i.filter)(r=J[o].exec(u))&&(!f[o]||(r=f[o](r)))&&(s.push(n=new m(r.shift())),u=u.slice(n.length),n.type=o,n.matches=r);if(!n)break}return t?u.length:u?nt.error(e):L(e,a).slice(0)}function at(e,t,r){var i=t.dir,s=r&&t.dir==="parentNode",o=w++;return t.first?function(t,n,r){while(t=t[i])if(s||t.nodeType===1)return e(t,n,r)}:function(t,r,u){if(!u){var a,f=b+" "+o+" ",l=f+n;while(t=t[i])if(s||t.nodeType===1){if((a=t[d])===l)return t.sizset;if(typeof a=="string"&&a.indexOf(f)===0){if(t.sizset)return t}else{t[d]=l;if(e(t,r,u))return t.sizset=!0,t;t.sizset=!1}}}else while(t=t[i])if(s||t.nodeType===1)if(e(t,r,u))return t}}function ft(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function lt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function ct(e,t,n,r,i,s){return r&&!r[d]&&(r=ct(r)),i&&!i[d]&&(i=ct(i,s)),N(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||dt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?lt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=lt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?T.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=lt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):S.apply(o,g)})}function ht(e){var t,n,r,s=e.length,o=i.relative[e[0].type],u=o||i.relative[" "],a=o?1:0,f=at(function(e){return e===t},u,!0),l=at(function(e){return T.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==c)||((t=n).nodeType?f(e,n,r):l(e,n,r))}];for(;a<s;a++)if(n=i.relative[e[a].type])h=[at(ft(h),n)];else{n=i.filter[e[a].type].apply(null,e[a].matches);if(n[d]){r=++a;for(;r<s;r++)if(i.relative[e[r].type])break;return ct(a>1&&ft(h),a>1&&e.slice(0,a-1).join("").replace(j,"$1"),n,a<r&&ht(e.slice(a,r)),r<s&&ht(e=e.slice(r)),r<s&&e.join(""))}h.push(n)}return ft(h)}function pt(e,t){var r=t.length>0,s=e.length>0,o=function(u,a,f,l,h){var p,d,v,m=[],y=0,w="0",x=u&&[],T=h!=null,N=c,C=u||s&&i.find.TAG("*",h&&a.parentNode||a),k=b+=N==null?1:Math.E;T&&(c=a!==g&&a,n=o.el);for(;(p=C[w])!=null;w++){if(s&&p){for(d=0;v=e[d];d++)if(v(p,a,f)){l.push(p);break}T&&(b=k,n=++o.el)}r&&((p=!v&&p)&&y--,u&&x.push(p))}y+=w;if(r&&w!==y){for(d=0;v=t[d];d++)v(x,m,a,f);if(u){if(y>0)while(w--)!x[w]&&!m[w]&&(m[w]=E.call(l));m=lt(m)}S.apply(l,m),T&&!u&&m.length>0&&y+t.length>1&&nt.uniqueSort(l)}return T&&(b=k,c=N),x};return o.el=0,r?N(o):o}function dt(e,t,n){var r=0,i=t.length;for(;r<i;r++)nt(e,t[r],n);return n}function vt(e,t,n,r,s){var o,u,f,l,c,h=ut(e),p=h.length;if(!r&&h.length===1){u=h[0]=h[0].slice(0);if(u.length>2&&(f=u[0]).type==="ID"&&t.nodeType===9&&!s&&i.relative[u[1].type]){t=i.find.ID(f.matches[0].replace($,""),t,s)[0];if(!t)return n;e=e.slice(u.shift().length)}for(o=J.POS.test(e)?-1:u.length-1;o>=0;o--){f=u[o];if(i.relative[l=f.type])break;if(c=i.find[l])if(r=c(f.matches[0].replace($,""),z.test(u[0].type)&&t.parentNode||t,s)){u.splice(o,1),e=r.length&&u.join("");if(!e)return S.apply(n,x.call(r,0)),n;break}}}return a(e,h)(r,t,s,n,z.test(e)),n}function mt(){}var n,r,i,s,o,u,a,f,l,c,h=!0,p="undefined",d=("sizcache"+Math.random()).replace(".",""),m=String,g=e.document,y=g.documentElement,b=0,w=0,E=[].pop,S=[].push,x=[].slice,T=[].indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},N=function(e,t){return e[d]=t==null||t,e},C=function(){var e={},t=[];return N(function(n,r){return t.push(n)>i.cacheLength&&delete e[t.shift()],e[n+" "]=r},e)},k=C(),L=C(),A=C(),O="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",_=M.replace("w","w#"),D="([*^$|!~]?=)",P="\\["+O+"*("+M+")"+O+"*(?:"+D+O+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+_+")|)|)"+O+"*\\]",H=":("+M+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+P+")|[^:]|\\\\.)*|.*))\\)|)",B=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+O+"*((?:-\\d)?\\d*)"+O+"*\\)|)(?=[^-]|$)",j=new RegExp("^"+O+"+|((?:^|[^\\\\])(?:\\\\.)*)"+O+"+$","g"),F=new RegExp("^"+O+"*,"+O+"*"),I=new RegExp("^"+O+"*([\\x20\\t\\r\\n\\f>+~])"+O+"*"),q=new RegExp(H),R=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,U=/^:not/,z=/[\x20\t\r\n\f]*[+~]/,W=/:not\($/,X=/h\d/i,V=/input|select|textarea|button/i,$=/\\(?!\\)/g,J={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),NAME:new RegExp("^\\[name=['\"]?("+M+")['\"]?\\]"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+H),POS:new RegExp(B,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+O+"*(even|odd|(([+-]|)(\\d*)n|)"+O+"*(?:([+-]|)"+O+"*(\\d+)|))"+O+"*\\)|)","i"),needsContext:new RegExp("^"+O+"*[>+~]|"+B,"i")},K=function(e){var t=g.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}},Q=K(function(e){return e.appendChild(g.createComment("")),!e.getElementsByTagName("*").length}),G=K(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==p&&e.firstChild.getAttribute("href")==="#"}),Y=K(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),Z=K(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!e.getElementsByClassName||!e.getElementsByClassName("e").length?!1:(e.lastChild.className="e",e.getElementsByClassName("e").length===2)}),et=K(function(e){e.id=d+0,e.innerHTML="<a name='"+d+"'></a><div name='"+d+"'></div>",y.insertBefore(e,y.firstChild);var t=g.getElementsByName&&g.getElementsByName(d).length===2+g.getElementsByName(d+0).length;return r=!g.getElementById(d),y.removeChild(e),t});try{x.call(y.childNodes,0)[0].nodeType}catch(tt){x=function(e){var t,n=[];for(;t=this[e];e++)n.push(t);return n}}nt.matches=function(e,t){return nt(e,null,null,t)},nt.matchesSelector=function(e,t){return nt(t,null,null,[e]).length>0},s=nt.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(i===3||i===4)return e.nodeValue}else for(;t=e[r];r++)n+=s(t);return n},o=nt.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},u=nt.contains=y.contains?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!(r&&r.nodeType===1&&n.contains&&n.contains(r))}:y.compareDocumentPosition?function(e,t){return t&&!!(e.compareDocumentPosition(t)&16)}:function(e,t){while(t=t.parentNode)if(t===e)return!0;return!1},nt.attr=function(e,t){var n,r=o(e);return r||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):r||Y?e.getAttribute(t):(n=e.getAttributeNode(t),n?typeof e[t]=="boolean"?e[t]?t:null:n.specified?n.value:null:null)},i=nt.selectors={cacheLength:50,createPseudo:N,match:J,attrHandle:G?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:r?function(e,t,n){if(typeof t.getElementById!==p&&!n){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}}:function(e,n,r){if(typeof n.getElementById!==p&&!r){var i=n.getElementById(e);return i?i.id===e||typeof i.getAttributeNode!==p&&i.getAttributeNode("id").value===e?[i]:t:[]}},TAG:Q?function(e,t){if(typeof t.getElementsByTagName!==p)return t.getElementsByTagName(e)}:function(e,t){var n=t.getElementsByTagName(e);if(e==="*"){var r,i=[],s=0;for(;r=n[s];s++)r.nodeType===1&&i.push(r);return i}return n},NAME:et&&function(e,t){if(typeof t.getElementsByName!==p)return t.getElementsByName(name)},CLASS:Z&&function(e,t,n){if(typeof t.getElementsByClassName!==p&&!n)return t.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace($,""),e[3]=(e[4]||e[5]||"").replace($,""),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1]==="nth"?(e[2]||nt.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*(e[2]==="even"||e[2]==="odd")),e[4]=+(e[6]+e[7]||e[2]==="odd")):e[2]&&nt.error(e[0]),e},PSEUDO:function(e){var t,n;if(J.CHILD.test(e[0]))return null;if(e[3])e[2]=e[3];else if(t=e[4])q.test(t)&&(n=ut(t,!0))&&(n=t.indexOf(")",t.length-n)-t.length)&&(t=t.slice(0,n),e[0]=e[0].slice(0,n)),e[2]=t;return e.slice(0,3)}},filter:{ID:r?function(e){return e=e.replace($,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace($,""),function(t){var n=typeof t.getAttributeNode!==p&&t.getAttributeNode("id");return n&&n.value===e}},TAG:function(e){return e==="*"?function(){return!0}:(e=e.replace($,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=k[d][e+" "];return t||(t=new RegExp("(^|"+O+")"+e+"("+O+"|$)"))&&k(e,function(e){return t.test(e.className||typeof e.getAttribute!==p&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r,i){var s=nt.attr(r,e);return s==null?t==="!=":t?(s+="",t==="="?s===n:t==="!="?s!==n:t==="^="?n&&s.indexOf(n)===0:t==="*="?n&&s.indexOf(n)>-1:t==="$="?n&&s.substr(s.length-n.length)===n:t==="~="?(" "+s+" ").indexOf(n)>-1:t==="|="?s===n||s.substr(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r){return e==="nth"?function(e){var t,i,s=e.parentNode;if(n===1&&r===0)return!0;if(s){i=0;for(t=s.firstChild;t;t=t.nextSibling)if(t.nodeType===1){i++;if(e===t)break}}return i-=r,i===n||i%n===0&&i/n>=0}:function(t){var n=t;switch(e){case"only":case"first":while(n=n.previousSibling)if(n.nodeType===1)return!1;if(e==="first")return!0;n=t;case"last":while(n=n.nextSibling)if(n.nodeType===1)return!1;return!0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||nt.error("unsupported pseudo: "+e);return r[d]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?N(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=T.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:N(function(e){var t=[],n=[],r=a(e.replace(j,"$1"));return r[d]?N(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:N(function(e){return function(t){return nt(e,t).length>0}}),contains:N(function(e){return function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!i.pseudos.empty(e)},empty:function(e){var t;e=e.firstChild;while(e){if(e.nodeName>"@"||(t=e.nodeType)===3||t===4)return!1;e=e.nextSibling}return!0},header:function(e){return X.test(e.nodeName)},text:function(e){var t,n;return e.nodeName.toLowerCase()==="input"&&(t=e.type)==="text"&&((n=e.getAttribute("type"))==null||n.toLowerCase()===t)},radio:rt("radio"),checkbox:rt("checkbox"),file:rt("file"),password:rt("password"),image:rt("image"),submit:it("submit"),reset:it("reset"),button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},input:function(e){return V.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},active:function(e){return e===e.ownerDocument.activeElement},first:st(function(){return[0]}),last:st(function(e,t){return[t-1]}),eq:st(function(e,t,n){return[n<0?n+t:n]}),even:st(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:st(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:st(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:st(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},f=y.compareDocumentPosition?function(e,t){return e===t?(l=!0,0):(!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition:e.compareDocumentPosition(t)&4)?-1:1}:function(e,t){if(e===t)return l=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],s=[],o=e.parentNode,u=t.parentNode,a=o;if(o===u)return ot(e,t);if(!o)return-1;if(!u)return 1;while(a)i.unshift(a),a=a.parentNode;a=u;while(a)s.unshift(a),a=a.parentNode;n=i.length,r=s.length;for(var f=0;f<n&&f<r;f++)if(i[f]!==s[f])return ot(i[f],s[f]);return f===n?ot(e,s[f],-1):ot(i[f],t,1)},[0,0].sort(f),h=!l,nt.uniqueSort=function(e){var t,n=[],r=1,i=0;l=h,e.sort(f);if(l){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e},nt.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},a=nt.compile=function(e,t){var n,r=[],i=[],s=A[d][e+" "];if(!s){t||(t=ut(e)),n=t.length;while(n--)s=ht(t[n]),s[d]?r.push(s):i.push(s);s=A(e,pt(i,r))}return s},g.querySelectorAll&&function(){var e,t=vt,n=/'|\\/g,r=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,i=[":focus"],s=[":active"],u=y.matchesSelector||y.mozMatchesSelector||y.webkitMatchesSelector||y.oMatchesSelector||y.msMatchesSelector;K(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||i.push("\\["+O+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||i.push(":checked")}),K(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&i.push("[*^$]="+O+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||i.push(":enabled",":disabled")}),i=new RegExp(i.join("|")),vt=function(e,r,s,o,u){if(!o&&!u&&!i.test(e)){var a,f,l=!0,c=d,h=r,p=r.nodeType===9&&e;if(r.nodeType===1&&r.nodeName.toLowerCase()!=="object"){a=ut(e),(l=r.getAttribute("id"))?c=l.replace(n,"\\$&"):r.setAttribute("id",c),c="[id='"+c+"'] ",f=a.length;while(f--)a[f]=c+a[f].join("");h=z.test(e)&&r.parentNode||r,p=a.join(",")}if(p)try{return S.apply(s,x.call(h.querySelectorAll(p),0)),s}catch(v){}finally{l||r.removeAttribute("id")}}return t(e,r,s,o,u)},u&&(K(function(t){e=u.call(t,"div");try{u.call(t,"[test!='']:sizzle"),s.push("!=",H)}catch(n){}}),s=new RegExp(s.join("|")),nt.matchesSelector=function(t,n){n=n.replace(r,"='$1']");if(!o(t)&&!s.test(n)&&!i.test(n))try{var a=u.call(t,n);if(a||e||t.document&&t.document.nodeType!==11)return a}catch(f){}return nt(n,null,null,[t]).length>0})}(),i.pseudos.nth=i.pseudos.eq,i.filters=mt.prototype=i.pseudos,i.setFilters=new mt,nt.attr=v.attr,v.find=nt,v.expr=nt.selectors,v.expr[":"]=v.expr.pseudos,v.unique=nt.uniqueSort,v.text=nt.getText,v.isXMLDoc=nt.isXML,v.contains=nt.contains}(e);var nt=/Until$/,rt=/^(?:parents|prev(?:Until|All))/,it=/^.[^:#\[\.,]*$/,st=v.expr.match.needsContext,ot={children:!0,contents:!0,next:!0,prev:!0};v.fn.extend({find:function(e){var t,n,r,i,s,o,u=this;if(typeof e!="string")return v(e).filter(function(){for(t=0,n=u.length;t<n;t++)if(v.contains(u[t],this))return!0});o=this.pushStack("","find",e);for(t=0,n=this.length;t<n;t++){r=o.length,v.find(e,this[t],o);if(t>0)for(i=r;i<o.length;i++)for(s=0;s<r;s++)if(o[s]===o[i]){o.splice(i--,1);break}}return o},has:function(e){var t,n=v(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(v.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e,!1),"not",e)},filter:function(e){return this.pushStack(ft(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?st.test(e)?v(e,this.context).index(this[0])>=0:v.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=st.test(e)||typeof e!="string"?v(e,t||this.context):0;for(;r<i;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&n.nodeType!==11){if(o?o.index(n)>-1:v.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return s=s.length>1?v.unique(s):s,this.pushStack(s,"closest",e)},index:function(e){return e?typeof e=="string"?v.inArray(this[0],v(e)):v.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?v(e,t):v.makeArray(e&&e.nodeType?[e]:e),r=v.merge(this.get(),n);return this.pushStack(ut(n[0])||ut(r[0])?r:v.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),v.fn.andSelf=v.fn.addBack,v.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return v.dir(e,"parentNode")},parentsUntil:function(e,t,n){return v.dir(e,"parentNode",n)},next:function(e){return at(e,"nextSibling")},prev:function(e){return at(e,"previousSibling")},nextAll:function(e){return v.dir(e,"nextSibling")},prevAll:function(e){return v.dir(e,"previousSibling")},nextUntil:function(e,t,n){return v.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return v.dir(e,"previousSibling",n)},siblings:function(e){return v.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return v.sibling(e.firstChild)},contents:function(e){return v.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:v.merge([],e.childNodes)}},function(e,t){v.fn[e]=function(n,r){var i=v.map(this,t,n);return nt.test(e)||(r=n),r&&typeof r=="string"&&(i=v.filter(r,i)),i=this.length>1&&!ot[e]?v.unique(i):i,this.length>1&&rt.test(e)&&(i=i.reverse()),this.pushStack(i,e,l.call(arguments).join(","))}}),v.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?v.find.matchesSelector(t[0],e)?[t[0]]:[]:v.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!v(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var ct="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ht=/ jQuery\d+="(?:null|\d+)"/g,pt=/^\s+/,dt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,vt=/<([\w:]+)/,mt=/<tbody/i,gt=/<|&#?\w+;/,yt=/<(?:script|style|link)/i,bt=/<(?:script|object|embed|option|style)/i,wt=new RegExp("<(?:"+ct+")[\\s/>]","i"),Et=/^(?:checkbox|radio)$/,St=/checked\s*(?:[^=]|=\s*.checked.)/i,xt=/\/(java|ecma)script/i,Tt=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Nt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Ct=lt(i),kt=Ct.appendChild(i.createElement("div"));Nt.optgroup=Nt.option,Nt.tbody=Nt.tfoot=Nt.colgroup=Nt.caption=Nt.thead,Nt.th=Nt.td,v.support.htmlSerialize||(Nt._default=[1,"X<div>","</div>"]),v.fn.extend({text:function(e){return v.access(this,function(e){return e===t?v.text(this):this.empty().append((this[0]&&this[0].ownerDocument||i).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(v.isFunction(e))return this.each(function(t){v(this).wrapAll(e.call(this,t))});if(this[0]){var t=v(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return v.isFunction(e)?this.each(function(t){v(this).wrapInner(e.call(this,t))}):this.each(function(){var t=v(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=v.isFunction(e);return this.each(function(n){v(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){v.nodeName(this,"body")||v(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!ut(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(e,this),"before",this.selector)}},after:function(){if(!ut(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(this,e),"after",this.selector)}},remove:function(e,t){var n,r=0;for(;(n=this[r])!=null;r++)if(!e||v.filter(e,[n]).length)!t&&n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),v.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n);return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&v.cleanData(e.getElementsByTagName("*"));while(e.firstChild)e.removeChild(e.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return v.clone(this,e,t)})},html:function(e){return v.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(ht,""):t;if(typeof e=="string"&&!yt.test(e)&&(v.support.htmlSerialize||!wt.test(e))&&(v.support.leadingWhitespace||!pt.test(e))&&!Nt[(vt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(dt,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return ut(this[0])?this.length?this.pushStack(v(v.isFunction(e)?e():e),"replaceWith",e):this:v.isFunction(e)?this.each(function(t){var n=v(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=v(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;v(this).remove(),t?v(t).before(e):v(n).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=[].concat.apply([],e);var i,s,o,u,a=0,f=e[0],l=[],c=this.length;if(!v.support.checkClone&&c>1&&typeof f=="string"&&St.test(f))return this.each(function(){v(this).domManip(e,n,r)});if(v.isFunction(f))return this.each(function(i){var s=v(this);e[0]=f.call(this,i,n?s.html():t),s.domManip(e,n,r)});if(this[0]){i=v.buildFragment(e,this,l),o=i.fragment,s=o.firstChild,o.childNodes.length===1&&(o=s);if(s){n=n&&v.nodeName(s,"tr");for(u=i.cacheable||c-1;a<c;a++)r.call(n&&v.nodeName(this[a],"table")?Lt(this[a],"tbody"):this[a],a===u?o:v.clone(o,!0,!0))}o=s=null,l.length&&v.each(l,function(e,t){t.src?v.ajax?v.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):v.error("no ajax"):v.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Tt,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),v.buildFragment=function(e,n,r){var s,o,u,a=e[0];return n=n||i,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,e.length===1&&typeof a=="string"&&a.length<512&&n===i&&a.charAt(0)==="<"&&!bt.test(a)&&(v.support.checkClone||!St.test(a))&&(v.support.html5Clone||!wt.test(a))&&(o=!0,s=v.fragments[a],u=s!==t),s||(s=n.createDocumentFragment(),v.clean(e,n,s,r),o&&(v.fragments[a]=u&&s)),{fragment:s,cacheable:o}},v.fragments={},v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){v.fn[e]=function(n){var r,i=0,s=[],o=v(n),u=o.length,a=this.length===1&&this[0].parentNode;if((a==null||a&&a.nodeType===11&&a.childNodes.length===1)&&u===1)return o[t](this[0]),this;for(;i<u;i++)r=(i>0?this.clone(!0):this).get(),v(o[i])[t](r),s=s.concat(r);return this.pushStack(s,e,o.selector)}}),v.extend({clone:function(e,t,n){var r,i,s,o;v.support.html5Clone||v.isXMLDoc(e)||!wt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(kt.innerHTML=e.outerHTML,kt.removeChild(o=kt.firstChild));if((!v.support.noCloneEvent||!v.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!v.isXMLDoc(e)){Ot(e,o),r=Mt(e),i=Mt(o);for(s=0;r[s];++s)i[s]&&Ot(r[s],i[s])}if(t){At(e,o);if(n){r=Mt(e),i=Mt(o);for(s=0;r[s];++s)At(r[s],i[s])}}return r=i=null,o},clean:function(e,t,n,r){var s,o,u,a,f,l,c,h,p,d,m,g,y=t===i&&Ct,b=[];if(!t||typeof t.createDocumentFragment=="undefined")t=i;for(s=0;(u=e[s])!=null;s++){typeof u=="number"&&(u+="");if(!u)continue;if(typeof u=="string")if(!gt.test(u))u=t.createTextNode(u);else{y=y||lt(t),c=t.createElement("div"),y.appendChild(c),u=u.replace(dt,"<$1></$2>"),a=(vt.exec(u)||["",""])[1].toLowerCase(),f=Nt[a]||Nt._default,l=f[0],c.innerHTML=f[1]+u+f[2];while(l--)c=c.lastChild;if(!v.support.tbody){h=mt.test(u),p=a==="table"&&!h?c.firstChild&&c.firstChild.childNodes:f[1]==="<table>"&&!h?c.childNodes:[];for(o=p.length-1;o>=0;--o)v.nodeName(p[o],"tbody")&&!p[o].childNodes.length&&p[o].parentNode.removeChild(p[o])}!v.support.leadingWhitespace&&pt.test(u)&&c.insertBefore(t.createTextNode(pt.exec(u)[0]),c.firstChild),u=c.childNodes,c.parentNode.removeChild(c)}u.nodeType?b.push(u):v.merge(b,u)}c&&(u=c=y=null);if(!v.support.appendChecked)for(s=0;(u=b[s])!=null;s++)v.nodeName(u,"input")?_t(u):typeof u.getElementsByTagName!="undefined"&&v.grep(u.getElementsByTagName("input"),_t);if(n){m=function(e){if(!e.type||xt.test(e.type))return r?r.push(e.parentNode?e.parentNode.removeChild(e):e):n.appendChild(e)};for(s=0;(u=b[s])!=null;s++)if(!v.nodeName(u,"script")||!m(u))n.appendChild(u),typeof u.getElementsByTagName!="undefined"&&(g=v.grep(v.merge([],u.getElementsByTagName("script")),m),b.splice.apply(b,[s+1,0].concat(g)),s+=g.length)}return b},cleanData:function(e,t){var n,r,i,s,o=0,u=v.expando,a=v.cache,f=v.support.deleteExpando,l=v.event.special;for(;(i=e[o])!=null;o++)if(t||v.acceptData(i)){r=i[u],n=r&&a[r];if(n){if(n.events)for(s in n.events)l[s]?v.event.remove(i,s):v.removeEvent(i,s,n.handle);a[r]&&(delete a[r],f?delete i[u]:i.removeAttribute?i.removeAttribute(u):i[u]=null,v.deletedIds.push(r))}}}}),function(){var e,t;v.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=v.uaMatch(o.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),v.browser=t,v.sub=function(){function e(t,n){return new e.fn.init(t,n)}v.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(r,i){return i&&i instanceof v&&!(i instanceof e)&&(i=e(i)),v.fn.init.call(this,r,i,t)},e.fn.init.prototype=e.fn;var t=e(i);return e}}();var Dt,Pt,Ht,Bt=/alpha\([^)]*\)/i,jt=/opacity=([^)]*)/,Ft=/^(top|right|bottom|left)$/,It=/^(none|table(?!-c[ea]).+)/,qt=/^margin/,Rt=new RegExp("^("+m+")(.*)$","i"),Ut=new RegExp("^("+m+")(?!px)[a-z%]+$","i"),zt=new RegExp("^([-+])=("+m+")","i"),Wt={BODY:"block"},Xt={position:"absolute",visibility:"hidden",display:"block"},Vt={letterSpacing:0,fontWeight:400},$t=["Top","Right","Bottom","Left"],Jt=["Webkit","O","Moz","ms"],Kt=v.fn.toggle;v.fn.extend({css:function(e,n){return v.access(this,function(e,n,r){return r!==t?v.style(e,n,r):v.css(e,n)},e,n,arguments.length>1)},show:function(){return Yt(this,!0)},hide:function(){return Yt(this)},toggle:function(e,t){var n=typeof e=="boolean";return v.isFunction(e)&&v.isFunction(t)?Kt.apply(this,arguments):this.each(function(){(n?e:Gt(this))?v(this).show():v(this).hide()})}}),v.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Dt(e,"opacity");return n===""?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":v.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=v.camelCase(n),f=e.style;n=v.cssProps[a]||(v.cssProps[a]=Qt(f,a)),u=v.cssHooks[n]||v.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=zt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(v.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!v.cssNumber[a]&&(r+="px");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=v.camelCase(n);return n=v.cssProps[a]||(v.cssProps[a]=Qt(e.style,a)),u=v.cssHooks[n]||v.cssHooks[a],u&&"get"in u&&(s=u.get(e,!0,i)),s===t&&(s=Dt(e,n)),s==="normal"&&n in Vt&&(s=Vt[n]),r||i!==t?(o=parseFloat(s),r||v.isNumeric(o)?o||0:s):s},swap:function(e,t,n){var r,i,s={};for(i in t)s[i]=e.style[i],e.style[i]=t[i];r=n.call(e);for(i in t)e.style[i]=s[i];return r}}),e.getComputedStyle?Dt=function(t,n){var r,i,s,o,u=e.getComputedStyle(t,null),a=t.style;return u&&(r=u.getPropertyValue(n)||u[n],r===""&&!v.contains(t.ownerDocument,t)&&(r=v.style(t,n)),Ut.test(r)&&qt.test(n)&&(i=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=u.width,a.width=i,a.minWidth=s,a.maxWidth=o)),r}:i.documentElement.currentStyle&&(Dt=function(e,t){var n,r,i=e.currentStyle&&e.currentStyle[t],s=e.style;return i==null&&s&&s[t]&&(i=s[t]),Ut.test(i)&&!Ft.test(t)&&(n=s.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),s.left=t==="fontSize"?"1em":i,i=s.pixelLeft+"px",s.left=n,r&&(e.runtimeStyle.left=r)),i===""?"auto":i}),v.each(["height","width"],function(e,t){v.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&It.test(Dt(e,"display"))?v.swap(e,Xt,function(){return tn(e,t,r)}):tn(e,t,r)},set:function(e,n,r){return Zt(e,n,r?en(e,t,r,v.support.boxSizing&&v.css(e,"boxSizing")==="border-box"):0)}}}),v.support.opacity||(v.cssHooks.opacity={get:function(e,t){return jt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=v.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&v.trim(s.replace(Bt,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=Bt.test(s)?s.replace(Bt,i):s+" "+i}}),v(function(){v.support.reliableMarginRight||(v.cssHooks.marginRight={get:function(e,t){return v.swap(e,{display:"inline-block"},function(){if(t)return Dt(e,"marginRight")})}}),!v.support.pixelPosition&&v.fn.position&&v.each(["top","left"],function(e,t){v.cssHooks[t]={get:function(e,n){if(n){var r=Dt(e,t);return Ut.test(r)?v(e).position()[t]+"px":r}}}})}),v.expr&&v.expr.filters&&(v.expr.filters.hidden=function(e){return e.offsetWidth===0&&e.offsetHeight===0||!v.support.reliableHiddenOffsets&&(e.style&&e.style.display||Dt(e,"display"))==="none"},v.expr.filters.visible=function(e){return!v.expr.filters.hidden(e)}),v.each({margin:"",padding:"",border:"Width"},function(e,t){v.cssHooks[e+t]={expand:function(n){var r,i=typeof n=="string"?n.split(" "):[n],s={};for(r=0;r<4;r++)s[e+$t[r]+t]=i[r]||i[r-2]||i[0];return s}},qt.test(e)||(v.cssHooks[e+t].set=Zt)});var rn=/%20/g,sn=/\[\]$/,on=/\r?\n/g,un=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,an=/^(?:select|textarea)/i;v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?v.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||an.test(this.nodeName)||un.test(this.type))}).map(function(e,t){var n=v(this).val();return n==null?null:v.isArray(n)?v.map(n,function(e,n){return{name:t.name,value:e.replace(on,"\r\n")}}):{name:t.name,value:n.replace(on,"\r\n")}}).get()}}),v.param=function(e,n){var r,i=[],s=function(e,t){t=v.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=v.ajaxSettings&&v.ajaxSettings.traditional);if(v.isArray(e)||e.jquery&&!v.isPlainObject(e))v.each(e,function(){s(this.name,this.value)});else for(r in e)fn(r,e[r],n,s);return i.join("&").replace(rn,"+")};var ln,cn,hn=/#.*$/,pn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,dn=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,vn=/^(?:GET|HEAD)$/,mn=/^\/\//,gn=/\?/,yn=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bn=/([?&])_=[^&]*/,wn=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,En=v.fn.load,Sn={},xn={},Tn=["*/"]+["*"];try{cn=s.href}catch(Nn){cn=i.createElement("a"),cn.href="",cn=cn.href}ln=wn.exec(cn.toLowerCase())||[],v.fn.load=function(e,n,r){if(typeof e!="string"&&En)return En.apply(this,arguments);if(!this.length)return this;var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),v.isFunction(n)?(r=n,n=t):n&&typeof n=="object"&&(s="POST"),v.ajax({url:e,type:s,dataType:"html",data:n,complete:function(e,t){r&&u.each(r,o||[e.responseText,t,e])}}).done(function(e){o=arguments,u.html(i?v("<div>").append(e.replace(yn,"")).find(i):e)}),this},v.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){v.fn[t]=function(e){return this.on(t,e)}}),v.each(["get","post"],function(e,n){v[n]=function(e,r,i,s){return v.isFunction(r)&&(s=s||i,i=r,r=t),v.ajax({type:n,url:e,data:r,success:i,dataType:s})}}),v.extend({getScript:function(e,n){return v.get(e,t,n,"script")},getJSON:function(e,t,n){return v.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?Ln(e,v.ajaxSettings):(t=e,e=v.ajaxSettings),Ln(e,t),e},ajaxSettings:{url:cn,isLocal:dn.test(ln[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Tn},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":v.parseJSON,"text xml":v.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:Cn(Sn),ajaxTransport:Cn(xn),ajax:function(e,n){function T(e,n,s,a){var l,y,b,w,S,T=n;if(E===2)return;E=2,u&&clearTimeout(u),o=t,i=a||"",x.readyState=e>0?4:0,s&&(w=An(c,x,s));if(e>=200&&e<300||e===304)c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(v.lastModified[r]=S),S=x.getResponseHeader("Etag"),S&&(v.etag[r]=S)),e===304?(T="notmodified",l=!0):(l=On(c,w),T=l.state,y=l.data,b=l.error,l=!b);else{b=T;if(!T||e)T="error",e<0&&(e=0)}x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[y,T,x]):d.rejectWith(h,[x,T,b]),x.statusCode(g),g=t,f&&p.trigger("ajax"+(l?"Success":"Error"),[x,c,l?y:b]),m.fireWith(h,[x,T]),f&&(p.trigger("ajaxComplete",[x,c]),--v.active||v.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=v.ajaxSetup({},n),h=c.context||c,p=h!==c&&(h.nodeType||h instanceof v)?v(h):v.event,d=v.Deferred(),m=v.Callbacks("once memory"),g=c.statusCode||{},b={},w={},E=0,S="canceled",x={readyState:0,setRequestHeader:function(e,t){if(!E){var n=e.toLowerCase();e=w[n]=w[n]||e,b[e]=t}return this},getAllResponseHeaders:function(){return E===2?i:null},getResponseHeader:function(e){var n;if(E===2){if(!s){s={};while(n=pn.exec(i))s[n[1].toLowerCase()]=n[2]}n=s[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return E||(c.mimeType=e),this},abort:function(e){return e=e||S,o&&o.abort(e),T(0,e),this}};d.promise(x),x.success=x.done,x.error=x.fail,x.complete=m.add,x.statusCode=function(e){if(e){var t;if(E<2)for(t in e)g[t]=[g[t],e[t]];else t=e[x.status],x.always(t)}return this},c.url=((e||c.url)+"").replace(hn,"").replace(mn,ln[1]+"//"),c.dataTypes=v.trim(c.dataType||"*").toLowerCase().split(y),c.crossDomain==null&&(a=wn.exec(c.url.toLowerCase()),c.crossDomain=!(!a||a[1]===ln[1]&&a[2]===ln[2]&&(a[3]||(a[1]==="http:"?80:443))==(ln[3]||(ln[1]==="http:"?80:443)))),c.data&&c.processData&&typeof c.data!="string"&&(c.data=v.param(c.data,c.traditional)),kn(Sn,c,n,x);if(E===2)return x;f=c.global,c.type=c.type.toUpperCase(),c.hasContent=!vn.test(c.type),f&&v.active++===0&&v.event.trigger("ajaxStart");if(!c.hasContent){c.data&&(c.url+=(gn.test(c.url)?"&":"?")+c.data,delete c.data),r=c.url;if(c.cache===!1){var N=v.now(),C=c.url.replace(bn,"$1_="+N);c.url=C+(C===c.url?(gn.test(c.url)?"&":"?")+"_="+N:"")}}(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),c.ifModified&&(r=r||c.url,v.lastModified[r]&&x.setRequestHeader("If-Modified-Since",v.lastModified[r]),v.etag[r]&&x.setRequestHeader("If-None-Match",v.etag[r])),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+(c.dataTypes[0]!=="*"?", "+Tn+"; q=0.01":""):c.accepts["*"]);for(l in c.headers)x.setRequestHeader(l,c.headers[l]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&E!==2){S="abort";for(l in{success:1,error:1,complete:1})x[l](c[l]);o=kn(xn,c,n,x);if(!o)T(-1,"No Transport");else{x.readyState=1,f&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{E=1,o.send(b,T)}catch(k){if(!(E<2))throw k;T(-1,k)}}return x}return x.abort()},active:0,lastModified:{},etag:{}});var Mn=[],_n=/\?/,Dn=/(=)\?(?=&|$)|\?\?/,Pn=v.now();v.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Mn.pop()||v.expando+"_"+Pn++;return this[e]=!0,e}}),v.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.data,f=n.url,l=n.jsonp!==!1,c=l&&Dn.test(f),h=l&&!c&&typeof a=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Dn.test(a);if(n.dataTypes[0]==="jsonp"||c||h)return s=n.jsonpCallback=v.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,o=e[s],c?n.url=f.replace(Dn,"$1"+s):h?n.data=a.replace(Dn,"$1"+s):l&&(n.url+=(_n.test(f)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||v.error(s+" was not called"),u[0]},n.dataTypes[0]="json",e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,Mn.push(s)),u&&v.isFunction(o)&&o(u[0]),u=o=t}),"script"}),v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return v.globalEval(e),e}}}),v.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),v.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=i.head||i.getElementsByTagName("head")[0]||i.documentElement;return{send:function(s,o){n=i.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,i){if(i||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=t,i||o(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var Hn,Bn=e.ActiveXObject?function(){for(var e in Hn)Hn[e](0,1)}:!1,jn=0;v.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&Fn()||In()}:Fn,function(e){v.extend(v.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(v.ajaxSettings.xhr()),v.support.ajax&&v.ajaxTransport(function(n){if(!n.crossDomain||v.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c,h;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=v.noop,Bn&&delete Hn[o]);if(i)a.readyState!==4&&a.abort();else{u=a.status,l=a.getAllResponseHeaders(),c={},h=a.responseXML,h&&h.documentElement&&(c.xml=h);try{c.text=a.responseText}catch(p){}try{f=a.statusText}catch(p){f=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(d){i||s(-1,d)}c&&s(u,f,c,l)},n.async?a.readyState===4?setTimeout(r,0):(o=++jn,Bn&&(Hn||(Hn={},v(e).unload(Bn)),Hn[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(0,1)}}}});var qn,Rn,Un=/^(?:toggle|show|hide)$/,zn=new RegExp("^(?:([-+])=|)("+m+")([a-z%]*)$","i"),Wn=/queueHooks$/,Xn=[Gn],Vn={"*":[function(e,t){var n,r,i=this.createTween(e,t),s=zn.exec(t),o=i.cur(),u=+o||0,a=1,f=20;if(s){n=+s[2],r=s[3]||(v.cssNumber[e]?"":"px");if(r!=="px"&&u){u=v.css(i.elem,e,!0)||n||1;do a=a||".5",u/=a,v.style(i.elem,e,u+r);while(a!==(a=i.cur()/o)&&a!==1&&--f)}i.unit=r,i.start=u,i.end=s[1]?u+(s[1]+1)*n:n}return i}]};v.Animation=v.extend(Kn,{tweener:function(e,t){v.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],Vn[n]=Vn[n]||[],Vn[n].unshift(t)},prefilter:function(e,t){t?Xn.unshift(e):Xn.push(e)}}),v.Tween=Yn,Yn.prototype={constructor:Yn,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(v.cssNumber[n]?"":"px")},cur:function(){var e=Yn.propHooks[this.prop];return e&&e.get?e.get(this):Yn.propHooks._default.get(this)},run:function(e){var t,n=Yn.propHooks[this.prop];return this.options.duration?this.pos=t=v.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Yn.propHooks._default.set(this),this}},Yn.prototype.init.prototype=Yn.prototype,Yn.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=v.css(e.elem,e.prop,!1,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){v.fx.step[e.prop]?v.fx.step[e.prop](e):e.elem.style&&(e.elem.style[v.cssProps[e.prop]]!=null||v.cssHooks[e.prop])?v.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Yn.propHooks.scrollTop=Yn.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},v.each(["toggle","show","hide"],function(e,t){var n=v.fn[t];v.fn[t]=function(r,i,s){return r==null||typeof r=="boolean"||!e&&v.isFunction(r)&&v.isFunction(i)?n.apply(this,arguments):this.animate(Zn(t,!0),r,i,s)}}),v.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Gt).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=v.isEmptyObject(e),s=v.speed(t,n,r),o=function(){var t=Kn(this,v.extend({},e),s);i&&t.stop(!0)};return i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=v.timers,o=v._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Wn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&v.dequeue(this,e)})}}),v.each({slideDown:Zn("show"),slideUp:Zn("hide"),slideToggle:Zn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){v.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),v.speed=function(e,t,n){var r=e&&typeof e=="object"?v.extend({},e):{complete:n||!n&&t||v.isFunction(e)&&e,duration:e,easing:n&&t||t&&!v.isFunction(t)&&t};r.duration=v.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in v.fx.speeds?v.fx.speeds[r.duration]:v.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){v.isFunction(r.old)&&r.old.call(this),r.queue&&v.dequeue(this,r.queue)},r},v.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},v.timers=[],v.fx=Yn.prototype.init,v.fx.tick=function(){var e,n=v.timers,r=0;qn=v.now();for(;r<n.length;r++)e=n[r],!e()&&n[r]===e&&n.splice(r--,1);n.length||v.fx.stop(),qn=t},v.fx.timer=function(e){e()&&v.timers.push(e)&&!Rn&&(Rn=setInterval(v.fx.tick,v.fx.interval))},v.fx.interval=13,v.fx.stop=function(){clearInterval(Rn),Rn=null},v.fx.speeds={slow:600,fast:200,_default:400},v.fx.step={},v.expr&&v.expr.filters&&(v.expr.filters.animated=function(e){return v.grep(v.timers,function(t){return e===t.elem}).length});var er=/^(?:body|html)$/i;v.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){v.offset.setOffset(this,e,t)});var n,r,i,s,o,u,a,f={top:0,left:0},l=this[0],c=l&&l.ownerDocument;if(!c)return;return(r=c.body)===l?v.offset.bodyOffset(l):(n=c.documentElement,v.contains(n,l)?(typeof l.getBoundingClientRect!="undefined"&&(f=l.getBoundingClientRect()),i=tr(c),s=n.clientTop||r.clientTop||0,o=n.clientLeft||r.clientLeft||0,u=i.pageYOffset||n.scrollTop,a=i.pageXOffset||n.scrollLeft,{top:f.top+u-s,left:f.left+a-o}):f)},v.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return v.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(v.css(e,"marginTop"))||0,n+=parseFloat(v.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=v.css(e,"position");r==="static"&&(e.style.position="relative");var i=v(e),s=i.offset(),o=v.css(e,"top"),u=v.css(e,"left"),a=(r==="absolute"||r==="fixed")&&v.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),v.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},v.fn.extend({position:function(){if(!this[0])return;var e=this[0],t=this.offsetParent(),n=this.offset(),r=er.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(v.css(e,"marginTop"))||0,n.left-=parseFloat(v.css(e,"marginLeft"))||0,r.top+=parseFloat(v.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(v.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||i.body;while(e&&!er.test(e.nodeName)&&v.css(e,"position")==="static")e=e.offsetParent;return e||i.body})}}),v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);v.fn[e]=function(i){return v.access(this,function(e,i,s){var o=tr(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?v(o).scrollLeft():s,r?s:v(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),v.each({Height:"height",Width:"width"},function(e,n){v.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){v.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return v.access(this,function(n,r,i){var s;return v.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?v.css(n,r,i,u):v.style(n,r,i,u)},n,o?i:t,o,null)}})}),e.jQuery=e.$=v,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return v})})(window);
//]]>
</script>
<script id="jqueryArea" type="text/javascript">
//<![CDATA[
/*
jQuery.encoding.digests.sha1.js

SHA-1 digest and associated utility functions

Copyright (c) UnaMesa Association 2009

Dual licensed under the MIT and GPL licenses:
  http://www.opensource.org/licenses/mit-license.php
  http://www.gnu.org/licenses/gpl.html
*/

(function($) {

if(!$.encoding)
	$.encoding = {};
	$.extend($.encoding,{
		strToBe32s: function(str) {
			// Convert a string to an array of big-endian 32-bit words
			var be=[];
			var len=Math.floor(str.length/4);
			var i, j;
			for(i=0, j=0; i<len; i++, j+=4) {
				be[i]=((str.charCodeAt(j)&0xff) << 24)|((str.charCodeAt(j+1)&0xff) << 16)|((str.charCodeAt(j+2)&0xff) << 8)|(str.charCodeAt(j+3)&0xff);
			}
			while(j<str.length) {
				be[j>>2] |= (str.charCodeAt(j)&0xff)<<(24-(j*8)%32);
				j++;
			}
			return be;
		},
		be32sToStr: function(be) {
			// Convert an array of big-endian 32-bit words to a string
			var str='';
			for(var i=0;i<be.length*32;i+=8) {
				str += String.fromCharCode((be[i>>5]>>>(24-i%32)) & 0xff);
			}
			return str;
		},
		be32sToHex: function(be) {
			// Convert an array of big-endian 32-bit words to a hex string
			var hex='0123456789ABCDEF';
			var str='';
			for(var i=0;i<be.length*4;i++) {
				str += hex.charAt((be[i>>2]>>((3-i%4)*8+4))&0xF) + hex.charAt((be[i>>2]>>((3-i%4)*8))&0xF);
			}
			return str;
		}
	});
})(jQuery);


(function($) {

if(!$.encoding.digests)
	$.encoding.digests = {};
	$.extend($.encoding.digests,{
		hexSha1Str: function(str) {
			// Return, in hex, the SHA-1 hash of a string
			return $.encoding.be32sToHex($.encoding.digests.sha1Str(str));
		},
		sha1Str: function(str) {
			// Return the SHA-1 hash of a string
			return sha1($.encoding.strToBe32s(str),str.length);
		},
		sha1: function(x,blen) {
			// Calculate the SHA-1 hash of an array of blen bytes of big-endian 32-bit words
			return sha1($.encoding.strToBe32s(str),str.length);
		}
	});

	// Private functions.
	function sha1(x,blen) {
		// Calculate the SHA-1 hash of an array of blen bytes of big-endian 32-bit words
		function add32(a,b) {
			// Add 32-bit integers, wrapping at 32 bits
			// Uses 16-bit operations internally to work around bugs in some JavaScript interpreters.
			var lsw=(a&0xFFFF)+(b&0xFFFF);
			var msw=(a>>16)+(b>>16)+(lsw>>16);
			return (msw<<16)|(lsw&0xFFFF);
		}
		function AA(a,b,c,d,e) {
			// Cryptographic round helper function. Add five 32-bit integers, wrapping at 32 bits, second parameter is rotated left 5 bits before the addition
			// Uses 16-bit operations internally to work around bugs in some JavaScript interpreters.
			b=(b>>>27)|(b<<5);
			var lsw=(a&0xFFFF)+(b&0xFFFF)+(c&0xFFFF)+(d&0xFFFF)+(e&0xFFFF);
			var msw=(a>>16)+(b>>16)+(c>>16)+(d>>16)+(e>>16)+(lsw>>16);
			return (msw<<16)|(lsw&0xFFFF);
		}
		function RR(w,j) {
			// Cryptographic round helper function.
			var n=w[j-3]^w[j-8]^w[j-14]^w[j-16];
			return (n>>>31)|(n<<1);
		}

		var len=blen*8;
		x[len>>5] |= 0x80 << (24-len%32);
		x[((len+64>>9)<<4)+15]=len;
		var w=new Array(80);

		var k1=0x5A827999;
		var k2=0x6ED9EBA1;
		var k3=0x8F1BBCDC;
		var k4=0xCA62C1D6;

		var h0=0x67452301;
		var h1=0xEFCDAB89;
		var h2=0x98BADCFE;
		var h3=0x10325476;
		var h4=0xC3D2E1F0;

		for(var i=0;i<x.length;i+=16) {
			var j=0;
			var t;
			var a=h0;
			var b=h1;
			var c=h2;
			var d=h3;
			var e=h4;
			while(j<16) {
				w[j]=x[i+j];
				t=AA(e,a,d^(b&(c^d)),w[j],k1);
				e=d; d=c; c=(b>>>2)|(b<<30); b=a; a=t; j++;
			}
			while(j<20) {
				w[j]=RR(w,j);
				t=AA(e,a,d^(b&(c^d)),w[j],k1);
				e=d; d=c; c=(b>>>2)|(b<<30); b=a; a=t; j++;
			}
			while(j<40) {
				w[j]=RR(w,j);
				t=AA(e,a,b^c^d,w[j],k2);
				e=d; d=c; c=(b>>>2)|(b<<30); b=a; a=t; j++;
			}
			while(j<60) {
				w[j]=RR(w,j);
				t=AA(e,a,(b&c)|(d&(b|c)),w[j],k3);
				e=d; d=c; c=(b>>>2)|(b<<30); b=a; a=t; j++;
			}
			while(j<80) {
				w[j]=RR(w,j);
				t=AA(e,a,b^c^d,w[j],k4);
				e=d; d=c; c=(b>>>2)|(b<<30); b=a; a=t; j++;
			}
			h0=add32(h0,a);
			h1=add32(h1,b);
			h2=add32(h2,c);
			h3=add32(h3,d);
			h4=add32(h4,e);
		}
		return [h0,h1,h2,h3,h4];
	}
})(jQuery);
/*
jQuery.twStylesheet.js

jQuery plugin to dynamically insert CSS rules into a document

Usage:
  jQuery.twStylesheet applies style definitions
  jQuery.twStylesheet.remove neutralizes style definitions

Copyright (c) UnaMesa Association 2009

Triple licensed under the BSD, MIT and GPL licenses:
  http://www.opensource.org/licenses/bsd-license.php
  http://www.opensource.org/licenses/mit-license.php
  http://www.gnu.org/licenses/gpl.html
*/

(function($) {

var defaultId = "customStyleSheet"; // XXX: rename to dynamicStyleSheet?

// Add or replace a style sheet
// css argument is a string of CSS rule sets
// options.id is an optional name identifying the style sheet
// options.doc is an optional document reference
// N.B.: Uses DOM methods instead of jQuery to ensure cross-browser comaptibility.
$.twStylesheet = function(css, options) {
	options = options || {};
	var id = options.id || defaultId;
	var doc = options.doc || document;
	var el = doc.getElementById(id);
	if(doc.createStyleSheet) { // IE-specific handling
		if(el) {
			el.parentNode.removeChild(el);
		}
		doc.getElementsByTagName("head")[0].insertAdjacentHTML("beforeEnd",
			'&nbsp;<style id="' + id + '" type="text/css">' + css + '</style>'); // fails without &nbsp;
	} else { // modern browsers
		if(el) {
			el.replaceChild(doc.createTextNode(css), el.firstChild);
		} else {
			el = doc.createElement("style");
			el.type = "text/css";
			el.id = id;
			el.appendChild(doc.createTextNode(css));
			doc.getElementsByTagName("head")[0].appendChild(el);
		}
	}
};

// Remove existing style sheet
// options.id is an optional name identifying the style sheet
// options.doc is an optional document reference
$.twStylesheet.remove = function(options) {
	options = options || {};
	var id = options.id || defaultId;
	var doc = options.doc || document;
	var el = doc.getElementById(id);
	if(el) {
		el.parentNode.removeChild(el);
	}
};

})(jQuery);

//]]>
</script>
<script type="text/javascript">
//<![CDATA[
if(useJavaSaver)
	document.write("<applet style='position:absolute;left:-1px' name='TiddlySaver' code='TiddlySaver.class' archive='TiddlySaver.jar' width='1' height='1'></applet>");
//]]>
</script>
<!--POST-SCRIPT-START-->

<!--POST-SCRIPT-END-->
</body>
</html>
